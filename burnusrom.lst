Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2018.04.15 - 16:48:39]

burnusrom.asm
Errors: 0

       1   00:0000                      	output "BURNUS.rom"
       2   00:4000                      	
       3   00:4000                      	
       4   00:4000  (00:00C3)           CLS			equ	#00C3	;CLS											;borra la pantalla
       5   00:4000  (00:006C)           SCREEN0		equ	#006C	;INITXT											;pasa a modo screen 0
       6   00:4000  (00:006F)           SCREEN1		equ	#006F	;INIT32											;pasa a modo screen 1 
       7   00:4000  (00:00D2)           MODOTEXTO	equ	#00D2	;TOTEXT											:fuerza a modo texto
       8   00:4000  (00:00C6)           LOCATE		equ	#00C6	;POSIT											;coloca el cursor en una directrices h,l
       9   00:4000  (00:00A2)           CHPUT		equ	#00A2	;CHPUT											;escribe un caracter en pantalla
      10   00:4000  (00:00CC)           KEYOFF		equ	#00CC	;ERAFNK											;hace desaparecer las teclas de función
      11   00:4000  (00:0062)           COLOR		equ	#0062	;CHGCLR											;da color a la pantalla
      12   00:4000  (00:F3E9)           COLLETRA	equ	#F3E9	;FORCLR											;define el color de letras para CHGCLR
      13   00:4000  (00:F3EA)           COLFONDO	equ	#F3EA	;BAKCLR											;define el color de fondo para CHGCLR
      14   00:4000  (00:F3EB)           COLBORDE	equ	#F3EB	;BDRCLR											;defeine el color de bordes para CHGCLR
      15   00:4000  (00:009F)           INPUT		equ	#009F	;CHGET											;espera que pulses una tecla y manda el valor a registro a
      16   00:4000  (00:F3AF)           ANCHOSC0	equ	#F3AF	;LINL40											;define el width de screen 0
      17   00:4000  (00:F3AF)           ANCHOSC1	equ	#f3AF	;LINL32											;define el width de screen 1
      18   00:4000  (00:F3DB)           CLICKOFF	equ	#f3DB	;CLIKSW											;quita el sonido del toque de teclas
      19   00:4000  (00:0041)           DISSCR		equ	#0041													;desconecta la pantalla_en_blanco
      20   00:4000  (00:0044)           ENASCR		equ	#0044													;conecta la pantalla
      21   00:4000                      
      22   00:4000                      
      23   00:4000  (00:013E)           RDVDP		equ	#013E													;lee registro 8 del VDP
      24   00:4000  (00:0047)           WRTVDP		equ	#0047													;escribe registros del VDP
      25   00:4000  (00:005C)           GRABAVRAM	equ	#005C	;LDIRVM											;graba en vram una parte de ram
      26   00:4000  (00:0059)           GRABARAM	equ	#0059	;LDIRMV											;grava en ram una parte de vram
      27   00:4000                      
      28   00:4000  (00:005F)           SCREENX		equ	#005F	;CHGMOD											;elige el modo grafico
      29   00:4000  (00:00D5)           ONSTICK		equ	#00D5	;GTSTCK											;controla el stick
      30   00:4000  (00:00D8)           ONSTRIG		equ	#00D8	;GTTRIG											;controla los botones del joystick o la barra espaciadora
      31   00:4000  (00:003B)           RESET		equ #003B	;INITIO											;reinicia el ordenador
      32   00:4000                      
      33   00:4000  (00:FD9A)           H.KEYI		equ	#FD9A	;H.KEYI
      34   00:4000  (00:FD9F)           H.TIMI		equ	#FD9F	;H.TIMI
      35   00:4000                      
      36   00:4000  (00:0141)           SNSMAT		equ	#0141	;INKEY$											;controla si se ha pulsado una tecla_pulsada
      37   00:4000                      
      38   00:4000  (00:0024)           ENASLT		equ	#0024													;para ampliar la rom		
      39   00:4000  (00:0138)           RSLREG  	equ	#0138
      40   00:4000  (00:C000)           SLOTVAR		equ	#C000
      41   00:4000                      
      42   00:4000  (00:F3DF)           RG0SAV		equ	#F3DF													;COPIA DE vdp DEL REGISTRO 0 (BASIC:VDP(0))
      43   00:4000  (00:F3E0)           RG1SAV		equ	#F3E0													;COPIA DE vdp DEL REGISTRO 1 (BASIC:VDP(1))
      44   00:4000  (00:F3E1)           RG2SAV		equ	#F3E1													;COPIA DE vdp DEL REGISTRO 2 (BASIC:VDP(2))
      45   00:4000  (00:F3E2)           RG3SAV		equ	#F3E2													;COPIA DE vdp DEL REGISTRO 3 (BASIC:VDP(3))
      46   00:4000  (00:F3E3)           RG4SAV		equ	#F3E3													;COPIA DE vdp DEL REGISTRO 4 (BASIC:VDP(4))
      47   00:4000  (00:F3E4)           RG5SAV		equ	#F3E4													;COPIA DE vdp DEL REGISTRO 5 (BASIC:VDP(5))
      48   00:4000  (00:F3E5)           RG6SAV		equ	#F3E5													;COPIA DE vdp DEL REGISTRO 6 (BASIC:VDP(6))
      49   00:4000  (00:F3E6)           RG7SAV		equ	#F3E6													;COPIA DE vdp DEL REGISTRO 7 (BASIC:VDP(7))
      50   00:4000  (00:F3E7)           STATFL		equ	#F3E7													;COPIA DE vdp DEL REGISTRO 8 (EL QUE ES DE ESCRITURA (S#0))
      51   00:4000                      
      52   00:4000                      	org		#4000	
      53   00:4000                      
      54   00:4000  41 42               	db	"AB"															;Cabecera de fichero ROM
      55   00:4002  37 40               	word	START														;Dónde empieza la ejecución
      56   00:4004                      	word	0,0,0,0,0,0
      56   00:4004  00 00 00 00 00 00 00 00 00 00 00 00 
      57   00:4010                      		
      58   00:4010                      ;original from Ramones (http://karoshi.auic.es/index.php?topic=628.0)
      59   00:4010                      ; -----------------------
      60   00:4010                      ; SEARCH_SLOTSET
      61   00:4010                      ; Posiciona en pagina 2
      62   00:4010                      ; Nuestro ROM.
      63   00:4010                      ; -----------------------
      64   00:4010                      
      65   00:4010                      search_slotset:
      66   00:4010  CD 16 40            		call search_slot
      67   00:4013  C3 24 00            		jp ENASLT
      68   00:4016                      
      69   00:4016                      
      70   00:4016                      ; -----------------------
      71   00:4016                      ; SEARCH_SLOT
      72   00:4016                      ; Busca slot de nuestro rom
      73   00:4016                      ; -----------------------
      74   00:4016                      
      75   00:4016                      search_slot:
      76   00:4016                      
      77   00:4016  CD 38 01            	call RSLREG
      78   00:4019  0F                  	rrca
      79   00:401A  0F                  	rrca
      80   00:401B  E6 03               	and 3
      81   00:401D  4F                  	ld c,a
      82   00:401E  06 00               	ld b,0
      83   00:4020  21 C1 FC            	ld hl,0FCC1h
      84   00:4023  09                  	add hl,bc
      85   00:4024  7E                  	ld a,(hl)
      86   00:4025  E6 80               	and 080h
      87   00:4027  B1                  	or c
      88   00:4028  4F                  	ld c,a
      89   00:4029  23                  	inc hl
      90   00:402A  23                  	inc hl
      91   00:402B  23                  	inc hl
      92   00:402C  23                  	inc hl
      93   00:402D  7E                  	ld a,(hl)
      94   00:402E  E6 0C               	and 0Ch
      95   00:4030  B1                  	or c
      96   00:4031  26 80               	ld h,080h
      97   00:4033  32 00 C0            	ld (SLOTVAR),a
      98   00:4036  C9                  	ret		
      99   00:4037                      	
     100   00:4037                      START:
     101   00:4037                      
     102   00:4037                      ; ampliamos la lectura de rom a 32 k
     103   00:4037                      
     104   00:4037  F3                  		di
     105   00:4038                      		
     106   00:4038  ED 56               		im		1														;modo de interrupciones 1
     107   00:403A  31 80 F3            		ld		sp,#F380												; colocmos la pila en esta posicion, que suele ser donde empieza las zona ram que usa el S.O. del MSX. Recuerda que la pila crece hacia abajo así que no pisaremos nada
     108   00:403D                      
     109   00:403D  CD 10 40            		call	search_slotset
     110   00:4040                      		
     111   00:4040  FB                  		ei
     112   00:4041                      
     113   00:4041                      ;descomprimimos la musica
     114   00:4041                      
     115   00:4041  21 6A 75            		ld		hl,CANCION												;descomprime musica de inicio
     116   00:4044  11 92 C3            		ld		de,SAXOLO
     117   00:4047  CD CB 6D            		call	depack
     118   00:404A                      		
     119   00:404A  21 67 78            		ld		hl,MUSICA_GAMEOVER										;descomprime musica game over
     120   00:404D  11 C3 CA            		ld		de,GAME_OVER
     121   00:4050  CD CB 6D            		call	depack
     122   00:4053                      		
     123   00:4053                      ;		ld		hl,MUSICA_FASES											;descomprime musica game over
     124   00:4053                      ;		ld		de,FASES
     125   00:4053                      ;		call	depack	
     126   00:4053                      		
     127   00:4053  21 4B 78            		ld		hl,SILENCIO												;descomprime musica mute
     128   00:4056  11 B9 CD            		ld		de,MUTE
     129   00:4059  CD CB 6D            		call	depack
     130   00:405C                      		
     131   00:405C  21 81 80            		ld		hl,MUSICA_MUERTO										;descomprime musica mute
     132   00:405F  11 2E CE            		ld		de,MUERTO
     133   00:4062  CD CB 6D            		call	depack
     134   00:4065                      		
     135   00:4065  21 11 81            		ld		hl,MUSICA_ENTRE_FASES									;descomprime musica entre fases
     136   00:4068  11 52 CF            		ld		de,ENTRE_FASES
     137   00:406B  CD CB 6D            		call	depack
     138   00:406E                      		
     139   00:406E  AF                  		xor		a														;definimos inglés como idioma de inicio
     140   00:406F  32 01 C0            		ld		(idioma),a
     141   00:4072                      								
     142   00:4072                      ;inicializamos la música
     143   00:4072                      		
     144   00:4072  CD 63 4E            		call	activa_musica_menu
     145   00:4075                      		
     146   00:4075  21 A1 79            		ld		hl,EFECTOS_BANCO										;hl ahora vale la direccion donde se encuentran los efectos
     147   00:4078  CD 8D 74            		call	ayFX_SETUP												;inicia el reproductor de efectos
     148   00:407B                      		
     149   00:407B                      ;salva actual rutina en H.KEYI
     150   00:407B                      
     151   00:407B  11 08 C0            		ld		de,VIEJA_INTERR											;coge la dirección de la antigua interrupcion de gancho
     152   00:407E  21 9F FD            		ld		hl,H.TIMI												;coge la dirección de la entrada de gancho de interrupción
     153   00:4081  01 05 00            		ld		bc,5													;longitud del gancho a 5 bytes
     154   00:4084  ED B0               		ldir															;lo transfiere
     155   00:4086                      		
     156   00:4086                      ;engancha nuestra rutina de servicio al gancho que djea preparada la BIOS cuando se termina de pintar la pantalla (50 o 60 veces por segundo)
     157   00:4086                      
     158   00:4086  3E C3               		ld		a,#C3													;#c3 es el código binario de jump (jp)
     159   00:4088  32 9F FD            		ld		[H.TIMI],a												;metemos en H.TIMI ese jp
     160   00:408B  21 75 6E            		ld		hl,nuestra_isr											;cargamos nuestra secuencia en hl
     161   00:408E  22 A0 FD            		ld		[H.TIMI+1],hl											;la ponemos a continuación del jp
     162   00:4091                      		
     163   00:4091  FB                  		ei																;conectamos las interrupciones
     164   00:4092                      		
     165   00:4092  CD 98 54            		call	musica_con_bucle
     166   00:4095                      
     167   00:4095                      PANTALLA_DE_CARGA:
     168   00:4095                      		
     169   00:4095  CD 93 4E            		call	PREPARACION_SCREEN_2
     170   00:4098  CD 41 00            		call	DISSCR													;desconectamos la pantalla
     171   00:409B  CD 2F 45            		call	limpia_sprites
     172   00:409E                      		
     173   00:409E  AF                  		xor		a
     174   00:409F  32 E9 F3            		ld		[COLLETRA],a											;aunque sólo quieras cambiar uno de los colores, tienes que volver a definir los otros dos para que te acepte un cambio
     175   00:40A2  32 EA F3            		ld		[COLFONDO],a
     176   00:40A5  32 EB F3            		ld		[COLBORDE],a
     177   00:40A8  CD 62 00            		call	COLOR
     178   00:40AB                      		
     179   00:40AB  21 51 84            		ld		hl,pant_carga_til										;cargamos patrones
     180   00:40AE  11 00 00            		ld		de,#0000
     181   00:40B1  CD EB 6C            		call	depack_VRAM
     182   00:40B4                      		
     183   00:40B4  21 5D 9A            		ld		hl,pant_carga											;carga el marcador
     184   00:40B7  11 00 18            		ld		de,#1800
     185   00:40BA  CD EB 6C            		call	depack_VRAM
     186   00:40BD                      		
     187   00:40BD  21 7F 92            		ld		hl,pant_carga_col										;cargamos colores de patrones
     188   00:40C0  11 00 20            		ld		de,#2000
     189   00:40C3  CD EB 6C            		call	depack_VRAM
     190   00:40C6                      			
     191   00:40C6  CD 63 4D            		call	SPRITES_PETISOS
     192   00:40C9                      		
     193   00:40C9  CD 44 00            		call	ENASCR													;conectamos la pantalla
     194   00:40CC                      		
     195   00:40CC                      INICIA_MUSICA:
     196   00:40CC                      
     197   00:40CC  CD 63 4E            		call	activa_musica_menu										;inicia el reproductor de PT3
     198   00:40CF                      		
     199   00:40CF  3E 0F               		ld		a,15
     200   00:40D1  32 04 C0            		ld		(petisoy),a
     201   00:40D4  3E 6E               		ld		a,110
     202   00:40D6  32 03 C0            		ld		(petisox),a
     203   00:40D9  3E 28               		ld		a,40
     204   00:40DB  32 05 C0            		ld		(espera_petiso),a
     205   00:40DE  32 07 C0            		ld		(espera_petiso_resta_2),a
     206   00:40E1  32 06 C0            		ld		(espera_petiso_resta),a
     207   00:40E4                      petisos:
     208   00:40E4                      		
     209   00:40E4  AF                  		xor		a
     210   00:40E5  CD D8 00            		CALL	ONSTRIG
     211   00:40E8  FE 00               		cp		0
     212   00:40EA  C2 91 41            		jr.		nz,MENU
     213   00:40ED                      		
     214   00:40ED                      		
     215   00:40ED  CD F5 40            		call	petiso_activity
     216   00:40F0                      		
     217   00:40F0  18 F2               		jr.		petisos
     218   00:40F2                      		
     219   00:40F2  C3 91 41            		jr.		MENU
     220   00:40F5                      
     221   00:40F5                      petiso_activity:
     222   00:40F5                      
     223   00:40F5  3A 06 C0            		ld		a,(espera_petiso_resta)
     224   00:40F8  3D                  		dec		a
     225   00:40F9  FE 00               		cp		0
     226   00:40FB  32 06 C0            		ld		(espera_petiso_resta),a
     227   00:40FE  C0                  		ret		nz
     228   00:40FF  3A 05 C0            		ld		a,(espera_petiso)
     229   00:4102  32 06 C0            		ld		(espera_petiso_resta),a
     230   00:4105  3A 07 C0            		ld		a,(espera_petiso_resta_2)
     231   00:4108  3D                  		dec		a
     232   00:4109  FE 00               		cp		0
     233   00:410B  32 07 C0            		ld		(espera_petiso_resta_2),a
     234   00:410E  C0                  		ret		nz
     235   00:410F  3A 05 C0            		ld		a,(espera_petiso)
     236   00:4112  32 06 C0            		ld		(espera_petiso_resta),a
     237   00:4115  32 07 C0            		ld		(espera_petiso_resta_2),a
     238   00:4118                      		
     239   00:4118  2A 05 C0            		ld		hl,(espera_petiso)
     240   00:411B  22 06 C0            		ld		(espera_petiso_resta),hl
     241   00:411E                      
     242   00:411E  3A 02 C0            		ld		a,(petiso_que_toca)
     243   00:4121  FE 00               		cp		0
     244   00:4123  28 0E               		jr.		z,petiso_a_saltar
     245   00:4125                      		
     246   00:4125  AF                  		xor		a
     247   00:4126  32 02 C0            		ld		(petiso_que_toca),a
     248   00:4129  3A 04 C0            		ld		a,(petisoy)
     249   00:412C  C6 03               		add		3
     250   00:412E  32 04 C0            		ld		(petisoy),a
     251   00:4131  18 0F               		jr.		registros_petiso
     252   00:4133                      		
     253   00:4133                      petiso_a_saltar:
     254   00:4133                      		
     255   00:4133  3E 10               		ld		a,16
     256   00:4135  32 02 C0            		ld		(petiso_que_toca),a
     257   00:4138  3A 04 C0            		ld		a,(petisoy)
     258   00:413B  D6 03               		sub		3
     259   00:413D  32 04 C0            		ld		(petisoy),a
     260   00:4140  18 00               		jr.		registros_petiso
     261   00:4142                      
     262   00:4142                      registros_petiso:
     263   00:4142                      
     264   00:4142  76                  		halt
     265   00:4143  DD 21 20 C0         		ld		ix,atributos_sprite_general
     266   00:4147  3A 04 C0            		ld		a,(petisoy)
     267   00:414A  DD 77 00            		ld		(ix),a
     268   00:414D  DD 77 04            		ld		(ix+4),a
     269   00:4150  DD 77 08            		ld		(ix+8),a
     270   00:4153  DD 77 0C            		ld		(ix+12),a
     271   00:4156  3A 03 C0            		ld		a,(petisox)
     272   00:4159  DD 77 01            		ld		(ix+1),a
     273   00:415C  DD 77 05            		ld		(ix+5),a
     274   00:415F  DD 77 09            		ld		(ix+9),a
     275   00:4162  DD 77 0D            		ld		(ix+13),a
     276   00:4165  3A 02 C0            		ld		a,(petiso_que_toca)
     277   00:4168  DD 77 02            		ld		(ix+2),a
     278   00:416B  C6 04               		add		4
     279   00:416D  DD 77 06            		ld		(ix+6),a
     280   00:4170  C6 04               		add		4
     281   00:4172  DD 77 0A            		ld		(ix+10),a
     282   00:4175  C6 04               		add		4
     283   00:4177  DD 77 0E            		ld		(ix+14),a
     284   00:417A  3E 01               		ld		a,1
     285   00:417C  DD 77 03            		ld		(ix+3),a
     286   00:417F  3E 04               		ld		a,4
     287   00:4181  DD 77 07            		ld		(ix+7),a
     288   00:4184  3E 0A               		ld		a,10
     289   00:4186  DD 77 0B            		ld		(ix+11),a
     290   00:4189  3E 0F               		ld		a,15
     291   00:418B  DD 77 0F            		ld		(ix+15),a
     292   00:418E                      		
     293   00:418E  C3 F0 57            		jr.	atributos_sprites
     294   00:4191                      						
     295   00:4191                      MENU:		
     296   00:4191                      
     297   00:4191                      		;prepara la pantalla
     298   00:4191                      		
     299   00:4191  CD 2F 45            		call	limpia_sprites
     300   00:4194  CD 93 4E            		call	PREPARACION_SCREEN_2
     301   00:4197                      		
     302   00:4197  AF                  		xor		a														;XOR se lo carga todo poniendolo a 0, es como un ld a,0 pero ocupa menos
     303   00:4198  CD C3 00            		call	CLS
     304   00:419B                      		
     305   00:419B  3E 20               		ld		a,32													;pone el width a 32
     306   00:419D  32 AF F3            		ld		[ANCHOSC1],a
     307   00:41A0  3E 00               		ld		a,0
     308   00:41A2  32 DB F3            		ld		[CLICKOFF],a											;quita el click de las teclas
     309   00:41A5  CD 6F 00            		call	SCREEN1													;pasa a modo screen 1
     310   00:41A8                      	
     311   00:41A8  CD CC 00            		call	KEYOFF													;borramos las teclas de función
     312   00:41AB  CD 63 4D            		call	SPRITES_PETISOS
     313   00:41AE                      
     314   00:41AE                      PREPARA_VARIABLES_SERPIENTE:
     315   00:41AE                      
     316   00:41AE  3E 02               		ld		a,2
     317   00:41B0  32 0D C0            		ld		(estado_serp),a
     318   00:41B3  3E 10               		ld		a,16
     319   00:41B5  32 0E C0            		ld		(y_serp),a
     320   00:41B8  01 E8 03            		ld		bc,1000
     321   00:41BB  ED 43 10 C0         		ld		(clock),bc
     322   00:41BF                      		
     323   00:41BF  3E AE               		ld		a,174
     324   00:41C1  32 04 C0            		ld		(petisoy),a
     325   00:41C4  3E 31               		ld		a,49
     326   00:41C6  32 03 C0            		ld		(petisox),a
     327   00:41C9  3E 04               		ld		a,4
     328   00:41CB  32 05 C0            		ld		(espera_petiso),a
     329   00:41CE  32 07 C0            		ld		(espera_petiso_resta_2),a
     330   00:41D1  32 06 C0            		ld		(espera_petiso_resta),a
     331   00:41D4                      		
     332   00:41D4                      RUTINA_DE_MENU:
     333   00:41D4                      
     334   00:41D4  21 8B BC            		ld		hl,letras_A												;redefine las letras
     335   00:41D7  11 08 02            		ld		de,#0208
     336   00:41DA  01 D0 00            		ld		bc,8*26
     337   00:41DD  CD 5C 00            		call	GRABAVRAM
     338   00:41E0                      		
     339   00:41E0  21 5B BD            		ld		hl,titulo_centro1										;redefine tiles de título
     340   00:41E3  11 08 03            		ld		de,#0308
     341   00:41E6  01 78 00            		ld		bc,8*15
     342   00:41E9  CD 5C 00            		call	GRABAVRAM
     343   00:41EC                      		
     344   00:41EC  21 D3 BD            		ld		hl,parentesis_a											;redefine parentesis
     345   00:41EF  11 40 01            		ld		de,#0140
     346   00:41F2  01 10 00            		ld		bc,8*2
     347   00:41F5  CD 5C 00            		call	GRABAVRAM
     348   00:41F8                      		
     349   00:41F8  21 E3 BD            		ld		hl,guion												;redefine guion y punto
     350   00:41FB  11 58 01            		ld		de,#0158
     351   00:41FE  01 10 00            		ld		bc,8*2
     352   00:4201  CD 5C 00            		call	GRABAVRAM
     353   00:4204                      		
     354   00:4204  21 F3 BD            		ld		hl,numero0												;redefine numeros y dos puntos
     355   00:4207  11 80 01            		ld		de,#0180	
     356   00:420A  01 58 00            		ld		bc,8*11
     357   00:420D  CD 5C 00            		call	GRABAVRAM
     358   00:4210                      		
     359   00:4210  21 4B BE            		ld		hl,freeware												;mensaje de freeware
     360   00:4213  11 80 03            		ld		de,#0380
     361   00:4216  01 40 00            		ld		bc,8*8
     362   00:4219  CD 5C 00            		call	GRABAVRAM		
     363   00:421C                      						
     364   00:421C                      PANTALLA_DE_SELECCION:
     365   00:421C                      		
     366   00:421C  AF                  		xor		a
     367   00:421D  CD C3 00            		call	CLS
     368   00:4220                      				
     369   00:4220  26 01               		ld		h,1
     370   00:4222  2E 04               		ld		l,4
     371   00:4224  CD C6 00            		call	LOCATE
     372   00:4227  21 E9 B9            		ld		hl,titulo_1
     373   00:422A  CD 8A 44            		call	lee_pinta_una
     374   00:422D                      				
     375   00:422D  26 01               		ld		h,1
     376   00:422F  2E 0B               		ld		l,11
     377   00:4231  CD C6 00            		call	LOCATE
     378   00:4234  21 CA BA            		ld		hl,titulo_8
     379   00:4237  CD 8A 44            		call	lee_pinta_una
     380   00:423A                      		
     381   00:423A  26 0F               		ld		h,15
     382   00:423C  2E 0E               		ld		l,14
     383   00:423E  CD C6 00            		call	LOCATE
     384   00:4241  21 EB BA            		ld		hl,mensaje
     385   00:4244  CD 8A 44            		call	lee_pinta_una
     386   00:4247                      		
     387   00:4247  26 05               		ld		h,5
     388   00:4249  2E 18               		ld		l,24
     389   00:424B  CD C6 00            		call	LOCATE
     390   00:424E  21 43 BB            		ld		hl,copyright
     391   00:4251  CD 8A 44            		call	lee_pinta_una
     392   00:4254                      		
     393   00:4254  3A 01 C0            		ld		a,(idioma)
     394   00:4257  FE 00               		cp		0
     395   00:4259  28 43               		jr.		z,menu_castellano
     396   00:425B                      
     397   00:425B                      menu_ingles:
     398   00:425B                      
     399   00:425B  26 03               		ld		h,3							;escribe pantalla de menu
     400   00:425D  2E 01               		ld		l,1
     401   00:425F  CD C6 00            		call	LOCATE
     402   00:4262  21 AF B9            		ld		hl,empresa
     403   00:4265  CD 8A 44            		call	lee_pinta_una
     404   00:4268                      			
     405   00:4268  26 0C               		ld		h,12
     406   00:426A  2E 10               		ld		l,16
     407   00:426C  CD C6 00            		call	LOCATE
     408   00:426F  21 F0 BA            		ld		hl,teclado
     409   00:4272  CD 8A 44            		call	lee_pinta_una	
     410   00:4275                      		
     411   00:4275  26 0C               		ld		h,12
     412   00:4277  2E 12               		ld		l,18
     413   00:4279  CD C6 00            		call	LOCATE
     414   00:427C  21 FB BA            		ld		hl,mando
     415   00:427F  CD 8A 44            		call	lee_pinta_una
     416   00:4282                      				
     417   00:4282  26 0C               		ld		h,12
     418   00:4284  2E 14               		ld		l,20
     419   00:4286  CD C6 00            		call	LOCATE
     420   00:4289  21 06 BB            		ld		hl,instrucciones
     421   00:428C  CD 8A 44            		call	lee_pinta_una
     422   00:428F                      		
     423   00:428F  26 0C               		ld		h,12
     424   00:4291  2E 16               		ld		l,22
     425   00:4293  CD C6 00            		call	LOCATE
     426   00:4296  21 2C BB            		ld		hl,salir
     427   00:4299  CD 8A 44            		call	lee_pinta_una
     428   00:429C                      		
     429   00:429C  18 41               		jr.		rutina_colores_inicio
     430   00:429E                      		
     431   00:429E                      menu_castellano:
     432   00:429E                      
     433   00:429E  26 03               		ld		h,3							;escribe pantalla de menu
     434   00:42A0  2E 01               		ld		l,1
     435   00:42A2  CD C6 00            		call	LOCATE
     436   00:42A5  21 CC B9            		ld		hl,empresa_e
     437   00:42A8  CD 8A 44            		call	lee_pinta_una
     438   00:42AB                      		
     439   00:42AB  26 0C               		ld		h,12
     440   00:42AD  2E 10               		ld		l,16
     441   00:42AF  CD C6 00            		call	LOCATE
     442   00:42B2  21 11 BB            		ld		hl,teclado_e
     443   00:42B5  CD 8A 44            		call	lee_pinta_una	
     444   00:42B8                      		
     445   00:42B8  26 0C               		ld		h,12
     446   00:42BA  2E 12               		ld		l,18
     447   00:42BC  CD C6 00            		call	LOCATE
     448   00:42BF  21 1B BB            		ld		hl,mando_e
     449   00:42C2  CD 8A 44            		call	lee_pinta_una
     450   00:42C5                      				
     451   00:42C5  26 0C               		ld		h,12
     452   00:42C7  2E 14               		ld		l,20
     453   00:42C9  CD C6 00            		call	LOCATE
     454   00:42CC  21 23 BB            		ld		hl,instruccion_e
     455   00:42CF  CD 8A 44            		call	lee_pinta_una
     456   00:42D2                      		
     457   00:42D2  26 0C               		ld		h,12
     458   00:42D4  2E 16               		ld		l,22
     459   00:42D6  CD C6 00            		call	LOCATE
     460   00:42D9  21 39 BB            		ld		hl,salir_e
     461   00:42DC  CD 8A 44            		call	lee_pinta_una		
     462   00:42DF                      				
     463   00:42DF                      rutina_colores_inicio:						;rutina de colores
     464   00:42DF                      		
     465   00:42DF  3E 0F               		ld		a,15
     466   00:42E1                      		
     467   00:42E1                      rutina_colores:		
     468   00:42E1                      					
     469   00:42E1  32 E9 F3            		ld		[COLLETRA],a				;aunque sólo quieras cambiar uno de los colores, tienes que volver a definir los otros dos para que te acepte un cambio
     470   00:42E4  F5                  		push	af							;guardo el valor de a en la pila para utilizar ese registro pero la pila son dos bytes, por lo que debo guardar tambien f aunque no lo use
     471   00:42E5  3E 00               		ld		a,0
     472   00:42E7  32 EA F3            		ld		[COLFONDO],a
     473   00:42EA  3E 01               		ld		a,1
     474   00:42EC  32 EB F3            		ld		[COLBORDE],a
     475   00:42EF  CD 62 00            		call	COLOR
     476   00:42F2  F1                  		pop		af							;recupero el valor de a
     477   00:42F3  3D                  		dec		a
     478   00:42F4  47                  		ld		b,a
     479   00:42F5  FE 02               		cp		2
     480   00:42F7  C2 E1 42            		jp		nz,rutina_colores
     481   00:42FA                      		
     482   00:42FA  F5                  		push	af
     483   00:42FB                      
     484   00:42FB                      contro_serpiente_a_pintar:
     485   00:42FB                      
     486   00:42FB  CD F5 40            		call	petiso_activity
     487   00:42FE                      
     488   00:42FE  3A 0D C0            		ld		a,(estado_serp)
     489   00:4301  3C                  		inc		a
     490   00:4302  32 0D C0            		ld		(estado_serp),a										;controla la serpiente que se pinta
     491   00:4305  FE 02               		cp		2
     492   00:4307  CA B9 44            		jp		z,pinta_serpiente_2
     493   00:430A  FE 03               		cp		3
     494   00:430C  CA B9 44            		jp		z,pinta_serpiente_2
     495   00:430F  C3 9F 44            		jp		pinta_serpiente_1
     496   00:4312                      		
     497   00:4312                      		
     498   00:4312                      		
     499   00:4312                      control_stick_menu:
     500   00:4312                      		
     501   00:4312  AF                  		xor		a							;controla el movimiento de la serpiente en menu
     502   00:4313  CD D5 00            		call	ONSTICK
     503   00:4316  FE 01               		cp		1
     504   00:4318  CA D3 44            		jp		z,sube_cursor
     505   00:431B  FE 05               		cp		5
     506   00:431D  CA 01 45            		jp		z,baja_cursor
     507   00:4320  FE 00               		cp		0
     508   00:4322  CA 25 43            		jp		z,control_strig_menu
     509   00:4325                      		
     510   00:4325                      control_strig_menu:							;controla si pulsa espacio para seleccionar una opcion
     511   00:4325                      
     512   00:4325  AF                  		xor		a
     513   00:4326  CD D8 00            		CALL	ONSTRIG
     514   00:4329  FE 00               		cp		0
     515   00:432B  C2 49 44            		jp		nz,que_ha_elegido
     516   00:432E                      				
     517   00:432E                      controla_tiempo_para_cambio:				;contador para ir a mostrar los creditos
     518   00:432E                      
     519   00:432E  2A 10 C0            		ld		hl,(clock)
     520   00:4331  01 01 00            		ld		bc,1		
     521   00:4334  ED 42               		sbc		hl,bc
     522   00:4336  22 10 C0            		ld		(clock),hl
     523   00:4339  20 0A               		jr		nz,termina_secuencia_color
     524   00:433B                      								
     525   00:433B  01 60 EA            		ld		bc,60000
     526   00:433E  ED 43 10 C0         		ld		(clock),bc
     527   00:4342                      				
     528   00:4342  C3 49 43            		jp		CREDITOS
     529   00:4345                      		
     530   00:4345                      		
     531   00:4345                      termina_secuencia_color:					;cerramos este loop
     532   00:4345                      				
     533   00:4345  F1                  		pop		af
     534   00:4346                      		
     535   00:4346  C3 DF 42            		jp		rutina_colores_inicio
     536   00:4349                      				
     537   00:4349                      CREDITOS:
     538   00:4349                      		
     539   00:4349  CD 2F 45            		call	limpia_sprites
     540   00:434C                      						
     541   00:434C  AF                  		xor		a
     542   00:434D  CD C3 00            		call	CLS
     543   00:4350                      				
     544   00:4350  26 12               		ld		h,18
     545   00:4352  2E 03               		ld		l,3
     546   00:4354  CD C6 00            		call	LOCATE
     547   00:4357  21 A7 BB            		ld		hl,benja
     548   00:435A  CD 8A 44            		call	lee_pinta_una
     549   00:435D                      				
     550   00:435D  26 12               		ld		h,18
     551   00:435F  2E 0B               		ld		l,11
     552   00:4361  CD C6 00            		call	LOCATE
     553   00:4364  21 61 BC            		ld		hl,royal
     554   00:4367  CD 8A 44            		call	lee_pinta_una
     555   00:436A                      					
     556   00:436A  26 13               		ld		h,19
     557   00:436C  2E 0E               		ld		l,14
     558   00:436E  CD C6 00            		call	LOCATE
     559   00:4371  21 B7 BB            		ld		hl,manu
     560   00:4374  CD 8A 44            		call	lee_pinta_una
     561   00:4377                      		
     562   00:4377  26 01               		ld		h,1
     563   00:4379  2E 10               		ld		l,16
     564   00:437B  CD C6 00            		call	LOCATE
     565   00:437E  21 C6 BB            		ld		hl,ramon
     566   00:4381  CD 8A 44            		call	lee_pinta_una
     567   00:4384                      		
     568   00:4384  26 01               		ld		h,1
     569   00:4386  2E 12               		ld		l,18
     570   00:4388  CD C6 00            		call	LOCATE
     571   00:438B  21 E7 BB            		ld		hl,fernando1
     572   00:438E  CD 8A 44            		call	lee_pinta_una
     573   00:4391                      		
     574   00:4391  26 01               		ld		h,1
     575   00:4393  2E 14               		ld		l,20
     576   00:4395  CD C6 00            		call	LOCATE
     577   00:4398  21 08 BC            		ld		hl,fernando2
     578   00:439B  CD 8A 44            		call	lee_pinta_una
     579   00:439E                      		
     580   00:439E  26 01               		ld		h,1
     581   00:43A0  2E 16               		ld		l,22
     582   00:43A2  CD C6 00            		call	LOCATE
     583   00:43A5  21 29 BC            		ld		hl,felix
     584   00:43A8  CD 8A 44            		call	lee_pinta_una
     585   00:43AB                      		
     586   00:43AB  26 0B               		ld		h,11
     587   00:43AD  2E 08               		ld		l,8
     588   00:43AF  CD C6 00            		call	LOCATE
     589   00:43B2  21 4A BC            		ld		hl,tromax
     590   00:43B5  CD 8A 44            		call	lee_pinta_una
     591   00:43B8                      		
     592   00:43B8  3A 01 C0            		ld		a,(idioma)
     593   00:43BB  FE 00               		cp		0
     594   00:43BD  28 36               		jr.		z,creditos_castellano
     595   00:43BF                      
     596   00:43BF                      creditos_ingles:
     597   00:43BF                      
     598   00:43BF  26 01               		ld		h,1
     599   00:43C1  2E 05               		ld		l,5
     600   00:43C3  CD C6 00            		call	LOCATE
     601   00:43C6  21 7F BC            		ld		hl,mano_derecha_e
     602   00:43C9  CD 8A 44            		call	lee_pinta_una
     603   00:43CC                      		
     604   00:43CC  26 01               		ld		h,1
     605   00:43CE  2E 01               		ld		l,1
     606   00:43D0  CD C6 00            		call	LOCATE
     607   00:43D3  21 65 BB            		ld		hl,programacion
     608   00:43D6  CD 8A 44            		call	lee_pinta_una
     609   00:43D9                      		
     610   00:43D9  26 01               		ld		h,1
     611   00:43DB  2E 0A               		ld		l,10
     612   00:43DD  CD C6 00            		call	LOCATE
     613   00:43E0  21 72 BB            		ld		hl,musica
     614   00:43E3  CD 8A 44            		call	lee_pinta_una
     615   00:43E6                      		
     616   00:43E6  26 01               		ld		h,1
     617   00:43E8  2E 0D               		ld		l,13
     618   00:43EA  CD C6 00            		call	LOCATE
     619   00:43ED  21 79 BB            		ld		hl,agradec
     620   00:43F0  CD 8A 44            		call	lee_pinta_una
     621   00:43F3                      		
     622   00:43F3  18 34               		jr.		controla_tiempo_para_cambio_2
     623   00:43F5                      		
     624   00:43F5                      creditos_castellano:
     625   00:43F5                      		
     626   00:43F5  26 01               		ld		h,1
     627   00:43F7  2E 05               		ld		l,5
     628   00:43F9  CD C6 00            		call	LOCATE
     629   00:43FC  21 71 BC            		ld		hl,mano_derecha
     630   00:43FF  CD 8A 44            		call	lee_pinta_una
     631   00:4402                      		
     632   00:4402  26 01               		ld		h,1
     633   00:4404  2E 01               		ld		l,1
     634   00:4406  CD C6 00            		call	LOCATE
     635   00:4409  21 81 BB            		ld		hl,programacion_e
     636   00:440C  CD 8A 44            		call	lee_pinta_una
     637   00:440F                      		
     638   00:440F  26 01               		ld		h,1
     639   00:4411  2E 0A               		ld		l,10
     640   00:4413  CD C6 00            		call	LOCATE
     641   00:4416  21 8E BB            		ld		hl,musica_e
     642   00:4419  CD 8A 44            		call	lee_pinta_una
     643   00:441C                      		
     644   00:441C  26 01               		ld		h,1
     645   00:441E  2E 0D               		ld		l,13
     646   00:4420  CD C6 00            		call	LOCATE
     647   00:4423  21 96 BB            		ld		hl,agradec_e
     648   00:4426  CD 8A 44            		call	lee_pinta_una
     649   00:4429                      		
     650   00:4429                      controla_tiempo_para_cambio_2:
     651   00:4429                      
     652   00:4429  AF                  		xor		a
     653   00:442A  CD D8 00            		CALL	ONSTRIG
     654   00:442D  FE 00               		cp		0
     655   00:442F  C2 3F 44            		jp		nz,prepara_contador_para_menu
     656   00:4432                      		
     657   00:4432  2A 10 C0            		ld		hl,(clock)	
     658   00:4435  01 01 00            		ld		bc,1				
     659   00:4438  ED 42               		sbc		hl,bc
     660   00:443A  22 10 C0            		ld		(clock),hl
     661   00:443D                      		
     662   00:443D  20 EA               		jr		nz,controla_tiempo_para_cambio_2
     663   00:443F                      			
     664   00:443F                      prepara_contador_para_menu:
     665   00:443F                      
     666   00:443F  01 E8 03            		ld		bc,1000
     667   00:4442  ED 43 10 C0         		ld		(clock),bc
     668   00:4446                      
     669   00:4446  C3 91 41            		jp		MENU
     670   00:4449                      				
     671   00:4449                      que_ha_elegido:
     672   00:4449                      
     673   00:4449  3E 01               		ld		a,1							;efecto de pinchar opción
     674   00:444B  CD E6 6C            		call	efecto_sonido
     675   00:444E                      		
     676   00:444E  3A 0E C0            		ld		a,(y_serp)
     677   00:4451  FE 10               		cp		16
     678   00:4453  CA 7B 44            		jp		z,prepara_teclado
     679   00:4456  FE 12               		cp		18
     680   00:4458  CA 82 44            		jp		z,prepara_mando
     681   00:445B  FE 14               		cp		20
     682   00:445D  CA 65 44            		jp		z,idioma_a_pintar
     683   00:4460  FE 16               		cp		22
     684   00:4462  CA 95 40            		jp		z,PANTALLA_DE_CARGA
     685   00:4465                      
     686   00:4465                      idioma_a_pintar:
     687   00:4465                      		
     688   00:4465  3A 01 C0            		ld		a,(idioma)
     689   00:4468  FE 00               		cp		0
     690   00:446A  20 08               		jr.		nz,ingles
     691   00:446C                      
     692   00:446C                      castellano
     693   00:446C                      
     694   00:446C  3E 01               		ld		a,1
     695   00:446E  32 01 C0            		ld		(idioma),a
     696   00:4471                      		
     697   00:4471  C3 91 41            		jr.		MENU
     698   00:4474                      		
     699   00:4474                      ingles:
     700   00:4474                      	
     701   00:4474  AF                  		xor		a
     702   00:4475  32 01 C0            		ld		(idioma),a
     703   00:4478                      		
     704   00:4478  C3 91 41            		JR.		MENU
     705   00:447B                      					
     706   00:447B                      prepara_teclado:
     707   00:447B                      
     708   00:447B  AF                  		xor		a
     709   00:447C  32 0F C0            		ld		(stick_a_usar),a
     710   00:447F  CD 5D 45            		call	prepara_juego
     711   00:4482                      
     712   00:4482                      prepara_mando:
     713   00:4482                      
     714   00:4482  3E 01               		ld		a,1
     715   00:4484  32 0F C0            		ld		(stick_a_usar),a
     716   00:4487  CD 5D 45            		call	prepara_juego
     717   00:448A                      		
     718   00:448A                      lee_pinta_una:								;imprime el texto fijo
     719   00:448A  7E                  		ld		a,[hl]
     720   00:448B  47                  		ld		b,a
     721   00:448C                      		
     722   00:448C                      loop_lee_pinta_una:
     723   00:448C  23                  		inc		hl
     724   00:448D  7E                  		ld		a,[hl]
     725   00:448E  CD A2 00            		call	CHPUT
     726   00:4491  10 F9               		djnz	loop_lee_pinta_una
     727   00:4493  C9                  		ret
     728   00:4494                      		
     729   00:4494                      controla_serpiente:
     730   00:4494                      
     731   00:4494  3A 0D C0            		ld		a,(estado_serp)
     732   00:4497  FE 04               		cp		4
     733   00:4499  C0                  		ret		nz
     734   00:449A  AF                  		xor		a
     735   00:449B  32 0D C0            		ld		(estado_serp),a
     736   00:449E  C9                  		ret
     737   00:449F                      		
     738   00:449F                      pinta_serpiente_1:
     739   00:449F                      		
     740   00:449F  ED 4B 0E C0         		ld		bc,[y_serp]
     741   00:44A3  26 0A               		ld		h,10
     742   00:44A5  69                  		ld		l,c
     743   00:44A6  CD C6 00            		call	LOCATE
     744   00:44A9  21 5F BB            		ld		hl,serp_1
     745   00:44AC  CD 8A 44            		call	lee_pinta_una
     746   00:44AF  CD 94 44            		call	controla_serpiente
     747   00:44B2  ED 43 0E C0         		ld		[y_serp],bc
     748   00:44B6  C3 12 43            		jp		control_stick_menu
     749   00:44B9                      
     750   00:44B9                      pinta_serpiente_2:
     751   00:44B9                      		
     752   00:44B9  ED 4B 0E C0         		ld		bc,[y_serp]
     753   00:44BD  26 0A               		ld		h,10
     754   00:44BF  69                  		ld		l,c
     755   00:44C0  CD C6 00            		call	LOCATE
     756   00:44C3  21 61 BB            		ld		hl,serp_2
     757   00:44C6  CD 8A 44            		call	lee_pinta_una
     758   00:44C9  CD 94 44            		call	controla_serpiente
     759   00:44CC  ED 43 0E C0         		ld		[y_serp],bc
     760   00:44D0  C3 12 43            		jp		control_stick_menu
     761   00:44D3                      	
     762   00:44D3                      sube_cursor:								;comprueva si lo puede subir
     763   00:44D3                       		 		
     764   00:44D3  3A 0E C0             		ld		a,(y_serp)
     765   00:44D6  FE 10                		cp		16
     766   00:44D8  C2 DE 44             		jp		nz,lo_sube
     767   00:44DB  C3 45 43             		jp		termina_secuencia_color
     768   00:44DE                      
     769   00:44DE                      lo_sube:									;lo sube porque es posible
     770   00:44DE                      
     771   00:44DE  76 76 76 76 76      [5]		halt								;espera hasta el vblank 5 veces
     772   00:44E3                      	
     773   00:44E3  AF                  		xor		a							;efecto de movimiento
     774   00:44E4  CD E6 6C            		call	efecto_sonido
     775   00:44E7                      		
     776   00:44E7  3A 0E C0            		ld		a,(y_serp)
     777   00:44EA  26 0A               		ld		h,10
     778   00:44EC  6F                  		ld		l,a
     779   00:44ED  CD C6 00            		call	LOCATE
     780   00:44F0  21 63 BB            		ld		hl,nada
     781   00:44F3  CD 8A 44            		call	lee_pinta_una
     782   00:44F6                      		
     783   00:44F6  3A 0E C0            		ld		a,(y_serp)
     784   00:44F9  D6 02               		sub		2							;decrementa a 2 veces
     785   00:44FB  32 0E C0            		ld		(y_serp),a
     786   00:44FE  C3 45 43            		jp		termina_secuencia_color
     787   00:4501                      
     788   00:4501                      baja_cursor:								;comprueva si lo puede bajar
     789   00:4501                      	
     790   00:4501  3A 0E C0            		ld		a,(y_serp)
     791   00:4504  FE 16                		cp		22
     792   00:4506  C2 0C 45             		jp		nz,lo_baja
     793   00:4509  C3 45 43             		jp		termina_secuencia_color	
     794   00:450C                      
     795   00:450C                      lo_baja:									;lo baja porque es posbile
     796   00:450C                      
     797   00:450C  76 76 76 76 76      [5]		halt								;espera hasta el vblank 5 veces
     798   00:4511                      
     799   00:4511  AF                  		xor		a							;efecto de movimiento
     800   00:4512  CD E6 6C            		call	efecto_sonido
     801   00:4515                      		
     802   00:4515  3A 0E C0            		ld		a,(y_serp)
     803   00:4518  26 0A               		ld		h,10
     804   00:451A  6F                  		ld		l,a
     805   00:451B  CD C6 00            		call	LOCATE
     806   00:451E  21 63 BB            		ld		hl,nada
     807   00:4521  CD 8A 44            		call	lee_pinta_una
     808   00:4524                      				
     809   00:4524  3A 0E C0            		ld		a,(y_serp)
     810   00:4527  C6 02               		add		2					;incrementa a 2 veces
     811   00:4529  32 0E C0            		ld		(y_serp),a
     812   00:452C  C3 45 43            		jp		termina_secuencia_color
     813   00:452F                      
     814   00:452F                      limpia_sprites:
     815   00:452F                      
     816   00:452F  3E C0               		ld		a,192
     817   00:4531  DD 21 20 C0         		ld		ix,atributos_sprite_general
     818   00:4535                      				
     819   00:4535  DD 77 00            		ld		(ix),a
     820   00:4538  DD 77 04            		ld		(ix+4),a
     821   00:453B  DD 77 08            		ld		(ix+8),a
     822   00:453E  DD 77 0C            		ld		(ix+12),a
     823   00:4541  DD 77 10            		ld		(ix+16),a
     824   00:4544  DD 77 14            		ld		(ix+20),a
     825   00:4547  DD 77 18            		ld		(ix+24),a
     826   00:454A  DD 77 1C            		ld		(ix+28),a
     827   00:454D  DD 77 20            		ld		(ix+32),a
     828   00:4550  DD 77 24            		ld		(ix+36),a
     829   00:4553  DD 77 28            		ld		(ix+40),a
     830   00:4556  DD 77 2C            		ld		(ix+44),a
     831   00:4559                      				
     832   00:4559  CD F0 57            		call	atributos_sprites
     833   00:455C                      		
     834   00:455C  C9                  		ret
     835   00:455D                      		
     836   00:455D                      prepara_juego:
     837   00:455D                      		
     838   00:455D  CD 2F 45            		call	limpia_sprites
     839   00:4560                      		
     840   00:4560  CD 44 4E            		call	activa_mute												
     841   00:4563                      		
     842   00:4563  CD 93 4E            		call	PREPARACION_SCREEN_2
     843   00:4566                      		
     844   00:4566  CD 70 4D            		call	SPRITES_UNO
     845   00:4569                      		
     846   00:4569  CD 41 00            		call	DISSCR													;desconectamos la pantalla
     847   00:456C                      		
     848   00:456C  CD 2F 45            		call	limpia_sprites
     849   00:456F                      		
     850   00:456F  21 85 9B            		ld		hl,tiles_1												;cargamos patrones
     851   00:4572  11 00 00            		ld		de,#0000
     852   00:4575  CD EB 6C            		call	depack_VRAM
     853   00:4578                      		
     854   00:4578  21 C4 9F            		ld		hl,colores_1											;cargamos colores de patrones
     855   00:457B  11 00 20            		ld		de,#2000
     856   00:457E  CD EB 6C            		call	depack_VRAM
     857   00:4581                      
     858   00:4581  3A 01 C0            		ld		a,(idioma)
     859   00:4584  FE 00               		cp		0
     860   00:4586  28 0B               		jr.		z,instrucciones_en_castellano
     861   00:4588                      
     862   00:4588                      instrucciones_en_ingles:
     863   00:4588                      
     864   00:4588  21 3E 83            		ld		hl,instru_ingle											;instrucciones en castellano
     865   00:458B  11 00 18            		ld		de,#1800
     866   00:458E  CD EB 6C            		call	depack_VRAM
     867   00:4591  18 09               		jr.		esperando
     868   00:4593                      		
     869   00:4593                      instrucciones_en_castellano:
     870   00:4593                      
     871   00:4593  21 2F 82            		ld		hl,instru_caste											;instrucciones en castellano
     872   00:4596  11 00 18            		ld		de,#1800
     873   00:4599  CD EB 6C            		call	depack_VRAM
     874   00:459C                      		
     875   00:459C                      esperando:
     876   00:459C                      		
     877   00:459C  CD 44 00            		call	ENASCR													;conectamos la pantalla
     878   00:459F  3A 0F C0            		ld		a,(stick_a_usar)
     879   00:45A2  CD D8 00            		CALL	ONSTRIG
     880   00:45A5  FE 00               		cp		0
     881   00:45A7  CA 9C 45            		jp		z,esperando
     882   00:45AA                      		
     883   00:45AA  CD 41 00            		call	DISSCR		
     884   00:45AD  21 CC AF            		ld		hl,blanco												;tiles de base de pantalla
     885   00:45B0  11 20 18            		ld		de,#1820
     886   00:45B3  CD EB 6C            		call	depack_VRAM
     887   00:45B6                      		
     888   00:45B6  21 88 B0            		ld		hl,marcador												;carga el marcador
     889   00:45B9  11 00 18            		ld		de,#1800
     890   00:45BC  CD EB 6C            		call	depack_VRAM
     891   00:45BF  CD 44 00            		CALL	ENASCR
     892   00:45C2                      		
     893   00:45C2  3E C0               		ld		a,192
     894   00:45C4  32 44 C3            		ld		(posicion_del_punto_centenas),a
     895   00:45C7  32 43 C3            		ld		(posicion_del_punto_decenas),a
     896   00:45CA  32 45 C3            		ld		(posicion_del_punto_millares),a
     897   00:45CD  32 42 C3            		ld		(posicion_del_punto_unidades),a
     898   00:45D0                      		
     899   00:45D0  3E 06               		ld		a,6
     900   00:45D2  32 15 C0            		ld		(vidas_prota),a
     901   00:45D5                      		
     902   00:45D5  3E 01               		ld		a,1
     903   00:45D7  32 81 C3            		ld		(ESTADO_MUSICA),a
     904   00:45DA                      		
     905   00:45DA  AF                  		xor		a
     906   00:45DB  32 3E C3            		ld		(score),a
     907   00:45DE                      
     908   00:45DE                      bloque_sanctuary_1:
     909   00:45DE                      		
     910   00:45DE  CD C0 4C            		call	pantalla_en_blanco
     911   00:45E1                      		
     912   00:45E1  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 1
     913   00:45E4  FE 00               		cp		0
     914   00:45E6  28 05               		jr.		z,bloque_sanctuary_1_esp
     915   00:45E8  21 EB AC            		ld		hl,sanctuary_1
     916   00:45EB  18 03               		jr.		bloque_sanctuary_1_cont
     917   00:45ED                      
     918   00:45ED                      bloque_sanctuary_1_esp:
     919   00:45ED                      
     920   00:45ED  21 63 AD            		ld		hl,sanctuario_1
     921   00:45F0                      
     922   00:45F0                      bloque_sanctuary_1_cont:
     923   00:45F0                      		
     924   00:45F0  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
     925   00:45F3                      
     926   00:45F3                      		;		coordenadas prota
     927   00:45F3  3E E8               		ld		a,232						;define variables
     928   00:45F5  32 12 C0            		ld		(px),a
     929   00:45F8  32 51 C0            		ld		(px_salida),a
     930   00:45FB  3E 18               		ld		a,24						
     931   00:45FD  32 13 C0            		ld		(py),a
     932   00:4600  32 52 C0            		ld		(py_salida),a
     933   00:4603                      		
     934   00:4603  CD EE 4C            		call	variables_iguales
     935   00:4606                      				
     936   00:4606                      		;		coordenadas serpientes
     937   00:4606                      		
     938   00:4606  FD 21 48 C3         		ld		iy,variables_serpiente_1
     939   00:460A  3E 98               		ld		a,152
     940   00:460C  FD 77 00            		ld		(iy),a
     941   00:460F  3E A7               		ld		a,167
     942   00:4611  FD 77 01            		ld		(iy+1),a
     943   00:4614  AF                  		xor	a
     944   00:4615  FD 77 02            		ld		(iy+2),a
     945   00:4618  FD 77 03            		ld		(iy+3),a
     946   00:461B  3E 08               		ld		a,8
     947   00:461D  FD 77 04            		ld		(iy+4),a
     948   00:4620  FD 77 05            		ld		(iy+5),a
     949   00:4623  AF                  		xor		a
     950   00:4624  FD 77 06            		ld		(iy+6),a
     951   00:4627  3E 01               		ld		a,1
     952   00:4629  FD 77 07            		ld		(iy+7),a
     953   00:462C  3E FF               		ld		a,255
     954   00:462E  FD 77 08            		ld		(iy+8),a
     955   00:4631                      				
     956   00:4631  3E 01               		ld		a,1
     957   00:4633  32 6D C3            		ld		(serp1),a
     958   00:4636                      		
     959   00:4636                      		;		otras variables
     960   00:4636  3E 01               		ld		a,1
     961   00:4638  32 19 C0            		ld		(fase_en_la_que_esta),a
     962   00:463B  21 7D 00            		ld		hl,125
     963   00:463E  22 3A C3            		ld		(posicion_puerta),hl
     964   00:4641                      		
     965   00:4641  21 C8 00            		ld		hl,200
     966   00:4644  22 10 C0            		ld		(clock),hl						
     967   00:4647  CD 84 4E            		call	rutina_de_esperar_un_rato
     968   00:464A                      
     969   00:464A  CD 4F 4E            		call	activa_musica_fases										;inicia el reproductor de PT3
     970   00:464D                      		
     971   00:464D  21 B0 A1            		ld		hl,fase_1												;cargamos sanctuary 1 en ram
     972   00:4650  11 57 C0            		ld		de,buffer_colisiones
     973   00:4653  CD CB 6D            		call	depack
     974   00:4656                      		
     975   00:4656  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
     976   00:4659                      
     977   00:4659  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
     978   00:465C                      		
     979   00:465C  C3 DE 53            		jr.		repite_fase
     980   00:465F                      								
     981   00:465F                      bloque_sanctuary_2:
     982   00:465F                      		
     983   00:465F  CD C0 4C            		call	pantalla_en_blanco
     984   00:4662                      		
     985   00:4662  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 1
     986   00:4665  FE 00               		cp		0
     987   00:4667  28 05               		jr.		z,bloque_sanctuary_2_esp
     988   00:4669  21 F7 AC            		ld		hl,sanctuary_2
     989   00:466C  18 03               		jr.		bloque_sanctuary_2_cont
     990   00:466E                      
     991   00:466E                      bloque_sanctuary_2_esp:
     992   00:466E                      
     993   00:466E  21 6F AD            		ld		hl,sanctuario_2
     994   00:4671                      
     995   00:4671                      bloque_sanctuary_2_cont:
     996   00:4671                      		
     997   00:4671  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
     998   00:4674                      
     999   00:4674                      		;		coordenadas prota
    1000   00:4674  3E D0               		ld		a,208						;define variables
    1001   00:4676  32 12 C0            		ld		(px),a
    1002   00:4679  32 51 C0            		ld		(px_salida),a
    1003   00:467C  3E A7               		ld		a,167						
    1004   00:467E  32 13 C0            		ld		(py),a
    1005   00:4681  32 52 C0            		ld		(py_salida),a
    1006   00:4684                      		
    1007   00:4684  CD EE 4C            		call	variables_iguales
    1008   00:4687                      				
    1009   00:4687                      		;		coordenadas serpientes
    1010   00:4687                      		
    1011   00:4687  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1012   00:468B  3E 40               		ld		a,64
    1013   00:468D  FD 77 00            		ld		(iy),a
    1014   00:4690  3E A7               		ld		a,167
    1015   00:4692  FD 77 01            		ld		(iy+1),a
    1016   00:4695  AF                  		xor	a
    1017   00:4696  FD 77 02            		ld		(iy+2),a
    1018   00:4699  FD 77 03            		ld		(iy+3),a
    1019   00:469C  3E 08               		ld		a,8
    1020   00:469E  FD 77 04            		ld		(iy+4),a
    1021   00:46A1  FD 77 05            		ld		(iy+5),a
    1022   00:46A4  AF                  		xor		a
    1023   00:46A5  FD 77 06            		ld		(iy+6),a
    1024   00:46A8  3E 01               		ld		a,1
    1025   00:46AA  FD 77 07            		ld		(iy+7),a
    1026   00:46AD  3E FF               		ld		a,255
    1027   00:46AF  FD 77 08            		ld		(iy+8),a
    1028   00:46B2                      		
    1029   00:46B2  FD 21 51 C3         		ld		iy,variables_serpiente_2
    1030   00:46B6  3E 98               		ld		a,152
    1031   00:46B8  FD 77 00            		ld		(iy),a
    1032   00:46BB  3E 8F               		ld		a,143
    1033   00:46BD  FD 77 01            		ld		(iy+1),a
    1034   00:46C0  FD 77 02            		ld		(iy+2),a
    1035   00:46C3  3E FF               		ld		a,255
    1036   00:46C5  FD 77 08            		ld		(iy+8),a
    1037   00:46C8  3E 0F               		ld		a,15
    1038   00:46CA  FD 77 05            		ld		(iy+5),a
    1039   00:46CD  3E 0A               		ld		a,10
    1040   00:46CF  FD 77 04            		ld		(iy+4),a
    1041   00:46D2  3E 02               		ld		a,2
    1042   00:46D4  FD 77 07            		ld		(iy+7),a
    1043   00:46D7                      		
    1044   00:46D7  3E 01               		ld		a,1
    1045   00:46D9  32 6D C3            		ld		(serp1),a
    1046   00:46DC  32 6E C3            		ld		(serp2),a
    1047   00:46DF                      		
    1048   00:46DF                      		;		otras variables
    1049   00:46DF  3E 02               		ld		a,2
    1050   00:46E1  32 19 C0            		ld		(fase_en_la_que_esta),a
    1051   00:46E4  21 BA 02            		ld		hl,698
    1052   00:46E7  22 3A C3            		ld		(posicion_puerta),hl
    1053   00:46EA  3E 01               		ld		a,1
    1054   00:46EC  32 91 C3            		ld		(velocidad_paseo_fases),a								;para que, si pasa la fase, en el paseillo valla más lento y de tiempo a leer el texto
    1055   00:46EF                      		
    1056   00:46EF  21 C8 00            		ld		hl,200
    1057   00:46F2  22 10 C0            		ld		(clock),hl						
    1058   00:46F5  CD 84 4E            		call	rutina_de_esperar_un_rato
    1059   00:46F8                      
    1060   00:46F8  CD 4F 4E            		call	activa_musica_fases										;inicia el reproductor de PT3
    1061   00:46FB                      		
    1062   00:46FB  21 54 A2            		ld		hl,fase_2												;cargamos sanctuary 1 en ram
    1063   00:46FE  11 57 C0            		ld		de,buffer_colisiones
    1064   00:4701  CD CB 6D            		call	depack
    1065   00:4704                      		
    1066   00:4704  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1067   00:4707                      
    1068   00:4707  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1069   00:470A                      		
    1070   00:470A  C3 DE 53            		jr.		repite_fase
    1071   00:470D                      		
    1072   00:470D                      bloque_sanctuary_3:
    1073   00:470D                      		
    1074   00:470D  CD C0 4C            		call	pantalla_en_blanco
    1075   00:4710                      		
    1076   00:4710  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 3
    1077   00:4713  FE 00               		cp		0
    1078   00:4715  28 05               		jr.		z,bloque_sanctuary_3_esp
    1079   00:4717  21 03 AD            		ld		hl,sanctuary_3
    1080   00:471A  18 03               		jr.		bloque_sanctuary_3_cont
    1081   00:471C                      
    1082   00:471C                      bloque_sanctuary_3_esp:
    1083   00:471C                      
    1084   00:471C  21 7B AD            		ld		hl,sanctuario_3
    1085   00:471F                      
    1086   00:471F                      bloque_sanctuary_3_cont:
    1087   00:471F                      
    1088   00:471F  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1089   00:4722                      
    1090   00:4722                      		;		variables coordenadas prota
    1091   00:4722                      		
    1092   00:4722  3E 10               		ld		a,16						;define variables
    1093   00:4724  32 12 C0            		ld		(px),a
    1094   00:4727  32 51 C0            		ld		(px_salida),a
    1095   00:472A  3E 40               		ld		a,64						
    1096   00:472C  32 13 C0            		ld		(py),a
    1097   00:472F  32 52 C0            		ld		(py_salida),a
    1098   00:4732                      		
    1099   00:4732  CD EE 4C            		call	variables_iguales
    1100   00:4735                      		
    1101   00:4735                      		;variables coordenadas serpientes
    1102   00:4735                      		
    1103   00:4735  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1104   00:4739                      		
    1105   00:4739  3E A8               		ld		a,168
    1106   00:473B  FD 77 01            		ld		(iy+1),a
    1107   00:473E  3E B0               		ld		a,176
    1108   00:4740  FD 77 00            		ld		(iy),a
    1109   00:4743  FD 77 02            		ld		(iy+2),a
    1110   00:4746  3E FF               		ld		a,255
    1111   00:4748  FD 77 08            		ld		(iy+8),a
    1112   00:474B  3E 05               		ld		a,5
    1113   00:474D  FD 77 05            		ld		(iy+5),a
    1114   00:4750  3E 01               		ld		a,1
    1115   00:4752  FD 77 07            		ld		(iy+7),a
    1116   00:4755  3E 08               		ld		a,8
    1117   00:4757  FD 77 04            		ld		(iy+4),a
    1118   00:475A                      				
    1119   00:475A  3E 01               		ld		a,1	
    1120   00:475C  32 6D C3            		ld		(serp1),a
    1121   00:475F                      		
    1122   00:475F                      		;		otras variables
    1123   00:475F                      			
    1124   00:475F  3E 03               		ld		a,3
    1125   00:4761  32 19 C0            		ld		(fase_en_la_que_esta),a
    1126   00:4764  21 02 01            		ld		hl,258
    1127   00:4767  22 3A C3            		ld		(posicion_puerta),hl
    1128   00:476A                      
    1129   00:476A  21 C8 00            		ld		hl,200
    1130   00:476D  22 10 C0            		ld		(clock),hl						
    1131   00:4770  CD 84 4E            		call	rutina_de_esperar_un_rato
    1132   00:4773                      		
    1133   00:4773  CD 4F 4E            		call	activa_musica_fases
    1134   00:4776                      		
    1135   00:4776  21 53 A3            		ld		hl,fase_3												;cargamos sanctuary 3 en ram
    1136   00:4779  11 57 C0            		ld		de,buffer_colisiones
    1137   00:477C  CD CB 6D            		call	depack
    1138   00:477F                      		
    1139   00:477F  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1140   00:4782                      
    1141   00:4782  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1142   00:4785                      		
    1143   00:4785  C3 DE 53            		jr.		repite_fase
    1144   00:4788                      
    1145   00:4788                      bloque_sanctuary_4:
    1146   00:4788                      		
    1147   00:4788  CD C0 4C            		call	pantalla_en_blanco
    1148   00:478B                      		
    1149   00:478B  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 4
    1150   00:478E  FE 00               		cp		0
    1151   00:4790  28 05               		jr.		z,bloque_sanctuary_4_esp
    1152   00:4792  21 0F AD            		ld		hl,sanctuary_4
    1153   00:4795  18 03               		jr.		bloque_sanctuary_4_cont
    1154   00:4797                      
    1155   00:4797                      bloque_sanctuary_4_esp:
    1156   00:4797                      
    1157   00:4797  21 87 AD            		ld		hl,sanctuario_4
    1158   00:479A                      
    1159   00:479A                      bloque_sanctuary_4_cont:
    1160   00:479A                      
    1161   00:479A  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1162   00:479D                      
    1163   00:479D                      		;		variables coordenadas prota
    1164   00:479D                      		
    1165   00:479D  3E A8               		ld		a,168													;define variables
    1166   00:479F  32 12 C0            		ld		(px),a
    1167   00:47A2  32 51 C0            		ld		(px_salida),a
    1168   00:47A5  3E A8               		ld		a,168						
    1169   00:47A7  32 13 C0            		ld		(py),a
    1170   00:47AA  32 52 C0            		ld		(py_salida),a
    1171   00:47AD                      		
    1172   00:47AD  CD EE 4C            		call	variables_iguales
    1173   00:47B0                      		
    1174   00:47B0                      		;variables coordenadas serpientes
    1175   00:47B0                      		
    1176   00:47B0  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1177   00:47B4                      		
    1178   00:47B4  3E A8               		ld		a,168
    1179   00:47B6  FD 77 01            		ld		(iy+1),a
    1180   00:47B9  3E 60               		ld		a,96
    1181   00:47BB  FD 77 00            		ld		(iy),a
    1182   00:47BE  FD 77 02            		ld		(iy+2),a
    1183   00:47C1  3E FF               		ld		a,255
    1184   00:47C3  FD 77 08            		ld		(iy+8),a
    1185   00:47C6  3E 05               		ld		a,5
    1186   00:47C8  FD 77 05            		ld		(iy+5),a
    1187   00:47CB  3E 01               		ld		a,1
    1188   00:47CD  FD 77 07            		ld		(iy+7),a
    1189   00:47D0  3E 08               		ld		a,8
    1190   00:47D2  FD 77 04            		ld		(iy+4),a
    1191   00:47D5                      		
    1192   00:47D5  FD 21 51 C3         		ld		iy,variables_serpiente_2
    1193   00:47D9                      		
    1194   00:47D9  3E 10               		ld		a,16
    1195   00:47DB  FD 77 01            		ld		(iy+1),a
    1196   00:47DE  3E 78               		ld		a,120
    1197   00:47E0  FD 77 00            		ld		(iy),a
    1198   00:47E3  3E 01               		ld		a,1
    1199   00:47E5  FD 77 02            		ld		(iy+2),a
    1200   00:47E8  3E FF               		ld		a,255
    1201   00:47EA  FD 77 08            		ld		(iy+8),a
    1202   00:47ED  3E 0E               		ld		a,14
    1203   00:47EF  FD 77 05            		ld		(iy+5),a
    1204   00:47F2  3E 02               		ld		a,2
    1205   00:47F4  FD 77 07            		ld		(iy+7),a
    1206   00:47F7  3E 08               		ld		a,8
    1207   00:47F9  FD 77 04            		ld		(iy+4),a		
    1208   00:47FC                      		
    1209   00:47FC  3E 01               		ld		a,1	
    1210   00:47FE  32 6D C3            		ld		(serp1),a
    1211   00:4801  32 6E C3            		ld		(serp2),a
    1212   00:4804                      		
    1213   00:4804                      		;		otras variables
    1214   00:4804                      		
    1215   00:4804  3E 04               		ld		a,4
    1216   00:4806  32 19 C0            		ld		(fase_en_la_que_esta),a
    1217   00:4809  21 B5 02            		ld		hl,693
    1218   00:480C  22 3A C3            		ld		(posicion_puerta),hl
    1219   00:480F                      
    1220   00:480F  21 C8 00            		ld		hl,200
    1221   00:4812  22 10 C0            		ld		(clock),hl						
    1222   00:4815  CD 84 4E            		call	rutina_de_esperar_un_rato
    1223   00:4818                      		
    1224   00:4818  CD 4F 4E            		call	activa_musica_fases
    1225   00:481B                      		
    1226   00:481B  21 A0 A4            		ld		hl,fase_4												;cargamos sanctuary 4 en ram
    1227   00:481E  11 57 C0            		ld		de,buffer_colisiones
    1228   00:4821  CD CB 6D            		call	depack
    1229   00:4824                      		
    1230   00:4824  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1231   00:4827                      
    1232   00:4827  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1233   00:482A                      		
    1234   00:482A  C3 DE 53            		jr.		repite_fase
    1235   00:482D                      
    1236   00:482D                      bloque_sanctuary_5:
    1237   00:482D                      		
    1238   00:482D  CD C0 4C            		call	pantalla_en_blanco
    1239   00:4830                      		
    1240   00:4830  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 5
    1241   00:4833  FE 00               		cp		0
    1242   00:4835  28 05               		jr.		z,bloque_sanctuary_5_esp
    1243   00:4837  21 1B AD            		ld		hl,sanctuary_5
    1244   00:483A  18 03               		jr.		bloque_sanctuary_5_cont
    1245   00:483C                      
    1246   00:483C                      bloque_sanctuary_5_esp:
    1247   00:483C                      
    1248   00:483C  21 93 AD            		ld		hl,sanctuario_5
    1249   00:483F                      
    1250   00:483F                      bloque_sanctuary_5_cont:
    1251   00:483F                      											;anunciamos sanctuary 5
    1252   00:483F  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1253   00:4842                      
    1254   00:4842                      		;		coordenadas prota
    1255   00:4842                      		
    1256   00:4842  3E 78               		ld		a,120													;define variables
    1257   00:4844  32 12 C0            		ld		(px),a
    1258   00:4847  32 51 C0            		ld		(px_salida),a
    1259   00:484A  3E 18               		ld		a,24						
    1260   00:484C  32 13 C0            		ld		(py),a
    1261   00:484F  32 52 C0            		ld		(py_salida),a
    1262   00:4852                      		
    1263   00:4852  CD EE 4C            		call	variables_iguales
    1264   00:4855                      		
    1265   00:4855                      		;		coordenadas serpientes
    1266   00:4855                      		
    1267   00:4855  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1268   00:4859  3E 78               		ld		a,120
    1269   00:485B  FD 77 00            		ld		(iy),a
    1270   00:485E  3E A8               		ld		a,168
    1271   00:4860  FD 77 01            		ld		(iy+1),a
    1272   00:4863  AF                  		xor	a
    1273   00:4864  FD 77 02            		ld		(iy+2),a
    1274   00:4867  FD 77 03            		ld		(iy+3),a
    1275   00:486A  3E 08               		ld		a,8
    1276   00:486C  FD 77 04            		ld		(iy+4),a
    1277   00:486F  FD 77 05            		ld		(iy+5),a
    1278   00:4872  AF                  		xor		a
    1279   00:4873  FD 77 06            		ld		(iy+6),a
    1280   00:4876  3E 01               		ld		a,1
    1281   00:4878  FD 77 07            		ld		(iy+7),a
    1282   00:487B  3E FF               		ld		a,255
    1283   00:487D  FD 77 08            		ld		(iy+8),a
    1284   00:4880                      				
    1285   00:4880  3E 01               		ld		a,1
    1286   00:4882  32 6D C3            		ld		(serp1),a
    1287   00:4885                      						
    1288   00:4885                      		;		otras variables
    1289   00:4885                      		
    1290   00:4885  21 D2 00            		ld		hl,210
    1291   00:4888  22 7B C3            		ld		(posicion_escalera),hl
    1292   00:488B  21 52 00            		ld		hl,82
    1293   00:488E  22 7E C3            		ld		(limite_escalera),hl
    1294   00:4891  3E 05               		ld		a,5
    1295   00:4893  32 19 C0            		ld		(fase_en_la_que_esta),a
    1296   00:4896  21 6F 00            		ld		hl,111
    1297   00:4899  22 3A C3            		ld		(posicion_puerta),hl
    1298   00:489C                      		
    1299   00:489C  21 C8 00            		ld		hl,200
    1300   00:489F  22 10 C0            		ld		(clock),hl						
    1301   00:48A2  CD 84 4E            		call	rutina_de_esperar_un_rato
    1302   00:48A5                      		
    1303   00:48A5  CD 4F 4E            		call	activa_musica_fases
    1304   00:48A8                      
    1305   00:48A8  21 89 A5            		ld		hl,fase_5					;cargamos sanctuary 1 en ram
    1306   00:48AB  11 57 C0            		ld		de,buffer_colisiones
    1307   00:48AE  CD CB 6D            		call	depack
    1308   00:48B1                      		
    1309   00:48B1  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1310   00:48B4                      
    1311   00:48B4  CD A6 4E            		call 	gran_rutina					;vamos a la rutina de movimientos general
    1312   00:48B7                      		
    1313   00:48B7  C3 DE 53            		jr.		repite_fase
    1314   00:48BA                      
    1315   00:48BA                      bloque_sanctuary_6:
    1316   00:48BA                      		
    1317   00:48BA  CD C0 4C            		call	pantalla_en_blanco
    1318   00:48BD                      		
    1319   00:48BD  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 6
    1320   00:48C0  FE 00               		cp		0
    1321   00:48C2  28 05               		jr.		z,bloque_sanctuary_6_esp
    1322   00:48C4  21 27 AD            		ld		hl,sanctuary_6
    1323   00:48C7  18 03               		jr.		bloque_sanctuary_6_cont
    1324   00:48C9                      
    1325   00:48C9                      bloque_sanctuary_6_esp:
    1326   00:48C9                      
    1327   00:48C9  21 9F AD            		ld		hl,sanctuario_6
    1328   00:48CC                      
    1329   00:48CC                      bloque_sanctuary_6_cont:
    1330   00:48CC                      
    1331   00:48CC  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1332   00:48CF                      
    1333   00:48CF                      		;		coordenadas prota
    1334   00:48CF                      
    1335   00:48CF  3E E8               		ld		a,232						;define variables
    1336   00:48D1  32 12 C0            		ld		(px),a
    1337   00:48D4  32 51 C0            		ld		(px_salida),a
    1338   00:48D7  3E 18               		ld		a,24						
    1339   00:48D9  32 13 C0            		ld		(py),a
    1340   00:48DC  32 52 C0            		ld		(py_salida),a
    1341   00:48DF                      		
    1342   00:48DF  CD EE 4C            		call	variables_iguales
    1343   00:48E2                      		
    1344   00:48E2                      		;		coordenadas serpientes
    1345   00:48E2                      		
    1346   00:48E2  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1347   00:48E6  3E C8               		ld		a,200
    1348   00:48E8  FD 77 00            		ld		(iy),a
    1349   00:48EB  3E 38               		ld		a,56
    1350   00:48ED  FD 77 01            		ld		(iy+1),a
    1351   00:48F0  AF                  		xor	a
    1352   00:48F1  FD 77 02            		ld		(iy+2),a
    1353   00:48F4  FD 77 03            		ld		(iy+3),a
    1354   00:48F7  3E 08               		ld		a,8
    1355   00:48F9  FD 77 04            		ld		(iy+4),a
    1356   00:48FC  FD 77 05            		ld		(iy+5),a
    1357   00:48FF  AF                  		xor		a
    1358   00:4900  FD 77 06            		ld		(iy+6),a
    1359   00:4903  3E 02               		ld		a,2
    1360   00:4905  FD 77 07            		ld		(iy+7),a
    1361   00:4908  3E FF               		ld		a,255
    1362   00:490A  FD 77 08            		ld		(iy+8),a
    1363   00:490D                      		
    1364   00:490D  FD 21 51 C3         		ld		iy,variables_serpiente_2
    1365   00:4911  3E 78               		ld		a,120
    1366   00:4913  FD 77 00            		ld		(iy),a
    1367   00:4916  3E 50               		ld		a,80
    1368   00:4918  FD 77 01            		ld		(iy+1),a
    1369   00:491B  AF                  		xor	a
    1370   00:491C  FD 77 02            		ld		(iy+2),a
    1371   00:491F  FD 77 03            		ld		(iy+3),a
    1372   00:4922  3E 0E               		ld		a,14
    1373   00:4924  FD 77 04            		ld		(iy+4),a
    1374   00:4927  FD 77 05            		ld		(iy+5),a
    1375   00:492A  AF                  		xor		a
    1376   00:492B  FD 77 06            		ld		(iy+6),a
    1377   00:492E  3E 03               		ld		a,3
    1378   00:4930  FD 77 07            		ld		(iy+7),a
    1379   00:4933  3E FF               		ld		a,255
    1380   00:4935  FD 77 08            		ld		(iy+8),a
    1381   00:4938                      		
    1382   00:4938  FD 21 5A C3         		ld		iy,variables_serpiente_3
    1383   00:493C  3E 68               		ld		a,104
    1384   00:493E  FD 77 00            		ld		(iy),a
    1385   00:4941  3E 90               		ld		a,144
    1386   00:4943  FD 77 01            		ld		(iy+1),a
    1387   00:4946  AF                  		xor	a
    1388   00:4947  FD 77 02            		ld		(iy+2),a
    1389   00:494A  FD 77 03            		ld		(iy+3),a
    1390   00:494D  3E 02               		ld		a,2
    1391   00:494F  FD 77 04            		ld		(iy+4),a
    1392   00:4952  FD 77 05            		ld		(iy+5),a
    1393   00:4955  AF                  		xor		a
    1394   00:4956  FD 77 06            		ld		(iy+6),a
    1395   00:4959  3E 01               		ld		a,1
    1396   00:495B  FD 77 07            		ld		(iy+7),a
    1397   00:495E  3E FF               		ld		a,255
    1398   00:4960  FD 77 08            		ld		(iy+8),a
    1399   00:4963                      		
    1400   00:4963                      				
    1401   00:4963  3E 01               		ld		a,1
    1402   00:4965  32 6D C3            		ld		(serp1),a
    1403   00:4968  32 6E C3            		ld		(serp2),a
    1404   00:496B  32 6F C3            		ld		(serp3),a
    1405   00:496E                      						
    1406   00:496E                      		;		otras variables
    1407   00:496E                      		
    1408   00:496E  21 CF 00            		ld		hl,207
    1409   00:4971  22 7B C3            		ld		(posicion_escalera),hl
    1410   00:4974  21 4F 00            		ld		hl,79
    1411   00:4977  22 7E C3            		ld		(limite_escalera),hl
    1412   00:497A  3E 06               		ld		a,6
    1413   00:497C  32 19 C0            		ld		(fase_en_la_que_esta),a
    1414   00:497F  21 7D 00            		ld		hl,125
    1415   00:4982  22 3A C3            		ld		(posicion_puerta),hl
    1416   00:4985                      					
    1417   00:4985  21 C8 00            		ld		hl,200
    1418   00:4988  22 10 C0            		ld		(clock),hl						
    1419   00:498B  CD 84 4E            		call	rutina_de_esperar_un_rato
    1420   00:498E                      		
    1421   00:498E  CD 4F 4E            		call	activa_musica_fases
    1422   00:4991                      		
    1423   00:4991  21 B8 A6            		ld		hl,fase_6												;cargamos sanctuary 6 en ram
    1424   00:4994  11 57 C0            		ld		de,buffer_colisiones
    1425   00:4997  CD CB 6D            		call	depack
    1426   00:499A                      		
    1427   00:499A  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1428   00:499D                      
    1429   00:499D  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1430   00:49A0                      		
    1431   00:49A0  C3 DE 53            		jr.		repite_fase
    1432   00:49A3                      
    1433   00:49A3                      bloque_sanctuary_7:
    1434   00:49A3                      		
    1435   00:49A3  CD C0 4C            		call	pantalla_en_blanco
    1436   00:49A6                      		
    1437   00:49A6  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 7
    1438   00:49A9  FE 00               		cp		0
    1439   00:49AB  28 05               		jr.		z,bloque_sanctuary_7_esp
    1440   00:49AD  21 33 AD            		ld		hl,sanctuary_7
    1441   00:49B0  18 03               		jr.		bloque_sanctuary_7_cont
    1442   00:49B2                      
    1443   00:49B2                      bloque_sanctuary_7_esp:
    1444   00:49B2                      
    1445   00:49B2  21 AB AD            		ld		hl,sanctuario_7
    1446   00:49B5                      
    1447   00:49B5                      bloque_sanctuary_7_cont:
    1448   00:49B5                      
    1449   00:49B5  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1450   00:49B8                      
    1451   00:49B8  CD 80 4D            		call	SPRITES_DOS
    1452   00:49BB                      		
    1453   00:49BB                      		;		coordenadas prota
    1454   00:49BB                      
    1455   00:49BB  3E 78               		ld		a,120													;define variables
    1456   00:49BD  32 12 C0            		ld		(px),a
    1457   00:49C0  32 51 C0            		ld		(px_salida),a
    1458   00:49C3  3E 18               		ld		a,24						
    1459   00:49C5  32 13 C0            		ld		(py),a
    1460   00:49C8  32 52 C0            		ld		(py_salida),a
    1461   00:49CB                      		
    1462   00:49CB  CD EE 4C            		call	variables_iguales
    1463   00:49CE                      		
    1464   00:49CE                      		;		coordenadas bombero
    1465   00:49CE                      		
    1466   00:49CE  FD 21 85 C3         		ld		iy,bombero_control
    1467   00:49D2  3E 78               		ld		a,120
    1468   00:49D4  FD 77 00            		ld		(iy),a
    1469   00:49D7  3E 18               		ld		a,24
    1470   00:49D9  FD 77 01            		ld		(iy+1),a
    1471   00:49DC  3E 02               		ld		a,2
    1472   00:49DE  FD 77 02            		ld		(iy+2),a
    1473   00:49E1  3E 96               		ld		a,150
    1474   00:49E3  FD 77 03            		ld		(iy+3),a
    1475   00:49E6  3E 0A               		ld		a,10
    1476   00:49E8  FD 77 04            		ld		(iy+4),a
    1477   00:49EB  AF                  		xor		a
    1478   00:49EC  FD 77 05            		ld		(iy+5),a
    1479   00:49EF  FD 77 06            		ld		(iy+6),a
    1480   00:49F2  FD 77 07            		ld		(iy+7),a
    1481   00:49F5  FD 77 0A            		ld		(iy+10),a
    1482   00:49F8  3E C8               		ld		a,200
    1483   00:49FA  FD 77 08            		ld		(iy+8),a
    1484   00:49FD  3E 01               		ld		a,1
    1485   00:49FF  FD 77 09            		ld		(iy+9),a
    1486   00:4A02                      								
    1487   00:4A02                      		;		otras variables
    1488   00:4A02                      		
    1489   00:4A02  21 AF 02            		ld		hl,687
    1490   00:4A05  22 7B C3            		ld		(posicion_escalera),hl
    1491   00:4A08  21 2F 02            		ld		hl,559
    1492   00:4A0B  22 7E C3            		ld		(limite_escalera),hl
    1493   00:4A0E  3E 07               		ld		a,7
    1494   00:4A10  32 19 C0            		ld		(fase_en_la_que_esta),a
    1495   00:4A13  21 6F 00            		ld		hl,111
    1496   00:4A16  22 3A C3            		ld		(posicion_puerta),hl
    1497   00:4A19  3E 01               		ld		a,1
    1498   00:4A1B  32 84 C3            		ld		(bombero_1),a
    1499   00:4A1E                      					
    1500   00:4A1E  21 C8 00            		ld		hl,200
    1501   00:4A21  22 10 C0            		ld		(clock),hl						
    1502   00:4A24  CD 84 4E            		call	rutina_de_esperar_un_rato
    1503   00:4A27                      		
    1504   00:4A27  CD 4F 4E            		call	activa_musica_fases
    1505   00:4A2A                      
    1506   00:4A2A  21 F5 A7            		ld		hl,fase_7					;cargamos sanctuary 1 en ram
    1507   00:4A2D  11 57 C0            		ld		de,buffer_colisiones
    1508   00:4A30  CD CB 6D            		call	depack
    1509   00:4A33                      		
    1510   00:4A33  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1511   00:4A36                      
    1512   00:4A36  CD A6 4E            		call 	gran_rutina					;vamos a la rutina de movimientos general
    1513   00:4A39                      		
    1514   00:4A39  C3 DE 53            		jr.		repite_fase
    1515   00:4A3C                      
    1516   00:4A3C                      bloque_sanctuary_8:
    1517   00:4A3C                      		
    1518   00:4A3C  CD C0 4C            		call	pantalla_en_blanco
    1519   00:4A3F                      		
    1520   00:4A3F  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 8
    1521   00:4A42  FE 00               		cp		0
    1522   00:4A44  28 05               		jr.		z,bloque_sanctuary_8_esp
    1523   00:4A46  21 3F AD            		ld		hl,sanctuary_8
    1524   00:4A49  18 03               		jr.		bloque_sanctuary_8_cont
    1525   00:4A4B                      
    1526   00:4A4B                      bloque_sanctuary_8_esp:
    1527   00:4A4B                      
    1528   00:4A4B  21 B7 AD            		ld		hl,sanctuario_8
    1529   00:4A4E                      
    1530   00:4A4E                      bloque_sanctuary_8_cont:
    1531   00:4A4E                      
    1532   00:4A4E  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1533   00:4A51                      		
    1534   00:4A51  CD 80 4D            		call	SPRITES_DOS
    1535   00:4A54                      		
    1536   00:4A54                      		;		coordenadas prota
    1537   00:4A54                      
    1538   00:4A54  3E 10               		ld		a,16													;define variables
    1539   00:4A56  32 12 C0            		ld		(px),a
    1540   00:4A59  32 51 C0            		ld		(px_salida),a
    1541   00:4A5C  3E 18               		ld		a,24						
    1542   00:4A5E  32 13 C0            		ld		(py),a
    1543   00:4A61  32 52 C0            		ld		(py_salida),a
    1544   00:4A64                      		
    1545   00:4A64  CD EE 4C            		call	variables_iguales
    1546   00:4A67                      		
    1547   00:4A67                      		;		coordenadas bombero
    1548   00:4A67                      		
    1549   00:4A67  FD 21 85 C3         		ld		iy,bombero_control
    1550   00:4A6B  3E 10               		ld		a,16
    1551   00:4A6D  FD 77 00            		ld		(iy),a
    1552   00:4A70  3E 18               		ld		a,24
    1553   00:4A72  FD 77 01            		ld		(iy+1),a
    1554   00:4A75  3E 02               		ld		a,2
    1555   00:4A77  FD 77 02            		ld		(iy+2),a
    1556   00:4A7A  3E 96               		ld		a,150
    1557   00:4A7C  FD 77 03            		ld		(iy+3),a
    1558   00:4A7F  3E 0A               		ld		a,10
    1559   00:4A81  FD 77 04            		ld		(iy+4),a
    1560   00:4A84  AF                  		xor		a
    1561   00:4A85  FD 77 05            		ld		(iy+5),a
    1562   00:4A88  FD 77 06            		ld		(iy+6),a
    1563   00:4A8B  FD 77 07            		ld		(iy+7),a
    1564   00:4A8E  FD 77 0A            		ld		(iy+10),a
    1565   00:4A91  3E C8               		ld		a,200
    1566   00:4A93  FD 77 08            		ld		(iy+8),a
    1567   00:4A96  3E 01               		ld		a,1
    1568   00:4A98  FD 77 09            		ld		(iy+9),a
    1569   00:4A9B                      								
    1570   00:4A9B                      		;		otras variables
    1571   00:4A9B                      		
    1572   00:4A9B  21 A4 02            		ld		hl,676
    1573   00:4A9E  22 7B C3            		ld		(posicion_escalera),hl
    1574   00:4AA1  21 24 02            		ld		hl,548
    1575   00:4AA4  22 7E C3            		ld		(limite_escalera),hl
    1576   00:4AA7  3E 08               		ld		a,8
    1577   00:4AA9  32 19 C0            		ld		(fase_en_la_que_esta),a
    1578   00:4AAC  21 62 00            		ld		hl,98
    1579   00:4AAF  22 3A C3            		ld		(posicion_puerta),hl
    1580   00:4AB2  3E 01               		ld		a,1
    1581   00:4AB4  32 84 C3            		ld		(bombero_1),a
    1582   00:4AB7                      					
    1583   00:4AB7  21 C8 00            		ld		hl,200
    1584   00:4ABA  22 10 C0            		ld		(clock),hl						
    1585   00:4ABD  CD 84 4E            		call	rutina_de_esperar_un_rato
    1586   00:4AC0                      		
    1587   00:4AC0  CD 4F 4E            		call	activa_musica_fases
    1588   00:4AC3                      
    1589   00:4AC3  21 E1 A8            		ld		hl,fase_8												;cargamos sanctuary 8 en ram
    1590   00:4AC6  11 57 C0            		ld		de,buffer_colisiones
    1591   00:4AC9  CD CB 6D            		call	depack
    1592   00:4ACC                      		
    1593   00:4ACC  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1594   00:4ACF                      
    1595   00:4ACF  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1596   00:4AD2                      		
    1597   00:4AD2  C3 DE 53            		jr.		repite_fase
    1598   00:4AD5                      
    1599   00:4AD5                      bloque_sanctuary_9:
    1600   00:4AD5                      		
    1601   00:4AD5  CD C0 4C            		call	pantalla_en_blanco
    1602   00:4AD8                      		
    1603   00:4AD8  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 9
    1604   00:4ADB  FE 00               		cp		0
    1605   00:4ADD  28 05               		jr.		z,bloque_sanctuary_9_esp
    1606   00:4ADF  21 4B AD            		ld		hl,sanctuary_9
    1607   00:4AE2  18 03               		jr.		bloque_sanctuary_9_cont
    1608   00:4AE4                      
    1609   00:4AE4                      bloque_sanctuary_9_esp:
    1610   00:4AE4                      
    1611   00:4AE4  21 C3 AD            		ld		hl,sanctuario_9
    1612   00:4AE7                      
    1613   00:4AE7                      bloque_sanctuary_9_cont:
    1614   00:4AE7                      
    1615   00:4AE7  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1616   00:4AEA                      
    1617   00:4AEA  CD 70 4D            		call	SPRITES_UNO
    1618   00:4AED                      		
    1619   00:4AED                      		;		coordenadas prota
    1620   00:4AED                      
    1621   00:4AED  3E 6A               		ld		a,106													;define variables
    1622   00:4AEF  32 12 C0            		ld		(px),a
    1623   00:4AF2  32 51 C0            		ld		(px_salida),a
    1624   00:4AF5  3E A8               		ld		a,168						
    1625   00:4AF7  32 13 C0            		ld		(py),a
    1626   00:4AFA  32 52 C0            		ld		(py_salida),a
    1627   00:4AFD                      		
    1628   00:4AFD  CD EE 4C            		call	variables_iguales
    1629   00:4B00                      		
    1630   00:4B00                      		;		coordenadas serpientes
    1631   00:4B00                      		
    1632   00:4B00  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1633   00:4B04  3E 78               		ld		a,120
    1634   00:4B06  FD 77 00            		ld		(iy),a
    1635   00:4B09  FD 77 01            		ld		(iy+1),a
    1636   00:4B0C  AF                  		xor	a
    1637   00:4B0D  FD 77 02            		ld		(iy+2),a
    1638   00:4B10  FD 77 03            		ld		(iy+3),a
    1639   00:4B13  3E 08               		ld		a,8
    1640   00:4B15  FD 77 04            		ld		(iy+4),a
    1641   00:4B18  FD 77 05            		ld		(iy+5),a
    1642   00:4B1B  AF                  		xor		a
    1643   00:4B1C  FD 77 06            		ld		(iy+6),a
    1644   00:4B1F  3E 02               		ld		a,2
    1645   00:4B21  FD 77 07            		ld		(iy+7),a
    1646   00:4B24  3E FF               		ld		a,255
    1647   00:4B26  FD 77 08            		ld		(iy+8),a
    1648   00:4B29                      		
    1649   00:4B29  3E 01               		ld		a,1
    1650   00:4B2B  32 6D C3            		ld		(serp1),a
    1651   00:4B2E                      								
    1652   00:4B2E                      		;		otras variables
    1653   00:4B2E                      		
    1654   00:4B2E  21 DD 00            		ld		hl,221
    1655   00:4B31  22 7B C3            		ld		(posicion_escalera),hl
    1656   00:4B34  21 5D 00            		ld		hl,93
    1657   00:4B37  22 7E C3            		ld		(limite_escalera),hl
    1658   00:4B3A  3E 09               		ld		a,9
    1659   00:4B3C  32 19 C0            		ld		(fase_en_la_que_esta),a
    1660   00:4B3F  21 AD 02            		ld		hl,685
    1661   00:4B42  22 3A C3            		ld		(posicion_puerta),hl
    1662   00:4B45                      							
    1663   00:4B45  21 C8 00            		ld		hl,200
    1664   00:4B48  22 10 C0            		ld		(clock),hl						
    1665   00:4B4B  CD 84 4E            		call	rutina_de_esperar_un_rato
    1666   00:4B4E                      		
    1667   00:4B4E  CD 4F 4E            		call	activa_musica_fases
    1668   00:4B51                      
    1669   00:4B51  21 E9 A9            		ld		hl,fase_9					;cargamos sanctuary 1 en ram
    1670   00:4B54  11 57 C0            		ld		de,buffer_colisiones
    1671   00:4B57  CD CB 6D            		call	depack
    1672   00:4B5A                      		
    1673   00:4B5A  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1674   00:4B5D                      
    1675   00:4B5D  CD A6 4E            		call 	gran_rutina					;vamos a la rutina de movimientos general
    1676   00:4B60                      		
    1677   00:4B60  C3 DE 53            		jr.		repite_fase
    1678   00:4B63                      
    1679   00:4B63                      bloque_sanctuary_10:
    1680   00:4B63                      		
    1681   00:4B63  CD C0 4C            		call	pantalla_en_blanco
    1682   00:4B66                      		
    1683   00:4B66  3A 01 C0            		ld		a,(idioma)												;anunciamos sanctuary 10
    1684   00:4B69  FE 00               		cp		0
    1685   00:4B6B  28 05               		jr.		z,bloque_sanctuary_10_esp
    1686   00:4B6D  21 57 AD            		ld		hl,sanctuary_10
    1687   00:4B70  18 03               		jr.		bloque_sanctuary_10_cont
    1688   00:4B72                      
    1689   00:4B72                      bloque_sanctuary_10_esp:
    1690   00:4B72                      
    1691   00:4B72  21 CF AD            		ld		hl,sanctuario_10
    1692   00:4B75                      
    1693   00:4B75                      bloque_sanctuary_10_cont:
    1694   00:4B75                      
    1695   00:4B75  CD E5 4C            		call	anunciamos_el_santuario_correspondiente
    1696   00:4B78                      
    1697   00:4B78  CD 80 4D            		call	SPRITES_DOS
    1698   00:4B7B                      		
    1699   00:4B7B                      		;		coordenadas prota
    1700   00:4B7B                      
    1701   00:4B7B  3E D8               		ld		a,216													;define variables
    1702   00:4B7D  32 12 C0            		ld		(px),a
    1703   00:4B80  32 51 C0            		ld		(px_salida),a
    1704   00:4B83  3E 18               		ld		a,24						
    1705   00:4B85  32 13 C0            		ld		(py),a
    1706   00:4B88  32 52 C0            		ld		(py_salida),a
    1707   00:4B8B                      		
    1708   00:4B8B  CD EE 4C            		call	variables_iguales
    1709   00:4B8E                      		
    1710   00:4B8E                      		;		coordenadas bombero
    1711   00:4B8E                      		
    1712   00:4B8E  FD 21 85 C3         		ld		iy,bombero_control
    1713   00:4B92  3E D8               		ld		a,216
    1714   00:4B94  FD 77 00            		ld		(iy),a
    1715   00:4B97  3E 18               		ld		a,24
    1716   00:4B99  FD 77 01            		ld		(iy+1),a
    1717   00:4B9C  3E 02               		ld		a,2
    1718   00:4B9E  FD 77 02            		ld		(iy+2),a
    1719   00:4BA1  3E 96               		ld		a,150
    1720   00:4BA3  FD 77 03            		ld		(iy+3),a
    1721   00:4BA6  3E 0A               		ld		a,10
    1722   00:4BA8  FD 77 04            		ld		(iy+4),a
    1723   00:4BAB  AF                  		xor		a
    1724   00:4BAC  FD 77 05            		ld		(iy+5),a
    1725   00:4BAF  FD 77 06            		ld		(iy+6),a
    1726   00:4BB2  FD 77 07            		ld		(iy+7),a
    1727   00:4BB5  FD 77 0A            		ld		(iy+10),a
    1728   00:4BB8  3E C8               		ld		a,200
    1729   00:4BBA  FD 77 08            		ld		(iy+8),a
    1730   00:4BBD  3E 04               		ld		a,4
    1731   00:4BBF  FD 77 09            		ld		(iy+9),a
    1732   00:4BC2                      								
    1733   00:4BC2                      		;		otras variables
    1734   00:4BC2                      		
    1735   00:4BC2  21 DD 00            		ld		hl,221
    1736   00:4BC5  22 7B C3            		ld		(posicion_escalera),hl
    1737   00:4BC8  21 5D 00            		ld		hl,93
    1738   00:4BCB  22 7E C3            		ld		(limite_escalera),hl
    1739   00:4BCE  3E 0A               		ld		a,10
    1740   00:4BD0  32 19 C0            		ld		(fase_en_la_que_esta),a
    1741   00:4BD3  21 7A 00            		ld		hl,122
    1742   00:4BD6  22 3A C3            		ld		(posicion_puerta),hl
    1743   00:4BD9  AF                  		xor		a
    1744   00:4BDA  32 82 C3            		ld		(vision_estado),a
    1745   00:4BDD  3E 01               		ld		a,1
    1746   00:4BDF  32 84 C3            		ld		(bombero_1),a
    1747   00:4BE2                      							
    1748   00:4BE2  21 C8 00            		ld		hl,200
    1749   00:4BE5  22 10 C0            		ld		(clock),hl						
    1750   00:4BE8  CD 84 4E            		call	rutina_de_esperar_un_rato
    1751   00:4BEB                      		
    1752   00:4BEB  CD 4F 4E            		call	activa_musica_fases
    1753   00:4BEE                      
    1754   00:4BEE  21 04 AB            		ld		hl,fase_10												;cargamos sanctuary 10 en ram
    1755   00:4BF1  11 57 C0            		ld		de,buffer_colisiones
    1756   00:4BF4  CD CB 6D            		call	depack
    1757   00:4BF7                      		
    1758   00:4BF7  CD C0 4C            		call	pantalla_en_blanco
    1759   00:4BFA                      
    1760   00:4BFA  3E 5D               		ld		a,93
    1761   00:4BFC  32 EE EE            		ld		[#eeee],a
    1762   00:4BFF  21 EE EE            		ld		hl,#eeee												;pinta el mando de la luz
    1763   00:4C02  11 C4 19            		ld		de,#19c4
    1764   00:4C05  01 01 00            		ld		bc,1
    1765   00:4C08  CD 5C 00            		call	GRABAVRAM
    1766   00:4C0B                      
    1767   00:4C0B  CD A6 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1768   00:4C0E                      		
    1769   00:4C0E  C3 DE 53            		jr.		repite_fase
    1770   00:4C11                      		
    1771   00:4C11                      FINAL_TEMPLO:
    1772   00:4C11                      		
    1773   00:4C11  CD 41 00            		call	DISSCR
    1774   00:4C14  21 19 AC            		ld		hl,FINAL												;cargamos FINAL en ram
    1775   00:4C17  11 57 C0            		ld		de,buffer_colisiones
    1776   00:4C1A  CD CB 6D            		call	depack
    1777   00:4C1D                      		
    1778   00:4C1D  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1779   00:4C20  3A 01 C0            		ld		a,(idioma)
    1780   00:4C23  FE 00               		cp		0
    1781   00:4C25  20 18               		jr.		nz,FINAL_TEMPLO_CONTINUA
    1782   00:4C27                      		
    1783   00:4C27  21 73 AF            		ld		hl,lo_has_logrado
    1784   00:4C2A  11 80 18            		ld		de,#1880
    1785   00:4C2D  01 1F 00            		ld		bc,31
    1786   00:4C30  CD 5C 00            		call	GRABAVRAM
    1787   00:4C33                      		
    1788   00:4C33  21 92 AF            		ld		hl,felicidades
    1789   00:4C36  11 A1 1A            		ld		de,#1aa1
    1790   00:4C39  01 1E 00            		ld		bc,30
    1791   00:4C3C  CD 5C 00            		call	GRABAVRAM
    1792   00:4C3F                      		
    1793   00:4C3F                      FINAL_TEMPLO_CONTINUA:
    1794   00:4C3F                      
    1795   00:4C3F  CD 44 00            		call	ENASCR
    1796   00:4C42                      		;		coordenadas prota
    1797   00:4C42                      
    1798   00:4C42  3E 70               		ld		a,112													;define variables
    1799   00:4C44  32 12 C0            		ld		(px),a
    1800   00:4C47  32 13 C0            		ld		(py),a
    1801   00:4C4A                      
    1802   00:4C4A  3E 0C               		ld		a,12
    1803   00:4C4C  32 19 C0            		ld		(fase_en_la_que_esta),a
    1804   00:4C4F                      		
    1805   00:4C4F  3A E0 F3            		ld		a,(RG1SAV)
    1806   00:4C52  F6 01               		or		00000001b												;modo sprites ampliados
    1807   00:4C54  47                  		ld		b,a
    1808   00:4C55  0E 01               		ld		c,1
    1809   00:4C57  CD 47 00            		call	WRTVDP													;lo escribe en el registro 1 del VDP
    1810   00:4C5A                      		
    1811   00:4C5A  CD 63 4E            		call	activa_musica_menu
    1812   00:4C5D                      		
    1813   00:4C5D  DD 21 20 C0         		ld		ix,atributos_sprite_general
    1814   00:4C61                      		
    1815   00:4C61  3E 32               		ld		a,50
    1816   00:4C63  32 04 C0            		ld		(petisoy),a
    1817   00:4C66  3E 70               		ld		a,112
    1818   00:4C68  32 03 C0            		ld		(petisox),a
    1819   00:4C6B  3E 0A               		ld		a,10
    1820   00:4C6D  32 05 C0            		ld		(espera_petiso),a
    1821   00:4C70  32 07 C0            		ld		(espera_petiso_resta_2),a
    1822   00:4C73  32 06 C0            		ld		(espera_petiso_resta),a
    1823   00:4C76                      		
    1824   00:4C76  CD 63 4D            		call	SPRITES_PETISOS
    1825   00:4C79                      		
    1826   00:4C79                      animacion_final:
    1827   00:4C79                      		
    1828   00:4C79                      		
    1829   00:4C79                      		
    1830   00:4C79  3A 13 C0            		ld		a,(py)
    1831   00:4C7C  DD 77 10            		ld		(ix+16),a
    1832   00:4C7F  DD 77 14            		ld		(ix+20),a
    1833   00:4C82  3A 12 C0            		ld		a,(px)
    1834   00:4C85  DD 77 11            		ld		(ix+17),a
    1835   00:4C88  DD 77 15            		ld		(ix+21),a
    1836   00:4C8B  3E CC               		ld		a,51*4
    1837   00:4C8D  DD 77 12            		ld		(ix+18),a
    1838   00:4C90  3E D0               		ld		a,52*4
    1839   00:4C92  DD 77 16            		ld		(ix+22),a
    1840   00:4C95  3E 01               		ld		a,1
    1841   00:4C97  DD 77 13            		ld		(ix+19),a
    1842   00:4C9A  3E 08               		ld		a,8
    1843   00:4C9C  DD 77 17            		ld		(ix+23),a
    1844   00:4C9F                      		
    1845   00:4C9F  CD F5 40            		call	petiso_activity	
    1846   00:4CA2                      			
    1847   00:4CA2  CD F0 57            		call	atributos_sprites
    1848   00:4CA5                      		
    1849   00:4CA5  3E D4               		ld		a,53*4
    1850   00:4CA7  DD 77 12            		ld		(ix+18),a
    1851   00:4CAA  3E D8               		ld		a,54*4
    1852   00:4CAC  DD 77 16            		ld		(ix+22),a
    1853   00:4CAF                      		
    1854   00:4CAF  CD F0 57            		call	atributos_sprites
    1855   00:4CB2                      		
    1856   00:4CB2  3A 0F C0            		ld		a,(stick_a_usar)
    1857   00:4CB5  CD D8 00            		CALL	ONSTRIG
    1858   00:4CB8  FE 00               		cp		0
    1859   00:4CBA  CA 79 4C            		jp		z,animacion_final
    1860   00:4CBD                      			
    1861   00:4CBD  C3 91 41            		jr.		MENU
    1862   00:4CC0                      		
    1863   00:4CC0                      pantalla_en_blanco:
    1864   00:4CC0                      		
    1865   00:4CC0  CD 41 00            		call	DISSCR
    1866   00:4CC3  21 CC AF            		ld		hl,blanco												;tiles de base de pantalla
    1867   00:4CC6  11 20 18            		ld		de,#1820
    1868   00:4CC9  CD EB 6C            		call	depack_VRAM
    1869   00:4CCC                      		
    1870   00:4CCC  21 AC B0            		ld		hl,trofeos												;carga objetos
    1871   00:4CCF  11 18 18            		ld		de,#1818
    1872   00:4CD2  CD EB 6C            		call	depack_VRAM
    1873   00:4CD5  CD 44 00            		call	ENASCR
    1874   00:4CD8  C9                  		ret
    1875   00:4CD9                      
    1876   00:4CD9                      copiamos_en_pantalla_lo_de_memoria:
    1877   00:4CD9                      
    1878   00:4CD9  21 57 C0            		ld		hl,buffer_colisiones									;copia en vram para que lo vea el jugador
    1879   00:4CDC  11 20 18            		ld		de,#1820
    1880   00:4CDF  01 E0 02            		ld		bc,736
    1881   00:4CE2  C3 5C 00            		jr.		GRABAVRAM
    1882   00:4CE5                      
    1883   00:4CE5                      anunciamos_el_santuario_correspondiente:
    1884   00:4CE5                      
    1885   00:4CE5  11 8A 19            		ld		de,#198a
    1886   00:4CE8  01 0C 00            		ld		bc,12
    1887   00:4CEB  C3 5C 00            		jr.		GRABAVRAM
    1888   00:4CEE                      		
    1889   00:4CEE                      variables_iguales:
    1890   00:4CEE                      
    1891   00:4CEE  3E 08               		ld		a,8
    1892   00:4CF0  32 16 C0            		ld		(color_prota),a
    1893   00:4CF3  3E 01               		ld		a,1
    1894   00:4CF5  32 17 C0            		ld		(color_lineas_prota),a
    1895   00:4CF8  32 18 C0            		ld		(muerto),a
    1896   00:4CFB  32 80 C3            		ld		(grifo_estado),a
    1897   00:4CFE  32 82 C3            		ld		(vision_estado),a
    1898   00:4D01  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    1899   00:4D04                      
    1900   00:4D04  AF                  		xor		a
    1901   00:4D05  32 1A C0            		ld		(estado_prota),a
    1902   00:4D08  32 72 C3            		ld		(pasamos_la_fase),a
    1903   00:4D0B  32 39 C3            		ld		(gasolina),a
    1904   00:4D0E  32 38 C3            		ld		(mechero),a
    1905   00:4D11  32 3C C3            		ld		(ya_ha_cambiado_puerta),a
    1906   00:4D14  32 50 C0            		ld		(tiene_objeto),a
    1907   00:4D17  32 1C C0            		ld		(pasos_de_salto),a
    1908   00:4D1A  32 37 C3            		ld		(estado_de_salto),a
    1909   00:4D1D  32 73 C3            		ld		(momento_lanzamiento),a
    1910   00:4D20  32 7A C3            		ld		(escalera_activada),a
    1911   00:4D23  32 6D C3            		ld		(serp1),a
    1912   00:4D26  32 6E C3            		ld		(serp2),a
    1913   00:4D29  32 6F C3            		ld		(serp3),a
    1914   00:4D2C  32 70 C3            		ld		(serp4),a
    1915   00:4D2F  32 84 C3            		ld		(bombero_1),a
    1916   00:4D32  32 83 C3            		ld		(colision_bombero_prota_real),a
    1917   00:4D35  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    1918   00:4D38  32 1B C0            		ld		(prev_dir_prota),a
    1919   00:4D3B  32 1D C0            		ld		(dir_prota),a
    1920   00:4D3E  32 1E C0            		ld		(paso),a
    1921   00:4D41  32 55 C0            		ld		(estado_de_explosion),a
    1922   00:4D44  32 1F C0            		ld		(retard_anim),a
    1923   00:4D47                      		
    1924   00:4D47  32 77 C3            		ld		(dir_cuchillo),a
    1925   00:4D4A  32 78 C3            		ld		(cx),a
    1926   00:4D4D  32 79 C3            		ld		(cy),a
    1927   00:4D50                      
    1928   00:4D50  3E 05               		ld		a,5
    1929   00:4D52  32 71 C3            		ld		(cont_no_salta_dos_seguidas),a
    1930   00:4D55  32 74 C3            		ld		(contador_poses_lanzar),a
    1931   00:4D58  3E 32               		ld		a,50
    1932   00:4D5A  32 7D C3            		ld		(contador_escalera),a
    1933   00:4D5D  3E 02               		ld		a,2
    1934   00:4D5F  32 91 C3            		ld		(velocidad_paseo_fases),a
    1935   00:4D62                      		
    1936   00:4D62  C9                  		ret
    1937   00:4D63                      
    1938   00:4D63                      SPRITES_PETISOS:
    1939   00:4D63                      
    1940   00:4D63  21 91 B8            		ld		hl,sprites_pet											;cargamos petisos
    1941   00:4D66  11 00 38            		ld		de,#3800
    1942   00:4D69  01 00 01            		ld		bc,256
    1943   00:4D6C  CD 5C 00            		call	GRABAVRAM
    1944   00:4D6F                      		
    1945   00:4D6F  C9                  		ret
    1946   00:4D70                      		
    1947   00:4D70                      SPRITES_UNO:
    1948   00:4D70                      
    1949   00:4D70  CD 41 00            		call	DISSCR
    1950   00:4D73  21 B9 B0            		ld		hl,sprites												;carga sprites general
    1951   00:4D76  11 00 38            		ld		de,#3800
    1952   00:4D79  CD EB 6C            		call	depack_VRAM
    1953   00:4D7C  CD 44 00            		call	ENASCR
    1954   00:4D7F                      		
    1955   00:4D7F  C9                  		ret
    1956   00:4D80                      
    1957   00:4D80                      SPRITES_DOS:
    1958   00:4D80                      
    1959   00:4D80  21 51 B4            		ld		hl,sprites2												;cargamos sprites bombero parte 1
    1960   00:4D83  11 20 3B            		ld		de,#3b20
    1961   00:4D86  01 00 01            		ld		bc,256
    1962   00:4D89  CD 5C 00            		call	GRABAVRAM
    1963   00:4D8C                      
    1964   00:4D8C  21 51 B5            		ld		hl,sprites3												;cargamos sprites bombero parte 2
    1965   00:4D8F  11 A0 3D            		ld		de,#3da0
    1966   00:4D92  01 C0 00            		ld		bc,192
    1967   00:4D95  CD 5C 00            		call	GRABAVRAM
    1968   00:4D98                      		
    1969   00:4D98  21 11 B6            		ld		hl,sprites4												;cargamos sprites bombero parte 3
    1970   00:4D9B  11 E0 3E            		ld		de,#3ee0
    1971   00:4D9E  01 00 01            		ld		bc,256
    1972   00:4DA1  CD 5C 00            		call	GRABAVRAM
    1973   00:4DA4  C9                  		ret
    1974   00:4DA5                      
    1975   00:4DA5                      SPRITES_BOMBA:
    1976   00:4DA5                      
    1977   00:4DA5  21 11 B7            		ld		hl,sprites5				
    1978   00:4DA8  11 00 38            		ld		de,#3800
    1979   00:4DAB  01 20 00            		ld		bc,32
    1980   00:4DAE  CD 5C 00            		call	GRABAVRAM
    1981   00:4DB1                      		
    1982   00:4DB1  21 51 B7            		ld		hl,sprites6			
    1983   00:4DB4  11 60 38            		ld		de,#3860
    1984   00:4DB7  01 20 00            		ld		bc,32
    1985   00:4DBA  CD 5C 00            		call	GRABAVRAM
    1986   00:4DBD                      		
    1987   00:4DBD  21 91 B7            		ld		hl,sprites7				
    1988   00:4DC0  11 C0 38            		ld		de,#38C0
    1989   00:4DC3  01 20 00            		ld		bc,32
    1990   00:4DC6  CD 5C 00            		call	GRABAVRAM
    1991   00:4DC9                      		
    1992   00:4DC9  21 D1 B7            		ld		hl,sprites8				
    1993   00:4DCC  11 20 39            		ld		de,#3920
    1994   00:4DCF  01 20 00            		ld		bc,32
    1995   00:4DD2  CD 5C 00            		call	GRABAVRAM
    1996   00:4DD5                      		
    1997   00:4DD5  C9                  		ret
    1998   00:4DD6                      		
    1999   00:4DD6                      SPRITES_CUCHILLO:
    2000   00:4DD6                      
    2001   00:4DD6  21 31 B7            		ld		hl,sprites9				;anunciamos sanctuary 1
    2002   00:4DD9  11 00 38            		ld		de,#3800
    2003   00:4DDC  01 20 00            		ld		bc,32
    2004   00:4DDF  CD 5C 00            		call	GRABAVRAM
    2005   00:4DE2                      		
    2006   00:4DE2  21 71 B7            		ld		hl,sprites10				
    2007   00:4DE5  11 60 38            		ld		de,#3860
    2008   00:4DE8  01 20 00            		ld		bc,32
    2009   00:4DEB  CD 5C 00            		call	GRABAVRAM
    2010   00:4DEE                      		
    2011   00:4DEE  21 B1 B7            		ld		hl,sprites11			
    2012   00:4DF1  11 C0 38            		ld		de,#38C0
    2013   00:4DF4  01 20 00            		ld		bc,32
    2014   00:4DF7  CD 5C 00            		call	GRABAVRAM
    2015   00:4DFA                      		
    2016   00:4DFA  21 F1 B7            		ld		hl,sprites12				
    2017   00:4DFD  11 20 39            		ld		de,#3920
    2018   00:4E00  01 20 00            		ld		bc,32
    2019   00:4E03  CD 5C 00            		call	GRABAVRAM
    2020   00:4E06                      		
    2021   00:4E06  C9                  		ret
    2022   00:4E07                      
    2023   00:4E07                      SPRITES_PROTA_NORMAL:
    2024   00:4E07                      
    2025   00:4E07  21 11 B8            		ld		hl,sprites13				;anunciamos sanctuary 1
    2026   00:4E0A  11 00 38            		ld		de,#3800
    2027   00:4E0D  01 20 00            		ld		bc,32
    2028   00:4E10  CD 5C 00            		call	GRABAVRAM
    2029   00:4E13                      		
    2030   00:4E13  21 31 B8            		ld		hl,sprites14				
    2031   00:4E16  11 60 38            		ld		de,#3860
    2032   00:4E19  01 20 00            		ld		bc,32
    2033   00:4E1C  CD 5C 00            		call	GRABAVRAM
    2034   00:4E1F                      		
    2035   00:4E1F  21 51 B8            		ld		hl,sprites15			
    2036   00:4E22  11 C0 38            		ld		de,#38C0
    2037   00:4E25  01 20 00            		ld		bc,32
    2038   00:4E28  CD 5C 00            		call	GRABAVRAM
    2039   00:4E2B                      		
    2040   00:4E2B  21 71 B8            		ld		hl,sprites16				
    2041   00:4E2E  11 20 39            		ld		de,#3920
    2042   00:4E31  01 20 00            		ld		bc,32
    2043   00:4E34  CD 5C 00            		call	GRABAVRAM
    2044   00:4E37                      		
    2045   00:4E37  C9                  		ret
    2046   00:4E38                      								
    2047   00:4E38                      string_de_espera:
    2048   00:4E38                      
    2049   00:4E38  3A 0F C0            		ld		a,(stick_a_usar)
    2050   00:4E3B  CD D8 00            		CALL	ONSTRIG
    2051   00:4E3E  FE 00               		cp		0
    2052   00:4E40  CA 38 4E            		jp		z,string_de_espera
    2053   00:4E43                      		
    2054   00:4E43  C9                  		ret
    2055   00:4E44                      
    2056   00:4E44                      activa_mute:
    2057   00:4E44                      	
    2058   00:4E44  F3                  		di
    2059   00:4E45                      		
    2060   00:4E45  21 56 CD            		ld		hl,MUTE-99													;SILENCIA LA MUSICA
    2061   00:4E48  CD 9E 6E            		call	PT3_INIT
    2062   00:4E4B                      		
    2063   00:4E4B  FB                  		ei
    2064   00:4E4C                      		
    2065   00:4E4C  C3 98 54            		jr. musica_con_bucle
    2066   00:4E4F                      		
    2067   00:4E4F                      activa_musica_fases:
    2068   00:4E4F                      		
    2069   00:4E4F  CD 44 4E            		call	activa_mute
    2070   00:4E52                      		
    2071   00:4E52  3A 81 C3            		ld		A,(ESTADO_MUSICA)
    2072   00:4E55  FE 00               		cp		0
    2073   00:4E57  C8                  		ret		z
    2074   00:4E58                      	
    2075   00:4E58  F3                  		di
    2076   00:4E59                      		
    2077   00:4E59  21 2F C3            		ld		hl,SAXOLO-99												;SILENCIA LA MUSICA
    2078   00:4E5C  CD 9E 6E            		call	PT3_INIT
    2079   00:4E5F                      		
    2080   00:4E5F  FB                  		ei
    2081   00:4E60                      		
    2082   00:4E60  C3 98 54            		jr.		musica_con_bucle
    2083   00:4E63                      
    2084   00:4E63                      activa_musica_menu:
    2085   00:4E63                      			
    2086   00:4E63  F3                  		di
    2087   00:4E64                      		
    2088   00:4E64  21 2F C3            		ld		hl,SAXOLO-99												;SILENCIA LA MUSICA
    2089   00:4E67  CD 9E 6E            		call	PT3_INIT
    2090   00:4E6A                      		
    2091   00:4E6A  FB                  		ei
    2092   00:4E6B                      		
    2093   00:4E6B  C3 98 54            		jr.		musica_con_bucle
    2094   00:4E6E                      		
    2095   00:4E6E                      activa_musica_muerto:
    2096   00:4E6E                      	
    2097   00:4E6E  F3                  		di
    2098   00:4E6F                      		
    2099   00:4E6F  21 CB CD            		ld		hl,MUERTO-99											;MUSICA DE MUERTE
    2100   00:4E72  CD 9E 6E            		call	PT3_INIT
    2101   00:4E75                      		
    2102   00:4E75  FB                  		ei
    2103   00:4E76                      		
    2104   00:4E76  C3 8F 54            		jr.		musica_sin_bucle
    2105   00:4E79                      
    2106   00:4E79                      activa_musica_entre_fases:
    2107   00:4E79                      	
    2108   00:4E79  F3                  		di
    2109   00:4E7A                      		
    2110   00:4E7A  21 EF CE            		ld		hl,ENTRE_FASES-99										;MUSICA ENTRE FASES
    2111   00:4E7D  CD 9E 6E            		call	PT3_INIT
    2112   00:4E80                      		
    2113   00:4E80  FB                  		ei
    2114   00:4E81                      		
    2115   00:4E81  C3 8F 54            		jr.		musica_sin_bucle
    2116   00:4E84                      
    2117   00:4E84                      rutina_de_esperar_un_rato:
    2118   00:4E84                      
    2119   00:4E84  76                  		halt
    2120   00:4E85  2A 10 C0            		ld		hl,(clock)
    2121   00:4E88  01 01 00            		ld		bc,1		
    2122   00:4E8B  ED 42               		sbc		hl,bc
    2123   00:4E8D  22 10 C0            		ld		(clock),hl
    2124   00:4E90  20 F2               		jr		nz,rutina_de_esperar_un_rato
    2125   00:4E92                      		
    2126   00:4E92  C9                  		ret
    2127   00:4E93                      
    2128   00:4E93                      PREPARACION_SCREEN_2:
    2129   00:4E93                      
    2130   00:4E93  3E 02               		ld		a,2
    2131   00:4E95  CD 5F 00            		call	SCREENX
    2132   00:4E98  3A E0 F3            		ld		a,(RG1SAV)
    2133   00:4E9B  F6 02               		or		00000010b					;modo sprites a 16x16
    2134   00:4E9D  E6 FE               		and		11111110b					;modo sprites no ampliados
    2135   00:4E9F  47                  		ld		b,a
    2136   00:4EA0  0E 01               		ld		c,1
    2137   00:4EA2  CD 47 00            		call	WRTVDP						;lo escribe en el registro 1 del VDP
    2138   00:4EA5                      		
    2139   00:4EA5  C9                  		RET
    2140   00:4EA6                      		
    2141   00:4EA6                      gran_rutina:
    2142   00:4EA6                      
    2143   00:4EA6  76                  		halt								;espera a la interrupcion vblank y sincroniza toda la acción
    2144   00:4EA7  CD 2C 53            		call	pulsa_una_tecla
    2145   00:4EAA  CD F0 57            		call	atributos_sprites
    2146   00:4EAD  CD AD 52            		call	revisa_escalera
    2147   00:4EB0  CD 4D 50            		call	revisa_bombero
    2148   00:4EB3  CD 09 50            		call	grifo_bombero
    2149   00:4EB6  CD FD 57            		call	estado_en_que_se_encuentra
    2150   00:4EB9  CD AC 5D            		call	apaga_los_chorros
    2151   00:4EBC  CD 21 4F            		call	movimiento_forzado_en_puertas
    2152   00:4EBF  CD FC 4E            		call	vigila_si_cierra_puertas
    2153   00:4EC2  CD C9 58            		call	mueve_prota
    2154   00:4EC5  CD 08 5D            		call	usa_objeto_o_salta
    2155   00:4EC8  CD 23 63            		call	rutina_cuchillo_volador
    2156   00:4ECB  CD EE 5E            		call	coge_algun_objeto
    2157   00:4ECE  CD ED 5C            		call	pose_si_esta_parado
    2158   00:4ED1  CD CD 65            		call	comprueba_estado_de_explosion
    2159   00:4ED4  CD E7 5B            		call	actualiza_atributos_sprite
    2160   00:4ED7  CD A1 54            		call	colision_bombero_prota
    2161   00:4EDA  CD EB 56            		call	colisiones_serpientes_cuchillos
    2162   00:4EDD  CD 22 55            		call	colisiones_serpientes_prota_1
    2163   00:4EE0  CD EE 69            		call	movimiento_serpientes
    2164   00:4EE3  CD 42 65            		call	actualiza_la_puerta
    2165   00:4EE6  CD 23 66            		call	puntuacion_vidas_fase
    2166   00:4EE9                      		
    2167   00:4EE9  3A 72 C3            		ld		a,(pasamos_la_fase)
    2168   00:4EEC  FE 00               		cp		0
    2169   00:4EEE  C2 22 68            		jr.		nz,animacion_entre_fases
    2170   00:4EF1                      		
    2171   00:4EF1  3A 18 C0            		ld		a,(muerto)
    2172   00:4EF4  FE 00               		cp		0
    2173   00:4EF6  CA DE 53            		jr.		z,repite_fase
    2174   00:4EF9                      		
    2175   00:4EF9  C3 A6 4E            		jp		gran_rutina
    2176   00:4EFC                      
    2177   00:4EFC                      vigila_si_cierra_puertas:
    2178   00:4EFC                      		
    2179   00:4EFC  3A 14 C0            		ld		a,(puede_cambiar_de_direccion)
    2180   00:4EFF  FE 01               		cp		1
    2181   00:4F01  C8                  		ret		z
    2182   00:4F02                      		
    2183   00:4F02  CD 95 6C            		call	dieciseis_quince
    2184   00:4F05  CD A9 5C            		call	get_bloque_en_X_Y
    2185   00:4F08                      		
    2186   00:4F08  FE 75               		cp		117
    2187   00:4F0A  28 61               		jr.		z,recoloca_puerta_amarilla_izquierda
    2188   00:4F0C  FE 76               		cp		118
    2189   00:4F0E  CA D5 4F            		jr.		z,recoloca_puerta_azul_izquierda
    2190   00:4F11                      		
    2191   00:4F11  CD BB 6C            		call	menos_uno_quince
    2192   00:4F14  CD A9 5C            		call	get_bloque_en_X_Y
    2193   00:4F17                      		
    2194   00:4F17  FE 75               		cp		117
    2195   00:4F19  28 1E               		jr.		z,recoloca_puerta_amarilla_derecha
    2196   00:4F1B  FE 76               		cp		118
    2197   00:4F1D  CA A1 4F            		jr.		z,recoloca_puerta_azul_derecha	
    2198   00:4F20                      		
    2199   00:4F20  C9                  		ret
    2200   00:4F21                      			
    2201   00:4F21                      movimiento_forzado_en_puertas:
    2202   00:4F21                      
    2203   00:4F21  3A 14 C0            		ld		a,(puede_cambiar_de_direccion)
    2204   00:4F24  FE 01               		cp		1
    2205   00:4F26  C8                  		ret		z
    2206   00:4F27                      		
    2207   00:4F27  3E 0D               		ld		a,13													;efecto sonoro de abrir grifo
    2208   00:4F29  CD E6 6C            		call	efecto_sonido
    2209   00:4F2C                      			
    2210   00:4F2C  3A 1D C0            		ld		a,(dir_prota)
    2211   00:4F2F  FE 00               		cp		0														;va a la derecha forzado
    2212   00:4F31  CA 89 5B            		jr.		z,(mueve_derecha_prota)
    2213   00:4F34  FE 01               		cp		1														;va a la izquierda forzado
    2214   00:4F36  CA 71 5A            		jr.		z,(mueve_izquierda_prota)
    2215   00:4F39                      
    2216   00:4F39                      recoloca_puerta_amarilla_derecha:
    2217   00:4F39                      				
    2218   00:4F39  3A 1D C0            		ld		a,(dir_prota)
    2219   00:4F3C  FE 00               		cp		0
    2220   00:4F3E  C0                  		ret		nz
    2221   00:4F3F                      		
    2222   00:4F3F  3E 01               		ld		a,1
    2223   00:4F41  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    2224   00:4F44                      		
    2225   00:4F44  CD BB 6C            		call	menos_uno_quince
    2226   00:4F47  CD A9 5C            		call	get_bloque_en_X_Y
    2227   00:4F4A  3E 71               		ld		a,113
    2228   00:4F4C  77                  		ld		[hl],a
    2229   00:4F4D                      								
    2230   00:4F4D  CD BB 6C            		call	menos_uno_quince
    2231   00:4F50  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2232   00:4F53                      		
    2233   00:4F53  3E 71               		ld		a,113
    2234   00:4F55  CD D3 6C            		call	pinta_en_pantalla
    2235   00:4F58                      		
    2236   00:4F58  CD C7 6C            		call	menos_uno_dos
    2237   00:4F5B  CD A9 5C            		call	get_bloque_en_X_Y
    2238   00:4F5E  3E 71               		ld		a,113
    2239   00:4F60  77                  		ld		[hl],a
    2240   00:4F61                      								
    2241   00:4F61  CD C7 6C            		call	menos_uno_dos
    2242   00:4F64  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2243   00:4F67                      		
    2244   00:4F67  3E 71               		ld		a,113
    2245   00:4F69  CD D3 6C            		call	pinta_en_pantalla
    2246   00:4F6C                      		
    2247   00:4F6C  C9                  		ret
    2248   00:4F6D                      		
    2249   00:4F6D                      recoloca_puerta_amarilla_izquierda:
    2250   00:4F6D                      		
    2251   00:4F6D  3A 1D C0            		ld		a,(dir_prota)
    2252   00:4F70  FE 01               		cp		1
    2253   00:4F72  C0                  		ret		nz
    2254   00:4F73                      		
    2255   00:4F73  3E 01               		ld		a,1
    2256   00:4F75  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    2257   00:4F78                      		
    2258   00:4F78  CD 95 6C            		call	dieciseis_quince
    2259   00:4F7B  CD A9 5C            		call	get_bloque_en_X_Y
    2260   00:4F7E  3E 72               		ld		a,114
    2261   00:4F80  77                  		ld		[hl],a
    2262   00:4F81                      								
    2263   00:4F81  CD 95 6C            		call	dieciseis_quince
    2264   00:4F84  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2265   00:4F87                      		
    2266   00:4F87  3E 72               		ld		a,114
    2267   00:4F89  CD D3 6C            		call	pinta_en_pantalla
    2268   00:4F8C                      		
    2269   00:4F8C  CD A2 6C            		call	dieciseis_dos
    2270   00:4F8F  CD A9 5C            		call	get_bloque_en_X_Y
    2271   00:4F92  3E 72               		ld		a,114
    2272   00:4F94  77                  		ld		[hl],a
    2273   00:4F95                      								
    2274   00:4F95  CD A2 6C            		call	dieciseis_dos
    2275   00:4F98  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2276   00:4F9B                      		
    2277   00:4F9B  3E 72               		ld		a,114
    2278   00:4F9D  CD D3 6C            		call	pinta_en_pantalla
    2279   00:4FA0                      		
    2280   00:4FA0  C9                  		ret
    2281   00:4FA1                      		
    2282   00:4FA1                      recoloca_puerta_azul_derecha:
    2283   00:4FA1                      		
    2284   00:4FA1                      		
    2285   00:4FA1  3A 1D C0            		ld		a,(dir_prota)
    2286   00:4FA4  FE 00               		cp		0
    2287   00:4FA6  C0                  		ret		nz
    2288   00:4FA7                      		
    2289   00:4FA7  3E 01               		ld		a,1
    2290   00:4FA9  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    2291   00:4FAC                      		
    2292   00:4FAC  CD BB 6C            		call	menos_uno_quince
    2293   00:4FAF  CD A9 5C            		call	get_bloque_en_X_Y
    2294   00:4FB2  3E 74               		ld		a,116
    2295   00:4FB4  77                  		ld		[hl],a
    2296   00:4FB5                      								
    2297   00:4FB5  CD BB 6C            		call	menos_uno_quince
    2298   00:4FB8  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2299   00:4FBB                      		
    2300   00:4FBB  3E 74               		ld		a,116
    2301   00:4FBD  CD D3 6C            		call	pinta_en_pantalla
    2302   00:4FC0                      		
    2303   00:4FC0  CD C7 6C            		call	menos_uno_dos
    2304   00:4FC3  CD A9 5C            		call	get_bloque_en_X_Y
    2305   00:4FC6  3E 74               		ld		a,116
    2306   00:4FC8  77                  		ld		[hl],a
    2307   00:4FC9                      								
    2308   00:4FC9  CD C7 6C            		call	menos_uno_dos
    2309   00:4FCC  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2310   00:4FCF                      		
    2311   00:4FCF  3E 74               		ld		a,116
    2312   00:4FD1  CD D3 6C            		call	pinta_en_pantalla
    2313   00:4FD4                      		
    2314   00:4FD4  C9                  		ret
    2315   00:4FD5                      		
    2316   00:4FD5                      recoloca_puerta_azul_izquierda:
    2317   00:4FD5                      		
    2318   00:4FD5  3A 1D C0            		ld		a,(dir_prota)
    2319   00:4FD8  FE 01               		cp		1
    2320   00:4FDA  C0                  		ret		nz
    2321   00:4FDB                      		
    2322   00:4FDB  3E 01               		ld		a,1
    2323   00:4FDD  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    2324   00:4FE0                      		
    2325   00:4FE0  CD 95 6C            		call	dieciseis_quince
    2326   00:4FE3  CD A9 5C            		call	get_bloque_en_X_Y
    2327   00:4FE6  3E 73               		ld		a,115
    2328   00:4FE8  77                  		ld		[hl],a
    2329   00:4FE9                      								
    2330   00:4FE9  CD 95 6C            		call	dieciseis_quince
    2331   00:4FEC  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2332   00:4FEF                      		
    2333   00:4FEF  3E 73               		ld		a,115
    2334   00:4FF1  CD D3 6C            		call	pinta_en_pantalla
    2335   00:4FF4                      		
    2336   00:4FF4  CD A2 6C            		call	dieciseis_dos
    2337   00:4FF7  CD A9 5C            		call	get_bloque_en_X_Y
    2338   00:4FFA  3E 73               		ld		a,115
    2339   00:4FFC  77                  		ld		[hl],a
    2340   00:4FFD                      								
    2341   00:4FFD  CD A2 6C            		call	dieciseis_dos
    2342   00:5000  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2343   00:5003                      		
    2344   00:5003  3E 73               		ld		a,115
    2345   00:5005  CD D3 6C            		call	pinta_en_pantalla
    2346   00:5008                      		
    2347   00:5008  C9                  		ret
    2348   00:5009                      		
    2349   00:5009                      		
    2350   00:5009                      grifo_bombero:
    2351   00:5009                      
    2352   00:5009  FD 21 85 C3         		ld		iy,bombero_control
    2353   00:500D                      		
    2354   00:500D  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene donde está					
    2355   00:5010  57                  		ld		d,a
    2356   00:5011  FD 7E 01            		ld		a,(iy+1)
    2357   00:5014  C6 0A               		add		10
    2358   00:5016  5F                  		ld		e,a
    2359   00:5017  CD A9 5C            		call	get_bloque_en_X_Y
    2360   00:501A                      		
    2361   00:501A  FE 77               		cp		119														;si el grifo ya está abierto, sigue la gran rutina
    2362   00:501C  C0                  		ret		nz
    2363   00:501D                      		
    2364   00:501D  FD 7E 00            		ld		a,(iy)													;para buffer y vram moviendo 0,10						
    2365   00:5020  57                  		ld		d,a
    2366   00:5021  FD 7E 01            		ld		a,(iy+1)
    2367   00:5024  C6 0A               		add		10
    2368   00:5026  5F                  		ld		e,a
    2369   00:5027  CD A9 5C            		call	get_bloque_en_X_Y
    2370   00:502A  3E 57               		ld		a,87
    2371   00:502C  77                  		ld		[hl],a
    2372   00:502D                      								
    2373   00:502D  FD 7E 00            		ld		a,(iy)													;para buffer y vram moviendo 0,10						
    2374   00:5030  57                  		ld		d,a
    2375   00:5031  FD 7E 01            		ld		a,(iy+1)
    2376   00:5034  C6 0A               		add		10
    2377   00:5036  5F                  		ld		e,a
    2378   00:5037  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    2379   00:503A  3E 57               		ld		a,87
    2380   00:503C  77                  		ld		[hl],a
    2381   00:503D                      		
    2382   00:503D                      		
    2383   00:503D  3E 57               		ld		a,87
    2384   00:503F  CD D3 6C            		call	pinta_en_pantalla
    2385   00:5042                      		
    2386   00:5042  3E 0A               		ld		a,10													;efecto sonoro de abrir grifo
    2387   00:5044  CD E6 6C            		call	efecto_sonido
    2388   00:5047                      		
    2389   00:5047  3E 01               		ld		a,1														; da valor a la variable para dar por hecho que el grifo está abierto
    2390   00:5049  32 80 C3            		ld		(grifo_estado),a
    2391   00:504C                      		
    2392   00:504C  C9                  		ret
    2393   00:504D                      		
    2394   00:504D                      revisa_bombero:
    2395   00:504D                      
    2396   00:504D  3A 84 C3            		ld		a,(bombero_1)											;si no está activo, vuelve a la gran rutina
    2397   00:5050  FE 00               		cp		0
    2398   00:5052  C8                  		ret		z
    2399   00:5053                      						
    2400   00:5053  FD 21 85 C3         		ld	    iy,bombero_control										;si no tiene orden de aparecer, reduce el tiempo y vuelve a la gran rutina
    2401   00:5057  FD 7E 08            		ld		a,(iy+8)
    2402   00:505A  FE 00               		cp		0
    2403   00:505C  28 05               		jr.		z,se_activa_el_bombero
    2404   00:505E                      		
    2405   00:505E  3D                  		dec		a
    2406   00:505F  FD 77 08            		ld		(iy+8),a
    2407   00:5062                      		
    2408   00:5062  C9                  		ret		
    2409   00:5063                      		
    2410   00:5063                      se_activa_el_bombero:
    2411   00:5063                      
    2412   00:5063  FD 7E 09            		ld		a,(iy+9)												;vuelve a darle un poco de retardo al personaje (esto es uno de los puntos que marca la velocidad del bombero)
    2413   00:5066  FD 77 08            		ld		(iy+8),a
    2414   00:5069                      		
    2415   00:5069  FD 7E 0B            		ld		a,(iy+11)												;si no está a cero, no puede ni subir ni bajar escaleras.
    2416   00:506C  FE 00               		cp		0
    2417   00:506E  20 27               		jr.		nz,resta_y_camina
    2418   00:5070                      		
    2419   00:5070  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene donde está					
    2420   00:5073  57                  		ld		d,a
    2421   00:5074  FD 7E 01            		ld		a,(iy+1)
    2422   00:5077  C6 02               		add		2
    2423   00:5079  5F                  		ld		e,a
    2424   00:507A  CD A9 5C            		call	get_bloque_en_X_Y
    2425   00:507D                      		
    2426   00:507D  FE 29               		cp		41														;si es escalera 1, va a decidir si sube o baja
    2427   00:507F  CC 6B 52            		call	z,estamos_en_escalera
    2428   00:5082                      
    2429   00:5082  FE 2A               		cp		42														;si es escalera 2, va a decidir si sube o baja
    2430   00:5084  CC 6B 52            		call	z,estamos_en_escalera
    2431   00:5087                      		
    2432   00:5087  FD 7E 07            		ld		a,(iy+7)												;mira en qué estado está para ir a la rutina adecuada
    2433   00:508A  FE 00               		cp		0
    2434   00:508C  CA 4C 51            		jr.		z,revisa_caida_bombero
    2435   00:508F                      		
    2436   00:508F  FE 01               		cp		1
    2437   00:5091  28 0B               		jr.		z,revisa_subida_bombero
    2438   00:5093  FE 02               		cp		2
    2439   00:5095  28 3E               		jr.		z,revisa_bajada_bombero
    2440   00:5097                      
    2441   00:5097                      resta_y_camina:
    2442   00:5097                      
    2443   00:5097  3D                  		dec		a
    2444   00:5098  FD 77 0B            		ld		(iy+11),a
    2445   00:509B  C3 4C 51            		jr.		revisa_caida_bombero
    2446   00:509E                      		
    2447   00:509E                      revisa_subida_bombero:
    2448   00:509E                      				
    2449   00:509E  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene encima					
    2450   00:50A1  57                  		ld		d,a
    2451   00:50A2  FD 7E 01            		ld		a,(iy+1)
    2452   00:50A5  D6 02               		sub		2
    2453   00:50A7  5F                  		ld		e,a
    2454   00:50A8  CD A9 5C            		call	get_bloque_en_X_Y
    2455   00:50AB                      
    2456   00:50AB  FE 2A               		cp		42
    2457   00:50AD  28 04               		jr.		z,continua_rvb
    2458   00:50AF  FE 29               		cp		41
    2459   00:50B1  20 6A               		jr.		nz,sigue_andando
    2460   00:50B3                      
    2461   00:50B3                      continua_rvb:
    2462   00:50B3                      		
    2463   00:50B3  FD 7E 00            		ld		a,(iy)													;comprobamos si está centrado					
    2464   00:50B6  3D                  		dec		a
    2465   00:50B7  57                  		ld		d,a
    2466   00:50B8  FD 7E 01            		ld		a,(iy+1)
    2467   00:50BB  D6 02               		sub		2
    2468   00:50BD  5F                  		ld		e,a
    2469   00:50BE  CD A9 5C            		call	get_bloque_en_X_Y
    2470   00:50C1  FE 29               		cp		41
    2471   00:50C3  CC 14 51            		call	z,corrige_en_escalera_bombero
    2472   00:50C6  FE 2A               		cp		42
    2473   00:50C8  CC 14 51            		call	z,corrige_en_escalera_bombero
    2474   00:50CB                      		
    2475   00:50CB  FD 7E 01            		ld		a,(iy+1)												;sube por la coordenada y
    2476   00:50CE  D6 02               		sub		2
    2477   00:50D0  FD 77 01            		ld		(iy+1),a
    2478   00:50D3                      		
    2479   00:50D3  18 53               		jr.		decide_paso_en_escalera
    2480   00:50D5                      	
    2481   00:50D5                      revisa_bajada_bombero:
    2482   00:50D5                      				
    2483   00:50D5  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene debajo de los pies					
    2484   00:50D8  57                  		ld		d,a
    2485   00:50D9  FD 7E 01            		ld		a,(iy+1)
    2486   00:50DC  C6 11               		add		17
    2487   00:50DE  5F                  		ld		e,a
    2488   00:50DF  CD A9 5C            		call	get_bloque_en_X_Y
    2489   00:50E2                      
    2490   00:50E2  FE 2A               		cp		42
    2491   00:50E4  28 0C               		jr.		z,continua_rbb
    2492   00:50E6  FE 49               		cp		73
    2493   00:50E8  28 08               		jr.		z,continua_rbb
    2494   00:50EA  FE 4A               		cp		74
    2495   00:50EC  28 04               		jr.		z,continua_rbb
    2496   00:50EE  FE 29               		cp		41
    2497   00:50F0  20 2B               		jr.		nz,sigue_andando
    2498   00:50F2                      
    2499   00:50F2                      continua_rbb:
    2500   00:50F2                      		
    2501   00:50F2  FD 7E 00            		ld		a,(iy)													;comprobamos si está centrado					
    2502   00:50F5  3D                  		dec		a
    2503   00:50F6  57                  		ld		d,a
    2504   00:50F7  FD 7E 01            		ld		a,(iy+1)
    2505   00:50FA  D6 02               		sub		2
    2506   00:50FC  5F                  		ld		e,a
    2507   00:50FD  CD A9 5C            		call	get_bloque_en_X_Y
    2508   00:5100                      		
    2509   00:5100  FE 29               		cp		41														;si no está centrado va a centrarse
    2510   00:5102  CC 14 51            		call	z,corrige_en_escalera_bombero
    2511   00:5105                      		
    2512   00:5105  FE 2A               		cp		42														;si no está centrado va a centrarse
    2513   00:5107  CC 14 51            		call	z,corrige_en_escalera_bombero
    2514   00:510A                      		
    2515   00:510A  FD 7E 01            		ld		a,(iy+1)												;baja por la variable y
    2516   00:510D  C6 02               		add		2
    2517   00:510F  FD 77 01            		ld		(iy+1),a
    2518   00:5112                      		
    2519   00:5112  18 14               		jr.		decide_paso_en_escalera
    2520   00:5114                      
    2521   00:5114                      corrige_en_escalera_bombero:
    2522   00:5114                      
    2523   00:5114  FD 7E 00            		ld		a,(iy)													;lo pone hacia la izquierda hasta que se centra
    2524   00:5117  D6 02               		sub		2
    2525   00:5119  FD 77 00            		ld		(iy),a
    2526   00:511C                      		
    2527   00:511C  C9                  		ret
    2528   00:511D                      		
    2529   00:511D                      sigue_andando:
    2530   00:511D                      
    2531   00:511D  AF                  		xor		a														;da a la variable adecuada el valor de andando
    2532   00:511E  FD 77 07            		ld		(iy+7),a
    2533   00:5121  3E 0F               		ld		a,15
    2534   00:5123  FD 77 0B            		ld		(iy+11),a		
    2535   00:5126  18 24               		jr.		revisa_caida_bombero
    2536   00:5128                      
    2537   00:5128                      decide_paso_en_escalera:
    2538   00:5128                      
    2539   00:5128  FD 7E 05            		ld		a,(iy+5)												;decide el paso en el que está si no pasa por avanzar
    2540   00:512B                      		
    2541   00:512B  FE 00               		cp		0
    2542   00:512D  28 04               		jr.		z,paso_uno_escaleras
    2543   00:512F                      		
    2544   00:512F  FE 01               		cp		1
    2545   00:5131  28 0D               		jr.		z,paso_dos_escaleras
    2546   00:5133                      
    2547   00:5133                      paso_uno_escaleras:
    2548   00:5133                      
    2549   00:5133  3E 01               		ld		a,1														;cambia el paso para la siguiente									
    2550   00:5135  FD 77 05            		ld		(iy+5),a
    2551   00:5138                      		
    2552   00:5138  3E DC               		ld		a,55*4													;define los sprites adecuados
    2553   00:513A  47                  		ld		b,a
    2554   00:513B  3E C4               		ld		a,49*4
    2555   00:513D  C3 72 52            		jr.		ultimas_variables_bombero
    2556   00:5140                      		
    2557   00:5140                      paso_dos_escaleras:
    2558   00:5140                      
    2559   00:5140  AF                  		xor		a														;cambia el paso para la siguiente
    2560   00:5141  FD 77 05            		ld		(iy+5),a
    2561   00:5144                      		
    2562   00:5144  3E E8               		ld		a,58*4													;define los sprites adecuados
    2563   00:5146  47                  		ld		b,a
    2564   00:5147  3E E0               		ld		a,56*4
    2565   00:5149  C3 72 52            		jr.		ultimas_variables_bombero
    2566   00:514C                      						
    2567   00:514C                      revisa_caida_bombero:
    2568   00:514C                      		
    2569   00:514C  CD 42 52            		call	hacia_donde_quiero_ir									;decide la variable para seguir al prota en las escaleras
    2570   00:514F                      			
    2571   00:514F  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene debajo de los pies	
    2572   00:5152  C6 02               		add		2											
    2573   00:5154  57                  		ld		d,a
    2574   00:5155  FD 7E 01            		ld		a,(iy+1)
    2575   00:5158  C6 11               		add		17
    2576   00:515A  5F                  		ld		e,a
    2577   00:515B  CD A9 5C            		call	get_bloque_en_X_Y
    2578   00:515E                      
    2579   00:515E  FE 29               		cp		41														;si es escalera irá a mirar la dirección ppara seguir como si nada
    2580   00:5160  28 39               		jr.		z,define_direccion_bombero
    2581   00:5162  FE 2A               		cp		42
    2582   00:5164  28 35               		jr.		z,define_direccion_bombero
    2583   00:5166                      
    2584   00:5166  FE 20               		cp		32
    2585   00:5168  38 31               		jr.		c,define_direccion_bombero								;si hay muro vamos a ver la direccion para seguir como si nada
    2586   00:516A                      
    2587   00:516A  FD 7E 00            		ld		a,(iy)
    2588   00:516D  C6 0E               		add		14														;comprobamos lo que tiene debajo de los pies en la parte derecha					
    2589   00:516F  57                  		ld		d,a
    2590   00:5170  FD 7E 01            		ld		a,(iy+1)
    2591   00:5173  C6 11               		add		17
    2592   00:5175  5F                  		ld		e,a
    2593   00:5176  CD A9 5C            		call	get_bloque_en_X_Y
    2594   00:5179                      		
    2595   00:5179  FE 29               		cp		41														;si es escalera irá a mirar la dirección ppara seguir como si nada
    2596   00:517B  28 1E               		jr.		z,define_direccion_bombero
    2597   00:517D  FE 2A               		cp		42
    2598   00:517F  28 1A               		jr.		z,define_direccion_bombero
    2599   00:5181                      		
    2600   00:5181  FE 20               		cp		32
    2601   00:5183  38 16               		jr.		c,define_direccion_bombero								;si hay muro vamos a ver la direccion para seguir como si nada
    2602   00:5185                      
    2603   00:5185  FD 7E 01            		ld		a,(iy+1)												;cae dos pixeles
    2604   00:5188  C6 02               		add		2
    2605   00:518A  FD 77 01            		ld		(iy+1),a
    2606   00:518D                      		
    2607   00:518D  DD 21 20 C0         		ld		ix,atributos_sprite_general
    2608   00:5191                      		
    2609   00:5191  DD 7E 1A            		ld		a,(ix+26)												;define los sprites
    2610   00:5194  47                  		ld		b,a
    2611   00:5195  DD 7E 12            		ld		a,(ix+18)
    2612   00:5198                      		
    2613   00:5198  C3 72 52            		jr.		ultimas_variables_bombero
    2614   00:519B                      		
    2615   00:519B                      define_direccion_bombero:
    2616   00:519B                      		
    2617   00:519B  AF                  		xor		a														;estado andando
    2618   00:519C  FD 77 07            		ld		(iy+7),a
    2619   00:519F                      		
    2620   00:519F  FD 7E 06            		ld		a,(iy+6)
    2621   00:51A2  FE 00               		cp		0
    2622   00:51A4  28 46               		jr.		z,va_hacia_la_derecha
    2623   00:51A6                      
    2624   00:51A6                      va_hacia_la_izquierda:
    2625   00:51A6                      
    2626   00:51A6  FD 7E 00            		ld		a,(iy)													;comprobamos la que tiene a su izquierda
    2627   00:51A9  C6 02               		add		2											
    2628   00:51AB  57                  		ld		d,a
    2629   00:51AC  FD 7E 01            		ld		a,(iy+1)
    2630   00:51AF  C6 0B               		add		11
    2631   00:51B1  5F                  		ld		e,a
    2632   00:51B2  CD A9 5C            		call	get_bloque_en_X_Y
    2633   00:51B5                      		
    2634   00:51B5  FE 20               		cp		32														;si hay pared cambia la direccion
    2635   00:51B7  38 77               		jr.		c,cambia_la_direccion_bombero
    2636   00:51B9  FE 71               		cp		113														;si hay muros de pinchos tambien
    2637   00:51BB  28 73               		jr.		z,cambia_la_direccion_bombero
    2638   00:51BD  FE 73               		cp		115														
    2639   00:51BF  28 6F               		jr.		z,cambia_la_direccion_bombero
    2640   00:51C1                      		
    2641   00:51C1  FD 7E 02            		ld		a,(iy+2)												;va hacia la izquierda lo adecuado
    2642   00:51C4  47                  		ld		b,a
    2643   00:51C5  FD 7E 00            		ld		a,(iy)
    2644   00:51C8  90                  		sub		a,b
    2645   00:51C9                      		
    2646   00:51C9  FD 77 00            		ld		(iy),a
    2647   00:51CC                      		
    2648   00:51CC  FD 7E 05            		ld		a,(iy+5)												;decide el paso que le toca
    2649   00:51CF  FE 00               		cp		0
    2650   00:51D1  28 0C               		jr.		z,paso_quieto_izquierda									
    2651   00:51D3                      
    2652   00:51D3                      paso_movido_izquierda:
    2653   00:51D3                      		
    2654   00:51D3  AF                  		xor		a														;cambia el paso para la siguiente
    2655   00:51D4  FD 77 05            		ld		(iy+5),a
    2656   00:51D7                      			
    2657   00:51D7  3E B4               		ld		a,45*4													;da los sprites adecuados
    2658   00:51D9  47                  		ld		b,a
    2659   00:51DA  3E 7C               		ld		a,31*4
    2660   00:51DC  C3 72 52            		jr.		ultimas_variables_bombero
    2661   00:51DF                      		
    2662   00:51DF                      paso_quieto_izquierda:
    2663   00:51DF                      		
    2664   00:51DF  3E 01               		ld		a,1														;cambia el paso para la siguiente
    2665   00:51E1  FD 77 05            		ld		(iy+5),a	
    2666   00:51E4                      	
    2667   00:51E4  3E C0               		ld		a,48*4													;da los sprites adecuados
    2668   00:51E6  47                  		ld		b,a
    2669   00:51E7  3E B8               		ld		a,46*4
    2670   00:51E9  C3 72 52            		jr.		ultimas_variables_bombero
    2671   00:51EC                      
    2672   00:51EC                      va_hacia_la_derecha:
    2673   00:51EC                      
    2674   00:51EC  FD 7E 00            		ld		a,(iy)													;comprobamos la que tiene a su derecha
    2675   00:51EF  C6 0D               		add		13											
    2676   00:51F1  57                  		ld		d,a
    2677   00:51F2  FD 7E 01            		ld		a,(iy+1)
    2678   00:51F5  C6 0B               		add		11
    2679   00:51F7  5F                  		ld		e,a
    2680   00:51F8  CD A9 5C            		call	get_bloque_en_X_Y
    2681   00:51FB                      		
    2682   00:51FB  FE 20               		cp		32														;si hay pared cambia de dirección
    2683   00:51FD  38 31               		jr.		c,cambia_la_direccion_bombero
    2684   00:51FF  FE 72               		cp		114														;si hay muros de pinchos tambien
    2685   00:5201  28 2D               		jr.		z,cambia_la_direccion_bombero
    2686   00:5203  FE 74               		cp		116														
    2687   00:5205  28 29               		jr.		z,cambia_la_direccion_bombero
    2688   00:5207  FD 7E 02            		ld		a,(iy+2)												;suma a x lo adecuado
    2689   00:520A  47                  		ld		b,a
    2690   00:520B  FD 7E 00            		ld		a,(iy)
    2691   00:520E  80                  		add		a,b
    2692   00:520F                      		
    2693   00:520F  FD 77 00            		ld		(iy),a
    2694   00:5212                      		
    2695   00:5212  FD 7E 05            		ld		a,(iy+5)												;mira el paso que le toca
    2696   00:5215  FE 00               		cp		0
    2697   00:5217  28 0B               		jr.		z,paso_quieto_derecha
    2698   00:5219                      
    2699   00:5219                      paso_movido_derecha:
    2700   00:5219                      
    2701   00:5219  AF                  		xor		a														;cambia el paso para la siguiente
    2702   00:521A  FD 77 05            		ld		(iy+5),a
    2703   00:521D                      		
    2704   00:521D  3E 78               		ld		a,30*4													;define los sprites adecuados
    2705   00:521F  47                  		ld		b,a
    2706   00:5220  3E 70               		ld		a,28*4
    2707   00:5222  18 4E               		jr.		ultimas_variables_bombero
    2708   00:5224                      		
    2709   00:5224                      paso_quieto_derecha:
    2710   00:5224                      
    2711   00:5224  3E 01               		ld		a,1														;cambia el paso para la siguiente
    2712   00:5226  FD 77 05            		ld		(iy+5),a
    2713   00:5229                      
    2714   00:5229  3E 6C               		ld		a,27*4													;define los sprites adecuados
    2715   00:522B  47                  		ld		b,a
    2716   00:522C  3E 64               		ld		a,25*4
    2717   00:522E  18 42               		jr.		ultimas_variables_bombero
    2718   00:5230                      
    2719   00:5230                      cambia_la_direccion_bombero:		
    2720   00:5230                      
    2721   00:5230  FD 7E 06            		ld		a,(iy+6)												;mira cual es la direccion actual para cambiarla
    2722   00:5233  FE 00               		cp		0
    2723   00:5235  28 05               		jr.		z,cambia_a_izquierda
    2724   00:5237                      
    2725   00:5237                      cambia_a_derecha:
    2726   00:5237                      
    2727   00:5237  AF                  		xor		a														;cambia a derecha
    2728   00:5238  FD 77 06            		ld		(iy+6),a
    2729   00:523B                      		
    2730   00:523B  C9                  		ret
    2731   00:523C                      		
    2732   00:523C                      cambia_a_izquierda:
    2733   00:523C                      
    2734   00:523C  3E 01               		ld		a,1														;cambia a izquierda
    2735   00:523E  FD 77 06            		ld		(iy+6),a
    2736   00:5241                      		
    2737   00:5241  C9                  		ret
    2738   00:5242                      
    2739   00:5242                      hacia_donde_quiero_ir:
    2740   00:5242                      
    2741   00:5242  3A 13 C0            		ld		a,(py)													;si prota está por encima querrá subir y si está por debajo querrá bajar
    2742   00:5245  D6 03               		sub		3
    2743   00:5247  47                  		ld		b,a
    2744   00:5248  FD 7E 01            		ld		a,(iy+1)
    2745   00:524B  B8                  		cp		b
    2746   00:524C                      		
    2747   00:524C  38 11               		jr.		c,damos_valor_bajada_bombero
    2748   00:524E                      		
    2749   00:524E  3A 13 C0            		ld		a,(py)													;si prota está por encima querrá subir y si está por debajo querrá bajar
    2750   00:5251  C6 03               		add		3
    2751   00:5253  47                  		ld		b,a
    2752   00:5254  FD 7E 01            		ld		a,(iy+1)
    2753   00:5257  B8                  		cp		b
    2754   00:5258                      		
    2755   00:5258  30 0B               		jr.		nc,damos_valor_subida_bombero
    2756   00:525A                      		
    2757   00:525A  AF                  		xor		a
    2758   00:525B  FD 77 0A            		ld		(iy+10),a
    2759   00:525E  C9                  		ret
    2760   00:525F                      		
    2761   00:525F                      damos_valor_bajada_bombero:
    2762   00:525F                      				
    2763   00:525F  3E 02               		ld		a,2														; le damos valor a la variable adecuada de bajada
    2764   00:5261  FD 77 0A            		ld		(iy+10),a
    2765   00:5264                      		
    2766   00:5264  C9                  		ret
    2767   00:5265                      
    2768   00:5265                      damos_valor_subida_bombero:
    2769   00:5265                      
    2770   00:5265  3E 01               		ld		a,1														; le damos valor a la variable adecuada de subida
    2771   00:5267  FD 77 0A            		ld		(iy+10),a
    2772   00:526A                      		
    2773   00:526A  C9                  		ret
    2774   00:526B                      
    2775   00:526B                      estamos_en_escalera:
    2776   00:526B                      
    2777   00:526B  FD 7E 0A            		ld		a,(iy+10)
    2778   00:526E  FD 77 07            		ld		(iy+7),a
    2779   00:5271                      		
    2780   00:5271  C9                  		ret
    2781   00:5272                      		
    2782   00:5272                      ultimas_variables_bombero:
    2783   00:5272                      		
    2784   00:5272                      		
    2785   00:5272  DD 21 20 C0         		ld		ix,atributos_sprite_general
    2786   00:5276                      		
    2787   00:5276  DD 77 12            		ld		(ix+18),a												;patrones
    2788   00:5279  C6 04               		add		4
    2789   00:527B  DD 77 16            		ld		(ix+22),a
    2790   00:527E  DD 70 1A            		ld		(ix+26),b
    2791   00:5281                      		
    2792   00:5281  FD 7E 01            		ld		a,(iy+1)												;y
    2793   00:5284  DD 77 10            		ld		(ix+16),a
    2794   00:5287  D6 09               		sub		a,9
    2795   00:5289  DD 77 14            		ld		(ix+20),a
    2796   00:528C  C6 10               		add		a,16
    2797   00:528E  DD 77 18            		ld		(ix+24),a
    2798   00:5291                      		
    2799   00:5291  FD 7E 00            		ld		a,(iy)													;x
    2800   00:5294  DD 77 11            		ld		(ix+17),a
    2801   00:5297  DD 77 15            		ld		(ix+21),a
    2802   00:529A  DD 77 19            		ld		(ix+25),a
    2803   00:529D                      				
    2804   00:529D  3E 01               		ld		a,1														;colores_1
    2805   00:529F  DD 77 13            		ld		(ix+19),a
    2806   00:52A2  3E 09               		ld		a,9
    2807   00:52A4  DD 77 17            		ld		(ix+23),a
    2808   00:52A7  3E 0E               		ld		a,14
    2809   00:52A9  DD 77 1B            		ld		(ix+27),a
    2810   00:52AC                      		
    2811   00:52AC  C9                  		ret
    2812   00:52AD                      		
    2813   00:52AD                      revisa_escalera:
    2814   00:52AD                      
    2815   00:52AD  3A 7A C3            		ld		a,(escalera_activada)
    2816   00:52B0  FE 00               		cp		0
    2817   00:52B2  C8                  		ret		z
    2818   00:52B3                      		
    2819   00:52B3  3A 7D C3            		ld		a,(contador_escalera)
    2820   00:52B6  3D                  		dec		a
    2821   00:52B7  32 7D C3            		ld		(contador_escalera),a
    2822   00:52BA  3A 7D C3            		ld		a,(contador_escalera)
    2823   00:52BD  FE 00               		cp		0
    2824   00:52BF  C0                  		ret		nz
    2825   00:52C0                      		
    2826   00:52C0  3E 32               		ld		a,50
    2827   00:52C2  32 7D C3            		ld		(contador_escalera),a
    2828   00:52C5                      
    2829   00:52C5  2A 7B C3            		ld		hl,(posicion_escalera)
    2830   00:52C8  11 57 C0            		ld		de,buffer_colisiones
    2831   00:52CB  19                  		add		hl,de													;hl=buffer_colisiones + posicion escalera
    2832   00:52CC  01 20 00            		ld		bc,32
    2833   00:52CF  ED 42               		sbc		hl,bc
    2834   00:52D1  3E 2B               		ld		a,43
    2835   00:52D3  77                  		ld		[hl],a
    2836   00:52D4  23                  		inc		hl
    2837   00:52D5  3E 2C               		ld		a,44
    2838   00:52D7  77                  		ld		[hl],a
    2839   00:52D8  01 1F 00            		ld		bc,31
    2840   00:52DB  ED 4A               		adc		hl,bc		
    2841   00:52DD  3E 29               		ld		a,41
    2842   00:52DF  77                  		ld		[hl],a
    2843   00:52E0  23                  		inc		hl
    2844   00:52E1  3E 2A               		ld		a,42
    2845   00:52E3  77                  		ld		[hl],a
    2846   00:52E4                      		
    2847   00:52E4  2A 7B C3            		ld		hl,(posicion_escalera)
    2848   00:52E7  3E 2B               		ld		a,43
    2849   00:52E9  CD D3 6C            		call	pinta_en_pantalla
    2850   00:52EC                      		
    2851   00:52EC  2A 7B C3            		ld		hl,(posicion_escalera)
    2852   00:52EF  23                  		inc		hl
    2853   00:52F0  3E 2C               		ld		a,44
    2854   00:52F2  CD D3 6C            		call	pinta_en_pantalla
    2855   00:52F5                      		
    2856   00:52F5  2A 7B C3            		ld		hl,(posicion_escalera)
    2857   00:52F8  01 20 00            		ld		bc,32
    2858   00:52FB  ED 4A               		adc		hl,bc
    2859   00:52FD  3E 29               		ld		a,41
    2860   00:52FF  CD D3 6C            		call	pinta_en_pantalla
    2861   00:5302                      		
    2862   00:5302  2A 7B C3            		ld		hl,(posicion_escalera)
    2863   00:5305  01 21 00            		ld		bc,33
    2864   00:5308  ED 4A               		adc		hl,bc
    2865   00:530A  3E 2A               		ld		a,42
    2866   00:530C  CD D3 6C            		call	pinta_en_pantalla
    2867   00:530F                      		
    2868   00:530F  3E 0C               		ld		a,12													;efecto de escalera_activada
    2869   00:5311  CD E6 6C            		call	efecto_sonido	
    2870   00:5314                      		
    2871   00:5314  3A 7B C3            		ld		a,(posicion_escalera)
    2872   00:5317  47                  		ld		b,a
    2873   00:5318  3A 7E C3            		ld		a,(limite_escalera)
    2874   00:531B  B8                  		cp		b
    2875   00:531C  28 09               		jr.		z,(se_acabo_la_escalera)
    2876   00:531E                      		
    2877   00:531E  3A 7B C3            		ld		a,(posicion_escalera)
    2878   00:5321  D6 20               		sub		32
    2879   00:5323  32 7B C3            		ld		(posicion_escalera),a
    2880   00:5326                      		
    2881   00:5326  C9                  		ret
    2882   00:5327                      
    2883   00:5327                      se_acabo_la_escalera:
    2884   00:5327                      
    2885   00:5327  AF                  		xor		a
    2886   00:5328  32 7A C3            		ld		(escalera_activada),a
    2887   00:532B  C9                  		ret
    2888   00:532C                      		
    2889   00:532C                      pulsa_una_tecla:
    2890   00:532C                      		
    2891   00:532C  3E 06               		ld		a,6
    2892   00:532E  CD 41 01            		call	SNSMAT
    2893   00:5331  CB 6F               		bit		5,a
    2894   00:5333  28 4B               		jr.		z,pausa_el_juego
    2895   00:5335  CB 77               		bit		6,a
    2896   00:5337  28 1C               		jr.		z,musica_off_on
    2897   00:5339                      ;		bit		7,a														;PARA HACER TRAMPA
    2898   00:5339                      ;		jr.		z,pasa_fase_con_trampa									;PARA HACER TRAMPA
    2899   00:5339                      		
    2900   00:5339  3E 07               		ld		a,7
    2901   00:533B  CD 41 01            		call	SNSMAT
    2902   00:533E  CB 4F               		bit		1,a
    2903   00:5340  28 01               		jr.		z,una_vida_menos
    2904   00:5342                      				
    2905   00:5342  C9                  		ret
    2906   00:5343                      
    2907   00:5343                      ;pasa_fase_con_trampa:													;PARA HACER TRAMPA
    2908   00:5343                      
    2909   00:5343                      ;		call	activa_mute
    2910   00:5343                      ;		ld		a,1														;PARA HACER TRAMPA
    2911   00:5343                      ;		ld		(pasamos_la_fase),a										;PARA HACER TRAMPA
    2912   00:5343                      ;		ret
    2913   00:5343                      		
    2914   00:5343                      una_vida_menos:
    2915   00:5343                      		
    2916   00:5343  CD 44 4E            		call	activa_mute
    2917   00:5346                      		
    2918   00:5346  3E 08               		ld		a,8														;efecto muerte
    2919   00:5348  CD E6 6C            		call	efecto_sonido
    2920   00:534B                      
    2921   00:534B  3A 15 C0            		ld		a,(vidas_prota)
    2922   00:534E  3D                  		dec		a
    2923   00:534F  32 15 C0            		ld		(vidas_prota),a
    2924   00:5352                      		
    2925   00:5352  C3 DE 53            		jr.		repite_fase
    2926   00:5355                      
    2927   00:5355                      musica_off_on:
    2928   00:5355                      		
    2929   00:5355  3A 81 C3            		ld		a,(ESTADO_MUSICA)
    2930   00:5358  FE 00               		CP		0
    2931   00:535A  28 1A               		jr.		z,reconectamos_musica
    2932   00:535C                      		
    2933   00:535C  AF                  		xor		a
    2934   00:535D  32 81 C3            		ld		(ESTADO_MUSICA),a
    2935   00:5360                      		
    2936   00:5360  CD 44 4E            		call	activa_mute
    2937   00:5363                      
    2938   00:5363                      rutina_de_espera_tras_la_musica:
    2939   00:5363                      		
    2940   00:5363  3E 64               		ld		a,100
    2941   00:5365  F5                  		push	af
    2942   00:5366                      		
    2943   00:5366                      valor_anadido_2:
    2944   00:5366                      		
    2945   00:5366  3E FF               		ld		a,255
    2946   00:5368                      		
    2947   00:5368                      retardo_rutina_de_pausa_2:
    2948   00:5368                      		
    2949   00:5368  3D                  		dec		a
    2950   00:5369  FE 00               		cp		0
    2951   00:536B  20 FB               		jr.		nz,retardo_rutina_de_pausa_2
    2952   00:536D  F1                  		pop		af
    2953   00:536E  3D                  		dec		a
    2954   00:536F  F5                  		push	af
    2955   00:5370  FE 00               		cp		0
    2956   00:5372  20 F2               		jr.		nz,valor_anadido_2
    2957   00:5374  F1                  		pop		af
    2958   00:5375  C9                  		ret
    2959   00:5376                      		
    2960   00:5376                      reconectamos_musica:
    2961   00:5376                      
    2962   00:5376  3E 01               		ld		a,1
    2963   00:5378  32 81 C3            		ld		(ESTADO_MUSICA),a
    2964   00:537B                      		
    2965   00:537B  CD 4F 4E            		call	activa_musica_fases					;inicia el reproductor de PT3
    2966   00:537E                      				
    2967   00:537E  18 E3               		jr.		rutina_de_espera_tras_la_musica
    2968   00:5380                      				
    2969   00:5380                      pausa_el_juego:
    2970   00:5380                      
    2971   00:5380  CD 44 4E            		call	activa_mute
    2972   00:5383                      
    2973   00:5383  21 A5 B9            		ld		hl,pause					;anunciamos pausa
    2974   00:5386  11 E2 1A            		ld		de,#1ae2
    2975   00:5389  01 05 00            		ld		bc,5
    2976   00:538C  CD 5C 00            		call	GRABAVRAM
    2977   00:538F                      		
    2978   00:538F  3E 09               		ld		a,9						;efecto de pausa
    2979   00:5391  CD E6 6C            		call	efecto_sonido	
    2980   00:5394                      		
    2981   00:5394  3E 64               		ld		a,100
    2982   00:5396  F5                  		push	af
    2983   00:5397                      		
    2984   00:5397                      valor_anadido:
    2985   00:5397                      		
    2986   00:5397  3E FF               		ld		a,255
    2987   00:5399                      		
    2988   00:5399                      retardo_rutina_de_pausa:
    2989   00:5399                      		
    2990   00:5399  3D                  		dec		a
    2991   00:539A  FE 00               		cp		0
    2992   00:539C  20 FB               		jr.		nz,retardo_rutina_de_pausa
    2993   00:539E  F1                  		pop		af
    2994   00:539F  3D                  		dec		a
    2995   00:53A0  F5                  		push	af
    2996   00:53A1  FE 00               		cp		0
    2997   00:53A3  20 F2               		jr.		nz,valor_anadido
    2998   00:53A5  F1                  		pop		af
    2999   00:53A6                      		
    3000   00:53A6                      rutina_de_pausa:
    3001   00:53A6                      	
    3002   00:53A6  3E 06               		ld		a,6
    3003   00:53A8  CD 41 01            		call	SNSMAT
    3004   00:53AB  CB 6F               		bit		5,a
    3005   00:53AD  28 02               		jr.		Z,reconectamos
    3006   00:53AF  18 F5               		jr. 	rutina_de_pausa
    3007   00:53B1                      
    3008   00:53B1                      reconectamos:
    3009   00:53B1                      		
    3010   00:53B1  21 AA B9            		ld		hl,ladrillos			;recupera los ladrillos borrados
    3011   00:53B4  11 E2 1A            		ld		de,#1ae2
    3012   00:53B7  01 05 00            		ld		bc,5
    3013   00:53BA  CD 5C 00            		call	GRABAVRAM
    3014   00:53BD                      		
    3015   00:53BD  3E 09               		ld		a,9														;efecto de pausa
    3016   00:53BF  CD E6 6C            		call	efecto_sonido
    3017   00:53C2                      		
    3018   00:53C2  3E 64               		ld		a,100
    3019   00:53C4  F5                  		push	af
    3020   00:53C5                      		
    3021   00:53C5                      valor_anadido_1:
    3022   00:53C5                      		
    3023   00:53C5  3E FF               		ld		a,255
    3024   00:53C7                      		
    3025   00:53C7                      retardo_rutina_de_pausa_1:
    3026   00:53C7                      		
    3027   00:53C7  3D                  		dec		a
    3028   00:53C8  FE 00               		cp		0
    3029   00:53CA  20 FB               		jr.		nz,retardo_rutina_de_pausa_1
    3030   00:53CC  F1                  		pop		af
    3031   00:53CD  3D                  		dec		a
    3032   00:53CE  F5                  		push	af
    3033   00:53CF  FE 00               		cp		0
    3034   00:53D1  20 F2               		jr.		nz,valor_anadido_1
    3035   00:53D3  F1                  		pop		af
    3036   00:53D4                      		
    3037   00:53D4  3A 81 C3            		ld		a,(ESTADO_MUSICA)
    3038   00:53D7  FE 01               		cp		1
    3039   00:53D9  C0                  		ret		nz
    3040   00:53DA                      		
    3041   00:53DA  CD 4F 4E            		call	activa_musica_fases										;conectamos las interrupciones
    3042   00:53DD                      		
    3043   00:53DD  C9                  		ret
    3044   00:53DE                      		
    3045   00:53DE                      repite_fase:
    3046   00:53DE                      		
    3047   00:53DE  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3048   00:53E2                      				
    3049   00:53E2  CD 2F 45            		call	limpia_sprites
    3050   00:53E5                      		
    3051   00:53E5  CD 6E 4E            		call	activa_musica_muerto
    3052   00:53E8  CD 23 66            		call	puntuacion_vidas_fase
    3053   00:53EB  CD 70 4D            		call	SPRITES_UNO
    3054   00:53EE                      		
    3055   00:53EE  3A 15 C0            		ld		a,(vidas_prota)
    3056   00:53F1  FE 00               		cp		0
    3057   00:53F3  28 3D               		jr.		z,termina_partida_mal
    3058   00:53F5                      		
    3059   00:53F5  3A 19 C0            		ld		a,(fase_en_la_que_esta)
    3060   00:53F8  FE 01               		cp		1
    3061   00:53FA  CA DE 45            		jr.		z,bloque_sanctuary_1
    3062   00:53FD                      		
    3063   00:53FD  FE 02               		cp		2
    3064   00:53FF  CA 5F 46            		jr.		z,bloque_sanctuary_2
    3065   00:5402                      		
    3066   00:5402  FE 03               		cp		3
    3067   00:5404  CA 0D 47            		jr.		z,bloque_sanctuary_3
    3068   00:5407                      		
    3069   00:5407  FE 04               		cp		4
    3070   00:5409  CA 88 47            		jr.		z,bloque_sanctuary_4
    3071   00:540C                      		
    3072   00:540C  FE 05               		cp		5
    3073   00:540E  CA 2D 48            		jr.		z,bloque_sanctuary_5
    3074   00:5411                      		
    3075   00:5411  FE 06               		cp		6
    3076   00:5413  CA BA 48            		jr.		z,bloque_sanctuary_6
    3077   00:5416                      		
    3078   00:5416  FE 07               		cp		7
    3079   00:5418  CA A3 49            		jr.		z,bloque_sanctuary_7
    3080   00:541B                      		
    3081   00:541B  FE 08               		cp		8
    3082   00:541D  CA 3C 4A            		jr.		z,bloque_sanctuary_8
    3083   00:5420                      		
    3084   00:5420  FE 09               		cp		9
    3085   00:5422  CA D5 4A            		jr.		z,bloque_sanctuary_9
    3086   00:5425                      		
    3087   00:5425  FE 0A               		cp		10
    3088   00:5427  CA 63 4B            		jr.		z,bloque_sanctuary_10
    3089   00:542A                      				
    3090   00:542A  FE 0B               		cp		11
    3091   00:542C  CA 11 4C            		jr.		z,FINAL_TEMPLO
    3092   00:542F                      		
    3093   00:542F  C3 CC 40            		jr.		INICIA_MUSICA
    3094   00:5432                      
    3095   00:5432                      termina_partida_mal:
    3096   00:5432                      
    3097   00:5432  CD 41 00            		call	DISSCR	
    3098   00:5435  21 CC AF            		ld		hl,blanco												;tiles de base de pantalla
    3099   00:5438  11 20 18            		ld		de,#1820
    3100   00:543B  CD EB 6C            		call	depack_VRAM
    3101   00:543E                      		
    3102   00:543E  3A 01 C0            		LD		a,(idioma)
    3103   00:5441  FE 00               		cp		0
    3104   00:5443  28 0E               		jr.		z,termina_en_castellano
    3105   00:5445                      
    3106   00:5445                      termina_en_ingles:
    3107   00:5445                      		
    3108   00:5445  21 91 B9            		ld		hl,game_over											;anunciamos final malo
    3109   00:5448  11 8B 19            		ld		de,#198b
    3110   00:544B  01 0A 00            		ld		bc,10
    3111   00:544E  CD 5C 00            		call	GRABAVRAM
    3112   00:5451  18 0C               		jr.		termina_partida_mal_continua
    3113   00:5453                      		
    3114   00:5453                      termina_en_castellano:
    3115   00:5453                      		
    3116   00:5453  21 9B B9            		ld		hl,se__acabo											;anunciamos final malo
    3117   00:5456  11 8B 19            		ld		de,#198b
    3118   00:5459  01 0A 00            		ld		bc,10
    3119   00:545C  CD 5C 00            		call	GRABAVRAM
    3120   00:545F                      
    3121   00:545F                      termina_partida_mal_continua:
    3122   00:545F                      		
    3123   00:545F  CD 44 00            		call	ENASCR
    3124   00:5462  CD 8F 54            		call 	musica_sin_bucle
    3125   00:5465                      		
    3126   00:5465  21 60 CA            		ld		hl,GAME_OVER-99									;hl ahora vale la direccion donde se encuentra la cancion
    3127   00:5468  CD 9E 6E            		call	PT3_INIT												;inicia el reproductor de PT3
    3128   00:546B                      		
    3129   00:546B  21 EE 02            		ld		hl,750
    3130   00:546E  22 10 C0            		ld		(clock),hl
    3131   00:5471                      		
    3132   00:5471                      string_para_reiniciar_programa:
    3133   00:5471                      
    3134   00:5471  76                  		halt
    3135   00:5472  2A 10 C0            		ld		hl,(clock)
    3136   00:5475  01 01 00            		ld		bc,1		
    3137   00:5478  ED 42               		sbc		hl,bc
    3138   00:547A  22 10 C0            		ld		(clock),hl
    3139   00:547D  28 0A               		jr.		z,inicio
    3140   00:547F                      		
    3141   00:547F  3A 0F C0            		ld		a,(stick_a_usar)
    3142   00:5482  CD D8 00            		CALL	ONSTRIG
    3143   00:5485  FE 00               		cp		0
    3144   00:5487  28 E8               		jr.		z,string_para_reiniciar_programa
    3145   00:5489                      
    3146   00:5489                      inicio:
    3147   00:5489                      		
    3148   00:5489  CD 63 4E            		call	activa_musica_menu
    3149   00:548C  C3 91 41            		jr.		MENU
    3150   00:548F                      
    3151   00:548F                      musica_sin_bucle:
    3152   00:548F                      
    3153   00:548F  3A 00 F0            		ld		a,[PT3_SETUP]											;musica sin bucle
    3154   00:5492  F6 01               		or		00000001b
    3155   00:5494  32 00 F0            		ld		[PT3_SETUP],a
    3156   00:5497                      		
    3157   00:5497  C9                  		ret
    3158   00:5498                      
    3159   00:5498                      musica_con_bucle:
    3160   00:5498                      
    3161   00:5498  3A 00 F0            		ld		a,[PT3_SETUP]											;musica CON bucle
    3162   00:549B  E6 FE               		and		11111110b
    3163   00:549D  32 00 F0            		ld		[PT3_SETUP],a
    3164   00:54A0                      		
    3165   00:54A0  C9                  		ret
    3166   00:54A1                      		
    3167   00:54A1                      colision_bombero_prota:
    3168   00:54A1                      		
    3169   00:54A1  3A 84 C3            		ld		a,(bombero_1)											;si no está activo, no hay colision
    3170   00:54A4  FE 00               		cp		0
    3171   00:54A6  C8                  		ret		z
    3172   00:54A7                      		
    3173   00:54A7  FD 21 85 C3         		ld	    iy,bombero_control										
    3174   00:54AB                      
    3175   00:54AB  FD 7E 08            		ld		a,(iy+8)												;si no está a vista, no hay colision
    3176   00:54AE  FE 00               		cp		0
    3177   00:54B0  C0                  		ret		nz
    3178   00:54B1                      
    3179   00:54B1                      		
    3180   00:54B1  CD B2 56            		call	coteja_colision_prota_bombero
    3181   00:54B4  3A 83 C3            		ld		a,(colision_bombero_prota_real)
    3182   00:54B7  FE 00               		cp		0
    3183   00:54B9  C8                  		ret		z
    3184   00:54BA                      		
    3185   00:54BA  AF                  		xor		a
    3186   00:54BB  32 83 C3            		ld		(colision_bombero_prota_real),a		
    3187   00:54BE                      		
    3188   00:54BE  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3189   00:54C2                      					
    3190   00:54C2  FD 7E 01            		ld		a,(iy+1)												;posiciones y
    3191   00:54C5  3D                  		dec		a
    3192   00:54C6  DD 77 00            		ld		(ix),a
    3193   00:54C9  DD 77 04            		ld		(ix+4),a
    3194   00:54CC  3C                  		inc		a
    3195   00:54CD  DD 77 10            		ld		(ix+16),a
    3196   00:54D0  D6 09               		sub		9
    3197   00:54D2  DD 77 08            		ld		(ix+8),a
    3198   00:54D5  C6 10               		add		16
    3199   00:54D7  DD 77 14            		ld		(ix+20),a
    3200   00:54DA                      		
    3201   00:54DA  FD 7E 00            		ld		a,(iy)													;patrones x
    3202   00:54DD  D6 08               		sub		8
    3203   00:54DF  DD 77 01            		ld		(ix+1),a
    3204   00:54E2  DD 77 05            		ld		(ix+5),a
    3205   00:54E5  C6 0D               		add		13
    3206   00:54E7  DD 77 11            		ld		(ix+17),a
    3207   00:54EA  DD 77 09            		ld		(ix+9),a
    3208   00:54ED  DD 77 15            		ld		(ix+21),a
    3209   00:54F0                      				
    3210   00:54F0  3E EC               		ld		a,59*4													;patrones
    3211   00:54F2  DD 77 02            		ld		(ix+2),a
    3212   00:54F5  3E F0               		ld		a,60*4
    3213   00:54F7  DD 77 06            		ld		(ix+6),a
    3214   00:54FA  3E 7C               		ld		a,31*4
    3215   00:54FC  DD 77 12            		ld		(ix+18),a
    3216   00:54FF  3E 80               		ld		a,32*4
    3217   00:5501  DD 77 0A            		ld		(ix+10),a
    3218   00:5504  3E B4               		ld		a,45*4
    3219   00:5506  DD 77 16            		ld		(ix+22),a
    3220   00:5509                      		
    3221   00:5509  3E 09               		ld		a,9														;colores
    3222   00:550B  DD 77 03            		ld		(ix+3),a												;cara prota
    3223   00:550E  DD 77 0B            		ld		(ix+11),a												;cara bombero
    3224   00:5511  3E 01               		ld		a,1
    3225   00:5513  DD 77 13            		ld		(ix+19),a												;contorno bombero
    3226   00:5516  3E 0F               		ld		a,15
    3227   00:5518  DD 77 07            		ld		(ix+7),a												;agua
    3228   00:551B  3E 0D               		ld		a,13
    3229   00:551D  DD 77 17            		ld		(ix+23),a												;ropa bombero
    3230   00:5520                      				
    3231   00:5520  18 4E               		jr.		espera_por_muerte
    3232   00:5522                      		
    3233   00:5522                      colisiones_serpientes_prota_1:
    3234   00:5522                      
    3235   00:5522  3A 6D C3            		ld		a,(serp1)												;¿está activa la sepriente 1?
    3236   00:5525  FE 01               		cp		1
    3237   00:5527  20 60               		jr.		nz,colisiones_serpientes_prota_2
    3238   00:5529                      		
    3239   00:5529  FD 21 48 C3         		ld		iy,variables_serpiente_1
    3240   00:552D                      		
    3241   00:552D  CD 79 56            		call	coteja_colision_prota_serpiente
    3242   00:5530  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3243   00:5533  FE 00               		cp		0
    3244   00:5535  28 52               		jr.		z,colisiones_serpientes_prota_2
    3245   00:5537                      		
    3246   00:5537  AF                  		xor		a
    3247   00:5538  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3248   00:553B                      		
    3249   00:553B  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3250   00:553F                      					
    3251   00:553F  FD 7E 01            		ld		a,(iy+1)
    3252   00:5542  DD 77 00            		ld		(ix),a
    3253   00:5545  DD 77 04            		ld		(ix+4),a
    3254   00:5548  DD 77 08            		ld		(ix+8),a
    3255   00:554B                      		
    3256   00:554B  FD 7E 00            		ld		a,(iy)
    3257   00:554E  DD 77 01            		ld		(ix+1),a
    3258   00:5551  DD 77 05            		ld		(ix+5),a
    3259   00:5554  DD 77 09            		ld		(ix+9),a
    3260   00:5557                      		
    3261   00:5557  3E BC               		ld		a,47*4
    3262   00:5559  DD 77 02            		ld		(ix+2),a
    3263   00:555C  3E C0               		ld		a,48*4
    3264   00:555E  DD 77 06            		ld		(ix+6),a
    3265   00:5561  3E C4               		ld		a,49*4
    3266   00:5563  DD 77 12            		ld		(ix+18),a
    3267   00:5566  3E C8               		ld		a,50*4
    3268   00:5568  DD 77 0A            		ld		(ix+10),a
    3269   00:556B  3E 60               		ld		a,24*4
    3270   00:556D  DD 77 16            		ld		(ix+22),a
    3271   00:5570                      				
    3272   00:5570                      espera_por_muerte:
    3273   00:5570                      		
    3274   00:5570  CD F0 57            		call	atributos_sprites
    3275   00:5573                      	
    3276   00:5573  CD 44 4E            		call	activa_mute
    3277   00:5576                      	
    3278   00:5576  3E 08               		ld		a,8						;efecto sonoro de muerte de prota
    3279   00:5578  CD E6 6C            		call	efecto_sonido		
    3280   00:557B                      		
    3281   00:557B  AF                  		xor		a
    3282   00:557C  32 18 C0            		ld		(muerto),a
    3283   00:557F                      
    3284   00:557F                      on_string_de_muerte:
    3285   00:557F                      		
    3286   00:557F  21 96 00            		ld		hl,150
    3287   00:5582  22 10 C0            		ld		(clock),hl						
    3288   00:5585  CD 84 4E            		call	rutina_de_esperar_un_rato
    3289   00:5588                      		
    3290   00:5588  C9                  		ret		
    3291   00:5589                      
    3292   00:5589                      colisiones_serpientes_prota_2:
    3293   00:5589                      
    3294   00:5589  3A 6E C3            		ld		a,(serp2)						;¿está activa la sepriente 2?
    3295   00:558C  FE 01               		cp		1
    3296   00:558E  20 49               		jr.		nz,colisiones_serpientes_prota_3
    3297   00:5590                      		
    3298   00:5590  FD 21 51 C3         		ld		iy,variables_serpiente_2
    3299   00:5594                      		
    3300   00:5594  CD 79 56            		call	coteja_colision_prota_serpiente
    3301   00:5597  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3302   00:559A  FE 00               		cp		0
    3303   00:559C  28 3B               		jr.		z,colisiones_serpientes_prota_3
    3304   00:559E                      		
    3305   00:559E  AF                  		xor		a
    3306   00:559F  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3307   00:55A2                      		
    3308   00:55A2  DD 21 20 C0         		ld		ix,atributos_sprite_general		
    3309   00:55A6                      				
    3310   00:55A6  FD 7E 01            		ld		a,(iy+1)
    3311   00:55A9  DD 77 00            		ld		(ix),a
    3312   00:55AC  DD 77 04            		ld		(ix+4),a
    3313   00:55AF  DD 77 08            		ld		(ix+8),a
    3314   00:55B2                      		
    3315   00:55B2  FD 7E 00            		ld		a,(iy)
    3316   00:55B5  DD 77 01            		ld		(ix+1),a
    3317   00:55B8  DD 77 05            		ld		(ix+5),a
    3318   00:55BB  DD 77 09            		ld		(ix+9),a
    3319   00:55BE                      		
    3320   00:55BE  3E BC               		ld		a,47*4
    3321   00:55C0  DD 77 02            		ld		(ix+2),a
    3322   00:55C3  3E C0               		ld		a,48*4
    3323   00:55C5  DD 77 06            		ld		(ix+6),a
    3324   00:55C8  3E C4               		ld		a,49*4
    3325   00:55CA  DD 77 1A            		ld		(ix+26),a
    3326   00:55CD  3E C8               		ld		a,50*4
    3327   00:55CF  DD 77 0A            		ld		(ix+10),a
    3328   00:55D2  3E 60               		ld		a,24*4
    3329   00:55D4  DD 77 1E            		ld		(ix+30),a
    3330   00:55D7                      						
    3331   00:55D7  18 97               		jr.		espera_por_muerte
    3332   00:55D9                      
    3333   00:55D9                      colisiones_serpientes_prota_3:
    3334   00:55D9                      
    3335   00:55D9  3A 6F C3            		ld		a,(serp3)						;¿está activa la sepriente 3?
    3336   00:55DC  FE 01               		cp		1
    3337   00:55DE  20 4A               		jr.		nz,colisiones_serpientes_prota_4
    3338   00:55E0                      
    3339   00:55E0  FD 21 5A C3         		ld		iy,variables_serpiente_3
    3340   00:55E4                      	
    3341   00:55E4  CD 79 56            		call	coteja_colision_prota_serpiente
    3342   00:55E7  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3343   00:55EA  FE 00               		cp		0
    3344   00:55EC  28 3C               		jr.		z,colisiones_serpientes_prota_4
    3345   00:55EE                      		
    3346   00:55EE  AF                  		xor		a
    3347   00:55EF  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3348   00:55F2                      		
    3349   00:55F2  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3350   00:55F6                      				
    3351   00:55F6  FD 7E 01            		ld		a,(iy+1)
    3352   00:55F9  DD 77 00            		ld		(ix),a
    3353   00:55FC  DD 77 04            		ld		(ix+4),a
    3354   00:55FF  DD 77 08            		ld		(ix+8),a
    3355   00:5602                      		
    3356   00:5602  FD 7E 00            		ld		a,(iy)
    3357   00:5605  DD 77 01            		ld		(ix+1),a
    3358   00:5608  DD 77 05            		ld		(ix+5),a
    3359   00:560B  DD 77 09            		ld		(ix+9),a
    3360   00:560E                      		
    3361   00:560E  3E BC               		ld		a,47*4
    3362   00:5610  DD 77 02            		ld		(ix+2),a
    3363   00:5613  3E C0               		ld		a,48*4
    3364   00:5615  DD 77 06            		ld		(ix+6),a
    3365   00:5618  3E C4               		ld		a,49*4
    3366   00:561A  DD 77 22            		ld		(ix+34),a
    3367   00:561D  3E C8               		ld		a,50*4
    3368   00:561F  DD 77 0A            		ld		(ix+10),a
    3369   00:5622  3E 60               		ld		a,24*4
    3370   00:5624  DD 77 26            		ld		(ix+38),a
    3371   00:5627                      		
    3372   00:5627  C3 70 55            		jr.		espera_por_muerte	
    3373   00:562A                      		
    3374   00:562A                      colisiones_serpientes_prota_4:
    3375   00:562A                      
    3376   00:562A  3A 70 C3            		ld		a,(serp4)						;¿está activa la sepriente 4?
    3377   00:562D  FE 01               		cp		1
    3378   00:562F  C0                  		ret		nz
    3379   00:5630                      
    3380   00:5630  FD 21 63 C3         		ld		iy,variables_serpiente_4
    3381   00:5634                      		
    3382   00:5634  CD 79 56            		call	coteja_colision_prota_serpiente
    3383   00:5637  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3384   00:563A  FE 00               		cp		0
    3385   00:563C  C8                  		ret		z
    3386   00:563D                      		
    3387   00:563D  AF                  		xor		a
    3388   00:563E  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3389   00:5641                      		
    3390   00:5641  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3391   00:5645                      						
    3392   00:5645  FD 7E 01            		ld		a,(iy+1)
    3393   00:5648  DD 77 00            		ld		(ix),a
    3394   00:564B  DD 77 04            		ld		(ix+4),a
    3395   00:564E  DD 77 08            		ld		(ix+8),a
    3396   00:5651                      		
    3397   00:5651  FD 7E 00            		ld		a,(iy)
    3398   00:5654  DD 77 01            		ld		(ix+1),a
    3399   00:5657  DD 77 05            		ld		(ix+5),a
    3400   00:565A  DD 77 09            		ld		(ix+9),a
    3401   00:565D                      		
    3402   00:565D  3E BC               		ld		a,47*4
    3403   00:565F  DD 77 02            		ld		(ix+2),a
    3404   00:5662  3E C0               		ld		a,48*4
    3405   00:5664  DD 77 06            		ld		(ix+6),a
    3406   00:5667  3E C4               		ld		a,49*4
    3407   00:5669  DD 77 2A            		ld		(ix+42),a
    3408   00:566C  3E C8               		ld		a,50*4
    3409   00:566E  DD 77 0A            		ld		(ix+10),a
    3410   00:5671  3E 60               		ld		a,24*4
    3411   00:5673  DD 77 2E            		ld		(ix+46),a
    3412   00:5676                      		
    3413   00:5676  C3 70 55            		jr.		espera_por_muerte
    3414   00:5679                      
    3415   00:5679                      coteja_colision_prota_serpiente:
    3416   00:5679                      
    3417   00:5679  3A 12 C0            		ld		a,(px)
    3418   00:567C  D6 07               		sub		a,7					;coordenadas coincidentes
    3419   00:567E  47                  		ld		b,a
    3420   00:567F  FD 7E 00            		ld		a,(iy)
    3421   00:5682  B8                  		cp		b
    3422   00:5683  D8                  		ret		c
    3423   00:5684                      		
    3424   00:5684  3A 12 C0            		ld		a,(px)
    3425   00:5687  C6 0A               		add		a,10
    3426   00:5689  47                  		ld		b,a
    3427   00:568A  FD 7E 00            		ld		a,(iy)
    3428   00:568D  B8                  		cp		b
    3429   00:568E  D0                  		ret		nc
    3430   00:568F                      		
    3431   00:568F  3A 13 C0            		ld		a,(py)
    3432   00:5692  D6 0E               		sub		a,14
    3433   00:5694  47                  		ld		b,a
    3434   00:5695  FD 7E 01            		ld		a,(iy+1)
    3435   00:5698  B8                  		cp		b
    3436   00:5699  D8                  		ret		c
    3437   00:569A                      		
    3438   00:569A  3A 13 C0            		ld		a,(py)
    3439   00:569D  C6 0E               		add		14
    3440   00:569F  47                  		ld		b,a
    3441   00:56A0  FD 7E 01            		ld		a,(iy+1)
    3442   00:56A3  B8                  		cp		b
    3443   00:56A4  D0                  		ret		nc
    3444   00:56A5                      		
    3445   00:56A5  3A 15 C0            		ld		a,(vidas_prota)
    3446   00:56A8  3D                  		dec		a
    3447   00:56A9  32 15 C0            		ld		(vidas_prota),a
    3448   00:56AC                      		
    3449   00:56AC  3E 01               		ld		a,1
    3450   00:56AE  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3451   00:56B1                      		
    3452   00:56B1  C9                  		ret
    3453   00:56B2                      
    3454   00:56B2                      coteja_colision_prota_bombero:
    3455   00:56B2                      
    3456   00:56B2  3A 12 C0            		ld		a,(px)
    3457   00:56B5  D6 07               		sub		a,7					;coordenadas coincidentes
    3458   00:56B7  47                  		ld		b,a
    3459   00:56B8  FD 7E 00            		ld		a,(iy)
    3460   00:56BB  B8                  		cp		b
    3461   00:56BC  D8                  		ret		c
    3462   00:56BD                      		
    3463   00:56BD  3A 12 C0            		ld		a,(px)
    3464   00:56C0  C6 0A               		add		a,10
    3465   00:56C2  47                  		ld		b,a
    3466   00:56C3  FD 7E 00            		ld		a,(iy)
    3467   00:56C6  B8                  		cp		b
    3468   00:56C7  D0                  		ret		nc
    3469   00:56C8                      		
    3470   00:56C8  3A 13 C0            		ld		a,(py)
    3471   00:56CB  D6 0E               		sub		a,14
    3472   00:56CD  47                  		ld		b,a
    3473   00:56CE  FD 7E 01            		ld		a,(iy+1)
    3474   00:56D1  B8                  		cp		b
    3475   00:56D2  D8                  		ret		c
    3476   00:56D3                      		
    3477   00:56D3  3A 13 C0            		ld		a,(py)
    3478   00:56D6  C6 0E               		add		14
    3479   00:56D8  47                  		ld		b,a
    3480   00:56D9  FD 7E 01            		ld		a,(iy+1)
    3481   00:56DC  B8                  		cp		b
    3482   00:56DD  D0                  		ret		nc
    3483   00:56DE                      		
    3484   00:56DE  3A 15 C0            		ld		a,(vidas_prota)
    3485   00:56E1  3D                  		dec		a
    3486   00:56E2  32 15 C0            		ld		(vidas_prota),a
    3487   00:56E5                      		
    3488   00:56E5  3E 01               		ld		a,1
    3489   00:56E7  32 83 C3            		ld		(colision_bombero_prota_real),a
    3490   00:56EA                      		
    3491   00:56EA  C9                  		ret
    3492   00:56EB                      				
    3493   00:56EB                      colisiones_serpientes_cuchillos:
    3494   00:56EB                      
    3495   00:56EB  3A 73 C3            		ld		a,(momento_lanzamiento)			;mira si es posible que el cuchillo este volando
    3496   00:56EE  FE 02               		cp		2
    3497   00:56F0  D8                  		ret		c
    3498   00:56F1                      				
    3499   00:56F1  3A 6D C3            		ld		a,(serp1)						;¿está activa la sepriente 1?
    3500   00:56F4  FE 01               		cp		1
    3501   00:56F6  20 23               		jr.		nz,colision_cuchillo_serp_2
    3502   00:56F8                      		
    3503   00:56F8                      colision_cuchillo_serp_1:
    3504   00:56F8                      		
    3505   00:56F8  FD 21 48 C3         		ld		iy,variables_serpiente_1
    3506   00:56FC                      		
    3507   00:56FC                      		
    3508   00:56FC  CD 98 57            		call	colision_cuchillo_serpiente
    3509   00:56FF  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3510   00:5702  FE 00               		cp		0
    3511   00:5704  28 15               		jr.		z,colision_cuchillo_serp_2
    3512   00:5706                      		
    3513   00:5706  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3514   00:570A                      					
    3515   00:570A  AF                  		xor		a
    3516   00:570B  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3517   00:570E  32 6D C3            		ld		(serp1),a
    3518   00:5711  3E B4               		ld		a,180
    3519   00:5713  DD 77 12            		ld		(ix+18),a
    3520   00:5716  3E B8               		ld		a,184
    3521   00:5718  DD 77 16            		ld		(ix+22),a
    3522   00:571B                      						
    3523   00:571B                      colision_cuchillo_serp_2:
    3524   00:571B                      
    3525   00:571B  3A 6E C3            		ld		a,(serp2)						;¿está activa la sepriente 1?
    3526   00:571E  FE 01               		cp		1
    3527   00:5720  20 23               		jr.		nz,colision_cuchillo_serp_3
    3528   00:5722                      		
    3529   00:5722  FD 21 51 C3         		ld		iy,variables_serpiente_2
    3530   00:5726                      		
    3531   00:5726  CD 98 57            		call	colision_cuchillo_serpiente
    3532   00:5729  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3533   00:572C  FE 00               		cp		0
    3534   00:572E  28 15               		jr.		z,colision_cuchillo_serp_3
    3535   00:5730                      		
    3536   00:5730  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3537   00:5734                      				
    3538   00:5734  AF                  		xor		a
    3539   00:5735  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3540   00:5738  32 6E C3            		ld		(serp2),a
    3541   00:573B  3E B4               		ld		a,180
    3542   00:573D  DD 77 1A            		ld		(ix+26),a
    3543   00:5740  3E B8               		ld		a,184
    3544   00:5742  DD 77 1E            		ld		(ix+30),a
    3545   00:5745                      								
    3546   00:5745                      colision_cuchillo_serp_3:
    3547   00:5745                      
    3548   00:5745  3A 6F C3            		ld		a,(serp3)						;¿está activa la sepriente 1?
    3549   00:5748  FE 01               		cp		1
    3550   00:574A  20 23               		jr.		nz,colision_cuchillo_serp_4
    3551   00:574C                      		
    3552   00:574C  FD 21 5A C3         		ld		iy,variables_serpiente_3
    3553   00:5750                      		
    3554   00:5750  CD 98 57            		call	colision_cuchillo_serpiente
    3555   00:5753  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3556   00:5756  FE 00               		cp		0
    3557   00:5758  28 15               		jr.		z,colision_cuchillo_serp_4
    3558   00:575A                      		
    3559   00:575A  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3560   00:575E                      			
    3561   00:575E  AF                  		xor		a
    3562   00:575F  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3563   00:5762  32 6F C3            		ld		(serp3),a
    3564   00:5765  3E B4               		ld		a,180
    3565   00:5767  DD 77 22            		ld		(ix+34),a
    3566   00:576A  3E B8               		ld		a,184
    3567   00:576C  DD 77 26            		ld		(ix+38),a
    3568   00:576F                      				
    3569   00:576F                      colision_cuchillo_serp_4:
    3570   00:576F                      
    3571   00:576F  3A 70 C3            		ld		a,(serp4)						;¿está activa la sepriente 1?
    3572   00:5772  FE 01               		cp		1
    3573   00:5774  C0                  		ret		nz
    3574   00:5775                      		
    3575   00:5775  FD 21 63 C3         		ld		iy,variables_serpiente_4
    3576   00:5779                      		
    3577   00:5779  CD 98 57            		call	colision_cuchillo_serpiente
    3578   00:577C  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3579   00:577F  FE 00               		cp		0
    3580   00:5781  C8                  		ret		z
    3581   00:5782                      		
    3582   00:5782  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3583   00:5786                      		
    3584   00:5786  AF                  		xor		a
    3585   00:5787  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3586   00:578A  32 70 C3            		ld		(serp4),a
    3587   00:578D  3E B4               		ld		a,180
    3588   00:578F  DD 77 2A            		ld		(ix+42),a
    3589   00:5792  3E B8               		ld		a,184
    3590   00:5794  DD 77 2E            		ld		(ix+46),a
    3591   00:5797                      		
    3592   00:5797  C9                  		ret
    3593   00:5798                      
    3594   00:5798                      colision_cuchillo_serpiente:
    3595   00:5798                      
    3596   00:5798  3A 78 C3            		ld		a,(cx)							;coordenadas coincidentes
    3597   00:579B  47                  		ld		b,a
    3598   00:579C  FD 7E 00            		ld		a,(iy)
    3599   00:579F  B8                  		cp		b
    3600   00:57A0  D0                  		ret		nc
    3601   00:57A1                      		
    3602   00:57A1  C6 10               		add		a,16
    3603   00:57A3  B8                  		cp		b
    3604   00:57A4  D8                  		ret		c
    3605   00:57A5                      	
    3606   00:57A5  3A 79 C3            		ld		a,(cy)
    3607   00:57A8  47                  		ld		b,a
    3608   00:57A9  FD 7E 01            		ld		a,(iy+1)
    3609   00:57AC  D6 04               		sub		4
    3610   00:57AE  B8                  		cp		b
    3611   00:57AF  D0                  		ret		nc
    3612   00:57B0                      				
    3613   00:57B0  C6 14               		add		a,20
    3614   00:57B2  B8                  		cp		b
    3615   00:57B3  D8                  		ret		c
    3616   00:57B4                      						
    3617   00:57B4  AF                  		xor		a
    3618   00:57B5  32 73 C3            		ld		(momento_lanzamiento),a
    3619   00:57B8                      				
    3620   00:57B8  3A 78 C3            		ld		a,[cx]						;recupera lo que habia en el tile anteriormente					
    3621   00:57BB  57                  		ld		d,a
    3622   00:57BC  3A 79 C3            		ld		a,[cy]
    3623   00:57BF  5F                  		ld		e,a
    3624   00:57C0  CD A9 5C            		call	get_bloque_en_X_Y
    3625   00:57C3                      		
    3626   00:57C3  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    3627   00:57C6  77                  		ld		[hl],a
    3628   00:57C7                      				
    3629   00:57C7  3E 07               		ld		a,7						;efecto sonoro de muerte
    3630   00:57C9  CD E6 6C            		call	efecto_sonido	
    3631   00:57CC                      		
    3632   00:57CC  3A 78 C3            		ld		a,[cx]						;recupera tambien en vram
    3633   00:57CF  57                  		ld		d,a
    3634   00:57D0  3A 79 C3            		ld		a,[cy]
    3635   00:57D3  5F                  		ld		e,a
    3636   00:57D4  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    3637   00:57D7                      		
    3638   00:57D7  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    3639   00:57DA  CD D3 6C            		call	pinta_en_pantalla
    3640   00:57DD                      		
    3641   00:57DD  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger mechero
    3642   00:57E0  C6 19               		add		a,25
    3643   00:57E2  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    3644   00:57E5  3E 01               		ld		a,1
    3645   00:57E7  32 46 C3            		ld		(cuenta_puntos_o_no),a
    3646   00:57EA                      		
    3647   00:57EA  3E 01               		ld		a,1
    3648   00:57EC  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3649   00:57EF                      				
    3650   00:57EF  C9                  		ret
    3651   00:57F0                      		
    3652   00:57F0                      atributos_sprites:
    3653   00:57F0                      
    3654   00:57F0  21 20 C0            		ld		hl,atributos_sprite_general
    3655   00:57F3  11 00 1B            		ld		de,#1B00
    3656   00:57F6  01 30 00            		ld		bc,48
    3657   00:57F9  CD 5C 00            		call	GRABAVRAM		
    3658   00:57FC  C9                  		ret
    3659   00:57FD                      		
    3660   00:57FD                      estado_en_que_se_encuentra:
    3661   00:57FD  CD A6 6B            		call	seis_dos
    3662   00:5800  CD A9 5C            		call	get_bloque_en_X_Y
    3663   00:5803  FE 21               		cp		33					;si esta en la salida revisamos si sale
    3664   00:5805  CA 94 5D            		jr.		z,fase_superada
    3665   00:5808                      		
    3666   00:5808  3A 37 C3            		ld		a,(estado_de_salto)		;no salta? vamos a comprovar si hace algo
    3667   00:580B  FE 00               		cp		0						
    3668   00:580D  28 1E               		jr.		z,continua_estado
    3669   00:580F                      
    3670   00:580F  FE 03               		cp		3						;diferentes estados de salto
    3671   00:5811  DA 32 67            		jr.		c,salta_sube
    3672   00:5814  FE 13               		cp		19
    3673   00:5816  DA 9B 67            		jr.		c,salta_sigue
    3674   00:5819  FE 15               		cp		21
    3675   00:581B  DA C2 67            		jr.		c,salta_baja
    3676   00:581E  FE 21               		cp		33
    3677   00:5820  DA 70 67            		jr.		c,salta_sube_izquierda
    3678   00:5823  FE 31               		cp		49
    3679   00:5825  DA AF 67            		jr.		c,salta_sigue_izquierda
    3680   00:5828  FE 33               		cp		51
    3681   00:582A  DA F2 67            		jr.		c,salta_baja_izquierda
    3682   00:582D                      		
    3683   00:582D                      continua_estado:		
    3684   00:582D                      		
    3685   00:582D  3A 1A C0            		ld		a,(estado_prota)
    3686   00:5830  FE 04               		cp		4
    3687   00:5832  C8                  		ret		z
    3688   00:5833                      				
    3689   00:5833  CD 7C 6C            		call	ocho_dieciocho
    3690   00:5836  CD A9 5C            		call	get_bloque_en_X_Y
    3691   00:5839                      		
    3692   00:5839  FE 29               		cp		41				;no cae si hay escalera
    3693   00:583B  28 2B               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3694   00:583D  FE 2A               		cp		42
    3695   00:583F  28 27               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3696   00:5841  FE 49               		cp		73
    3697   00:5843  28 23               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3698   00:5845  FE 4A               		cp		74
    3699   00:5847  28 1F               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3700   00:5849                      		
    3701   00:5849                      		
    3702   00:5849                      		
    3703   00:5849  3A 12 C0            		ld		a,[px]
    3704   00:584C  C6 0A               		add		10
    3705   00:584E  57                  		ld		d,a
    3706   00:584F  3A 13 C0            		ld		a,[py]
    3707   00:5852  C6 11               		add		17
    3708   00:5854  5F                  		ld		e,a
    3709   00:5855  CD A9 5C            		call	get_bloque_en_X_Y
    3710   00:5858  FE 65               		cp		101
    3711   00:585A  28 0C               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3712   00:585C                      		
    3713   00:585C  CD BC 6B            		call	siete_diecisiete
    3714   00:585F  CD A9 5C            		call	get_bloque_en_X_Y
    3715   00:5862                      		
    3716   00:5862  FE 1F               		cp		31					;controla el bloque de ladrillos
    3717   00:5864  30 08               		jr.		nc,segunda_comprovacion_caida
    3718   00:5866                      		
    3719   00:5866  18 19               		jr.		final_rutina_sin_caida
    3720   00:5868                      
    3721   00:5868                      cambio_estado_a_subiendo_para_la_caida:
    3722   00:5868                      
    3723   00:5868  3E 04               		ld		a,4
    3724   00:586A  32 1A C0            		ld		(estado_prota),a
    3725   00:586D  C9                  		ret		
    3726   00:586E                      		
    3727   00:586E                      segunda_comprovacion_caida:
    3728   00:586E                      			
    3729   00:586E  3A 12 C0            		ld		a,[px]
    3730   00:5871  C6 0B               		add		11
    3731   00:5873  57                  		ld		d,a
    3732   00:5874  3A 13 C0            		ld		a,[py]
    3733   00:5877  C6 11               		add		17
    3734   00:5879  5F                  		ld		e,a
    3735   00:587A  CD A9 5C            		call	get_bloque_en_X_Y
    3736   00:587D  FE 1F               		cp		31
    3737   00:587F  30 06               		jr.		nc,caigo
    3738   00:5881                      
    3739   00:5881                      final_rutina_sin_caida:
    3740   00:5881                      		
    3741   00:5881  3E 00               		ld		a,0
    3742   00:5883  32 1A C0            		ld		(estado_prota),a
    3743   00:5886                      			
    3744   00:5886  C9                  		ret
    3745   00:5887                      
    3746   00:5887                      caigo:
    3747   00:5887                      
    3748   00:5887  3E 03               		ld		a,3
    3749   00:5889  32 1A C0            		ld		(estado_prota),a
    3750   00:588C                      		
    3751   00:588C  3A 13 C0            		ld		a,(py)
    3752   00:588F  C6 02               		add		a,2
    3753   00:5891  32 13 C0            		ld		(py),a
    3754   00:5894                      		
    3755   00:5894  3A 12 C0            		ld		a,[px]						;observa si hay que rectificar la caida
    3756   00:5897  C6 0F               		add		15
    3757   00:5899  57                  		ld		d,a
    3758   00:589A  3A 13 C0            		ld		a,[py]
    3759   00:589D  C6 0F               		add		15
    3760   00:589F  5F                  		ld		e,a
    3761   00:58A0  CD A9 5C            		call	get_bloque_en_X_Y
    3762   00:58A3  FE 1F               		cp		31
    3763   00:58A5  38 12               		jr.		c,rectifico_caida_a_izquierda
    3764   00:58A7                      		
    3765   00:58A7  3A 12 C0            		ld		a,[px]
    3766   00:58AA  57                  		ld		d,a
    3767   00:58AB  3A 13 C0            		ld		a,[py]
    3768   00:58AE  C6 0F               		add		15
    3769   00:58B0  5F                  		ld		e,a
    3770   00:58B1  CD A9 5C            		call	get_bloque_en_X_Y
    3771   00:58B4  FE 1F               		cp		31
    3772   00:58B6  38 09               		jr.		c,rectifico_caida_a_derecha
    3773   00:58B8                      		
    3774   00:58B8  C9                  		ret
    3775   00:58B9                      
    3776   00:58B9                      rectifico_caida_a_izquierda:
    3777   00:58B9                      
    3778   00:58B9  3A 12 C0            		ld		a,(px)
    3779   00:58BC  3D                  		dec		a
    3780   00:58BD  32 12 C0            		ld		(px),a
    3781   00:58C0  C9                  		ret
    3782   00:58C1                      
    3783   00:58C1                      rectifico_caida_a_derecha:
    3784   00:58C1                      
    3785   00:58C1  3A 12 C0            		ld		a,(px)
    3786   00:58C4  3C                  		inc		a
    3787   00:58C5  32 12 C0            		ld		(px),a
    3788   00:58C8  C9                  		ret
    3789   00:58C9                      				
    3790   00:58C9                      mueve_prota:
    3791   00:58C9                      
    3792   00:58C9  3A 1A C0            		ld		a,(estado_prota)										;si esta en callendo no se mueve
    3793   00:58CC  FE 03               		cp		3
    3794   00:58CE  C8                  		ret		z
    3795   00:58CF  3A 37 C3            		ld		a,(estado_de_salto)										;si esta saltando no se mueve
    3796   00:58D2  FE 00               		cp		0
    3797   00:58D4  C0                  		ret		nz
    3798   00:58D5  3A 73 C3            		ld		a,(momento_lanzamiento) 								;si está lanzando no se mueve
    3799   00:58D8  FE 01               		cp		1
    3800   00:58DA  C8                  		ret		z
    3801   00:58DB  FE 02               		cp		2
    3802   00:58DD  C8                  		ret		z
    3803   00:58DE  3A 14 C0            		ld		a,(puede_cambiar_de_direccion)							;si está en una puerta no puede moverse por su cuenta
    3804   00:58E1  FE 00               		cp		0
    3805   00:58E3  C8                  		ret		z
    3806   00:58E4                      		
    3807   00:58E4  3A 0F C0            		ld		a,(stick_a_usar)
    3808   00:58E7  CD D5 00            		call	ONSTICK
    3809   00:58EA                      		
    3810   00:58EA  FE 00               		cp		0
    3811   00:58EC  CA E9 5C            		jr.		z,pone_estado_prota_a_0
    3812   00:58EF  FE 01               		cp		1
    3813   00:58F1  28 10               		jr.		z,sube_escaleras
    3814   00:58F3  FE 05               		cp		5
    3815   00:58F5  CA BD 59            		jr.		z,baja_escaleras	
    3816   00:58F8  FE 03               		cp		3
    3817   00:58FA  CA 89 5B            		jr.		z,mueve_derecha_prota
    3818   00:58FD  FE 07               		cp		7
    3819   00:58FF  CA 71 5A            		jr.		z,mueve_izquierda_prota
    3820   00:5902                      				
    3821   00:5902  C9                  		ret
    3822   00:5903                      		
    3823   00:5903                      sube_escaleras:
    3824   00:5903                      
    3825   00:5903  F5                  		push	af
    3826   00:5904                      		
    3827   00:5904                      		
    3828   00:5904  3A 12 C0            		ld		a,[px]
    3829   00:5907  C6 06               		add		6
    3830   00:5909  57                  		ld		d,a
    3831   00:590A  3A 13 C0            		ld		a,[py]
    3832   00:590D  C6 01               		add		1
    3833   00:590F  5F                  		ld		e,a
    3834   00:5910  CD A9 5C            		call	get_bloque_en_X_Y
    3835   00:5913  FE 29               		cp		41
    3836   00:5915  28 38               		jr.		z,sube_escaleras_afirmativo
    3837   00:5917  FE 2A               		cp		42
    3838   00:5919  28 34               		jr.		z,sube_escaleras_afirmativo
    3839   00:591B  FE 49               		cp		73
    3840   00:591D  28 30               		jr.		z,sube_escaleras_afirmativo
    3841   00:591F  FE 4A               		cp		74
    3842   00:5921  28 2C               		jr.		z,sube_escaleras_afirmativo
    3843   00:5923  FE 67               		cp		103
    3844   00:5925  28 28               		jr.		z,sube_escaleras_afirmativo
    3845   00:5927  FE 69               		cp		105
    3846   00:5929  28 24               		jr.		z,sube_escaleras_afirmativo
    3847   00:592B  FE 6A               		cp		106
    3848   00:592D  28 20               		jr.		z,sube_escaleras_afirmativo
    3849   00:592F                      		
    3850   00:592F  CD 7F 6B            		call	seis_diez
    3851   00:5932  CD A9 5C            		call	get_bloque_en_X_Y
    3852   00:5935  FE 65               		cp		101
    3853   00:5937  28 16               		jr.		z,sube_escaleras_afirmativo
    3854   00:5939                      		
    3855   00:5939                      		
    3856   00:5939  3A 12 C0            		ld		a,[px]
    3857   00:593C  C6 0A               		add		10
    3858   00:593E  57                  		ld		d,a
    3859   00:593F  3A 13 C0            		ld		a,[py]
    3860   00:5942  C6 01               		add		1
    3861   00:5944  5F                  		ld		e,a
    3862   00:5945  CD A9 5C            		call	get_bloque_en_X_Y
    3863   00:5948  FE 65               		cp		101
    3864   00:594A  28 03               		jr.		z,sube_escaleras_afirmativo
    3865   00:594C                      		
    3866   00:594C  C3 A3 5C            		jr.		set_parado
    3867   00:594F                      		
    3868   00:594F                      sube_escaleras_afirmativo:
    3869   00:594F                      
    3870   00:594F  CD B3 6B            		call	cero_cero
    3871   00:5952  CD A9 5C            		call	get_bloque_en_X_Y
    3872   00:5955  FE 29               		cp		41
    3873   00:5957  28 1A               		jr.		z,a_mover_a_la_izquierda
    3874   00:5959  FE 2A               		cp		42
    3875   00:595B  28 16               		jr.		z,a_mover_a_la_izquierda
    3876   00:595D  FE 49               		cp		73
    3877   00:595F  28 12               		jr.		z,a_mover_a_la_izquierda
    3878   00:5961  FE 4A               		cp		74
    3879   00:5963  28 0E               		jr.		z,a_mover_a_la_izquierda
    3880   00:5965  FE 67               		cp		103
    3881   00:5967  28 0A               		jr.		z,a_mover_a_la_izquierda
    3882   00:5969  FE 65               		cp		101
    3883   00:596B  28 06               		jr.		z,a_mover_a_la_izquierda
    3884   00:596D  FE 69               		cp		105
    3885   00:596F  28 02               		jr.		z,a_mover_a_la_izquierda
    3886   00:5971                      		
    3887   00:5971  18 09               		jr.		comprueba_derecha
    3888   00:5973                      
    3889   00:5973                      a_mover_a_la_izquierda:
    3890   00:5973                      		
    3891   00:5973  3A 12 C0            		ld		a,[px]
    3892   00:5976  3D                  		dec		a
    3893   00:5977  32 12 C0            		ld		[px],a
    3894   00:597A  18 32               		jr.		a_subir
    3895   00:597C                      		
    3896   00:597C                      comprueba_derecha:
    3897   00:597C                      
    3898   00:597C  3A 12 C0            		ld		a,[px]
    3899   00:597F  C6 10               		add		16
    3900   00:5981  57                  		ld		d,a
    3901   00:5982  3A 13 C0            		ld		a,[py]
    3902   00:5985  5F                  		ld		e,a
    3903   00:5986  CD A9 5C            		call	get_bloque_en_X_Y
    3904   00:5989  FE 29               		cp		41
    3905   00:598B  28 1A               		jr.		z,a_mover_a_la_derecha
    3906   00:598D  FE 2A               		cp		42
    3907   00:598F  28 16               		jr.		z,a_mover_a_la_derecha
    3908   00:5991  FE 49               		cp		73
    3909   00:5993  28 12               		jr.		z,a_mover_a_la_derecha
    3910   00:5995  FE 4A               		cp		74
    3911   00:5997  28 0E               		jr.		z,a_mover_a_la_derecha
    3912   00:5999  FE 65               		cp		101
    3913   00:599B  28 0A               		jr.		z,a_mover_a_la_derecha
    3914   00:599D  FE 67               		cp		103
    3915   00:599F  28 06               		jr.		z,a_mover_a_la_derecha
    3916   00:59A1  FE 69               		cp		105
    3917   00:59A3  28 02               		jr.		z,a_mover_a_la_derecha
    3918   00:59A5  18 07               		jr.		a_subir
    3919   00:59A7                      
    3920   00:59A7                      a_mover_a_la_derecha:
    3921   00:59A7                      		
    3922   00:59A7  3A 12 C0            		ld		a,[px]
    3923   00:59AA  3C                  		inc		a
    3924   00:59AB  32 12 C0            		ld		[px],a
    3925   00:59AE                      				
    3926   00:59AE                      a_subir:
    3927   00:59AE                      
    3928   00:59AE  3E 04               		ld		a,4					;le da el valor 4 a la variable estado prota
    3929   00:59B0  32 1A C0            		ld		(estado_prota),a
    3930   00:59B3                      		
    3931   00:59B3  3A 13 C0            		ld		a,(py)
    3932   00:59B6  3D                  		dec		a
    3933   00:59B7  32 13 C0            		ld		(py),a
    3934   00:59BA  C3 B3 5A            		jr.		actualiza_el_paso_subiendo
    3935   00:59BD                      
    3936   00:59BD                      baja_escaleras:
    3937   00:59BD                      
    3938   00:59BD  F5                  		push	af
    3939   00:59BE                      		
    3940   00:59BE                      		
    3941   00:59BE  3A 12 C0            		ld		a,[px]
    3942   00:59C1  C6 06               		add		6
    3943   00:59C3  57                  		ld		d,a
    3944   00:59C4  3A 13 C0            		ld		a,[py]
    3945   00:59C7  C6 10               		add		16
    3946   00:59C9  5F                  		ld		e,a
    3947   00:59CA  CD A9 5C            		call	get_bloque_en_X_Y
    3948   00:59CD  FE 29               		cp		41
    3949   00:59CF  28 36               		jr.		z,baja_escaleras_afirmativo
    3950   00:59D1  FE 2A               		cp		42
    3951   00:59D3  28 32               		jr.		z,baja_escaleras_afirmativo
    3952   00:59D5  FE 2B               		cp		43
    3953   00:59D7  28 2E               		jr.		z,baja_escaleras_afirmativo
    3954   00:59D9  FE 2C               		cp		44
    3955   00:59DB  28 2A               		jr.		z,baja_escaleras_afirmativo
    3956   00:59DD  FE 49               		cp		73
    3957   00:59DF  28 26               		jr.		z,baja_escaleras_afirmativo
    3958   00:59E1  FE 4A               		cp		74
    3959   00:59E3  28 22               		jr.		z,baja_escaleras_afirmativo
    3960   00:59E5  FE 67               		cp		103
    3961   00:59E7  28 1E               		jr.		z,baja_escaleras_afirmativo
    3962   00:59E9  FE 6A               		cp		106
    3963   00:59EB  28 1A               		jr.		z,baja_escaleras_afirmativo
    3964   00:59ED  FE 69               		cp		105
    3965   00:59EF  28 16               		jr.		z,baja_escaleras_afirmativo
    3966   00:59F1  3A 12 C0            		ld		a,[px]
    3967   00:59F4  C6 0A               		add		10
    3968   00:59F6  57                  		ld		d,a
    3969   00:59F7  3A 13 C0            		ld		a,[py]
    3970   00:59FA  C6 10               		add		16
    3971   00:59FC  5F                  		ld		e,a
    3972   00:59FD  CD A9 5C            		call	get_bloque_en_X_Y
    3973   00:5A00  FE 65               		cp		101
    3974   00:5A02  28 03               		jr.		z,baja_escaleras_afirmativo
    3975   00:5A04                      		
    3976   00:5A04  C3 A3 5C            		jr.		set_parado
    3977   00:5A07                      		
    3978   00:5A07                      baja_escaleras_afirmativo:
    3979   00:5A07                      
    3980   00:5A07  CD C9 6B            		call	menos_uno_dieciseis
    3981   00:5A0A  CD A9 5C            		call	get_bloque_en_X_Y
    3982   00:5A0D  FE 29               		cp		41
    3983   00:5A0F  28 1A               		jr.		z,a_mover_a_la_izquierda_bajando
    3984   00:5A11  FE 2A               		cp		42
    3985   00:5A13  28 16               		jr.		z,a_mover_a_la_izquierda_bajando
    3986   00:5A15  FE 49               		cp		73
    3987   00:5A17  28 12               		jr.		z,a_mover_a_la_izquierda_bajando
    3988   00:5A19  FE 4A               		cp		74
    3989   00:5A1B  28 0E               		jr.		z,a_mover_a_la_izquierda_bajando
    3990   00:5A1D  FE 67               		cp		103
    3991   00:5A1F  28 0A               		jr.		z,a_mover_a_la_izquierda_bajando
    3992   00:5A21  FE 6A               		cp		106
    3993   00:5A23  28 06               		jr.		z,a_mover_a_la_izquierda_bajando
    3994   00:5A25  FE 69               		cp		105
    3995   00:5A27  28 02               		jr.		z,a_mover_a_la_izquierda_bajando
    3996   00:5A29                      		
    3997   00:5A29  18 09               		jr.		comprueba_derecha_bajando
    3998   00:5A2B                      
    3999   00:5A2B                      a_mover_a_la_izquierda_bajando:
    4000   00:5A2B                      		
    4001   00:5A2B  3A 12 C0            		ld		a,[px]
    4002   00:5A2E  3D                  		dec		a
    4003   00:5A2F  32 12 C0            		ld		[px],a
    4004   00:5A32  18 2F               		jr.		a_bajar
    4005   00:5A34                      		
    4006   00:5A34                      comprueba_derecha_bajando:
    4007   00:5A34                      
    4008   00:5A34  CD D5 6B            		call	dieciseis_dieciseis
    4009   00:5A37  CD A9 5C            		call	get_bloque_en_X_Y
    4010   00:5A3A  FE 29               		cp		41
    4011   00:5A3C  28 1E               		jr.		z,a_mover_a_la_derecha_bajando
    4012   00:5A3E  FE 2A               		cp		42
    4013   00:5A40  28 1A               		jr.		z,a_mover_a_la_derecha_bajando
    4014   00:5A42  FE 49               		cp		73
    4015   00:5A44  28 16               		jr.		z,a_mover_a_la_derecha_bajando
    4016   00:5A46  FE 4A               		cp		74
    4017   00:5A48  28 12               		jr.		z,a_mover_a_la_derecha_bajando
    4018   00:5A4A  FE 65               		cp		101
    4019   00:5A4C  28 0E               		jr.		z,a_mover_a_la_derecha_bajando
    4020   00:5A4E  FE 67               		cp		103
    4021   00:5A50  28 0A               		jr.		z,a_mover_a_la_derecha_bajando
    4022   00:5A52  FE 6A               		cp		106
    4023   00:5A54  28 06               		jr.		z,a_mover_a_la_derecha_bajando
    4024   00:5A56  FE 69               		cp		105
    4025   00:5A58  28 02               		jr.		z,a_mover_a_la_derecha_bajando
    4026   00:5A5A                      		
    4027   00:5A5A  18 07               		jr.		a_bajar
    4028   00:5A5C                      
    4029   00:5A5C                      a_mover_a_la_derecha_bajando:
    4030   00:5A5C                      		
    4031   00:5A5C  3A 12 C0            		ld		a,[px]
    4032   00:5A5F  3C                  		inc		a
    4033   00:5A60  32 12 C0            		ld		[px],a
    4034   00:5A63                      				
    4035   00:5A63                      a_bajar:
    4036   00:5A63                      
    4037   00:5A63  3E 04               		ld		a,4														;le da el valor 4 a la variable estado prota
    4038   00:5A65  32 1A C0            		ld		(estado_prota),a
    4039   00:5A68                      		
    4040   00:5A68  3A 13 C0            		ld		a,(py)
    4041   00:5A6B  3C                  		inc		a
    4042   00:5A6C  32 13 C0            		ld		(py),a
    4043   00:5A6F  18 42               		jr.		actualiza_el_paso_subiendo
    4044   00:5A71                      				
    4045   00:5A71                      mueve_izquierda_prota:
    4046   00:5A71                      
    4047   00:5A71  F5                  		push	af
    4048   00:5A72                      		
    4049   00:5A72                      		;colision lateral con solido
    4050   00:5A72                      				
    4051   00:5A72  3A 12 C0            		ld		a,[px]
    4052   00:5A75  C6 05               		add		5
    4053   00:5A77  57                  		ld		d,a
    4054   00:5A78  3A 13 C0            		ld		a,[py]
    4055   00:5A7B  C6 0F               		add		15
    4056   00:5A7D  5F                  		ld		e,a
    4057   00:5A7E  CD A9 5C            		call	get_bloque_en_X_Y
    4058   00:5A81  FE 20               		cp		32														;hasta el 31 son solidos
    4059   00:5A83  DA A3 5C            		jr.		c,set_parado											;si es inferior, no hay acarreo 
    4060   00:5A86  FE 71               		cp		113														;se para ante las puertas de pinchos
    4061   00:5A88  CA A3 5C            		jr.		z,set_parado
    4062   00:5A8B  FE 73               		cp		115
    4063   00:5A8D  CA A3 5C            		jr.		z,set_parado
    4064   00:5A90                      		
    4065   00:5A90  CD 57 6C            		call	tres_quince
    4066   00:5A93  CD A9 5C            		call	get_bloque_en_X_Y
    4067   00:5A96  FE 72               		cp		114														;gira las puertas
    4068   00:5A98  28 65               		jr.		z,gira_puerta_izquierda_amarilla
    4069   00:5A9A  FE 74               		cp		116
    4070   00:5A9C  CA 5B 5B            		jr.		z,gira_puerta_izquierda_azul
    4071   00:5A9F                      		
    4072   00:5A9F  3E 01               		ld		a,1														;le da el valor 1 a la variable de estado prota
    4073   00:5AA1  32 1A C0            		ld		(estado_prota),a
    4074   00:5AA4                      				
    4075   00:5AA4  3A 12 C0            		ld		a,(px)
    4076   00:5AA7  3D                  		dec		a
    4077   00:5AA8  32 12 C0            		ld		(px),a
    4078   00:5AAB  3E 01               		ld		a,1
    4079   00:5AAD  32 1D C0            		ld		(dir_prota),a
    4080   00:5AB0  C3 C9 5B            		jr.		actualiza_el_paso
    4081   00:5AB3                      
    4082   00:5AB3                      actualiza_el_paso_subiendo:
    4083   00:5AB3                      
    4084   00:5AB3  3A 1F C0            		ld		a,(retard_anim)
    4085   00:5AB6  3C                  		inc		a
    4086   00:5AB7  FE 08               		cp		8
    4087   00:5AB9  28 06               		jr		z,reset_retardo_y_cambia_paso_subiendo
    4088   00:5ABB  32 1F C0            		ld		(retard_anim),a
    4089   00:5ABE  C3 9D 5C            		jr.		end
    4090   00:5AC1                      
    4091   00:5AC1                      reset_retardo_y_cambia_paso_subiendo:
    4092   00:5AC1                      
    4093   00:5AC1  AF                  		xor		a
    4094   00:5AC2  32 1F C0            		ld		(retard_anim),a
    4095   00:5AC5  3A 1E C0            		ld		a,(paso)
    4096   00:5AC8  2F                  		cpl								;le da la vuelta a todos los bits
    4097   00:5AC9  E6 03               		and		00000011b				;pone 1 en los dos primero, con lo que lo convierte en un 3 (01=1 10=2 11=3)
    4098   00:5ACB  32 1E C0            		ld		(paso),a
    4099   00:5ACE  C3 9D 5C            		jr.		end
    4100   00:5AD1                      		
    4101   00:5AD1                      gira_puerta_derecha_amarilla:
    4102   00:5AD1                      		
    4103   00:5AD1  AF                  		xor		a
    4104   00:5AD2  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    4105   00:5AD5                      		
    4106   00:5AD5  CD FC 6B            		call	catorce_dos
    4107   00:5AD8  CD A9 5C            		call	get_bloque_en_X_Y
    4108   00:5ADB  3E 75               		ld		a,117
    4109   00:5ADD  77                  		ld		[hl],a
    4110   00:5ADE                      								
    4111   00:5ADE  CD FC 6B            		call	catorce_dos
    4112   00:5AE1  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4113   00:5AE4                      		
    4114   00:5AE4  3E 75               		ld		a,117
    4115   00:5AE6  CD D3 6C            		call	pinta_en_pantalla
    4116   00:5AE9                      		
    4117   00:5AE9  CD EF 6B            		call	catorce_diez
    4118   00:5AEC  CD A9 5C            		call	get_bloque_en_X_Y
    4119   00:5AEF  3E 75               		ld		a,117
    4120   00:5AF1  77                  		ld		[hl],a
    4121   00:5AF2                      								
    4122   00:5AF2  CD EF 6B            		call	catorce_diez
    4123   00:5AF5  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4124   00:5AF8                      		
    4125   00:5AF8  3E 75               		ld		a,117
    4126   00:5AFA  CD D3 6C            		call	pinta_en_pantalla
    4127   00:5AFD                      		
    4128   00:5AFD                      		
    4129   00:5AFD  F1                  		pop		af
    4130   00:5AFE                      		
    4131   00:5AFE  C9                  		ret
    4132   00:5AFF                      		
    4133   00:5AFF                      gira_puerta_izquierda_amarilla:
    4134   00:5AFF                      
    4135   00:5AFF  AF                  		xor		a
    4136   00:5B00  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    4137   00:5B03                      		
    4138   00:5B03  CD 64 6C            		call	tres_dos
    4139   00:5B06  CD A9 5C            		call	get_bloque_en_X_Y
    4140   00:5B09                      		
    4141   00:5B09  3E 75               		ld		a,117
    4142   00:5B0B  77                  		ld		[hl],a
    4143   00:5B0C                      								
    4144   00:5B0C  CD 64 6C            		call	tres_dos
    4145   00:5B0F  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4146   00:5B12                      		
    4147   00:5B12  3E 75               		ld		a,117
    4148   00:5B14  CD D3 6C            		call	pinta_en_pantalla
    4149   00:5B17                      		
    4150   00:5B17  CD 57 6C            		call	tres_quince
    4151   00:5B1A  CD A9 5C            		call	get_bloque_en_X_Y
    4152   00:5B1D                      		
    4153   00:5B1D  3E 75               		ld		a,117
    4154   00:5B1F  77                  		ld		[hl],a
    4155   00:5B20                      								
    4156   00:5B20  CD 57 6C            		call	tres_quince
    4157   00:5B23  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4158   00:5B26                      		
    4159   00:5B26  3E 75               		ld		a,117
    4160   00:5B28  CD D3 6C            		call	pinta_en_pantalla
    4161   00:5B2B                      		
    4162   00:5B2B  F1                  		pop		af
    4163   00:5B2C                      		
    4164   00:5B2C  C9                  		ret
    4165   00:5B2D                      		
    4166   00:5B2D                      gira_puerta_derecha_azul:
    4167   00:5B2D                      
    4168   00:5B2D  AF                  		xor		a
    4169   00:5B2E  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    4170   00:5B31                      		
    4171   00:5B31  CD FC 6B            		call	catorce_dos
    4172   00:5B34  CD A9 5C            		call	get_bloque_en_X_Y
    4173   00:5B37                      		
    4174   00:5B37  3E 76               		ld		a,118
    4175   00:5B39  77                  		ld		[hl],a
    4176   00:5B3A                      								
    4177   00:5B3A  CD FC 6B            		call	catorce_dos
    4178   00:5B3D  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4179   00:5B40                      		
    4180   00:5B40  3E 76               		ld		a,118
    4181   00:5B42  CD D3 6C            		call	pinta_en_pantalla
    4182   00:5B45                      		
    4183   00:5B45  CD EF 6B            		call	catorce_diez
    4184   00:5B48  CD A9 5C            		call	get_bloque_en_X_Y
    4185   00:5B4B                      				
    4186   00:5B4B  3E 76               		ld		a,118
    4187   00:5B4D  77                  		ld		[hl],a
    4188   00:5B4E                      								
    4189   00:5B4E  CD EF 6B            		call	catorce_diez
    4190   00:5B51  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4191   00:5B54                      		
    4192   00:5B54  3E 76               		ld		a,118
    4193   00:5B56  CD D3 6C            		call	pinta_en_pantalla
    4194   00:5B59                      		
    4195   00:5B59                      		
    4196   00:5B59  F1                  		pop		af
    4197   00:5B5A                      		
    4198   00:5B5A  C9                  		ret
    4199   00:5B5B                      		
    4200   00:5B5B                      gira_puerta_izquierda_azul:	
    4201   00:5B5B                      
    4202   00:5B5B  AF                  		xor		a
    4203   00:5B5C  32 14 C0            		ld		(puede_cambiar_de_direccion),a
    4204   00:5B5F                      		
    4205   00:5B5F  CD 64 6C            		call	tres_dos
    4206   00:5B62  CD A9 5C            		call	get_bloque_en_X_Y
    4207   00:5B65                      		
    4208   00:5B65  3E 76               		ld		a,118
    4209   00:5B67  77                  		ld		[hl],a
    4210   00:5B68                      								
    4211   00:5B68  CD 64 6C            		call	tres_dos
    4212   00:5B6B  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4213   00:5B6E                      		
    4214   00:5B6E  3E 76               		ld		a,118
    4215   00:5B70  CD D3 6C            		call	pinta_en_pantalla
    4216   00:5B73                      		
    4217   00:5B73  CD 57 6C            		call	tres_quince
    4218   00:5B76  CD A9 5C            		call	get_bloque_en_X_Y
    4219   00:5B79                      		
    4220   00:5B79  3E 76               		ld		a,118
    4221   00:5B7B  77                  		ld		[hl],a
    4222   00:5B7C                      								
    4223   00:5B7C  CD 57 6C            		call	tres_quince
    4224   00:5B7F  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4225   00:5B82                      		
    4226   00:5B82  3E 76               		ld		a,118
    4227   00:5B84  CD D3 6C            		call	pinta_en_pantalla
    4228   00:5B87                      			
    4229   00:5B87  F1                  		pop		af
    4230   00:5B88                      		
    4231   00:5B88  C9                  		ret
    4232   00:5B89                      		
    4233   00:5B89                      mueve_derecha_prota:
    4234   00:5B89                      
    4235   00:5B89  F5                  		push	af
    4236   00:5B8A                      		
    4237   00:5B8A                      		;colision lateral con solido
    4238   00:5B8A                      						
    4239   00:5B8A  3A 12 C0            		ld		a,[px]
    4240   00:5B8D  C6 0C               		add		12
    4241   00:5B8F  57                  		ld		d,a
    4242   00:5B90  3A 13 C0            		ld		a,[py]
    4243   00:5B93  C6 0F               		add		15
    4244   00:5B95  5F                  		ld		e,a
    4245   00:5B96  CD A9 5C            		call	get_bloque_en_X_Y
    4246   00:5B99  FE 20               		cp		32														;hasta el 31 son solidos
    4247   00:5B9B  DA A3 5C            		jr.		c,set_parado											;si es inferior, no hay acarreo 
    4248   00:5B9E  FE 72               		cp		114														;se para ante las puertas de pinchos
    4249   00:5BA0  CA A3 5C            		jr.		z,set_parado
    4250   00:5BA3  FE 74               		cp		116
    4251   00:5BA5  CA A3 5C            		jr.		z,set_parado
    4252   00:5BA8                      				
    4253   00:5BA8  CD EF 6B            		call	catorce_diez
    4254   00:5BAB  CD A9 5C            		call	get_bloque_en_X_Y
    4255   00:5BAE  FE 71               		cp		113														;gira las puertas
    4256   00:5BB0  CA D1 5A            		jr.		z,gira_puerta_derecha_amarilla
    4257   00:5BB3  FE 73               		cp		115
    4258   00:5BB5  CA 2D 5B            		jr.		z,gira_puerta_derecha_azul
    4259   00:5BB8                      		
    4260   00:5BB8  3E 01               		ld		a,1														;le da el valor 1 a la variable de estado prota
    4261   00:5BBA  32 1A C0            		ld		(estado_prota),a
    4262   00:5BBD                      				
    4263   00:5BBD  3A 12 C0            		ld		a,(px)
    4264   00:5BC0  3C                  		inc		a
    4265   00:5BC1  32 12 C0            		ld		(px),a
    4266   00:5BC4  3E 00               		ld		a,0
    4267   00:5BC6  32 1D C0            		ld		(dir_prota),a
    4268   00:5BC9                      
    4269   00:5BC9                      actualiza_el_paso:
    4270   00:5BC9                      
    4271   00:5BC9  3A 1F C0            		ld		a,(retard_anim)
    4272   00:5BCC  3C                  		inc		a
    4273   00:5BCD  FE 08               		cp		8
    4274   00:5BCF  28 06               		jr		z,reset_retardo_y_cambia_paso
    4275   00:5BD1  32 1F C0            		ld		(retard_anim),a
    4276   00:5BD4  C3 9D 5C            		jr.		end
    4277   00:5BD7                      
    4278   00:5BD7                      reset_retardo_y_cambia_paso:
    4279   00:5BD7                      
    4280   00:5BD7  AF                  		xor		a
    4281   00:5BD8  32 1F C0            		ld		(retard_anim),a
    4282   00:5BDB  3A 1E C0            		ld		a,(paso)
    4283   00:5BDE  2F                  		cpl																;le da la vuelta a todos los bits
    4284   00:5BDF  E6 03               		and		00000011b												;pone 1 en los dos primero, con lo que lo convierte en un 3 (01=1 10=2 11=3)
    4285   00:5BE1  32 1E C0            		ld		(paso),a
    4286   00:5BE4  C3 9D 5C            		jr.		end
    4287   00:5BE7                      		
    4288   00:5BE7                      
    4289   00:5BE7                      
    4290   00:5BE7                      actualiza_atributos_sprite:
    4291   00:5BE7                      		
    4292   00:5BE7  DD 21 20 C0         		ld		ix,atributos_sprite_general
    4293   00:5BEB                      		
    4294   00:5BEB  3A 13 C0            		ld		a,(py)													;valor y**
    4295   00:5BEE  DD 77 00            		ld		(ix),a
    4296   00:5BF1  C6 07               		add		a,7
    4297   00:5BF3  DD 77 04            		ld		(ix+4),a
    4298   00:5BF6  D6 10               		sub		a,16
    4299   00:5BF8  DD 77 08            		ld		(ix+8),a
    4300   00:5BFB                      		
    4301   00:5BFB  3A 12 C0            		ld		a,(px)													;valor x**
    4302   00:5BFE  DD 77 01            		ld		(ix+1),a
    4303   00:5C01  DD 77 05            		ld		(ix+5),a
    4304   00:5C04  DD 77 09            		ld		(ix+9),a
    4305   00:5C07                      			
    4306   00:5C07  3A 1A C0            		ld		a,(estado_prota)
    4307   00:5C0A  FE 04               		cp		4
    4308   00:5C0C  CA 99 5C            		jr.		z,esta_subiendo_o_bajando_para_el_patron
    4309   00:5C0F                      		
    4310   00:5C0F  CD 89 6C            		call	ocho_uno
    4311   00:5C12  CD A9 5C            		call	get_bloque_en_X_Y
    4312   00:5C15  FE 29               		cp		41
    4313   00:5C17  CA 99 5C            		jr.		z,esta_subiendo_o_bajando_para_el_patron
    4314   00:5C1A                      		
    4315   00:5C1A  FE 03               		cp		3
    4316   00:5C1C  28 76               		jr.		z,esta_cayendo_para_el_patron
    4317   00:5C1E                      		
    4318   00:5C1E  3A 1D C0            		ld		a,(dir_prota)											;valor de la direccion
    4319   00:5C21  FE 00               		cp		0
    4320   00:5C23  20 17               		jr		nz,mirando_izquierda
    4321   00:5C25                      		
    4322   00:5C25  3A 73 C3            		ld		a,(momento_lanzamiento)									;mira si está lanzando
    4323   00:5C28  FE 01               		cp		1
    4324   00:5C2A  28 08               		jr.		z,lanza_derecha_1
    4325   00:5C2C  FE 02               		cp		2
    4326   00:5C2E  28 08               		jr.		z,lanza_derecha_2
    4327   00:5C30                      		
    4328   00:5C30  06 00               		ld		b,0*4													;mirando derecha
    4329   00:5C32  18 1F               		jr		mirar_paso
    4330   00:5C34                      
    4331   00:5C34                      lanza_derecha_1:
    4332   00:5C34                      		
    4333   00:5C34  3E 84               		ld		a,33*4													;mirando derecha pose 1 de lanzamiento
    4334   00:5C36  18 33               		jr.		ultimos_valores
    4335   00:5C38                      		
    4336   00:5C38                      lanza_derecha_2:
    4337   00:5C38                      		
    4338   00:5C38  3E 90               		ld		a,36*4													;mirando derecha pose 2 de lanzamiento
    4339   00:5C3A  18 2F               		jr.		ultimos_valores
    4340   00:5C3C                      		
    4341   00:5C3C                      mirando_izquierda:
    4342   00:5C3C                      
    4343   00:5C3C  3A 73 C3            		ld		a,(momento_lanzamiento)
    4344   00:5C3F  FE 01               		cp		1
    4345   00:5C41  28 08               		jr.		z,lanza_izquierda_1
    4346   00:5C43  FE 02               		cp		2
    4347   00:5C45  28 08               		jr.		z,lanza_izquierda_2
    4348   00:5C47                      		
    4349   00:5C47  06 18               		ld		b,6*4													;mirando izquierda
    4350   00:5C49  18 08               		jr.		mirar_paso
    4351   00:5C4B                      		
    4352   00:5C4B                      lanza_izquierda_1:
    4353   00:5C4B                      
    4354   00:5C4B  3E 9C               		ld		a,39*4													;mirando izquierda pose 1 de lanzamiento
    4355   00:5C4D  18 1C               		jr.		ultimos_valores
    4356   00:5C4F                      		
    4357   00:5C4F                      lanza_izquierda_2:
    4358   00:5C4F                      
    4359   00:5C4F  3E A8               		ld		a,42*4													;mirando izquierda pose 2 de lanzamiento
    4360   00:5C51  18 18               		jr.		ultimos_valores
    4361   00:5C53                      		
    4362   00:5C53                      mirar_paso:
    4363   00:5C53                      		
    4364   00:5C53  3A 37 C3            		ld		a,(estado_de_salto)										;paso abierto si esta saltando
    4365   00:5C56  FE 00               		cp		0
    4366   00:5C58  28 09               		jr.		z,todo_va_bien
    4367   00:5C5A                      		
    4368   00:5C5A  3E 03               		ld		a,3
    4369   00:5C5C  CB 27 CB 27         [2]		sla		a
    4370   00:5C60  80                  		add		a,b
    4371   00:5C61                      		
    4372   00:5C61  18 08               		jr.		ultimos_valores
    4373   00:5C63                      		
    4374   00:5C63                      todo_va_bien:		
    4375   00:5C63  3A 1E C0            		ld		a,(paso)
    4376   00:5C66  CB 27 CB 27         [2]		sla		a				;multiplica x2 2 veces
    4377   00:5C6A  80                  		add		a,b				;le damos el patron definitivo
    4378   00:5C6B                      
    4379   00:5C6B                      ultimos_valores:
    4380   00:5C6B                      		
    4381   00:5C6B  DD 21 20 C0         		ld		ix,atributos_sprite_general
    4382   00:5C6F                      		
    4383   00:5C6F  DD 77 02            		ld		(ix+2),a		;valor patron**
    4384   00:5C72  DD 7E 02            		ld		a,(ix+2)
    4385   00:5C75  C6 04               		add		a,4
    4386   00:5C77  DD 77 06            		ld		(ix+6),a
    4387   00:5C7A  DD 7E 02            		ld		a,(ix+2)
    4388   00:5C7D  C6 08               		add		a,8
    4389   00:5C7F  DD 77 0A            		ld		(ix+10),a
    4390   00:5C82                      		
    4391   00:5C82  3A 17 C0            		ld		a,(color_lineas_prota)				;valor color**
    4392   00:5C85  DD 77 03            		ld		(ix+3),a
    4393   00:5C88  3A 16 C0            		ld		a,(color_prota)
    4394   00:5C8B  DD 77 07            		ld		(ix+7),a
    4395   00:5C8E  3E 09               		ld		a,9
    4396   00:5C90  DD 77 0B            		ld		(ix+11),a
    4397   00:5C93                      		
    4398   00:5C93  C9                  		ret
    4399   00:5C94                      
    4400   00:5C94                      esta_cayendo_para_el_patron:
    4401   00:5C94                      
    4402   00:5C94  06 48               		ld		b,18*4
    4403   00:5C96  78                  		ld		a,b
    4404   00:5C97  18 D2               		jr.		ultimos_valores
    4405   00:5C99                      		
    4406   00:5C99                      esta_subiendo_o_bajando_para_el_patron:	
    4407   00:5C99                      
    4408   00:5C99  06 30               		ld		b,12*4
    4409   00:5C9B  18 B6               		jr.		mirar_paso
    4410   00:5C9D                      		
    4411   00:5C9D                      end:
    4412   00:5C9D                      
    4413   00:5C9D  AF                  		xor		a
    4414   00:5C9E  32 1B C0            		ld		[prev_dir_prota],a
    4415   00:5CA1                      		
    4416   00:5CA1  F1                  		pop		af
    4417   00:5CA2  C9                  		ret
    4418   00:5CA3                      		
    4419   00:5CA3                      set_parado:
    4420   00:5CA3                      
    4421   00:5CA3  AF                  		xor		a
    4422   00:5CA4  32 1A C0            		ld		[estado_prota],a
    4423   00:5CA7  18 F4               		jr.		end
    4424   00:5CA9                      
    4425   00:5CA9                      get_bloque_en_X_Y:
    4426   00:5CA9                      
    4427   00:5CA9                      		;(y/8)*32+(x/8)
    4428   00:5CA9  7B                  		ld		a,e				;a=y
    4429   00:5CAA  CB 3F CB 3F CB 3F   [3]		srl		a				;a=y/8
    4430   00:5CB0  26 00               		ld		h,0
    4431   00:5CB2  6F                  		ld		l,a				;hl=y/8
    4432   00:5CB3  29 29 29 29 29      [5]		add		hl,hl			;*32			a=(y/8)*32
    4433   00:5CB8                      		
    4434   00:5CB8  7A                  		ld		a,d				;a=x
    4435   00:5CB9  CB 3F CB 3F CB 3F   [3]		srl		a				;a=x/8
    4436   00:5CBF  16 00               		ld		d,0
    4437   00:5CC1  5F                  		ld		e,a				;de=x/8
    4438   00:5CC2  19                  		add		hl,de			;hl=(y/8)*32+(x/8)
    4439   00:5CC3                      		
    4440   00:5CC3  11 57 C0            		ld		de,buffer_colisiones
    4441   00:5CC6  19                  		add		hl,de			;hl=buffer_colisiones + (y/8)*32+(x/8)
    4442   00:5CC7  01 20 00            		ld		bc,32
    4443   00:5CCA  ED 42               		sbc		hl,bc		
    4444   00:5CCC  7E                  		ld		a,[hl]
    4445   00:5CCD  C9                  		ret
    4446   00:5CCE                      
    4447   00:5CCE                      get_bloque_en_X_Y_paravram:
    4448   00:5CCE                      
    4449   00:5CCE  7B                  		ld		a,e				;a=y
    4450   00:5CCF  CB 3F CB 3F CB 3F   [3]		srl		a				;a=y/8
    4451   00:5CD5  26 00               		ld		h,0
    4452   00:5CD7  6F                  		ld		l,a				;hl=y/8
    4453   00:5CD8  29 29 29 29 29      [5]		add		hl,hl			;*32			a=(y/8)*32
    4454   00:5CDD                      		
    4455   00:5CDD  7A                  		ld		a,d				;a=x
    4456   00:5CDE  CB 3F CB 3F CB 3F   [3]		srl		a				;a=x/8
    4457   00:5CE4  16 00               		ld		d,0
    4458   00:5CE6  5F                  		ld		e,a				;de=x/8
    4459   00:5CE7  19                  		add		hl,de			;hl=(y/8)*32+(x/8)
    4460   00:5CE8                      		
    4461   00:5CE8  C9                  		ret
    4462   00:5CE9                      		
    4463   00:5CE9                      pone_estado_prota_a_0:
    4464   00:5CE9                      
    4465   00:5CE9  AF                  		xor		a
    4466   00:5CEA  32 1A C0            		ld		(estado_prota),a
    4467   00:5CED                      		
    4468   00:5CED                      pose_si_esta_parado:
    4469   00:5CED  CD B3 6B            		call	cero_cero
    4470   00:5CF0  CD A9 5C            		call	get_bloque_en_X_Y
    4471   00:5CF3  FE 29               		cp		41
    4472   00:5CF5  28 0B               		jr.		z,esta_en_escalera
    4473   00:5CF7                      		
    4474   00:5CF7  3A 1A C0            		ld		a,(estado_prota)
    4475   00:5CFA  FE 00               		cp		0
    4476   00:5CFC  C0                  		ret		nz
    4477   00:5CFD                      		
    4478   00:5CFD  AF                  		xor		a
    4479   00:5CFE  32 1E C0            		ld		(paso),a
    4480   00:5D01                      
    4481   00:5D01  C9                  		ret
    4482   00:5D02                      esta_en_escalera:
    4483   00:5D02                      		
    4484   00:5D02  3E 04               		ld		a,4
    4485   00:5D04  32 1A C0            		ld		(estado_prota),a
    4486   00:5D07  C9                  		ret
    4487   00:5D08                      			
    4488   00:5D08                      usa_objeto_o_salta:
    4489   00:5D08                      		
    4490   00:5D08  3A 71 C3            		ld		a,(cont_no_salta_dos_seguidas)							;evita que se pulse el salto durante el salto
    4491   00:5D0B  FE 00               		cp		0
    4492   00:5D0D  20 4A               		jr.		nz,(reduce_el_contador_de_salto)
    4493   00:5D0F                      		
    4494   00:5D0F  3A 14 C0            		ld		a,(puede_cambiar_de_direccion)							;evita que salte si está en una puerta
    4495   00:5D12  FE 00               		cp		0
    4496   00:5D14  C8                  		ret		z
    4497   00:5D15                      		
    4498   00:5D15  3A 37 C3            		ld		a,(estado_de_salto)										;evita el string si ya está saltando
    4499   00:5D18  FE 00               		cp		0
    4500   00:5D1A  C0                  		ret		nz
    4501   00:5D1B                      		
    4502   00:5D1B  3A 55 C0            		ld		a,(estado_de_explosion)									;evita el string si hay una explosion
    4503   00:5D1E  FE 00               		cp		0
    4504   00:5D20  C0                  		ret		nz
    4505   00:5D21                      		
    4506   00:5D21  3A 73 C3            		ld		a,(momento_lanzamiento)									;evita el string si está lanzando
    4507   00:5D24  FE 01               		cp		1
    4508   00:5D26  C8                  		ret		z
    4509   00:5D27  FE 02               		cp		2
    4510   00:5D29  C8                  		ret		z
    4511   00:5D2A                      		
    4512   00:5D2A                      		
    4513   00:5D2A  3A 1A C0            		ld		a,(estado_prota)										;Evita string si está en escaleras
    4514   00:5D2D  FE 04               		cp		4
    4515   00:5D2F  C8                  		ret		z
    4516   00:5D30                      		
    4517   00:5D30  CD 8C 6B            		call	dos_diez												;evita que salte si está en escalera
    4518   00:5D33  CD A9 5C            		call	get_bloque_en_X_Y
    4519   00:5D36  FE 29               		cp		41
    4520   00:5D38  C8                  		ret		z
    4521   00:5D39                      ;		cp		42
    4522   00:5D39                      ;		ret		z
    4523   00:5D39  FE 29               		cp		41
    4524   00:5D3B  C8                  		ret		z
    4525   00:5D3C  FE 69               		cp		105
    4526   00:5D3E  C8                  		ret		z
    4527   00:5D3F  FE 6A               		cp		106
    4528   00:5D41  C8                  		ret		z
    4529   00:5D42  FE 65               		cp		101
    4530   00:5D44  C8                  		ret		z
    4531   00:5D45  FE 67               		cp		103
    4532   00:5D47  C8                  		ret		z
    4533   00:5D48  FE 23               		cp		35														;evita que salte si está ante la puerta
    4534   00:5D4A  C8                  		ret		z
    4535   00:5D4B  FE 24               		cp		36
    4536   00:5D4D  C8                  		ret	z	
    4537   00:5D4E                      				
    4538   00:5D4E  3A 0F C0            		ld		a,(stick_a_usar)
    4539   00:5D51  CD D8 00            		call	ONSTRIG
    4540   00:5D54  FE FF               		cp		#FF
    4541   00:5D56  28 06               		jr.		z,decide_si_usa_o_salta
    4542   00:5D58                      				
    4543   00:5D58  C9                  		ret
    4544   00:5D59                      
    4545   00:5D59                      reduce_el_contador_de_salto:
    4546   00:5D59                      
    4547   00:5D59  3D                  		dec		a
    4548   00:5D5A  32 71 C3            		ld		(cont_no_salta_dos_seguidas),a
    4549   00:5D5D  C9                  		ret
    4550   00:5D5E                      		
    4551   00:5D5E                      decide_si_usa_o_salta:
    4552   00:5D5E                      
    4553   00:5D5E  3A 50 C0            		ld		a,(tiene_objeto)
    4554   00:5D61  FE 01               		cp		1
    4555   00:5D63  CA C2 61            		jr.		z,usa_bomba
    4556   00:5D66  FE 02               		cp		2
    4557   00:5D68  CA FF 62            		jr.		z,usa_cuchillo
    4558   00:5D6B                      		
    4559   00:5D6B  3A 12 C0            		ld		a,[px]				;no salta si tiene techo (para evitar volar)
    4560   00:5D6E  57                  		ld		d,a
    4561   00:5D6F  3A 13 C0            		ld		a,[py]
    4562   00:5D72  D6 02               		sub		a,2
    4563   00:5D74  5F                  		ld		e,a
    4564   00:5D75  CD A9 5C            		call	get_bloque_en_X_Y
    4565   00:5D78  FE 1F               		cp		31
    4566   00:5D7A  D8                  		ret		c
    4567   00:5D7B                      		
    4568   00:5D7B  CD B3 6B            		call	cero_cero
    4569   00:5D7E  CD A9 5C            		call	get_bloque_en_X_Y
    4570   00:5D81  FE 21               		cp		33					;si esta en la salida revisamos si sale
    4571   00:5D83  28 0F               		jr.		z,fase_superada
    4572   00:5D85                      		
    4573   00:5D85  3A 1A C0            		ld		a,(estado_prota)		;si esta callendo, no salta
    4574   00:5D88  FE 03               		cp		3
    4575   00:5D8A  C8                  		ret		z
    4576   00:5D8B                      		
    4577   00:5D8B  3E 04               		ld		a,4						;efecto de saltar
    4578   00:5D8D  CD E6 6C            		call	efecto_sonido
    4579   00:5D90                      		
    4580   00:5D90  C3 1B 67            		jr.		ha_saltado
    4581   00:5D93                      		
    4582   00:5D93  C9                  		ret
    4583   00:5D94                      
    4584   00:5D94                      fase_superada:
    4585   00:5D94                      
    4586   00:5D94  3A 38 C3            		ld		a,(mechero)
    4587   00:5D97  FE 00               		cp		0
    4588   00:5D99  C8                  		ret		z
    4589   00:5D9A                      		
    4590   00:5D9A  3A 39 C3            		ld		a,(gasolina)
    4591   00:5D9D  FE 00               		cp		0
    4592   00:5D9F  C8                  		ret		z
    4593   00:5DA0                      		
    4594   00:5DA0  3A 16 C0            		ld		a,(color_prota)
    4595   00:5DA3  FE 07               		cp		7
    4596   00:5DA5  C8                  		ret		z
    4597   00:5DA6                      		
    4598   00:5DA6  3E 01               		ld		a,1
    4599   00:5DA8  32 72 C3            		ld		(pasamos_la_fase),a
    4600   00:5DAB  C9                  		ret
    4601   00:5DAC                      
    4602   00:5DAC                      apaga_los_chorros:
    4603   00:5DAC                      	
    4604   00:5DAC  CD 99 6B            		call 	menos_dos_diez
    4605   00:5DAF  CD A9 5C            		call	get_bloque_en_X_Y
    4606   00:5DB2                      		
    4607   00:5DB2  FE 59               		cp		89
    4608   00:5DB4  28 6F               		jr.		z,quita_a_tu_izquierda
    4609   00:5DB6  FE 79               		cp		121
    4610   00:5DB8  28 6B               		jr.		z,quita_a_tu_izquierda
    4611   00:5DBA                      		
    4612   00:5DBA  CD E2 6B            		call	menos_dos_dieciocho
    4613   00:5DBD  CD A9 5C            		call	get_bloque_en_X_Y	
    4614   00:5DC0                      		
    4615   00:5DC0  FE 59               		cp		89
    4616   00:5DC2  CA B1 5E            		jr.		z,quita_a_tu_izquierda_2
    4617   00:5DC5  FE 79               		cp		121
    4618   00:5DC7  CA B1 5E            		jr.		z,quita_a_tu_izquierda_2
    4619   00:5DCA                      			
    4620   00:5DCA  CD EF 6B            		call	catorce_diez
    4621   00:5DCD  CD A9 5C            		call	get_bloque_en_X_Y
    4622   00:5DD0                      		
    4623   00:5DD0  FE 59               		cp		89
    4624   00:5DD2  28 14               		jr.		z,quita_a_tu_derecha
    4625   00:5DD4  FE 79               		cp		121
    4626   00:5DD6  28 10               		jr.		z,quita_a_tu_derecha
    4627   00:5DD8                      		
    4628   00:5DD8  CD 09 6C            		call	catorce_dieciocho
    4629   00:5DDB  CD A9 5C            		call	get_bloque_en_X_Y
    4630   00:5DDE                      		
    4631   00:5DDE  FE 59               		cp		89
    4632   00:5DE0  CA 62 5E            		jr.		z,quita_a_tu_derecha_2
    4633   00:5DE3  FE 79               		cp		121
    4634   00:5DE5  28 7B               		jr.		z,quita_a_tu_derecha_2
    4635   00:5DE7                      		
    4636   00:5DE7  C9                  		ret
    4637   00:5DE8                      			
    4638   00:5DE8                      quita_a_tu_derecha:
    4639   00:5DE8                      
    4640   00:5DE8  CD 7F 6B            		call	seis_diez
    4641   00:5DEB  CD A9 5C            		call	get_bloque_en_X_Y
    4642   00:5DEE  3E 20               		ld		a,32
    4643   00:5DF0  77                  		ld		[hl],a
    4644   00:5DF1                      		
    4645   00:5DF1  CD EF 6B            		call	catorce_diez
    4646   00:5DF4  CD A9 5C            		call	get_bloque_en_X_Y
    4647   00:5DF7  3E 56               		ld		a,86
    4648   00:5DF9  77                  		ld		[hl],a
    4649   00:5DFA                      		
    4650   00:5DFA  CD 23 6C            		call	veintidos_diez
    4651   00:5DFD  CD A9 5C            		call	get_bloque_en_X_Y
    4652   00:5E00  3E 20               		ld		a,32
    4653   00:5E02  77                  		ld		[hl],a
    4654   00:5E03                      								
    4655   00:5E03  CD 7F 6B            		call	seis_diez
    4656   00:5E06  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4657   00:5E09                      		
    4658   00:5E09  3E 20               		ld		a,32
    4659   00:5E0B  CD D3 6C            		call	pinta_en_pantalla
    4660   00:5E0E                      		
    4661   00:5E0E  CD EF 6B            		call	catorce_diez
    4662   00:5E11  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4663   00:5E14                      		
    4664   00:5E14  3E 56               		ld		a,86
    4665   00:5E16  CD D3 6C            		call	pinta_en_pantalla
    4666   00:5E19                      		
    4667   00:5E19  CD 23 6C            		call	veintidos_diez
    4668   00:5E1C  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4669   00:5E1F                      		
    4670   00:5E1F  3E 20               		ld		a,32
    4671   00:5E21  CD D3 6C            		call	pinta_en_pantalla
    4672   00:5E24                      		
    4673   00:5E24  C9                  		ret
    4674   00:5E25                      
    4675   00:5E25                      quita_a_tu_izquierda:
    4676   00:5E25                      		
    4677   00:5E25  CD 7F 6B            		call	seis_diez
    4678   00:5E28  CD A9 5C            		call	get_bloque_en_X_Y
    4679   00:5E2B  3E 20               		ld		a,32
    4680   00:5E2D  77                  		ld		[hl],a
    4681   00:5E2E                      		
    4682   00:5E2E  CD 99 6B            		call	menos_dos_diez
    4683   00:5E31  CD A9 5C            		call	get_bloque_en_X_Y
    4684   00:5E34  3E 56               		ld		a,86
    4685   00:5E36  77                  		ld		[hl],a
    4686   00:5E37                      		
    4687   00:5E37  CD 30 6C            		call	menos_diez_diez
    4688   00:5E3A  CD A9 5C            		call	get_bloque_en_X_Y
    4689   00:5E3D  3E 20               		ld		a,32
    4690   00:5E3F  77                  		ld		[hl],a
    4691   00:5E40                      								
    4692   00:5E40  CD 7F 6B            		call	seis_diez
    4693   00:5E43  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4694   00:5E46                      		
    4695   00:5E46  3E 20               		ld		a,32
    4696   00:5E48  CD D3 6C            		call	pinta_en_pantalla
    4697   00:5E4B                      		
    4698   00:5E4B  CD 99 6B            		call	menos_dos_diez
    4699   00:5E4E  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4700   00:5E51                      		
    4701   00:5E51  3E 56               		ld		a,86
    4702   00:5E53  CD D3 6C            		call	pinta_en_pantalla
    4703   00:5E56                      		
    4704   00:5E56  CD 30 6C            		call	menos_diez_diez
    4705   00:5E59  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4706   00:5E5C                      		
    4707   00:5E5C  3E 20               		ld		a,32
    4708   00:5E5E  CD D3 6C            		call	pinta_en_pantalla
    4709   00:5E61                      		
    4710   00:5E61  C9                  		ret
    4711   00:5E62                      
    4712   00:5E62                      
    4713   00:5E62                      quita_a_tu_derecha_2:
    4714   00:5E62                      
    4715   00:5E62  CD 3D 6C            		call	seis_dieciocho
    4716   00:5E65  CD A9 5C            		call	get_bloque_en_X_Y
    4717   00:5E68  3E 20               		ld		a,32
    4718   00:5E6A  77                  		ld		[hl],a
    4719   00:5E6B                      		
    4720   00:5E6B  CD 09 6C            		call	catorce_dieciocho
    4721   00:5E6E  CD A9 5C            		call	get_bloque_en_X_Y
    4722   00:5E71  3E 56               		ld		a,86
    4723   00:5E73  77                  		ld		[hl],a
    4724   00:5E74                      		
    4725   00:5E74  3A 12 C0            		ld		a,[px]					;borra en buffer_colisiones el chorro						
    4726   00:5E77  C6 14               		add		20
    4727   00:5E79  57                  		ld		d,a
    4728   00:5E7A  3A 13 C0            		ld		a,[py]
    4729   00:5E7D  C6 12               		add		18
    4730   00:5E7F  5F                  		ld		e,a
    4731   00:5E80  CD A9 5C            		call	get_bloque_en_X_Y
    4732   00:5E83  3E 20               		ld		a,32
    4733   00:5E85  77                  		ld		[hl],a
    4734   00:5E86                      								
    4735   00:5E86  CD 3D 6C            		call	seis_dieciocho
    4736   00:5E89  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4737   00:5E8C                      		
    4738   00:5E8C  3E 20               		ld		a,32
    4739   00:5E8E  CD D3 6C            		call	pinta_en_pantalla
    4740   00:5E91                      		
    4741   00:5E91  CD 09 6C            		call	catorce_dieciocho
    4742   00:5E94  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4743   00:5E97                      		
    4744   00:5E97  3E 56               		ld		a,86
    4745   00:5E99  CD D3 6C            		call	pinta_en_pantalla
    4746   00:5E9C                      		
    4747   00:5E9C  3A 12 C0            		ld		a,[px]
    4748   00:5E9F  C6 16               		add		22
    4749   00:5EA1  57                  		ld		d,a
    4750   00:5EA2  3A 13 C0            		ld		a,[py]
    4751   00:5EA5  C6 12               		add		18
    4752   00:5EA7  5F                  		ld		e,a
    4753   00:5EA8  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4754   00:5EAB                      		
    4755   00:5EAB  3E 20               		ld		a,32
    4756   00:5EAD  CD D3 6C            		call	pinta_en_pantalla
    4757   00:5EB0                      		
    4758   00:5EB0  C9                  		ret
    4759   00:5EB1                      
    4760   00:5EB1                      quita_a_tu_izquierda_2:
    4761   00:5EB1                      		
    4762   00:5EB1  CD 3D 6C            		call	seis_dieciocho
    4763   00:5EB4  CD A9 5C            		call	get_bloque_en_X_Y
    4764   00:5EB7  3E 20               		ld		a,32
    4765   00:5EB9  77                  		ld		[hl],a
    4766   00:5EBA                      		
    4767   00:5EBA  CD E2 6B            		call	menos_dos_dieciocho
    4768   00:5EBD  CD A9 5C            		call	get_bloque_en_X_Y
    4769   00:5EC0  3E 56               		ld		a,86
    4770   00:5EC2  77                  		ld		[hl],a
    4771   00:5EC3                      		
    4772   00:5EC3  CD 4A 6C            		call	menos_diez_dieciocho
    4773   00:5EC6  CD A9 5C            		call	get_bloque_en_X_Y
    4774   00:5EC9  3E 20               		ld		a,32
    4775   00:5ECB  77                  		ld		[hl],a
    4776   00:5ECC                      								
    4777   00:5ECC  CD 3D 6C            		call	seis_dieciocho
    4778   00:5ECF  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4779   00:5ED2                      		
    4780   00:5ED2  3E 20               		ld		a,32
    4781   00:5ED4  CD D3 6C            		call	pinta_en_pantalla
    4782   00:5ED7                      		
    4783   00:5ED7  CD E2 6B            		call	menos_dos_dieciocho
    4784   00:5EDA  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4785   00:5EDD                      		
    4786   00:5EDD  3E 56               		ld		a,86
    4787   00:5EDF  CD D3 6C            		call	pinta_en_pantalla
    4788   00:5EE2                      		
    4789   00:5EE2  CD 4A 6C            		call	menos_diez_dieciocho
    4790   00:5EE5  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4791   00:5EE8                      		
    4792   00:5EE8  3E 20               		ld		a,32
    4793   00:5EEA  CD D3 6C            		call	pinta_en_pantalla
    4794   00:5EED                      		
    4795   00:5EED  C9                  		ret
    4796   00:5EEE                      		
    4797   00:5EEE                      coge_algun_objeto:
    4798   00:5EEE                      		
    4799   00:5EEE  CD A6 6B            		call	seis_dos
    4800   00:5EF1  CD A9 5C            		call	get_bloque_en_X_Y
    4801   00:5EF4                      		
    4802   00:5EF4  FE 5D               		cp		93
    4803   00:5EF6  CA E2 60            		jr.		z,damos_la_luz
    4804   00:5EF9                      		
    4805   00:5EF9  3A 82 C3            		ld		a,(vision_estado)
    4806   00:5EFC  FE 00               		cp		0
    4807   00:5EFE  C8                  		ret		z
    4808   00:5EFF                      		
    4809   00:5EFF  CD 7F 6B            		call	seis_diez
    4810   00:5F02  CD A9 5C            		call	get_bloque_en_X_Y
    4811   00:5F05                      		
    4812   00:5F05  FE 62               		cp		98
    4813   00:5F07  CA A5 60            		jr.		z,coge_mechero
    4814   00:5F0A                      		
    4815   00:5F0A  FE 61               		cp		97
    4816   00:5F0C  CA 06 61            		jr.		z,coge_gasolina
    4817   00:5F0F                      
    4818   00:5F0F  FE 57               		cp		87
    4819   00:5F11  CA 7A 60            		jr.		z,cierra_grifo
    4820   00:5F14                      		
    4821   00:5F14  FE 6B               		cp		107
    4822   00:5F16  CA 49 60            		jr.		z,coge_toalla
    4823   00:5F19                      						
    4824   00:5F19  FE 56               		cp		86
    4825   00:5F1B  28 4E               		jr.		z,activa_chorro_1
    4826   00:5F1D                      		
    4827   00:5F1D  FE 79               		cp		121	
    4828   00:5F1F  28 4A               		jr.		z,activa_chorro_1
    4829   00:5F21                      		
    4830   00:5F21  FE 59               		cp		89
    4831   00:5F23  CA 06 60            		jr.		z,activa_chorro_2
    4832   00:5F26                      		
    4833   00:5F26  FE 50               		cp		80
    4834   00:5F28  28 22               		jr.		z,activa_escalera_extra
    4835   00:5F2A                      					
    4836   00:5F2A  CD 3D 6C            		call	seis_dieciocho
    4837   00:5F2D  CD A9 5C            		call	get_bloque_en_X_Y
    4838   00:5F30                      		
    4839   00:5F30  FE 56               		cp		86
    4840   00:5F32  CA B4 5F            		jr.		z,activa_chorro_3
    4841   00:5F35                      				
    4842   00:5F35  3A 50 C0            		ld		a,(tiene_objeto)
    4843   00:5F38  FE 00               		cp		0
    4844   00:5F3A  C0                  		ret		nz
    4845   00:5F3B                      		
    4846   00:5F3B  CD 7F 6B            		call	seis_diez
    4847   00:5F3E  CD A9 5C            		call	get_bloque_en_X_Y
    4848   00:5F41                      		
    4849   00:5F41  FE 63               		cp		99
    4850   00:5F43  CA 43 61            		jp.		z,coge_la_bomba
    4851   00:5F46                      		
    4852   00:5F46  FE 60               		cp		96
    4853   00:5F48  CA 83 61            		jp.		z,coge_cuchillo
    4854   00:5F4B                      		
    4855   00:5F4B  C9                  		ret
    4856   00:5F4C                      	
    4857   00:5F4C                      activa_escalera_extra:
    4858   00:5F4C                      
    4859   00:5F4C  3E 01               		ld		a,1
    4860   00:5F4E  32 7A C3            		ld		(escalera_activada),a
    4861   00:5F51                      		
    4862   00:5F51  CD 7F 6B            		call	seis_diez
    4863   00:5F54  CD A9 5C            		call	get_bloque_en_X_Y
    4864   00:5F57  3E 70               		ld		a,112
    4865   00:5F59  77                  		ld		[hl],a
    4866   00:5F5A  CD 7F 6B            		call	seis_diez
    4867   00:5F5D  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4868   00:5F60                      		
    4869   00:5F60  3E 70               		ld		a,112
    4870   00:5F62  CD D3 6C            		call	pinta_en_pantalla
    4871   00:5F65                      		
    4872   00:5F65  3E 0A               		ld		a,10						;efecto sonoro de activar
    4873   00:5F67  CD E6 6C            		call	efecto_sonido
    4874   00:5F6A                      		
    4875   00:5F6A  C9                  		ret
    4876   00:5F6B                      		
    4877   00:5F6B                      activa_chorro_1:
    4878   00:5F6B                      
    4879   00:5F6B  3A 80 C3            		ld		a,(grifo_estado)
    4880   00:5F6E  FE 00               		cp		0
    4881   00:5F70  C8                  		ret		z
    4882   00:5F71                      		
    4883   00:5F71  CD 99 6B            		call	menos_dos_diez
    4884   00:5F74  CD A9 5C            		call	get_bloque_en_X_Y
    4885   00:5F77                      		
    4886   00:5F77  3E 58               		ld		a,88
    4887   00:5F79  77                  		ld		[hl],a
    4888   00:5F7A                      								
    4889   00:5F7A  CD 99 6B            		call	menos_dos_diez
    4890   00:5F7D  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4891   00:5F80                      		
    4892   00:5F80  3E 58               		ld		a,88
    4893   00:5F82  CD D3 6C            		call	pinta_en_pantalla
    4894   00:5F85                      		
    4895   00:5F85  CD 7F 6B            		call	seis_diez
    4896   00:5F88  CD A9 5C            		call	get_bloque_en_X_Y
    4897   00:5F8B  3E 59               		ld		a,89
    4898   00:5F8D  77                  		ld		[hl],a
    4899   00:5F8E                      								
    4900   00:5F8E  CD 7F 6B            		call	seis_diez
    4901   00:5F91  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4902   00:5F94                      		
    4903   00:5F94  3E 59               		ld		a,89
    4904   00:5F96  CD D3 6C            		call	pinta_en_pantalla
    4905   00:5F99                      		
    4906   00:5F99  CD EF 6B            		call	catorce_diez
    4907   00:5F9C  CD A9 5C            		call	get_bloque_en_X_Y
    4908   00:5F9F  3E 5A               		ld		a,90
    4909   00:5FA1  77                  		ld		[hl],a
    4910   00:5FA2                      								
    4911   00:5FA2  CD EF 6B            		call	catorce_diez
    4912   00:5FA5  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4913   00:5FA8                      		
    4914   00:5FA8  3E 5A               		ld		a,90
    4915   00:5FAA  CD D3 6C            		call	pinta_en_pantalla
    4916   00:5FAD                      		
    4917   00:5FAD  3E 0B               		ld		a,11						;efecto sonoro agua (arreglar)
    4918   00:5FAF  CD E6 6C            		call	efecto_sonido
    4919   00:5FB2                      
    4920   00:5FB2  18 47               		jr.		moja_prota
    4921   00:5FB4                      		
    4922   00:5FB4                      activa_chorro_3:
    4923   00:5FB4                      
    4924   00:5FB4  3A 80 C3            		ld		a,(grifo_estado)
    4925   00:5FB7  FE 00               		cp		0
    4926   00:5FB9  C8                  		ret		z
    4927   00:5FBA                      		
    4928   00:5FBA  CD E2 6B            		call	menos_dos_dieciocho
    4929   00:5FBD  CD A9 5C            		call	get_bloque_en_X_Y
    4930   00:5FC0                      		
    4931   00:5FC0  3E 58               		ld		a,88
    4932   00:5FC2  77                  		ld		[hl],a
    4933   00:5FC3                      								
    4934   00:5FC3  CD E2 6B            		call	menos_dos_dieciocho
    4935   00:5FC6  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4936   00:5FC9                      		
    4937   00:5FC9  3E 58               		ld		a,88
    4938   00:5FCB  CD D3 6C            		call	pinta_en_pantalla
    4939   00:5FCE                      		
    4940   00:5FCE  CD 3D 6C            		call	seis_dieciocho
    4941   00:5FD1  CD A9 5C            		call	get_bloque_en_X_Y
    4942   00:5FD4  3E 59               		ld		a,89
    4943   00:5FD6  77                  		ld		[hl],a
    4944   00:5FD7                      								
    4945   00:5FD7  CD 3D 6C            		call	seis_dieciocho
    4946   00:5FDA  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4947   00:5FDD                      		
    4948   00:5FDD  3E 59               		ld		a,89
    4949   00:5FDF  CD D3 6C            		call	pinta_en_pantalla
    4950   00:5FE2                      		
    4951   00:5FE2  CD 09 6C            		call	catorce_dieciocho
    4952   00:5FE5  CD A9 5C            		call	get_bloque_en_X_Y
    4953   00:5FE8  3E 5A               		ld		a,90
    4954   00:5FEA  77                  		ld		[hl],a
    4955   00:5FEB                      								
    4956   00:5FEB  CD 09 6C            		call	catorce_dieciocho
    4957   00:5FEE  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4958   00:5FF1                      		
    4959   00:5FF1  3E 5A               		ld		a,90
    4960   00:5FF3  CD D3 6C            		call	pinta_en_pantalla
    4961   00:5FF6                      		
    4962   00:5FF6  3E 0B               		ld		a,11						;efecto sonoro agua (arreglar)
    4963   00:5FF8  CD E6 6C            		call	efecto_sonido
    4964   00:5FFB                      						
    4965   00:5FFB                      moja_prota:
    4966   00:5FFB                      
    4967   00:5FFB  3E 07               		ld		a,7
    4968   00:5FFD  32 16 C0            		ld		(color_prota),a
    4969   00:6000  3E 0E               		ld		a,14
    4970   00:6002  32 17 C0            		ld		(color_lineas_prota),a
    4971   00:6005                      		
    4972   00:6005  C9                  		ret
    4973   00:6006                      
    4974   00:6006                      activa_chorro_2:
    4975   00:6006                      
    4976   00:6006  3A 80 C3            		ld		a,(grifo_estado)
    4977   00:6009  FE 00               		cp		0
    4978   00:600B  C8                  		ret		z
    4979   00:600C                      		
    4980   00:600C  CD 99 6B            		call	menos_dos_diez
    4981   00:600F  CD A9 5C            		call	get_bloque_en_X_Y
    4982   00:6012  3E 78               		ld		a,120
    4983   00:6014  77                  		ld		[hl],a
    4984   00:6015                      								
    4985   00:6015  CD 99 6B            		call	menos_dos_diez
    4986   00:6018  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4987   00:601B                      		
    4988   00:601B  3E 78               		ld		a,120
    4989   00:601D  CD D3 6C            		call	pinta_en_pantalla
    4990   00:6020                      		
    4991   00:6020  CD 7F 6B            		call	seis_diez
    4992   00:6023  CD A9 5C            		call	get_bloque_en_X_Y
    4993   00:6026  3E 79               		ld		a,121
    4994   00:6028  77                  		ld		[hl],a
    4995   00:6029                      								
    4996   00:6029  CD 7F 6B            		call	seis_diez
    4997   00:602C  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    4998   00:602F                      		
    4999   00:602F  3E 79               		ld		a,121
    5000   00:6031  CD D3 6C            		call	pinta_en_pantalla
    5001   00:6034                      		
    5002   00:6034  CD EF 6B            		call	catorce_diez
    5003   00:6037  CD A9 5C            		call	get_bloque_en_X_Y
    5004   00:603A  3E 7A               		ld		a,122
    5005   00:603C  77                  		ld		[hl],a
    5006   00:603D                      								
    5007   00:603D  CD EF 6B            		call	catorce_diez
    5008   00:6040  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5009   00:6043                      		
    5010   00:6043  3E 7A               		ld		a,122
    5011   00:6045  CD D3 6C            		call	pinta_en_pantalla
    5012   00:6048                      		
    5013   00:6048  C9                  		ret
    5014   00:6049                      				
    5015   00:6049                      coge_toalla:
    5016   00:6049                      
    5017   00:6049  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger toalla
    5018   00:604C  C6 06               		add		a,6
    5019   00:604E  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5020   00:6051  3E 01               		ld		a,1
    5021   00:6053  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5022   00:6056                      		
    5023   00:6056  CD 7F 6B            		call	seis_diez
    5024   00:6059  CD A9 5C            		call	get_bloque_en_X_Y
    5025   00:605C  3E 6C               		ld		a,108
    5026   00:605E  77                  		ld		[hl],a
    5027   00:605F                      								
    5028   00:605F  CD 7F 6B            		call	seis_diez
    5029   00:6062  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5030   00:6065                      		
    5031   00:6065  3E 6C               		ld		a,108
    5032   00:6067  CD D3 6C            		call	pinta_en_pantalla
    5033   00:606A                      		
    5034   00:606A  3E 02               		ld		a,2						;efecto sonoro de toalla cogida
    5035   00:606C  CD E6 6C            		call	efecto_sonido
    5036   00:606F                      		
    5037   00:606F  3E 08               		ld		a,8						; da valor a la variable para secar al prota
    5038   00:6071  32 16 C0            		ld		(color_prota),a
    5039   00:6074  3E 01               		ld		a,1
    5040   00:6076  32 17 C0            		ld		(color_lineas_prota),a
    5041   00:6079                      		
    5042   00:6079  C9                  		ret
    5043   00:607A                      
    5044   00:607A                      cierra_grifo:
    5045   00:607A                      
    5046   00:607A  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)								;puntos ganados por coger mechero
    5047   00:607D  C6 0A               		add		a,10
    5048   00:607F  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5049   00:6082  3E 01               		ld		a,1
    5050   00:6084  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5051   00:6087                      		
    5052   00:6087  CD 7F 6B            		call	seis_diez
    5053   00:608A  CD A9 5C            		call	get_bloque_en_X_Y
    5054   00:608D  3E 77               		ld		a,119
    5055   00:608F  77                  		ld		[hl],a
    5056   00:6090                      								
    5057   00:6090  CD 7F 6B            		call	seis_diez
    5058   00:6093  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5059   00:6096                      		
    5060   00:6096  3E 77               		ld		a,119
    5061   00:6098  CD D3 6C            		call	pinta_en_pantalla
    5062   00:609B                      		
    5063   00:609B  3E 0A               		ld		a,10													;efecto sonoro de cerrar grifo
    5064   00:609D  CD E6 6C            		call	efecto_sonido
    5065   00:60A0                      		
    5066   00:60A0  AF                  		xor		a														; da valor a la variable para dar por hecho que el grifo está cerrado
    5067   00:60A1  32 80 C3            		ld		(grifo_estado),a
    5068   00:60A4                      		
    5069   00:60A4  C9                  		ret
    5070   00:60A5                      		
    5071   00:60A5                      coge_mechero:
    5072   00:60A5                      		
    5073   00:60A5  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)								;puntos ganados por coger mechero
    5074   00:60A8  C6 32               		add		a,50
    5075   00:60AA  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5076   00:60AD  3E 01               		ld		a,1
    5077   00:60AF  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5078   00:60B2                      		
    5079   00:60B2  CD 7F 6B            		call	seis_diez
    5080   00:60B5  CD A9 5C            		call	get_bloque_en_X_Y
    5081   00:60B8  3E 20               		ld		a,32
    5082   00:60BA  77                  		ld		[hl],a
    5083   00:60BB                      								
    5084   00:60BB  CD 7F 6B            		call	seis_diez
    5085   00:60BE  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5086   00:60C1                      		
    5087   00:60C1  3E 20               		ld		a,32
    5088   00:60C3  CD D3 6C            		call	pinta_en_pantalla
    5089   00:60C6                      		
    5090   00:60C6  3E CB               		ld		a,203
    5091   00:60C8  32 EE EE            		ld		[#eeee],a
    5092   00:60CB  21 EE EE            		ld		hl,#eeee												;pinta el mechero  a color
    5093   00:60CE  11 1C 18            		ld		de,#181c
    5094   00:60D1  01 01 00            		ld		bc,1
    5095   00:60D4  CD 5C 00            		call	GRABAVRAM
    5096   00:60D7                      		
    5097   00:60D7  3E 02               		ld		a,2						;efecto sonoro de coger
    5098   00:60D9  CD E6 6C            		call	efecto_sonido
    5099   00:60DC                      		
    5100   00:60DC  3E 01               		ld		a,1						; da valor a la variable para adeptar que la tienes
    5101   00:60DE  32 38 C3            		ld		(mechero),a
    5102   00:60E1                      		
    5103   00:60E1  C9                  		ret
    5104   00:60E2                      
    5105   00:60E2                      damos_la_luz:
    5106   00:60E2                      		
    5107   00:60E2  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)								;puntos ganados por dar la luz
    5108   00:60E5  C6 4B               		add		a,75
    5109   00:60E7  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5110   00:60EA  3E 01               		ld		a,1
    5111   00:60EC  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5112   00:60EF                      		
    5113   00:60EF  CD A6 6B            		call	seis_dos
    5114   00:60F2  CD A9 5C            		call	get_bloque_en_X_Y
    5115   00:60F5  3E 7D               		ld		a,125
    5116   00:60F7  77                  		ld		[hl],a
    5117   00:60F8                      								
    5118   00:60F8  CD D9 4C            		call	copiamos_en_pantalla_lo_de_memoria
    5119   00:60FB                      		
    5120   00:60FB  3E 02               		ld		a,2														;efecto sonoro de coger
    5121   00:60FD  CD E6 6C            		call	efecto_sonido
    5122   00:6100                      		
    5123   00:6100  3E 01               		ld		a,1
    5124   00:6102  32 82 C3            		ld		(vision_estado),a										;damos acceso a los objetos que ya se ven
    5125   00:6105                      				
    5126   00:6105  C9                  		ret
    5127   00:6106                      
    5128   00:6106                      coge_gasolina:
    5129   00:6106                      		
    5130   00:6106  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger gasolina
    5131   00:6109  C6 32               		add		a,50
    5132   00:610B  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5133   00:610E  3E 01               		ld		a,1
    5134   00:6110  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5135   00:6113                      		
    5136   00:6113  CD 7F 6B            		call	seis_diez
    5137   00:6116  CD A9 5C            		call	get_bloque_en_X_Y
    5138   00:6119  3E 20               		ld		a,32
    5139   00:611B  77                  		ld		[hl],a
    5140   00:611C                      				
    5141   00:611C  CD 7F 6B            		call	seis_diez
    5142   00:611F  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5143   00:6122                      		
    5144   00:6122  3E 20               		ld		a,32
    5145   00:6124  CD D3 6C            		call	pinta_en_pantalla
    5146   00:6127                      		
    5147   00:6127  3E CA               		ld		a,202
    5148   00:6129  32 EE EE            		ld		[#eeee],a
    5149   00:612C  21 EE EE            		ld		hl,#eeee				;pinta la gasolina  a color
    5150   00:612F  11 1A 18            		ld		de,#181a
    5151   00:6132  01 01 00            		ld		bc,1
    5152   00:6135  CD 5C 00            		call	GRABAVRAM
    5153   00:6138                      		
    5154   00:6138  3E 02               		ld		a,2						;efecto sonoro de coger
    5155   00:613A  CD E6 6C            		call	efecto_sonido
    5156   00:613D                      		
    5157   00:613D  3E 01               		ld		a,1						;da valor a la variable para adeptar que la tienes
    5158   00:613F  32 39 C3            		ld		(gasolina),a			
    5159   00:6142                      		
    5160   00:6142  C9                  		ret
    5161   00:6143                      					
    5162   00:6143                      coge_la_bomba:
    5163   00:6143                      		
    5164   00:6143  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger la bomba
    5165   00:6146  C6 05               		add		a,5
    5166   00:6148  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5167   00:614B  3E 01               		ld		a,1
    5168   00:614D  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5169   00:6150                      		
    5170   00:6150  CD A5 4D            		call	SPRITES_BOMBA
    5171   00:6153                      		
    5172   00:6153  CD 7F 6B            		call	seis_diez
    5173   00:6156  CD A9 5C            		call	get_bloque_en_X_Y
    5174   00:6159  3E 20               		ld		a,32
    5175   00:615B  77                  		ld		[hl],a
    5176   00:615C                      		
    5177   00:615C  7E                  		ld		a,[hl]					;borra de pantalla la bomba cogida												
    5178   00:615D  CD 7F 6B            		call	seis_diez
    5179   00:6160  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5180   00:6163                      		
    5181   00:6163  3E 20               		ld		a,32
    5182   00:6165  CD D3 6C            		call	pinta_en_pantalla
    5183   00:6168                      		
    5184   00:6168  3E CC               		ld		a,204
    5185   00:616A  32 EE EE            		ld		[#eeee],a
    5186   00:616D  21 EE EE            		ld		hl,#eeee				;pinta la bomba a color
    5187   00:6170  11 1E 18            		ld		de,#181e
    5188   00:6173  01 01 00            		ld		bc,1
    5189   00:6176  CD 5C 00            		call	GRABAVRAM
    5190   00:6179                      		
    5191   00:6179  AF                  		xor		a						;efecto sonoro de coger
    5192   00:617A  CD E6 6C            		call	efecto_sonido
    5193   00:617D                      		
    5194   00:617D  3E 01               		ld		a,1						; da el valor interno a tiene_objeto
    5195   00:617F  32 50 C0            		ld		(tiene_objeto),a
    5196   00:6182                      		
    5197   00:6182  C9                  		ret
    5198   00:6183                      
    5199   00:6183                      coge_cuchillo:
    5200   00:6183                      		
    5201   00:6183  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger cuchillo
    5202   00:6186  C6 01               		add		a,1
    5203   00:6188  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5204   00:618B  3E 01               		ld		a,1
    5205   00:618D  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5206   00:6190                      		
    5207   00:6190  CD D6 4D            		call	SPRITES_CUCHILLO
    5208   00:6193                      		
    5209   00:6193  CD 7F 6B            		call	seis_diez
    5210   00:6196  CD A9 5C            		call	get_bloque_en_X_Y
    5211   00:6199  3E 20               		ld		a,32
    5212   00:619B  77                  		ld		[hl],a
    5213   00:619C                      		
    5214   00:619C  CD 7F 6B            		call	seis_diez
    5215   00:619F  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5216   00:61A2                      		
    5217   00:61A2  3E 20               		ld		a,32
    5218   00:61A4  CD D3 6C            		call	pinta_en_pantalla
    5219   00:61A7                      		
    5220   00:61A7  3E D1               		ld		a,209
    5221   00:61A9  32 EE EE            		ld		[#eeee],a
    5222   00:61AC  21 EE EE            		ld		hl,#eeee				;pinta la espada a color
    5223   00:61AF  11 18 18            		ld		de,#1818
    5224   00:61B2  01 01 00            		ld		bc,1
    5225   00:61B5  CD 5C 00            		call	GRABAVRAM
    5226   00:61B8                      		
    5227   00:61B8  AF                  		xor		a						;efecto sonoro de coger
    5228   00:61B9  CD E6 6C            		call	efecto_sonido
    5229   00:61BC                      		
    5230   00:61BC  3E 02               		ld		a,2						; da el valor interno a tiene_objeto
    5231   00:61BE  32 50 C0            		ld		(tiene_objeto),a
    5232   00:61C1                      		
    5233   00:61C1  C9                  		ret
    5234   00:61C2                      		
    5235   00:61C2                      usa_bomba:
    5236   00:61C2                      		
    5237   00:61C2  CD 71 6C            		call	cero_dieciocho
    5238   00:61C5  CD A9 5C            		call	get_bloque_en_X_Y
    5239   00:61C8  FE 14               		cp		20
    5240   00:61CA  38 11               		jr.		c,continuamos
    5241   00:61CC  FE 15               		cp		21
    5242   00:61CE  28 0D               		jr.		z,continuamos
    5243   00:61D0  FE 16               		cp		22
    5244   00:61D2  28 09               		jr.		z,continuamos
    5245   00:61D4  FE 17               		cp		23
    5246   00:61D6  28 05               		jr.		z,continuamos		
    5247   00:61D8  FE 18               		cp		24
    5248   00:61DA  28 01               		jr.		z,continuamos
    5249   00:61DC                      
    5250   00:61DC  C9                  		ret
    5251   00:61DD                      		
    5252   00:61DD                      continuamos:
    5253   00:61DD                      
    5254   00:61DD  CD 07 4E            		call	SPRITES_PROTA_NORMAL		
    5255   00:61E0                      		
    5256   00:61E0  3A 12 C0            		ld		a,(px)					;situamos la explosion
    5257   00:61E3  D6 04               		sub		a,4
    5258   00:61E5  32 53 C0            		ld		(x_explosion),a
    5259   00:61E8  3A 13 C0            		ld		a,(py)
    5260   00:61EB  C6 0A               		add		a,10
    5261   00:61ED  32 54 C0            		ld		(y_explosion),a
    5262   00:61F0                      		
    5263   00:61F0  3E CF               		ld		a,207
    5264   00:61F2  32 EE EE            		ld		[#eeee],a
    5265   00:61F5  21 EE EE            		ld		hl,#eeee				;pinta la bomba a blanco y negro
    5266   00:61F8  11 1E 18            		ld		de,#181e
    5267   00:61FB  01 01 00            		ld		bc,1
    5268   00:61FE  CD 5C 00            		call	GRABAVRAM
    5269   00:6201                      	
    5270   00:6201  3E 00               		ld		a,0						;le quitamos el objeto
    5271   00:6203  32 50 C0            		ld		(tiene_objeto),a
    5272   00:6206                      		
    5273   00:6206  3E 01               		ld		a,1
    5274   00:6208  32 55 C0            		ld		(estado_de_explosion),a	;activamos los sprites de explosion
    5275   00:620B                      		
    5276   00:620B  3E 03               		ld		a,3						;efecto sonoro de bomba
    5277   00:620D  CD E6 6C            		call	efecto_sonido	
    5278   00:6210                      		
    5279   00:6210  CD 71 6C            		call	cero_dieciocho
    5280   00:6213  CD A9 5C            		call	get_bloque_en_X_Y
    5281   00:6216  FE 14               		cp		20
    5282   00:6218  38 30               		jr.		c,hace_agujero_1
    5283   00:621A  FE 15               		cp		21
    5284   00:621C  28 64               		jr.		z,hace_agujero_2
    5285   00:621E  FE 16               		cp		22
    5286   00:6220  28 60               		jr.		z,hace_agujero_2
    5287   00:6222  FE 17               		cp		23
    5288   00:6224  CA BB 62            		jr.		z,hace_agujero_3		
    5289   00:6227  FE 18               		cp		24
    5290   00:6229  CA BB 62            		jr.		z,hace_agujero_3
    5291   00:622C  C9                  		ret
    5292   00:622D                      
    5293   00:622D                      segunda_comprovacion_de_agujeros:
    5294   00:622D                      
    5295   00:622D  CD 7C 6C            		call	ocho_dieciocho
    5296   00:6230  CD A9 5C            		call	get_bloque_en_X_Y
    5297   00:6233  FE 14               		cp		20
    5298   00:6235  38 36               		jr.		c,hace_agujero_1_2
    5299   00:6237  FE 15               		cp		21
    5300   00:6239  28 6B               		jr.		z,hace_agujero_2_2
    5301   00:623B  FE 16               		cp		22
    5302   00:623D  28 67               		jr.		z,hace_agujero_2_2
    5303   00:623F  FE 17               		cp		23
    5304   00:6241  CA EA 62            		jr.		z,hace_agujero_3_2		
    5305   00:6244  FE 18               		cp		24
    5306   00:6246  CA EA 62            		jr.		z,hace_agujero_3_2
    5307   00:6249  C9                  		ret
    5308   00:624A                      hace_agujero_1:
    5309   00:624A                      		
    5310   00:624A  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por perforar suelo
    5311   00:624D  C6 05               		add		a,5
    5312   00:624F  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5313   00:6252  3E 01               		ld		a,1
    5314   00:6254  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5315   00:6257                      		
    5316   00:6257                      													
    5317   00:6257  CD 71 6C            		call	cero_dieciocho
    5318   00:625A  CD A9 5C            		call	get_bloque_en_X_Y
    5319   00:625D  3E 15               		ld		a,21
    5320   00:625F  77                  		ld		[hl],a
    5321   00:6260                      				
    5322   00:6260  CD 71 6C            		call	cero_dieciocho
    5323   00:6263  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5324   00:6266                      		
    5325   00:6266  3E 15               		ld		a,21
    5326   00:6268  CD D3 6C            		call	pinta_en_pantalla		
    5327   00:626B                      		
    5328   00:626B  18 C0               		jr.		segunda_comprovacion_de_agujeros
    5329   00:626D                      
    5330   00:626D                      hace_agujero_1_2:
    5331   00:626D                      
    5332   00:626D  CD 7C 6C            		call	ocho_dieciocho
    5333   00:6270  CD A9 5C            		call	get_bloque_en_X_Y
    5334   00:6273  3E 16               		ld		a,22
    5335   00:6275  77                  		ld		[hl],a
    5336   00:6276                      		
    5337   00:6276  CD 7C 6C            		call	ocho_dieciocho
    5338   00:6279  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5339   00:627C                      		
    5340   00:627C  3E 16               		ld		a,22
    5341   00:627E  CD D3 6C            		call	pinta_en_pantalla
    5342   00:6281                      		
    5343   00:6281  C9                  		ret
    5344   00:6282                      hace_agujero_2:
    5345   00:6282                      
    5346   00:6282  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por perforar suelo
    5347   00:6285  C6 0A               		add		a,10
    5348   00:6287  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5349   00:628A  3E 01               		ld		a,1
    5350   00:628C  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5351   00:628F                      		
    5352   00:628F  7E                  		ld		a,[hl]					;pone en buffer_colisiones el suelo 3										
    5353   00:6290  CD 71 6C            		call	cero_dieciocho
    5354   00:6293  CD A9 5C            		call	get_bloque_en_X_Y
    5355   00:6296  3E 17               		ld		a,23
    5356   00:6298  77                  		ld		[hl],a
    5357   00:6299                      				
    5358   00:6299  CD 71 6C            		call	cero_dieciocho
    5359   00:629C  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5360   00:629F                      		
    5361   00:629F  3E 17               		ld		a,23
    5362   00:62A1  CD D3 6C            		call	pinta_en_pantalla
    5363   00:62A4                      		
    5364   00:62A4  18 87               		jr. 	segunda_comprovacion_de_agujeros
    5365   00:62A6                      		
    5366   00:62A6                      hace_agujero_2_2:
    5367   00:62A6                      		
    5368   00:62A6  CD 7C 6C            		call	ocho_dieciocho
    5369   00:62A9  CD A9 5C            		call	get_bloque_en_X_Y
    5370   00:62AC  3E 18               		ld		a,24
    5371   00:62AE  77                  		ld		[hl],a
    5372   00:62AF                      		
    5373   00:62AF  CD 7C 6C            		call	ocho_dieciocho
    5374   00:62B2  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5375   00:62B5                      		
    5376   00:62B5  3E 18               		ld		a,24
    5377   00:62B7  CD D3 6C            		call	pinta_en_pantalla
    5378   00:62BA                      		
    5379   00:62BA  C9                  		ret
    5380   00:62BB                      
    5381   00:62BB                      hace_agujero_3:
    5382   00:62BB                      		
    5383   00:62BB  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por perforar suelo
    5384   00:62BE  C6 0F               		add		a,15
    5385   00:62C0  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5386   00:62C3  3E 01               		ld		a,1
    5387   00:62C5  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5388   00:62C8                      		
    5389   00:62C8  CD 71 6C            		call	cero_dieciocho
    5390   00:62CB  CD A9 5C            		call	get_bloque_en_X_Y
    5391   00:62CE  3E 20               		ld		a,32
    5392   00:62D0  77                  		ld		[hl],a
    5393   00:62D1                      		
    5394   00:62D1  CD 71 6C            		call	cero_dieciocho
    5395   00:62D4  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5396   00:62D7                      		
    5397   00:62D7  3E 20               		ld		a,32
    5398   00:62D9  CD D3 6C            		call	pinta_en_pantalla
    5399   00:62DC                      		
    5400   00:62DC  CD 7C 6C            		call	ocho_dieciocho
    5401   00:62DF  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5402   00:62E2                      		
    5403   00:62E2  3E 20               		ld		a,32
    5404   00:62E4  CD D3 6C            		call	pinta_en_pantalla
    5405   00:62E7                      		
    5406   00:62E7  C3 2D 62            		jr.		segunda_comprovacion_de_agujeros
    5407   00:62EA                      		
    5408   00:62EA                      hace_agujero_3_2:
    5409   00:62EA                      
    5410   00:62EA  CD 7C 6C            		call	ocho_dieciocho
    5411   00:62ED  CD A9 5C            		call	get_bloque_en_X_Y
    5412   00:62F0  3E 20               		ld		a,32
    5413   00:62F2  77                  		ld		[hl],a
    5414   00:62F3                      
    5415   00:62F3  CD 7C 6C            		call	ocho_dieciocho
    5416   00:62F6  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5417   00:62F9                      		
    5418   00:62F9  3E 20               		ld		a,32
    5419   00:62FB  CD D3 6C            		call	pinta_en_pantalla
    5420   00:62FE  C9                  		ret
    5421   00:62FF                      			
    5422   00:62FF                      usa_cuchillo:
    5423   00:62FF                      
    5424   00:62FF  3A 73 C3            		ld		a,(momento_lanzamiento)
    5425   00:6302  FE 00               		cp		0
    5426   00:6304  C0                  		ret		nz
    5427   00:6305                      		
    5428   00:6305  3E D0               		ld		a,208
    5429   00:6307  32 EE EE            		ld		[#eeee],a
    5430   00:630A  21 EE EE            		ld		hl,#eeee												;pinta el cuchillo a blanco y negro
    5431   00:630D  11 18 18            		ld		de,#1818
    5432   00:6310  01 01 00            		ld		bc,1
    5433   00:6313  CD 5C 00            		call	GRABAVRAM
    5434   00:6316                      	
    5435   00:6316  AF                  		xor		a														;le quita el cuchillo
    5436   00:6317  32 50 C0            		ld		(tiene_objeto),a
    5437   00:631A                      		
    5438   00:631A  CD 07 4E            		call	SPRITES_PROTA_NORMAL	
    5439   00:631D                      				
    5440   00:631D  3E 01               		ld		a,1														;activa las poses de lanzamiento
    5441   00:631F  32 73 C3            		ld		(momento_lanzamiento),a
    5442   00:6322                      		
    5443   00:6322  C9                  		ret
    5444   00:6323                      		
    5445   00:6323                      rutina_cuchillo_volador:
    5446   00:6323                      		
    5447   00:6323  3A 73 C3            		ld		a,(momento_lanzamiento)
    5448   00:6326  FE 00               		cp		0						
    5449   00:6328  C8                  		ret		z
    5450   00:6329  FE 03               		cp		3						
    5451   00:632B  28 19               		jr.		z,comprueba_lugar_cuchillo
    5452   00:632D  D2 D0 63            		jr.		nc,avanza_cuchillo
    5453   00:6330  47                  		ld		b,a
    5454   00:6331  3A 74 C3            		ld		a,(contador_poses_lanzar)
    5455   00:6334  3D                  		dec		a
    5456   00:6335  32 74 C3            		ld		(contador_poses_lanzar),a
    5457   00:6338  FE 00               		cp		0
    5458   00:633A  C0                  		ret		nz
    5459   00:633B  3E 05               		ld		a,5
    5460   00:633D  32 74 C3            		ld		(contador_poses_lanzar),a
    5461   00:6340  78                  		ld		a,b
    5462   00:6341                      		
    5463   00:6341  3C                  		inc		a
    5464   00:6342  32 73 C3            		ld		(momento_lanzamiento),a
    5465   00:6345                      		
    5466   00:6345  C9                  		ret
    5467   00:6346                      
    5468   00:6346                      comprueba_lugar_cuchillo:
    5469   00:6346                      
    5470   00:6346  3E 06               		ld		a,6						;efecto sonoro de lanzar
    5471   00:6348  CD E6 6C            		call	efecto_sonido	
    5472   00:634B                      		
    5473   00:634B  3A 1D C0            		ld		a,(dir_prota)				;vemos direccion en la que lanza
    5474   00:634E  FE 01               		cp		1
    5475   00:6350  28 3B               		jr.		z,lanzamos_a_la_izquierda
    5476   00:6352                      
    5477   00:6352                      lanzamos_a_la_derecha:
    5478   00:6352                      
    5479   00:6352  32 77 C3            		ld		(dir_cuchillo),a		;guardamos la dirección para poder seguirla con el cuchillo
    5480   00:6355                      
    5481   00:6355  3A 12 C0            		ld		a,[px]					
    5482   00:6358  C6 08               		add		8
    5483   00:635A  57                  		ld		d,a
    5484   00:635B  3A 13 C0            		ld		a,[py]
    5485   00:635E  3C                  		inc		a
    5486   00:635F  5F                  		ld		e,a
    5487   00:6360  CD A9 5C            		call	get_bloque_en_X_Y
    5488   00:6363  7E                  		ld		a,[hl]
    5489   00:6364  FE 20               		cp		32
    5490   00:6366  38 5E               		jr.		c,intento_fallido
    5491   00:6368                      		
    5492   00:6368  32 75 C3            		ld		(recordar_lo_que_habia),a
    5493   00:636B  3E 64               		ld		a,100
    5494   00:636D  77                  		ld		[hl],a
    5495   00:636E                      				
    5496   00:636E  3A 12 C0            		ld		a,[px]					;a vram
    5497   00:6371  C6 08               		add		8
    5498   00:6373  32 78 C3            		ld		[cx],a
    5499   00:6376  57                  		ld		d,a
    5500   00:6377  3A 13 C0            		ld		a,[py]
    5501   00:637A  3C                  		inc		a
    5502   00:637B  32 79 C3            		ld		[cy],a
    5503   00:637E  5F                  		ld		e,a
    5504   00:637F  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5505   00:6382                      		
    5506   00:6382  3E 64               		ld		a,100
    5507   00:6384  CD D3 6C            		call	pinta_en_pantalla
    5508   00:6387                      		
    5509   00:6387  3E 04               		ld		a,4						;pasamos el estado a movimiento
    5510   00:6389  32 73 C3            		ld		(momento_lanzamiento),a
    5511   00:638C                      		
    5512   00:638C  C9                  		ret
    5513   00:638D                      
    5514   00:638D                      lanzamos_a_la_izquierda:
    5515   00:638D                      
    5516   00:638D  32 77 C3            		ld		(dir_cuchillo),a		;guardamos la dirección para poder seguirla con el cuchillo
    5517   00:6390                      
    5518   00:6390  3A 12 C0            		ld		a,[px]					
    5519   00:6393  3C                  		inc		a
    5520   00:6394  57                  		ld		d,a
    5521   00:6395  3A 13 C0            		ld		a,[py]
    5522   00:6398  3C                  		inc		a
    5523   00:6399  5F                  		ld		e,a
    5524   00:639A  CD A9 5C            		call	get_bloque_en_X_Y
    5525   00:639D  7E                  		ld		a,[hl]
    5526   00:639E  FE 20               		cp		32
    5527   00:63A0  38 24               		jr.		c,intento_fallido
    5528   00:63A2                      		
    5529   00:63A2  32 75 C3            		ld		(recordar_lo_que_habia),a
    5530   00:63A5  3E 66               		ld		a,102
    5531   00:63A7  77                  		ld		[hl],a
    5532   00:63A8                      				
    5533   00:63A8  3A 12 C0            		ld		a,[px]					;a vram
    5534   00:63AB  3C                  		inc		a
    5535   00:63AC  32 78 C3            		ld		[cx],a
    5536   00:63AF  57                  		ld		d,a
    5537   00:63B0  3A 13 C0            		ld		a,[py]
    5538   00:63B3  3C                  		inc		a
    5539   00:63B4  32 79 C3            		ld		[cy],a
    5540   00:63B7  5F                  		ld		e,a
    5541   00:63B8  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5542   00:63BB                      		
    5543   00:63BB  3E 66               		ld		a,102
    5544   00:63BD  CD D3 6C            		call	pinta_en_pantalla
    5545   00:63C0                      		
    5546   00:63C0  3E 04               		ld		a,4						;pasamos el estado a movimiento
    5547   00:63C2  32 73 C3            		ld		(momento_lanzamiento),a
    5548   00:63C5                      		
    5549   00:63C5  C9                  		ret
    5550   00:63C6                      
    5551   00:63C6                      intento_fallido:
    5552   00:63C6                      
    5553   00:63C6  3E 03               		ld		a,3						;efecto sonoro de fallo
    5554   00:63C8  CD E6 6C            		call	efecto_sonido	
    5555   00:63CB                      		
    5556   00:63CB  AF                  		xor		a
    5557   00:63CC  32 73 C3            		ld		(momento_lanzamiento),a
    5558   00:63CF                      		
    5559   00:63CF  C9                  		ret
    5560   00:63D0                      		
    5561   00:63D0                      avanza_cuchillo:
    5562   00:63D0  3A 77 C3            		ld		a,(dir_cuchillo)
    5563   00:63D3  FE 01               		cp		1
    5564   00:63D5  CA 8D 64            		jr.		z,avanza_hacia_la_izquierda
    5565   00:63D8                      
    5566   00:63D8                      avanza_hacia_la_derecha:
    5567   00:63D8                      
    5568   00:63D8  3A 78 C3            		ld		a,[cx]						;si en el siguiente tile hay ladrillo, va a clavar
    5569   00:63DB  C6 04               		add		4
    5570   00:63DD  57                  		ld		d,a
    5571   00:63DE  3A 79 C3            		ld		a,[cy]
    5572   00:63E1  5F                  		ld		e,a
    5573   00:63E2  CD A9 5C            		call	get_bloque_en_X_Y
    5574   00:63E5  7E                  		ld		a,[hl]
    5575   00:63E6  FE 20               		cp		32
    5576   00:63E8  38 4E               		jr.		c,(clava_a_la_derecha)
    5577   00:63EA                      	
    5578   00:63EA  3A 78 C3            		ld		a,[cx]						;recupera lo que habia en el tile anteriormente					
    5579   00:63ED  57                  		ld		d,a
    5580   00:63EE  3A 79 C3            		ld		a,[cy]
    5581   00:63F1  5F                  		ld		e,a
    5582   00:63F2  CD A9 5C            		call	get_bloque_en_X_Y
    5583   00:63F5                      		
    5584   00:63F5  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5585   00:63F8  77                  		ld		[hl],a
    5586   00:63F9                      	
    5587   00:63F9  3A 78 C3            		ld		a,[cx]						;recupera tambien en vram
    5588   00:63FC  57                  		ld		d,a
    5589   00:63FD  3A 79 C3            		ld		a,[cy]
    5590   00:6400  5F                  		ld		e,a
    5591   00:6401  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5592   00:6404                      		
    5593   00:6404  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5594   00:6407  CD D3 6C            		call	pinta_en_pantalla
    5595   00:640A                      		
    5596   00:640A  3A 78 C3            		ld		a,[cx]						;salva lo que hay en el tile destino
    5597   00:640D  C6 04               		add		4
    5598   00:640F  57                  		ld		d,a
    5599   00:6410  3A 79 C3            		ld		a,[cy]
    5600   00:6413  5F                  		ld		e,a
    5601   00:6414  CD A9 5C            		call	get_bloque_en_X_Y
    5602   00:6417  7E                  		ld		a,[hl]
    5603   00:6418  32 75 C3            		ld		(recordar_lo_que_habia),a
    5604   00:641B                      		
    5605   00:641B  36 64               		ld		[hl],100					;pone el cuchillo en el nuevo tile
    5606   00:641D                      		
    5607   00:641D  3A 78 C3            		ld		a,[cx]
    5608   00:6420  C6 04               		add		4							;tambien en vram
    5609   00:6422  57                  		ld		d,a
    5610   00:6423  3A 79 C3            		ld		a,[cy]
    5611   00:6426  5F                  		ld		e,a
    5612   00:6427  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5613   00:642A                      		
    5614   00:642A  3E 64               		ld		a,100
    5615   00:642C  CD D3 6C            		call	pinta_en_pantalla
    5616   00:642F                      							
    5617   00:642F  3A 78 C3            		ld		a,[cx]						;nuevo valor para las coordenadas x e y
    5618   00:6432  C6 04               		add		4
    5619   00:6434  32 78 C3            		ld		[cx],a
    5620   00:6437                      		
    5621   00:6437  C9                  		ret		
    5622   00:6438                      
    5623   00:6438                      clava_a_la_derecha:
    5624   00:6438                      
    5625   00:6438  3A 75 C3            		ld		a,(recordar_lo_que_habia)		;si está en escalera, tile especial
    5626   00:643B  FE 2A               		cp		42
    5627   00:643D  20 27               		jr.		nz,(continua_clava_derecha_normal)
    5628   00:643F                      		
    5629   00:643F  3E 05               		ld		a,5						;efecto sonoro de clavar
    5630   00:6441  CD E6 6C            		call	efecto_sonido	
    5631   00:6444                      		
    5632   00:6444  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5633   00:6447  57                  		ld		d,a
    5634   00:6448  3A 79 C3            		ld		a,[cy]
    5635   00:644B  5F                  		ld		e,a
    5636   00:644C  CD A9 5C            		call	get_bloque_en_X_Y
    5637   00:644F  36 6A               		ld		[hl],106
    5638   00:6451                      		
    5639   00:6451  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5640   00:6454  57                  		ld		d,a
    5641   00:6455  3A 79 C3            		ld		a,[cy]
    5642   00:6458  5F                  		ld		e,a
    5643   00:6459  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5644   00:645C                      				
    5645   00:645C  3E 6A               		ld		a,106
    5646   00:645E  CD D3 6C            		call	pinta_en_pantalla
    5647   00:6461                      		
    5648   00:6461  AF                  		xor		a
    5649   00:6462  32 73 C3            		ld		(momento_lanzamiento),a
    5650   00:6465                      		
    5651   00:6465  C9                  		ret
    5652   00:6466                      		
    5653   00:6466                      continua_clava_derecha_normal:
    5654   00:6466                      
    5655   00:6466  3E 05               		ld		a,5						;efecto sonoro de clavar
    5656   00:6468  CD E6 6C            		call	efecto_sonido	
    5657   00:646B                      		
    5658   00:646B  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5659   00:646E  57                  		ld		d,a
    5660   00:646F  3A 79 C3            		ld		a,[cy]
    5661   00:6472  5F                  		ld		e,a
    5662   00:6473  CD A9 5C            		call	get_bloque_en_X_Y
    5663   00:6476  36 65               		ld		[hl],101
    5664   00:6478                      		
    5665   00:6478  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5666   00:647B  57                  		ld		d,a
    5667   00:647C  3A 79 C3            		ld		a,[cy]
    5668   00:647F  5F                  		ld		e,a
    5669   00:6480  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5670   00:6483                      		
    5671   00:6483  3E 65               		ld		a,101
    5672   00:6485  CD D3 6C            		call	pinta_en_pantalla
    5673   00:6488                      		
    5674   00:6488  AF                  		xor		a
    5675   00:6489  32 73 C3            		ld		(momento_lanzamiento),a
    5676   00:648C                      		
    5677   00:648C  C9                  		ret
    5678   00:648D                      
    5679   00:648D                      avanza_hacia_la_izquierda:
    5680   00:648D                      
    5681   00:648D  3A 78 C3            		ld		a,[cx]						;si en el siguiente tile hay ladrillo, va a clavar
    5682   00:6490  D6 04               		sub		a,4
    5683   00:6492  57                  		ld		d,a
    5684   00:6493  3A 79 C3            		ld		a,[cy]
    5685   00:6496  5F                  		ld		e,a
    5686   00:6497  CD A9 5C            		call	get_bloque_en_X_Y
    5687   00:649A  7E                  		ld		a,[hl]
    5688   00:649B  FE 20               		cp		32
    5689   00:649D  38 4E               		jr.		c,(clava_a_la_izquierda)
    5690   00:649F                      	
    5691   00:649F  3A 78 C3            		ld		a,[cx]						;recupera lo que habia en el tile anteriormente					
    5692   00:64A2  57                  		ld		d,a
    5693   00:64A3  3A 79 C3            		ld		a,[cy]
    5694   00:64A6  5F                  		ld		e,a
    5695   00:64A7  CD A9 5C            		call	get_bloque_en_X_Y
    5696   00:64AA                      		
    5697   00:64AA  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5698   00:64AD  77                  		ld		[hl],a
    5699   00:64AE                      	
    5700   00:64AE  3A 78 C3            		ld		a,[cx]						;recupera tambien en vram
    5701   00:64B1  57                  		ld		d,a
    5702   00:64B2  3A 79 C3            		ld		a,[cy]
    5703   00:64B5  5F                  		ld		e,a
    5704   00:64B6  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5705   00:64B9                      		
    5706   00:64B9  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5707   00:64BC  CD D3 6C            		call	pinta_en_pantalla
    5708   00:64BF                      		
    5709   00:64BF  3A 78 C3            		ld		a,[cx]						;salva lo que hay en el tile destino
    5710   00:64C2  D6 04               		sub		a,4
    5711   00:64C4  57                  		ld		d,a
    5712   00:64C5  3A 79 C3            		ld		a,[cy]
    5713   00:64C8  5F                  		ld		e,a
    5714   00:64C9  CD A9 5C            		call	get_bloque_en_X_Y
    5715   00:64CC  7E                  		ld		a,[hl]
    5716   00:64CD  32 75 C3            		ld		(recordar_lo_que_habia),a
    5717   00:64D0                      		
    5718   00:64D0  36 66               		ld		[hl],102					;pone el cuchillo en el nuevo tile
    5719   00:64D2                      		
    5720   00:64D2  3A 78 C3            		ld		a,[cx]
    5721   00:64D5  D6 04               		sub		a,4							;tambien en vram
    5722   00:64D7  57                  		ld		d,a
    5723   00:64D8  3A 79 C3            		ld		a,[cy]
    5724   00:64DB  5F                  		ld		e,a
    5725   00:64DC  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5726   00:64DF                      		
    5727   00:64DF  3E 66               		ld		a,102
    5728   00:64E1  CD D3 6C            		call	pinta_en_pantalla
    5729   00:64E4                      							
    5730   00:64E4  3A 78 C3            		ld		a,[cx]						;nuevo valor para las coordenadas x e y
    5731   00:64E7  D6 04               		sub		a,4
    5732   00:64E9  32 78 C3            		ld		[cx],a
    5733   00:64EC                      		
    5734   00:64EC  C9                  		ret
    5735   00:64ED                      		
    5736   00:64ED                      clava_a_la_izquierda:
    5737   00:64ED                      		
    5738   00:64ED  3A 75 C3            		ld		a,(recordar_lo_que_habia)		;si está en escalera, tile especial
    5739   00:64F0  FE 29               		cp		41
    5740   00:64F2  20 27               		jr.		nz,(continua_clava_izquierda_normal)
    5741   00:64F4                      		
    5742   00:64F4  3E 05               		ld		a,5						;efecto sonoro de clavar
    5743   00:64F6  CD E6 6C            		call	efecto_sonido	
    5744   00:64F9                      		
    5745   00:64F9  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5746   00:64FC  57                  		ld		d,a
    5747   00:64FD  3A 79 C3            		ld		a,[cy]
    5748   00:6500  5F                  		ld		e,a
    5749   00:6501  CD A9 5C            		call	get_bloque_en_X_Y
    5750   00:6504  36 6A               		ld		[hl],106
    5751   00:6506                      		
    5752   00:6506  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5753   00:6509  57                  		ld		d,a
    5754   00:650A  3A 79 C3            		ld		a,[cy]
    5755   00:650D  5F                  		ld		e,a
    5756   00:650E  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5757   00:6511                      				
    5758   00:6511  3E 69               		ld		a,105
    5759   00:6513  CD D3 6C            		call	pinta_en_pantalla
    5760   00:6516                      		
    5761   00:6516  AF                  		xor		a
    5762   00:6517  32 73 C3            		ld		(momento_lanzamiento),a
    5763   00:651A                      		
    5764   00:651A  C9                  		ret
    5765   00:651B                      		
    5766   00:651B                      continua_clava_izquierda_normal:
    5767   00:651B                      
    5768   00:651B  3E 05               		ld		a,5						;efecto sonoro de clavar
    5769   00:651D  CD E6 6C            		call	efecto_sonido
    5770   00:6520                      		
    5771   00:6520  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5772   00:6523  57                  		ld		d,a
    5773   00:6524  3A 79 C3            		ld		a,[cy]
    5774   00:6527  5F                  		ld		e,a
    5775   00:6528  CD A9 5C            		call	get_bloque_en_X_Y
    5776   00:652B  36 67               		ld		[hl],103
    5777   00:652D                      		
    5778   00:652D  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5779   00:6530  57                  		ld		d,a
    5780   00:6531  3A 79 C3            		ld		a,[cy]
    5781   00:6534  5F                  		ld		e,a
    5782   00:6535  CD CE 5C            		call	get_bloque_en_X_Y_paravram
    5783   00:6538                      		
    5784   00:6538  3E 67               		ld		a,103
    5785   00:653A  CD D3 6C            		call	pinta_en_pantalla
    5786   00:653D                      		
    5787   00:653D  AF                  		xor		a
    5788   00:653E  32 73 C3            		ld		(momento_lanzamiento),a
    5789   00:6541                      		
    5790   00:6541  C9                  		ret
    5791   00:6542                      		
    5792   00:6542                      actualiza_la_puerta:
    5793   00:6542                      		
    5794   00:6542  3A 3C C3            		ld		a,(ya_ha_cambiado_puerta)
    5795   00:6545  FE 00               		cp		0
    5796   00:6547  C0                  		ret		nz
    5797   00:6548                      		
    5798   00:6548  3A 38 C3            		ld		a,(mechero)
    5799   00:654B  FE 00               		cp		0
    5800   00:654D  C8                  		ret		z
    5801   00:654E  3A 39 C3            		ld		a,(gasolina)
    5802   00:6551  FE 00               		cp		0
    5803   00:6553  C8                  		ret		z
    5804   00:6554                      		
    5805   00:6554                      							
    5806   00:6554  2A 3A C3            		ld		hl,(posicion_puerta)
    5807   00:6557  3E 2D               		ld		a,45
    5808   00:6559  CD D3 6C            		call	pinta_en_pantalla
    5809   00:655C                      		
    5810   00:655C  3A 3A C3            		ld		a,(posicion_puerta)
    5811   00:655F  C6 01               		add		1
    5812   00:6561  32 3A C3            		ld		(posicion_puerta),a
    5813   00:6564  2A 3A C3            		ld		hl,(posicion_puerta)
    5814   00:6567                      		
    5815   00:6567  3E 2E               		ld		a,46
    5816   00:6569  CD D3 6C            		call	pinta_en_pantalla
    5817   00:656C                      		
    5818   00:656C  3A 3A C3            		ld		a,(posicion_puerta)
    5819   00:656F  C6 1F               		add		31
    5820   00:6571  32 3A C3            		ld		(posicion_puerta),a
    5821   00:6574  2A 3A C3            		ld		hl,(posicion_puerta)
    5822   00:6577                      		
    5823   00:6577  3E 30               		ld		a,48
    5824   00:6579  CD D3 6C            		call	pinta_en_pantalla
    5825   00:657C                      		
    5826   00:657C  3A 3A C3            		ld		a,(posicion_puerta)
    5827   00:657F  C6 01               		add		1
    5828   00:6581  32 3A C3            		ld		(posicion_puerta),a
    5829   00:6584  2A 3A C3            		ld		hl,(posicion_puerta)
    5830   00:6587                      		
    5831   00:6587  3E 2F               		ld		a,47
    5832   00:6589  CD D3 6C            		call	pinta_en_pantalla
    5833   00:658C                      		
    5834   00:658C  3E FF               		ld		a,255
    5835   00:658E                      		
    5836   00:658E                      alegria_de_color:
    5837   00:658E                      
    5838   00:658E  F5                  		push	af
    5839   00:658F                      				
    5840   00:658F  3E 00               		ld		a,0
    5841   00:6591  32 E9 F3            		ld		[COLLETRA],a											;aunque sólo quieras cambiar uno de los colores, tienes que volver a definir los otros dos para que te acepte un cambio
    5842   00:6594  3E 00               		ld		a,0
    5843   00:6596  32 EA F3            		ld		[COLFONDO],a
    5844   00:6599  3E 04               		ld		a,4
    5845   00:659B  32 EB F3            		ld		[COLBORDE],a
    5846   00:659E  CD 62 00            		call	COLOR
    5847   00:65A1  3E 07               		ld		a,7
    5848   00:65A3  32 EB F3            		ld		[COLBORDE],a
    5849   00:65A6  CD 62 00            		call	COLOR
    5850   00:65A9  3E 0F               		ld		a,15
    5851   00:65AB  32 EB F3            		ld		[COLBORDE],a
    5852   00:65AE  CD 62 00            		call	COLOR
    5853   00:65B1  3E 09               		ld		a,9
    5854   00:65B3  32 EB F3            		ld		[COLBORDE],a
    5855   00:65B6  CD 62 00            		call	COLOR
    5856   00:65B9                      		
    5857   00:65B9  F1                  		pop		af
    5858   00:65BA  3D                  		dec		a
    5859   00:65BB  FE 00               		cp		0
    5860   00:65BD  20 CF               		jr.		nz,alegria_de_color
    5861   00:65BF                      		
    5862   00:65BF  3E 01               		ld		a,1
    5863   00:65C1  32 EB F3            		ld		[COLBORDE],a
    5864   00:65C4  CD 62 00            		call	COLOR
    5865   00:65C7                      		
    5866   00:65C7  3E 01               		ld		a,1
    5867   00:65C9  32 3C C3            		ld		(ya_ha_cambiado_puerta),a
    5868   00:65CC                      		
    5869   00:65CC  C9                  		ret
    5870   00:65CD                      
    5871   00:65CD                      comprueba_estado_de_explosion:
    5872   00:65CD                      
    5873   00:65CD  3A 55 C0            		ld		a,(estado_de_explosion)
    5874   00:65D0  FE 00               		cp		0
    5875   00:65D2  C8                  		ret		z
    5876   00:65D3                      				
    5877   00:65D3  DD 21 20 C0         		ld		ix,atributos_sprite_general
    5878   00:65D7                      		
    5879   00:65D7  3A 54 C0            		ld		a,(y_explosion)			;valor y**
    5880   00:65DA  DD 77 0C            		ld		(ix+12),a
    5881   00:65DD                      			
    5882   00:65DD  3A 53 C0            		ld		a,(x_explosion)			;valor x**
    5883   00:65E0  DD 77 0D            		ld		(ix+13),a
    5884   00:65E3                      		
    5885   00:65E3  3A 55 C0            		ld		a,(estado_de_explosion)	;SPRITE
    5886   00:65E6  C6 14               		add		a,20
    5887   00:65E8  87 87               [2]		add		a,a
    5888   00:65EA  DD 77 0E            		ld		(ix+14),a
    5889   00:65ED                      		
    5890   00:65ED  3E 0F               		ld		a,15					;COLOR EXPLOSION
    5891   00:65EF  DD 77 0F            		ld		(ix+15),a
    5892   00:65F2                      		
    5893   00:65F2  3A 56 C0            		ld		a,(contador_retardo_explosion)
    5894   00:65F5  3C                  		inc		a
    5895   00:65F6  32 56 C0            		ld		(contador_retardo_explosion),a
    5896   00:65F9  FE 05               		cp		5
    5897   00:65FB  C0                  		ret		nz
    5898   00:65FC  AF                  		xor		a
    5899   00:65FD  32 56 C0            		ld		(contador_retardo_explosion),a
    5900   00:6600  3A 55 C0            		ld		a,(estado_de_explosion)
    5901   00:6603  3C                  		inc		a
    5902   00:6604  32 55 C0            		ld		(estado_de_explosion),a
    5903   00:6607  FE 04               		cp		4
    5904   00:6609  28 01               		jr.		z,finalizamos_la_explosion
    5905   00:660B                      		
    5906   00:660B  C9                  		ret
    5907   00:660C                      		
    5908   00:660C                      finalizamos_la_explosion:
    5909   00:660C                      		
    5910   00:660C  DD 21 20 C0         		ld		ix,atributos_sprite_general
    5911   00:6610                      		
    5912   00:6610  AF                  		xor		a
    5913   00:6611  32 55 C0            		ld		(estado_de_explosion),a
    5914   00:6614  DD 77 0C            		ld		(ix+12),a
    5915   00:6617  DD 77 0D            		ld		(ix+13),a
    5916   00:661A  DD 77 0F            		ld		(ix+15),a
    5917   00:661D  3E 60               		ld		a,24*4
    5918   00:661F  DD 77 0E            		ld		(ix+14),a
    5919   00:6622                      
    5920   00:6622  C9                  		ret
    5921   00:6623                      
    5922   00:6623                      puntuacion_vidas_fase:
    5923   00:6623                      		
    5924   00:6623  3A 15 C0            		ld		a,(vidas_prota)						;pinta vidas
    5925   00:6626                      		
    5926   00:6626  C6 C0               		add		a,192
    5927   00:6628  32 EE EE            		ld		[#eeee],a
    5928   00:662B  21 EE EE            		ld		hl,#eeee
    5929   00:662E  11 03 18            		ld		de,#1803
    5930   00:6631  01 01 00            		ld		bc,1
    5931   00:6634  CD 5C 00            		call	GRABAVRAM
    5932   00:6637                      		
    5933   00:6637  3A 19 C0            		ld		a,(fase_en_la_que_esta)				;pinta fase
    5934   00:663A  FE 0A               		cp		10
    5935   00:663C  D4 74 66            		call	nc,fase_superior_a_diez
    5936   00:663F                      		
    5937   00:663F  C6 C0               		add		a,192
    5938   00:6641  32 EE EE            		ld		[#eeee],a
    5939   00:6644  21 EE EE            		ld		hl,#eeee
    5940   00:6647  11 16 18            		ld		de,#1816
    5941   00:664A  01 01 00            		ld		bc,1
    5942   00:664D  CD 5C 00            		call	GRABAVRAM
    5943   00:6650                      								
    5944   00:6650  3A 46 C3            		ld		a,(cuenta_puntos_o_no)				;decide si pasa a poner puntos
    5945   00:6653  FE 00               		cp		0
    5946   00:6655  C8                  		ret		z
    5947   00:6656                      				
    5948   00:6656  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)
    5949   00:6659  47                  		ld		b,a
    5950   00:665A  3A 3E C3            		ld		a,(score)
    5951   00:665D  80                  		add		a,b
    5952   00:665E  32 3E C3            		ld		(score),a
    5953   00:6661  AF                  		xor		a
    5954   00:6662  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5955   00:6665  3A 3E C3            		ld		a,(score)
    5956   00:6668  47                  		ld		b,a
    5957   00:6669  3A 40 C3            		ld		a,(contador_para_puntuacion)
    5958   00:666C  B8                  		cp		b
    5959   00:666D  20 1B               		jr.		nz,rutina_de_puntos
    5960   00:666F  AF                  		xor		a
    5961   00:6670  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5962   00:6673  C9                  		ret
    5963   00:6674                      
    5964   00:6674                      fase_superior_a_diez:
    5965   00:6674                      
    5966   00:6674  D6 0A               		sub		10
    5967   00:6676                      		
    5968   00:6676  F5                  		push	af
    5969   00:6677                      		
    5970   00:6677  3E C1               		ld		a,193
    5971   00:6679  32 EE EE            		ld		[#eeee],a
    5972   00:667C  21 EE EE            		ld		hl,#eeee
    5973   00:667F  11 15 18            		ld		de,#1815
    5974   00:6682  01 01 00            		ld		bc,1
    5975   00:6685  CD 5C 00            		call	GRABAVRAM
    5976   00:6688                      		
    5977   00:6688  F1                  		pop		af
    5978   00:6689                      		
    5979   00:6689  C9                  		ret
    5980   00:668A                      		
    5981   00:668A                      rutina_de_puntos:
    5982   00:668A                      
    5983   00:668A  3A 40 C3            		ld		a,(contador_para_puntuacion)
    5984   00:668D  3C                  		inc		a
    5985   00:668E  32 40 C3            		ld		(contador_para_puntuacion),a
    5986   00:6691                      				
    5987   00:6691  3A 42 C3            		ld		a,(posicion_del_punto_unidades)
    5988   00:6694  3C                  		inc		a
    5989   00:6695  32 42 C3            		ld		(posicion_del_punto_unidades),a
    5990   00:6698  FE CA               		cp		202
    5991   00:669A  CC 9F 66            		call	z,resetea_los_numeros
    5992   00:669D                      			
    5993   00:669D  18 33               		jr.		termina_de_contar_puntuacion
    5994   00:669F                      		
    5995   00:669F                      resetea_los_numeros:
    5996   00:669F                      		
    5997   00:669F  3E C0               		ld		a,192								;limpia unidades
    5998   00:66A1  32 42 C3            		ld		(posicion_del_punto_unidades),a
    5999   00:66A4                      		
    6000   00:66A4  3A 43 C3            		ld		a,(posicion_del_punto_decenas)		;aumenta decenas
    6001   00:66A7  3C                  		inc		a
    6002   00:66A8  32 43 C3            		ld		(posicion_del_punto_decenas),a		
    6003   00:66AB  FE CA               		cp		202									;comprueba decenas
    6004   00:66AD  C0                  		ret		nz
    6005   00:66AE                      
    6006   00:66AE  3E C0               		ld		a,192								;limpia decenas
    6007   00:66B0  32 43 C3            		ld		(posicion_del_punto_decenas),a
    6008   00:66B3                      		
    6009   00:66B3  3A 44 C3            		ld		a,(posicion_del_punto_centenas)		;aumenta centenas
    6010   00:66B6  3C                  		inc		a
    6011   00:66B7  32 44 C3            		ld		(posicion_del_punto_centenas),a
    6012   00:66BA  FE CA               		cp		202									;comprueba centenas
    6013   00:66BC  C0                  		ret		nz
    6014   00:66BD                      
    6015   00:66BD  3E C0               		ld		a,192								;limpia centenas
    6016   00:66BF  32 44 C3            		ld		(posicion_del_punto_centenas),a
    6017   00:66C2                      		
    6018   00:66C2  3A 45 C3            		ld		a,(posicion_del_punto_millares)		;aumenta millares
    6019   00:66C5  3C                  		inc		a
    6020   00:66C6  32 45 C3            		ld		(posicion_del_punto_millares),a
    6021   00:66C9  FE CA               		cp		202									;comprueba millares
    6022   00:66CB  C0                  		ret		nz			
    6023   00:66CC                      		
    6024   00:66CC  3E C0               		ld		a,192								;limpia millares
    6025   00:66CE  32 45 C3            		ld		(posicion_del_punto_millares),a
    6026   00:66D1                      		
    6027   00:66D1  C9                  		ret
    6028   00:66D2                      		
    6029   00:66D2                      termina_de_contar_puntuacion:
    6030   00:66D2                      
    6031   00:66D2  3A 45 C3            		ld		a,(posicion_del_punto_millares)
    6032   00:66D5  32 EE EE            		ld		[#eeee],a
    6033   00:66D8  21 EE EE            		ld		hl,#eeee
    6034   00:66DB  11 0B 18            		ld		de,#180b
    6035   00:66DE  01 01 00            		ld		bc,1
    6036   00:66E1  CD 5C 00            		call	GRABAVRAM
    6037   00:66E4                      		
    6038   00:66E4  3A 44 C3            		ld		a,(posicion_del_punto_centenas)
    6039   00:66E7  32 EE EE            		ld		[#eeee],a
    6040   00:66EA  21 EE EE            		ld		hl,#eeee
    6041   00:66ED  11 0C 18            		ld		de,#180c
    6042   00:66F0  01 01 00            		ld		bc,1
    6043   00:66F3  CD 5C 00            		call	GRABAVRAM
    6044   00:66F6                      		
    6045   00:66F6  3A 43 C3            		ld		a,(posicion_del_punto_decenas)
    6046   00:66F9  32 EE EE            		ld		[#eeee],a
    6047   00:66FC  21 EE EE            		ld		hl,#eeee
    6048   00:66FF  11 0D 18            		ld		de,#180d
    6049   00:6702  01 01 00            		ld		bc,1
    6050   00:6705  CD 5C 00            		call	GRABAVRAM
    6051   00:6708                      		
    6052   00:6708  3A 42 C3            		ld		a,(posicion_del_punto_unidades)
    6053   00:670B  32 EE EE            		ld		[#eeee],a
    6054   00:670E  21 EE EE            		ld		hl,#eeee
    6055   00:6711  11 0E 18            		ld		de,#180e
    6056   00:6714  01 01 00            		ld		bc,1
    6057   00:6717  CD 5C 00            		call	GRABAVRAM
    6058   00:671A                      				
    6059   00:671A  C9                  		ret
    6060   00:671B                      
    6061   00:671B                      ha_saltado:
    6062   00:671B                      
    6063   00:671B  3A 1D C0            		ld		a,(dir_prota)
    6064   00:671E  FE 00               		cp		0
    6065   00:6720  28 04               		jr.		z,salta_hacia_la_derecha
    6066   00:6722  FE 01               		cp		1
    6067   00:6724  28 06               		jr.		z,salta_hacia_la_izquierda
    6068   00:6726                      		
    6069   00:6726                      salta_hacia_la_derecha:
    6070   00:6726                      
    6071   00:6726  3E 01               		ld		a,1
    6072   00:6728  32 37 C3            		ld		(estado_de_salto),a
    6073   00:672B  C9                  		ret
    6074   00:672C                      
    6075   00:672C                      salta_hacia_la_izquierda:
    6076   00:672C                      
    6077   00:672C  3E 1F               		ld		a,31
    6078   00:672E  32 37 C3            		ld		(estado_de_salto),a
    6079   00:6731  C9                  		ret
    6080   00:6732                      
    6081   00:6732                      salta_sube:
    6082   00:6732                      		
    6083   00:6732  CD 95 6C            		call	dieciseis_quince
    6084   00:6735  CD A9 5C            		call	get_bloque_en_X_Y
    6085   00:6738                      		
    6086   00:6738  FE 1F               		cp		31
    6087   00:673A  38 12               		jr.		c,la_y_a_la_derecha
    6088   00:673C                      		
    6089   00:673C                      		
    6090   00:673C  CD AF 6C            		call	uno_menos_cuatro
    6091   00:673F  CD A9 5C            		call	get_bloque_en_X_Y
    6092   00:6742                      		
    6093   00:6742  FE 1F               		cp		31
    6094   00:6744  38 20               		jr.		c,resetea_el_salto
    6095   00:6746                      		
    6096   00:6746  3A 12 C0            		ld		a,[px]
    6097   00:6749  C6 01               		add		1
    6098   00:674B  32 12 C0            		ld		[px],a
    6099   00:674E                      
    6100   00:674E                      la_y_a_la_derecha:
    6101   00:674E                      
    6102   00:674E  3A 13 C0            		ld		a,[py]
    6103   00:6751  D6 04               		sub		a,4
    6104   00:6753  32 13 C0            		ld		[py],a
    6105   00:6756                      		
    6106   00:6756                      salta_resolucion:
    6107   00:6756                      
    6108   00:6756  3A 37 C3            		ld		a,(estado_de_salto)
    6109   00:6759  3C                  		inc		a
    6110   00:675A  32 37 C3            		ld		(estado_de_salto),a
    6111   00:675D  FE 15               		cp		21
    6112   00:675F  28 05               		jr.		z,resetea_el_salto
    6113   00:6761  FE 33               		cp		51
    6114   00:6763  28 01               		jr.		z,resetea_el_salto
    6115   00:6765  C9                  		ret
    6116   00:6766                      
    6117   00:6766                      resetea_el_salto:
    6118   00:6766                      
    6119   00:6766  AF                  		xor		a
    6120   00:6767  32 37 C3            		ld		(estado_de_salto),a
    6121   00:676A  3E 05               		ld		a,5
    6122   00:676C  32 71 C3            		ld		(cont_no_salta_dos_seguidas),a
    6123   00:676F  C9                  		ret
    6124   00:6770                      		
    6125   00:6770                      salta_sube_izquierda:		
    6126   00:6770                      		
    6127   00:6770  CD BB 6C            		call	menos_uno_quince
    6128   00:6773  CD A9 5C            		call	get_bloque_en_X_Y
    6129   00:6776                      		
    6130   00:6776  FE 1F               		cp		31
    6131   00:6778  38 19               		jr.		c,la_y_a_la_izquierda
    6132   00:677A                      		
    6133   00:677A  3A 12 C0            		ld		a,[px]					;mira si tiene techo
    6134   00:677D  3D                  		dec		a														
    6135   00:677E  57                  		ld		d,a
    6136   00:677F  3A 13 C0            		ld		a,[py]
    6137   00:6782  D6 04               		sub		4
    6138   00:6784  5F                  		ld		e,a
    6139   00:6785  CD A9 5C            		call	get_bloque_en_X_Y
    6140   00:6788                      		
    6141   00:6788  FE 1F               		cp		31
    6142   00:678A  38 DA               		jr.		c,resetea_el_salto
    6143   00:678C                      		
    6144   00:678C  3A 12 C0            		ld		a,[px]
    6145   00:678F  3D                  		dec		a
    6146   00:6790  32 12 C0            		ld		[px],a
    6147   00:6793                      
    6148   00:6793                      la_y_a_la_izquierda:
    6149   00:6793                      		
    6150   00:6793  3A 13 C0            		ld		a,[py]
    6151   00:6796  D6 04               		sub		a,4
    6152   00:6798  32 13 C0            		ld		[py],a
    6153   00:679B                      		
    6154   00:679B                      salta_sigue:
    6155   00:679B                      		
    6156   00:679B  CD 95 6C            		call	dieciseis_quince
    6157   00:679E  CD A9 5C            		call	get_bloque_en_X_Y
    6158   00:67A1                      		
    6159   00:67A1  FE 1F               		cp		31
    6160   00:67A3  38 C1               		jr.		c,resetea_el_salto
    6161   00:67A5                      		
    6162   00:67A5  3A 12 C0            		ld		a,[px]
    6163   00:67A8  C6 01               		add		1
    6164   00:67AA  32 12 C0            		ld		[px],a
    6165   00:67AD                      		
    6166   00:67AD  18 A7               		jr.		salta_resolucion
    6167   00:67AF                      
    6168   00:67AF                      salta_sigue_izquierda:
    6169   00:67AF                      
    6170   00:67AF  CD BB 6C            		call	menos_uno_quince
    6171   00:67B2  CD A9 5C            		call	get_bloque_en_X_Y
    6172   00:67B5                      		
    6173   00:67B5  FE 1F               		cp		31
    6174   00:67B7  38 AD               		jr.		c,resetea_el_salto
    6175   00:67B9                      		
    6176   00:67B9  3A 12 C0            		ld		a,[px]
    6177   00:67BC  3D                  		dec		a
    6178   00:67BD  32 12 C0            		ld		[px],a
    6179   00:67C0                      		
    6180   00:67C0  18 94               		jr.		salta_resolucion
    6181   00:67C2                      
    6182   00:67C2                      salta_baja:
    6183   00:67C2                      
    6184   00:67C2  CD D5 6B            		call	dieciseis_dieciseis
    6185   00:67C5  CD A9 5C            		call	get_bloque_en_X_Y
    6186   00:67C8                      		
    6187   00:67C8  FE 1F               		cp		31
    6188   00:67CA  38 9A               		jr.		c,resetea_el_salto
    6189   00:67CC                      				
    6190   00:67CC  3A 12 C0            		ld		a,[px]					;mira si tiene suelo
    6191   00:67CF  C6 10               		add		16														
    6192   00:67D1  57                  		ld		d,a
    6193   00:67D2  3A 13 C0            		ld		a,[py]
    6194   00:67D5  C6 13               		add		19
    6195   00:67D7  5F                  		ld		e,a
    6196   00:67D8  CD A9 5C            		call	get_bloque_en_X_Y
    6197   00:67DB                      		
    6198   00:67DB  FE 1F               		cp		31
    6199   00:67DD  38 87               		jr.		c,resetea_el_salto
    6200   00:67DF                      		
    6201   00:67DF  3A 12 C0            		ld		a,[px]
    6202   00:67E2  C6 01               		add		1
    6203   00:67E4  32 12 C0            		ld		[px],a
    6204   00:67E7                      		
    6205   00:67E7  3A 13 C0            		ld		a,[py]
    6206   00:67EA  C6 04               		add		4
    6207   00:67EC  32 13 C0            		ld		[py],a
    6208   00:67EF                      		
    6209   00:67EF  C3 56 67            		jr.		salta_resolucion
    6210   00:67F2                      		
    6211   00:67F2                      salta_baja_izquierda:
    6212   00:67F2                      
    6213   00:67F2  CD C9 6B            		call	menos_uno_dieciseis
    6214   00:67F5  CD A9 5C            		call	get_bloque_en_X_Y
    6215   00:67F8                      		
    6216   00:67F8  FE 1F               		cp		31
    6217   00:67FA  DA 66 67            		jr.		c,resetea_el_salto
    6218   00:67FD                      		
    6219   00:67FD  3A 12 C0            		ld		a,[px]					;mira si tiene suelo
    6220   00:6800  3D                  		dec		a														
    6221   00:6801  57                  		ld		d,a
    6222   00:6802  3A 13 C0            		ld		a,[py]
    6223   00:6805  C6 13               		add		19
    6224   00:6807  5F                  		ld		e,a
    6225   00:6808  CD A9 5C            		call	get_bloque_en_X_Y
    6226   00:680B                      		
    6227   00:680B  FE 1F               		cp		31
    6228   00:680D  DA 66 67            		jr.		c,resetea_el_salto
    6229   00:6810                      		
    6230   00:6810  3A 12 C0            		ld		a,[px]
    6231   00:6813  3D                  		dec		a
    6232   00:6814  32 12 C0            		ld		[px],a
    6233   00:6817                      		
    6234   00:6817  3A 13 C0            		ld		a,[py]
    6235   00:681A  C6 04               		add		4
    6236   00:681C  32 13 C0            		ld		[py],a
    6237   00:681F                      		
    6238   00:681F  C3 56 67            		jr.		salta_resolucion
    6239   00:6822                      
    6240   00:6822                      animacion_entre_fases:
    6241   00:6822                      
    6242   00:6822  CD 2F 45            		call limpia_sprites
    6243   00:6825                      		
    6244   00:6825  3E FF               		ld		a,255
    6245   00:6827                      					
    6246   00:6827                      quemando_al_prota:
    6247   00:6827                      		
    6248   00:6827  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6249   00:682B                      		
    6250   00:682B  F5                  		push	af
    6251   00:682C  3A 13 C0            		ld		a,(py)
    6252   00:682F  DD 77 00            		ld		(ix),a
    6253   00:6832  DD 77 04            		ld		(ix+4),a
    6254   00:6835  3E CC               		ld		a,51*4
    6255   00:6837  DD 77 02            		ld		(ix+2),a
    6256   00:683A  3E D0               		ld		a,52*4
    6257   00:683C  DD 77 06            		ld		(ix+6),a
    6258   00:683F                      				
    6259   00:683F  CD F0 57            		call	atributos_sprites
    6260   00:6842  3E FF               		ld		a,255
    6261   00:6844                      		
    6262   00:6844                      rutina_espera_quemando_1:
    6263   00:6844                      				
    6264   00:6844  3D                  		dec		a
    6265   00:6845  FE 00               		cp		0
    6266   00:6847  20 FB               		jr.		nz,rutina_espera_quemando_1	
    6267   00:6849                      		
    6268   00:6849  3E 0B               		ld		a,11													;efecto sonoro de quemar
    6269   00:684B  CD E6 6C            		call	efecto_sonido
    6270   00:684E                      		
    6271   00:684E  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6272   00:6852                      		
    6273   00:6852  3E D4               		ld		a,53*4
    6274   00:6854  DD 77 02            		ld		(ix+2),a
    6275   00:6857  3E D8               		ld		a,54*4
    6276   00:6859  DD 77 06            		ld		(ix+6),a
    6277   00:685C                      				
    6278   00:685C  CD F0 57            		call	atributos_sprites		
    6279   00:685F  3E FF               		ld		a,255
    6280   00:6861                      		
    6281   00:6861                      rutina_espera_quemando_2:
    6282   00:6861                      			
    6283   00:6861  3D                  		dec		a
    6284   00:6862  FE 00               		cp		0
    6285   00:6864  20 FB               		jr.		nz,rutina_espera_quemando_2	
    6286   00:6866                      		
    6287   00:6866  F1                  		pop		af
    6288   00:6867  3D                  		dec		a
    6289   00:6868  FE 00               		cp		0
    6290   00:686A  20 BB               		jr.		nz,quemando_al_prota
    6291   00:686C                      		
    6292   00:686C  CD 2F 45            		call	limpia_sprites
    6293   00:686F                      		
    6294   00:686F  3A 19 C0            		ld		a,(fase_en_la_que_esta)
    6295   00:6872  3C                  		inc		a
    6296   00:6873  32 19 C0            		ld		(fase_en_la_que_esta),a
    6297   00:6876                      		
    6298   00:6876  CD 23 66            		call	puntuacion_vidas_fase
    6299   00:6879                      		
    6300   00:6879  3E 80               		ld		a,128
    6301   00:687B  32 13 C0            		ld		(py),a
    6302   00:687E  3E 18               		ld		a,24
    6303   00:6880  32 12 C0            		ld		(px),a
    6304   00:6883                      		
    6305   00:6883  CD 41 00            		call	DISSCR		
    6306   00:6886  21 F2 AF            		ld		hl,entre_fases											;las dos puertas entre fases
    6307   00:6889  11 20 18            		ld		de,#1820
    6308   00:688C  CD EB 6C            		call	depack_VRAM
    6309   00:688F                      		
    6310   00:688F  3A 01 C0            		ld		a,(idioma)
    6311   00:6892  FE 00               		cp		0
    6312   00:6894  20 0C               		jr.		nz,rutina_pone_consejo
    6313   00:6896                      		
    6314   00:6896  21 B0 AF            		ld		hl,camino_a
    6315   00:6899  11 E2 18            		ld		de,#18e2
    6316   00:689C  01 1C 00            		ld		bc,28
    6317   00:689F  CD 5C 00            		call	GRABAVRAM
    6318   00:68A2                      		
    6319   00:68A2                      rutina_pone_consejo:		
    6320   00:68A2                      		
    6321   00:68A2  3A 19 C0            		ld		a,(fase_en_la_que_esta)
    6322   00:68A5  FE 02               		cp		2
    6323   00:68A7  28 14               		jr.		z,consejos_fase_2
    6324   00:68A9  FE 03               		cp		3
    6325   00:68AB  28 35               		jr.		z,consejos_fase_3
    6326   00:68AD  FE 05               		cp		5
    6327   00:68AF  28 54               		jr.		z,consejos_fase_5
    6328   00:68B1  FE 07               		cp		7
    6329   00:68B3  28 73               		jr.		z,consejos_fase_7
    6330   00:68B5  FE 0A               		cp		10
    6331   00:68B7  CA 4B 69            		jr.		z,consejos_fase_10
    6332   00:68BA                      		
    6333   00:68BA  C3 6E 69            		jr.		rutina_espera_quemando_2_cont
    6334   00:68BD                      
    6335   00:68BD                      consejos_fase_2:
    6336   00:68BD                      		
    6337   00:68BD  3A 01 C0            		ld		a,(idioma)
    6338   00:68C0  FE 00               		cp		0
    6339   00:68C2  28 0F               		jr.		z,consejo_esp_fase_2
    6340   00:68C4                      
    6341   00:68C4                      consejo_ing_fase_2:
    6342   00:68C4                      
    6343   00:68C4  21 A9 AE            		ld		hl,advice_2
    6344   00:68C7  11 A7 1A            		ld		de,#1aa7
    6345   00:68CA  01 12 00            		ld		bc,18
    6346   00:68CD  CD 5C 00            		call	GRABAVRAM
    6347   00:68D0                      		
    6348   00:68D0  C3 6E 69            		jr.		rutina_espera_quemando_2_cont
    6349   00:68D3                      
    6350   00:68D3                      consejo_esp_fase_2:
    6351   00:68D3                      				
    6352   00:68D3  21 DB AD            		ld		hl,consejo_2
    6353   00:68D6  11 A7 1A            		ld		de,#1aa7
    6354   00:68D9  01 12 00            		ld		bc,18
    6355   00:68DC  CD 5C 00            		call	GRABAVRAM
    6356   00:68DF                      		
    6357   00:68DF  C3 6E 69            		jr.		rutina_espera_quemando_2_cont
    6358   00:68E2                      
    6359   00:68E2                      consejos_fase_3:
    6360   00:68E2                      		
    6361   00:68E2  3A 01 C0            		ld		a,(idioma)
    6362   00:68E5  FE 00               		cp		0
    6363   00:68E7  28 0E               		jr.		z,consejo_esp_fase_3
    6364   00:68E9                      
    6365   00:68E9                      consejo_ing_fase_3:
    6366   00:68E9                      
    6367   00:68E9  21 BB AE            		ld		hl,advice_3
    6368   00:68EC  11 A1 1A            		ld		de,#1aa1
    6369   00:68EF  01 5E 00            		ld		bc,94
    6370   00:68F2  CD 5C 00            		call	GRABAVRAM
    6371   00:68F5                      		
    6372   00:68F5  18 77               		jr.		rutina_espera_quemando_2_cont
    6373   00:68F7                      
    6374   00:68F7                      consejo_esp_fase_3:
    6375   00:68F7                      				
    6376   00:68F7  21 ED AD            		ld		hl,consejo_3
    6377   00:68FA  11 A1 1A            		ld		de,#1aa1
    6378   00:68FD  01 5F 00            		ld		bc,95
    6379   00:6900  CD 5C 00            		call	GRABAVRAM
    6380   00:6903                      		
    6381   00:6903  18 69               		jr.		rutina_espera_quemando_2_cont
    6382   00:6905                      		
    6383   00:6905                      consejos_fase_5:
    6384   00:6905                      		
    6385   00:6905  3A 01 C0            		ld		a,(idioma)
    6386   00:6908  FE 00               		cp		0
    6387   00:690A  28 0E               		jr.		z,consejo_esp_fase_5
    6388   00:690C                      
    6389   00:690C                      consejo_ing_fase_5:
    6390   00:690C                      
    6391   00:690C  21 19 AF            		ld		hl,advice_5
    6392   00:690F  11 A1 1A            		ld		de,#1aa1
    6393   00:6912  01 1E 00            		ld		bc,30
    6394   00:6915  CD 5C 00            		call	GRABAVRAM
    6395   00:6918                      		
    6396   00:6918  18 54               		jr.		rutina_espera_quemando_2_cont
    6397   00:691A                      
    6398   00:691A                      consejo_esp_fase_5:
    6399   00:691A                      				
    6400   00:691A  21 4C AE            		ld		hl,consejo_5
    6401   00:691D  11 A1 1A            		ld		de,#1aa1
    6402   00:6920  01 1E 00            		ld		bc,30
    6403   00:6923  CD 5C 00            		call	GRABAVRAM
    6404   00:6926                      		
    6405   00:6926  18 46               		jr.		rutina_espera_quemando_2_cont
    6406   00:6928                      						
    6407   00:6928                      consejos_fase_7:
    6408   00:6928                      		
    6409   00:6928  3A 01 C0            		ld		a,(idioma)
    6410   00:692B  FE 00               		cp		0
    6411   00:692D  28 0E               		jr.		z,consejo_esp_fase_7
    6412   00:692F                      
    6413   00:692F                      consejo_ing_fase_7:
    6414   00:692F                      
    6415   00:692F  21 37 AF            		ld		hl,advice_7
    6416   00:6932  11 A1 1A            		ld		de,#1aa1
    6417   00:6935  01 1E 00            		ld		bc,30
    6418   00:6938  CD 5C 00            		call	GRABAVRAM
    6419   00:693B                      		
    6420   00:693B  18 31               		jr.		rutina_espera_quemando_2_cont
    6421   00:693D                      
    6422   00:693D                      consejo_esp_fase_7:
    6423   00:693D                      				
    6424   00:693D  21 6D AE            		ld		hl,consejo_7
    6425   00:6940  11 A1 1A            		ld		de,#1aa1
    6426   00:6943  01 1E 00            		ld		bc,30
    6427   00:6946  CD 5C 00            		call	GRABAVRAM
    6428   00:6949                      		
    6429   00:6949  18 23               		jr.		rutina_espera_quemando_2_cont
    6430   00:694B                      
    6431   00:694B                      consejos_fase_10:
    6432   00:694B                      		
    6433   00:694B  3A 01 C0            		ld		a,(idioma)
    6434   00:694E  FE 00               		cp		0
    6435   00:6950  28 0E               		jr.		z,consejo_esp_fase_10
    6436   00:6952                      
    6437   00:6952                      consejo_ing_fase_10:
    6438   00:6952                      
    6439   00:6952  21 55 AF            		ld		hl,advice_10
    6440   00:6955  11 A1 1A            		ld		de,#1aa1
    6441   00:6958  01 1E 00            		ld		bc,30
    6442   00:695B  CD 5C 00            		call	GRABAVRAM
    6443   00:695E                      		
    6444   00:695E  18 0E               		jr.		rutina_espera_quemando_2_cont
    6445   00:6960                      
    6446   00:6960                      consejo_esp_fase_10:
    6447   00:6960                      				
    6448   00:6960  21 8B AE            		ld		hl,consejo_10
    6449   00:6963  11 A1 1A            		ld		de,#1aa1
    6450   00:6966  01 1E 00            		ld		bc,30
    6451   00:6969  CD 5C 00            		call	GRABAVRAM
    6452   00:696C                      		
    6453   00:696C  18 00               		jr.		rutina_espera_quemando_2_cont
    6454   00:696E                      								
    6455   00:696E                      rutina_espera_quemando_2_cont:
    6456   00:696E                      
    6457   00:696E  CD 44 00            		call	ENASCR
    6458   00:6971                      		
    6459   00:6971  CD 79 4E            		call	activa_musica_entre_fases
    6460   00:6974                      				
    6461   00:6974  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6462   00:6978                      				
    6463   00:6978                      paseito_entre_fases:		
    6464   00:6978                      		
    6465   00:6978  76 76               [2]		halt
    6466   00:697A                      		
    6467   00:697A  3E 08               		ld		a,8
    6468   00:697C  DD 77 07            		ld		(ix+7),a
    6469   00:697F  3E 01               		ld		a,1
    6470   00:6981  DD 77 03            		ld		(ix+3),a
    6471   00:6984  3E 09               		ld		a,9
    6472   00:6986  DD 77 0B            		ld		(ix+11),a
    6473   00:6989                      		
    6474   00:6989  3A 13 C0            		ld		a,(py)
    6475   00:698C  DD 77 00            		ld		(ix),a
    6476   00:698F  C6 07               		add		a,7
    6477   00:6991  DD 77 04            		ld		(ix+4),a
    6478   00:6994  D6 10               		sub		a,16
    6479   00:6996  DD 77 08            		ld		(ix+8),a
    6480   00:6999  AF                  		xor		a
    6481   00:699A  DD 77 02            		ld		(ix+2),a
    6482   00:699D  C6 04               		add		a,4
    6483   00:699F  DD 77 06            		ld		(ix+6),a
    6484   00:69A2  C6 04               		add		a,4
    6485   00:69A4  DD 77 0A            		ld		(ix+10),a
    6486   00:69A7  3A 12 C0            		ld		a,(px)
    6487   00:69AA  C6 02               		add		a,2
    6488   00:69AC  DD 77 01            		ld		(ix+1),a
    6489   00:69AF  DD 77 05            		ld		(ix+5),a
    6490   00:69B2  DD 77 09            		ld		(ix+9),a
    6491   00:69B5  32 12 C0            		ld		(px),a
    6492   00:69B8                      		
    6493   00:69B8  CD F0 57            		call	atributos_sprites
    6494   00:69BB                      		
    6495   00:69BB  76 76               [2]		halt
    6496   00:69BD                      		
    6497   00:69BD  3E 0C               		ld		a,12
    6498   00:69BF  DD 77 02            		ld		(ix+2),a
    6499   00:69C2  C6 04               		add		a,4
    6500   00:69C4  DD 77 06            		ld		(ix+6),a
    6501   00:69C7  C6 04               		add		a,4
    6502   00:69C9  DD 77 0A            		ld		(ix+10),a
    6503   00:69CC  3A 91 C3            		ld		a,(velocidad_paseo_fases)
    6504   00:69CF  47                  		ld		b,a
    6505   00:69D0  3A 12 C0            		ld		a,(px)
    6506   00:69D3  80                  		add		a,b
    6507   00:69D4  32 12 C0            		ld		(px),a
    6508   00:69D7  DD 77 01            		ld		(ix+1),a
    6509   00:69DA  DD 77 05            		ld		(ix+5),a
    6510   00:69DD  DD 77 09            		ld		(ix+9),a
    6511   00:69E0                      		
    6512   00:69E0  CD F0 57            		call	atributos_sprites
    6513   00:69E3                      		
    6514   00:69E3  3A 12 C0            		ld		a,(px)
    6515   00:69E6  FE DE               		cp		222
    6516   00:69E8  38 8E               		jr.		c,paseito_entre_fases
    6517   00:69EA                      				
    6518   00:69EA  CD 2F 45            		call	limpia_sprites
    6519   00:69ED                      				
    6520   00:69ED  C9                  		ret	
    6521   00:69EE                      
    6522   00:69EE                      movimiento_serpientes:
    6523   00:69EE                      		
    6524   00:69EE  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6525   00:69F2                      		
    6526   00:69F2                      analiza_serpiente_1:
    6527   00:69F2                      		
    6528   00:69F2  3A 6D C3            		ld		a,(serp1)
    6529   00:69F5  FE 00               		cp		0
    6530   00:69F7  28 2E               		jp.		z,analiza_serpiente_2
    6531   00:69F9                      		
    6532   00:69F9  FD 21 48 C3         		ld		iy,variables_serpiente_1
    6533   00:69FD                      		
    6534   00:69FD  CD C6 6A            		call	rutina_de_movimiento_serpientes
    6535   00:6A00                      			
    6536   00:6A00                      detalla_atributos_serp_1:
    6537   00:6A00                      
    6538   00:6A00  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6539   00:6A04                      
    6540   00:6A04  DD 77 12            		ld		(ix+18),a
    6541   00:6A07  DD 70 16            		ld		(ix+22),b
    6542   00:6A0A  FD 7E 00            		ld		a,(iy)
    6543   00:6A0D  DD 77 11            		ld		(ix+17),a
    6544   00:6A10  DD 77 15            		ld		(ix+21),a
    6545   00:6A13  FD 7E 01            		ld		a,(iy+1)
    6546   00:6A16  DD 77 10            		ld		(ix+16),a
    6547   00:6A19  DD 77 14            		ld		(ix+20),a
    6548   00:6A1C  FD 7E 04            		ld		a,(iy+4)
    6549   00:6A1F  DD 77 13            		ld		(ix+19),a
    6550   00:6A22  3E 01               		ld		a,1
    6551   00:6A24  DD 77 17            		ld		(ix+23),a
    6552   00:6A27                      		
    6553   00:6A27                      analiza_serpiente_2:
    6554   00:6A27                      
    6555   00:6A27                      		
    6556   00:6A27  3A 6E C3            		ld		a,(serp2)
    6557   00:6A2A  FE 00               		cp		0
    6558   00:6A2C  28 2E               		jp.		z,analiza_serpiente_3
    6559   00:6A2E                      		
    6560   00:6A2E  FD 21 51 C3         		ld		iy,variables_serpiente_2
    6561   00:6A32                      
    6562   00:6A32  CD C6 6A            		call	rutina_de_movimiento_serpientes
    6563   00:6A35                      			
    6564   00:6A35                      detalla_atributos_serp_2:
    6565   00:6A35                      
    6566   00:6A35  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6567   00:6A39                      		
    6568   00:6A39  DD 77 1A            		ld		(ix+26),a
    6569   00:6A3C  DD 70 1E            		ld		(ix+30),b
    6570   00:6A3F  FD 7E 00            		ld		a,(iy)
    6571   00:6A42  DD 77 19            		ld		(ix+25),a
    6572   00:6A45  DD 77 1D            		ld		(ix+29),a
    6573   00:6A48  FD 7E 01            		ld		a,(iy+1)
    6574   00:6A4B  DD 77 18            		ld		(ix+24),a
    6575   00:6A4E  DD 77 1C            		ld		(ix+28),a
    6576   00:6A51  FD 7E 04            		ld		a,(iy+4)
    6577   00:6A54  DD 77 1B            		ld		(ix+27),a
    6578   00:6A57  3E 01               		ld		a,1
    6579   00:6A59  DD 77 1F            		ld		(ix+31),a
    6580   00:6A5C                      		
    6581   00:6A5C                      analiza_serpiente_3:		
    6582   00:6A5C                      		
    6583   00:6A5C  3A 6F C3            		ld		a,(serp3)
    6584   00:6A5F  FE 00               		cp		0
    6585   00:6A61  28 2E               		jp.		z,analiza_serpiente_4
    6586   00:6A63                      		
    6587   00:6A63  FD 21 5A C3         		ld		iy,variables_serpiente_3
    6588   00:6A67                      		
    6589   00:6A67  CD C6 6A            		call	rutina_de_movimiento_serpientes
    6590   00:6A6A                      			
    6591   00:6A6A                      detalla_atributos_serp_3:
    6592   00:6A6A                      
    6593   00:6A6A  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6594   00:6A6E                      		
    6595   00:6A6E  DD 77 22            		ld		(ix+34),a
    6596   00:6A71  DD 70 26            		ld		(ix+38),b
    6597   00:6A74  FD 7E 00            		ld		a,(iy)
    6598   00:6A77  DD 77 21            		ld		(ix+33),a
    6599   00:6A7A  DD 77 25            		ld		(ix+37),a
    6600   00:6A7D  FD 7E 01            		ld		a,(iy+1)
    6601   00:6A80  DD 77 20            		ld		(ix+32),a
    6602   00:6A83  DD 77 24            		ld		(ix+36),a
    6603   00:6A86  FD 7E 04            		ld		a,(iy+4)
    6604   00:6A89  DD 77 23            		ld		(ix+35),a
    6605   00:6A8C  3E 01               		ld		a,1
    6606   00:6A8E  DD 77 27            		ld		(ix+39),a
    6607   00:6A91                      		
    6608   00:6A91                      analiza_serpiente_4:
    6609   00:6A91                      	
    6610   00:6A91  3A 70 C3            		ld		a,(serp4)
    6611   00:6A94  FE 00               		cp		0
    6612   00:6A96  C8                  		ret		z
    6613   00:6A97                      		
    6614   00:6A97  FD 21 63 C3         		ld		iy,variables_serpiente_4
    6615   00:6A9B                      		
    6616   00:6A9B  CD C6 6A            		call	rutina_de_movimiento_serpientes
    6617   00:6A9E                      			
    6618   00:6A9E                      detalla_atributos_serp_4:
    6619   00:6A9E                      
    6620   00:6A9E  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6621   00:6AA2                      		
    6622   00:6AA2  DD 77 2A            		ld		(ix+42),a
    6623   00:6AA5  DD 70 2E            		ld		(ix+46),b
    6624   00:6AA8  FD 7E 00            		ld		a,(iy)
    6625   00:6AAB  DD 77 29            		ld		(ix+41),a
    6626   00:6AAE  DD 77 2D            		ld		(ix+45),a
    6627   00:6AB1  FD 7E 01            		ld		a,(iy+1)
    6628   00:6AB4  DD 77 28            		ld		(ix+40),a
    6629   00:6AB7  DD 77 2C            		ld		(ix+44),a
    6630   00:6ABA  FD 7E 04            		ld		a,(iy+4)
    6631   00:6ABD  DD 77 2B            		ld		(ix+43),a
    6632   00:6AC0  3E 01               		ld		a,1
    6633   00:6AC2  DD 77 2F            		ld		(ix+47),a
    6634   00:6AC5                      		
    6635   00:6AC5  C9                  		ret
    6636   00:6AC6                      		
    6637   00:6AC6                      rutina_de_movimiento_serpientes:
    6638   00:6AC6                      		
    6639   00:6AC6  FD 7E 02            		ld		a,(iy+2)
    6640   00:6AC9  FE 00               		cp		0
    6641   00:6ACB  20 2C               		jr.		nz,suma_x_serpiente
    6642   00:6ACD                      
    6643   00:6ACD                      resta_x_serpiente:
    6644   00:6ACD                      
    6645   00:6ACD  FD 7E 08            		ld		a,(iy+8)
    6646   00:6AD0  3D                  		dec		a
    6647   00:6AD1  FD 77 08            		ld		(iy+8),a
    6648   00:6AD4  FE 00               		cp		0
    6649   00:6AD6  20 5B               		jr.		nz,pose_serp
    6650   00:6AD8                      		
    6651   00:6AD8  FD 7E 07            		ld		a,(iy+7)
    6652   00:6ADB  FD 77 08            		ld		(iy+8),a
    6653   00:6ADE                      		
    6654   00:6ADE  FD 7E 00            		ld		a,[iy]
    6655   00:6AE1  3D                  		dec		a														
    6656   00:6AE2  57                  		ld		d,a
    6657   00:6AE3  FD 7E 01            		ld		a,[iy+1]
    6658   00:6AE6  C6 0F               		add		15
    6659   00:6AE8  5F                  		ld		e,a
    6660   00:6AE9  CD A9 5C            		call	get_bloque_en_X_Y
    6661   00:6AEC                      		
    6662   00:6AEC  FE 1F               		cp		31
    6663   00:6AEE  38 36               		jr.		c,serp_cambia_paso_a_derecha
    6664   00:6AF0                      		
    6665   00:6AF0  FD 7E 00            		ld		a,(iy)
    6666   00:6AF3  3D                  		dec		a
    6667   00:6AF4  FD 77 00            		ld		(iy),a
    6668   00:6AF7  18 3A               		jr.		pose_serp
    6669   00:6AF9                      		
    6670   00:6AF9                      suma_x_serpiente:
    6671   00:6AF9                      
    6672   00:6AF9  FD 7E 08            		ld		a,(iy+8)
    6673   00:6AFC  3D                  		dec		a
    6674   00:6AFD  FD 77 08            		ld		(iy+8),a
    6675   00:6B00  FE 00               		cp		0
    6676   00:6B02  20 2F               		jr.		nz,pose_serp
    6677   00:6B04                      		
    6678   00:6B04  FD 7E 07            		ld		a,(iy+7)
    6679   00:6B07  FD 77 08            		ld		(iy+8),a
    6680   00:6B0A                      		
    6681   00:6B0A  FD 7E 00            		ld		a,[iy]
    6682   00:6B0D  C6 10               		add		16														
    6683   00:6B0F  57                  		ld		d,a
    6684   00:6B10  FD 7E 01            		ld		a,[iy+1]
    6685   00:6B13  C6 0F               		add		15
    6686   00:6B15  5F                  		ld		e,a
    6687   00:6B16  CD A9 5C            		call	get_bloque_en_X_Y
    6688   00:6B19                      		
    6689   00:6B19  FE 1F               		cp		31
    6690   00:6B1B  38 10               		jr.		c,serp_cambia_paso_a_izquierda
    6691   00:6B1D                      		
    6692   00:6B1D  FD 7E 00            		ld		a,(iy)
    6693   00:6B20  3C                  		inc		a
    6694   00:6B21  FD 77 00            		ld		(iy),a
    6695   00:6B24  18 0D               		jr.		pose_serp
    6696   00:6B26                      		
    6697   00:6B26                      serp_cambia_paso_a_derecha:
    6698   00:6B26                      
    6699   00:6B26  3E 01               		ld		a,1
    6700   00:6B28  FD 77 02            		ld		(iy+2),a
    6701   00:6B2B  18 06               		jr.		pose_serp
    6702   00:6B2D                      		
    6703   00:6B2D                      serp_cambia_paso_a_izquierda:
    6704   00:6B2D                      
    6705   00:6B2D  AF                  		xor		a
    6706   00:6B2E  FD 77 02            		ld		(iy+2),a
    6707   00:6B31  18 00               		jr.		pose_serp
    6708   00:6B33                      
    6709   00:6B33                      pose_serp:
    6710   00:6B33                      
    6711   00:6B33  FD 7E 06            		ld		a,(iy+6)
    6712   00:6B36  3D                  		dec		a
    6713   00:6B37  FD 77 06            		ld		(iy+6),a
    6714   00:6B3A  FE 00               		cp		0
    6715   00:6B3C  20 18               		jr.		nz,elegir_sprite_serp
    6716   00:6B3E                      
    6717   00:6B3E  FD 7E 05            		ld		a,(iy+5)
    6718   00:6B41  FD 77 06            		ld		(iy+6),a
    6719   00:6B44                      		
    6720   00:6B44  FD 7E 03            		ld		a,(iy+3)
    6721   00:6B47  FE 00               		cp		0
    6722   00:6B49  20 07               		jr.		nz,paso_2_serp
    6723   00:6B4B                      		
    6724   00:6B4B                      paso_1_serp:
    6725   00:6B4B                      
    6726   00:6B4B  3E 01               		ld		a,1
    6727   00:6B4D  FD 77 03            		ld		(iy+3),a
    6728   00:6B50                      		
    6729   00:6B50  18 04               		jr.		elegir_sprite_serp
    6730   00:6B52                      		
    6731   00:6B52                      paso_2_serp:
    6732   00:6B52                      
    6733   00:6B52  AF                  		xor		a
    6734   00:6B53  FD 77 03            		ld		(iy+3),a
    6735   00:6B56                      		
    6736   00:6B56                      elegir_sprite_serp:
    6737   00:6B56                      
    6738   00:6B56  FD 7E 02            		ld		a,(iy+2)
    6739   00:6B59  FE 00               		cp		0
    6740   00:6B5B  20 11               		jr.		nz,suma_direccion_1_serp
    6741   00:6B5D                      		
    6742   00:6B5D                      suma_direccion_0_serp:
    6743   00:6B5D                      
    6744   00:6B5D  FD 7E 03            		ld		a,(iy+3)
    6745   00:6B60  FE 00               		cp		0
    6746   00:6B62  20 05               		jr.		nz,suma_paso_01_serp
    6747   00:6B64                      		
    6748   00:6B64                      suma_paso_00_serp:
    6749   00:6B64                      
    6750   00:6B64  3E 64               		ld		a,25*4
    6751   00:6B66  06 74               		ld		b,29*4
    6752   00:6B68  C9                  		ret
    6753   00:6B69                      
    6754   00:6B69                      suma_paso_01_serp:
    6755   00:6B69                      		
    6756   00:6B69  3E 68               		ld		a,26*4
    6757   00:6B6B  06 78               		ld		b,30*4
    6758   00:6B6D  C9                  		ret
    6759   00:6B6E                      		
    6760   00:6B6E                      suma_direccion_1_serp:
    6761   00:6B6E                      
    6762   00:6B6E  FD 7E 03            		ld		a,(iy+3)
    6763   00:6B71  FE 00               		cp		0
    6764   00:6B73  20 05               		jr.		nz,suma_paso_11_serp
    6765   00:6B75                      
    6766   00:6B75                      suma_paso_10_serp:
    6767   00:6B75                      
    6768   00:6B75  3E 6C               		ld		a,27*4
    6769   00:6B77  06 7C               		ld		b,31*4
    6770   00:6B79  C9                  		ret
    6771   00:6B7A                      
    6772   00:6B7A                      suma_paso_11_serp:
    6773   00:6B7A                      
    6774   00:6B7A  3E 70               		ld		a,28*4
    6775   00:6B7C  06 80               		ld		b,32*4
    6776   00:6B7E  C9                  		ret	
    6777   00:6B7F                      
    6778   00:6B7F                      seis_diez:
    6779   00:6B7F                      
    6780   00:6B7F  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6781   00:6B82  C6 06               		add		6
    6782   00:6B84  57                  		ld		d,a
    6783   00:6B85  3A 13 C0            		ld		a,[py]
    6784   00:6B88  C6 0A               		add		10
    6785   00:6B8A  5F                  		ld		e,a
    6786   00:6B8B                      		
    6787   00:6B8B  C9                  		ret	
    6788   00:6B8C                      		
    6789   00:6B8C                      dos_diez:
    6790   00:6B8C                      
    6791   00:6B8C  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6792   00:6B8F  C6 02               		add		2
    6793   00:6B91  57                  		ld		d,a
    6794   00:6B92  3A 13 C0            		ld		a,[py]
    6795   00:6B95  C6 0A               		add		10
    6796   00:6B97  5F                  		ld		e,a
    6797   00:6B98                      		
    6798   00:6B98  C9                  		ret		
    6799   00:6B99                      
    6800   00:6B99                      menos_dos_diez:
    6801   00:6B99                      
    6802   00:6B99  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6803   00:6B9C  D6 02               		sub		2
    6804   00:6B9E  57                  		ld		d,a
    6805   00:6B9F  3A 13 C0            		ld		a,[py]
    6806   00:6BA2  C6 0A               		add		10
    6807   00:6BA4  5F                  		ld		e,a
    6808   00:6BA5                      		
    6809   00:6BA5  C9                  		ret		
    6810   00:6BA6                      
    6811   00:6BA6                      seis_dos:
    6812   00:6BA6                      
    6813   00:6BA6  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6814   00:6BA9  C6 06               		add		6
    6815   00:6BAB  57                  		ld		d,a
    6816   00:6BAC  3A 13 C0            		ld		a,[py]
    6817   00:6BAF  C6 02               		add		2
    6818   00:6BB1  5F                  		ld		e,a
    6819   00:6BB2                      		
    6820   00:6BB2  C9                  		ret
    6821   00:6BB3                      
    6822   00:6BB3                      cero_cero:
    6823   00:6BB3                      		
    6824   00:6BB3  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6825   00:6BB6  57                  		ld		d,a
    6826   00:6BB7  3A 13 C0            		ld		a,[py]
    6827   00:6BBA  5F                  		ld		e,a
    6828   00:6BBB                      		
    6829   00:6BBB  C9                  		ret
    6830   00:6BBC                      
    6831   00:6BBC                      siete_diecisiete:
    6832   00:6BBC                      		
    6833   00:6BBC  3A 12 C0            		ld		a,[px]
    6834   00:6BBF  C6 07               		add		7					;para buffer y vram moviendo 6 y 10						
    6835   00:6BC1  57                  		ld		d,a
    6836   00:6BC2  3A 13 C0            		ld		a,[py]
    6837   00:6BC5  C6 11               		add		17
    6838   00:6BC7  5F                  		ld		e,a
    6839   00:6BC8                      		
    6840   00:6BC8  C9                  		ret
    6841   00:6BC9                      menos_uno_dieciseis:
    6842   00:6BC9                      		
    6843   00:6BC9  3A 12 C0            		ld		a,[px]
    6844   00:6BCC  3D                  		dec		a					;para buffer y vram moviendo 6 y 10						
    6845   00:6BCD  57                  		ld		d,a
    6846   00:6BCE  3A 13 C0            		ld		a,[py]
    6847   00:6BD1  C6 10               		add		16
    6848   00:6BD3  5F                  		ld		e,a
    6849   00:6BD4                      		
    6850   00:6BD4  C9                  		ret
    6851   00:6BD5                      		
    6852   00:6BD5                      dieciseis_dieciseis:
    6853   00:6BD5                      		
    6854   00:6BD5  3A 12 C0            		ld		a,[px]
    6855   00:6BD8  C6 10               		add		16					;para buffer y vram moviendo 6 y 10						
    6856   00:6BDA  57                  		ld		d,a
    6857   00:6BDB  3A 13 C0            		ld		a,[py]
    6858   00:6BDE  C6 10               		add		16
    6859   00:6BE0  5F                  		ld		e,a
    6860   00:6BE1                      		
    6861   00:6BE1  C9                  		ret
    6862   00:6BE2                      		
    6863   00:6BE2                      menos_dos_dieciocho:
    6864   00:6BE2                      		
    6865   00:6BE2  3A 12 C0            		ld		a,[px]
    6866   00:6BE5  D6 02               		sub		2					;para buffer y vram moviendo -2 y 18						
    6867   00:6BE7  57                  		ld		d,a
    6868   00:6BE8  3A 13 C0            		ld		a,[py]
    6869   00:6BEB  C6 12               		add		18
    6870   00:6BED  5F                  		ld		e,a
    6871   00:6BEE                      		
    6872   00:6BEE  C9                  		ret
    6873   00:6BEF                      				
    6874   00:6BEF                      catorce_diez:
    6875   00:6BEF                      		
    6876   00:6BEF  3A 12 C0            		ld		a,[px]
    6877   00:6BF2  C6 0E               		add		14					;para buffer y vram moviendo 14 y 10						
    6878   00:6BF4  57                  		ld		d,a
    6879   00:6BF5  3A 13 C0            		ld		a,[py]
    6880   00:6BF8  C6 0A               		add		10
    6881   00:6BFA  5F                  		ld		e,a
    6882   00:6BFB                      		
    6883   00:6BFB  C9                  		ret
    6884   00:6BFC                      
    6885   00:6BFC                      catorce_dos:
    6886   00:6BFC                      		
    6887   00:6BFC  3A 12 C0            		ld		a,[px]
    6888   00:6BFF  C6 0E               		add		14					;para buffer y vram moviendo 14 y 22						
    6889   00:6C01  57                  		ld		d,a
    6890   00:6C02  3A 13 C0            		ld		a,[py]
    6891   00:6C05  C6 02               		add		2
    6892   00:6C07  5F                  		ld		e,a
    6893   00:6C08                      		
    6894   00:6C08  C9                  		ret
    6895   00:6C09                      				
    6896   00:6C09                      catorce_dieciocho:
    6897   00:6C09                      		
    6898   00:6C09  3A 12 C0            		ld		a,[px]
    6899   00:6C0C  C6 0E               		add		14					;para buffer y vram moviendo 14 y 18						
    6900   00:6C0E  57                  		ld		d,a
    6901   00:6C0F  3A 13 C0            		ld		a,[py]
    6902   00:6C12  C6 12               		add		18
    6903   00:6C14  5F                  		ld		e,a
    6904   00:6C15                      		
    6905   00:6C15  C9                  		ret
    6906   00:6C16                      		
    6907   00:6C16                      veinte_diez:
    6908   00:6C16                      		
    6909   00:6C16  3A 12 C0            		ld		a,[px]
    6910   00:6C19  C6 14               		add		20					;para buffer y vram moviendo 6 y 10						
    6911   00:6C1B  57                  		ld		d,a
    6912   00:6C1C  3A 13 C0            		ld		a,[py]
    6913   00:6C1F  C6 0A               		add		10
    6914   00:6C21  5F                  		ld		e,a
    6915   00:6C22                      		
    6916   00:6C22  C9                  		ret
    6917   00:6C23                      
    6918   00:6C23                      veintidos_diez:
    6919   00:6C23                      		
    6920   00:6C23  3A 12 C0            		ld		a,[px]
    6921   00:6C26  C6 16               		add		22					;para buffer y vram moviendo 6 y 10						
    6922   00:6C28  57                  		ld		d,a
    6923   00:6C29  3A 13 C0            		ld		a,[py]
    6924   00:6C2C  C6 0A               		add		10
    6925   00:6C2E  5F                  		ld		e,a
    6926   00:6C2F                      		
    6927   00:6C2F  C9                  		ret
    6928   00:6C30                      				
    6929   00:6C30                      menos_diez_diez:
    6930   00:6C30                      		
    6931   00:6C30  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6932   00:6C33  D6 0A               		sub		10
    6933   00:6C35  57                  		ld		d,a
    6934   00:6C36  3A 13 C0            		ld		a,[py]
    6935   00:6C39  C6 0A               		add		10
    6936   00:6C3B  5F                  		ld		e,a
    6937   00:6C3C                      		
    6938   00:6C3C  C9                  		ret
    6939   00:6C3D                      		
    6940   00:6C3D                      seis_dieciocho:
    6941   00:6C3D                      		
    6942   00:6C3D  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6943   00:6C40  C6 06               		add		6
    6944   00:6C42  57                  		ld		d,a
    6945   00:6C43  3A 13 C0            		ld		a,[py]
    6946   00:6C46  C6 12               		add		18
    6947   00:6C48  5F                  		ld		e,a
    6948   00:6C49                      		
    6949   00:6C49  C9                  		ret
    6950   00:6C4A                      
    6951   00:6C4A                      menos_diez_dieciocho:
    6952   00:6C4A                      		
    6953   00:6C4A  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6954   00:6C4D  D6 0A               		sub		10
    6955   00:6C4F  57                  		ld		d,a
    6956   00:6C50  3A 13 C0            		ld		a,[py]
    6957   00:6C53  C6 12               		add		18
    6958   00:6C55  5F                  		ld		e,a
    6959   00:6C56                      		
    6960   00:6C56  C9                  		ret
    6961   00:6C57                      
    6962   00:6C57                      tres_quince:
    6963   00:6C57                      		
    6964   00:6C57  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 3 y 15	
    6965   00:6C5A  C6 03               		add		3
    6966   00:6C5C  57                  		ld		d,a
    6967   00:6C5D  3A 13 C0            		ld		a,[py]
    6968   00:6C60  C6 0F               		add		15
    6969   00:6C62  5F                  		ld		e,a
    6970   00:6C63                      		
    6971   00:6C63  C9                  		ret
    6972   00:6C64                      
    6973   00:6C64                      tres_dos:
    6974   00:6C64  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 3 y 2
    6975   00:6C67  C6 03               		add		3
    6976   00:6C69  57                  		ld		d,a
    6977   00:6C6A  3A 13 C0            		ld		a,[py]
    6978   00:6C6D  C6 02               		add		2
    6979   00:6C6F  5F                  		ld		e,a
    6980   00:6C70                      		
    6981   00:6C70  C9                  		ret
    6982   00:6C71                      				
    6983   00:6C71                      cero_dieciocho:
    6984   00:6C71                      		
    6985   00:6C71  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6986   00:6C74  57                  		ld		d,a
    6987   00:6C75  3A 13 C0            		ld		a,[py]
    6988   00:6C78  C6 12               		add		18
    6989   00:6C7A  5F                  		ld		e,a
    6990   00:6C7B                      		
    6991   00:6C7B  C9                  		ret
    6992   00:6C7C                      		
    6993   00:6C7C                      ocho_dieciocho:
    6994   00:6C7C  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6995   00:6C7F  C6 08               		add		8
    6996   00:6C81  57                  		ld		d,a
    6997   00:6C82  3A 13 C0            		ld		a,[py]
    6998   00:6C85  C6 12               		add		18
    6999   00:6C87  5F                  		ld		e,a
    7000   00:6C88                      		
    7001   00:6C88  C9                  		ret
    7002   00:6C89                      		
    7003   00:6C89                      ocho_uno:
    7004   00:6C89                      
    7005   00:6C89  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    7006   00:6C8C  C6 08               		add		8
    7007   00:6C8E  57                  		ld		d,a
    7008   00:6C8F  3A 13 C0            		ld		a,[py]
    7009   00:6C92  3C                  		inc		a
    7010   00:6C93  5F                  		ld		e,a
    7011   00:6C94                      		
    7012   00:6C94  C9                  		ret
    7013   00:6C95                      				
    7014   00:6C95                      dieciseis_quince:
    7015   00:6C95                      
    7016   00:6C95  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 16 y 15						
    7017   00:6C98  C6 10               		add		16
    7018   00:6C9A  57                  		ld		d,a
    7019   00:6C9B  3A 13 C0            		ld		a,[py]
    7020   00:6C9E  C6 0F               		add		15
    7021   00:6CA0  5F                  		ld		e,a
    7022   00:6CA1                      		
    7023   00:6CA1  C9                  		ret
    7024   00:6CA2                      
    7025   00:6CA2                      dieciseis_dos:
    7026   00:6CA2                      
    7027   00:6CA2  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 16 y 2						
    7028   00:6CA5  C6 10               		add		16
    7029   00:6CA7  57                  		ld		d,a
    7030   00:6CA8  3A 13 C0            		ld		a,[py]
    7031   00:6CAB  C6 02               		add		2
    7032   00:6CAD  5F                  		ld		e,a
    7033   00:6CAE                      		
    7034   00:6CAE  C9                  		ret
    7035   00:6CAF                      				
    7036   00:6CAF                      uno_menos_cuatro:
    7037   00:6CAF                      
    7038   00:6CAF  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    7039   00:6CB2  3C                  		inc		a
    7040   00:6CB3  57                  		ld		d,a
    7041   00:6CB4  3A 13 C0            		ld		a,[py]
    7042   00:6CB7  D6 04               		sub		4
    7043   00:6CB9  5F                  		ld		e,a
    7044   00:6CBA                      		
    7045   00:6CBA  C9                  		ret
    7046   00:6CBB                      		
    7047   00:6CBB                      menos_uno_quince:
    7048   00:6CBB                      
    7049   00:6CBB  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    7050   00:6CBE  3D                  		dec		a
    7051   00:6CBF  57                  		ld		d,a
    7052   00:6CC0  3A 13 C0            		ld		a,[py]
    7053   00:6CC3  C6 0F               		add		15
    7054   00:6CC5  5F                  		ld		e,a
    7055   00:6CC6                      		
    7056   00:6CC6  C9                  		ret
    7057   00:6CC7                      
    7058   00:6CC7                      menos_uno_dos:
    7059   00:6CC7                      
    7060   00:6CC7  3A 12 C0            		ld		a,[px]					;para buffer y vram moviendo -1 y 2						
    7061   00:6CCA  3D                  		dec		a
    7062   00:6CCB  57                  		ld		d,a
    7063   00:6CCC  3A 13 C0            		ld		a,[py]
    7064   00:6CCF  C6 02               		add		2
    7065   00:6CD1  5F                  		ld		e,a
    7066   00:6CD2                      		
    7067   00:6CD2  C9                  		ret
    7068   00:6CD3                      
    7069   00:6CD3                      pinta_en_pantalla:
    7070   00:6CD3                      
    7071   00:6CD3  11 00 18            		ld		de,#1800				;borra de pantalla el cuchillo cogido
    7072   00:6CD6  19                  		add		hl,de
    7073   00:6CD7  E5                  		push	hl
    7074   00:6CD8  32 EE EE            		ld		[#eeee],a
    7075   00:6CDB  21 EE EE            		ld		hl,#eeee
    7076   00:6CDE  D1                  		pop		de
    7077   00:6CDF  01 01 00            		ld		bc,1
    7078   00:6CE2  CD 5C 00            		call	GRABAVRAM
    7079   00:6CE5                      		
    7080   00:6CE5  C9                  		ret
    7081   00:6CE6                      				
    7082   00:6CE6                      efecto_sonido:
    7083   00:6CE6                      		
    7084   00:6CE6  4F                  		ld		c,a
    7085   00:6CE7  CD 9F 74            		call	ayFX_INIT
    7086   00:6CEA  C9                  		ret
    7087   00:6CEB                      		
    7088   00:6CEB                      		;DESCOMPRESORES
    7089   00:6CEB                      
    7090   00:6CEB                      depack_VRAM:		
    7091   00:6CEB                      
    7092   00:6CEB                      		include "PL_VRAM_Depack_SJASM.asm"						; hl=ram/rom fuente de=vram destino
       1.  00:6CEB                      ;-----------------------------------------------------------
       2.  00:6CEB                      ; Pletter v0.5b VRAM Depacker v1.1 - 16Kb version
       3.  00:6CEB                      ; HL = RAM/ROM source ; DE = VRAM destination
       4.  00:6CEB                      ;-----------------------------------------------------------
       5.  00:6CEB  F3                  	di
       6.  00:6CEC                      
       7.  00:6CEC                      ; VRAM address setup
       8.  00:6CEC  7B                  	ld	a,e
       9.  00:6CED  D3 99               	out	[099h],a
      10.  00:6CEF  7A                  	ld	a,d
      11.  00:6CF0  F6 40               	or	040h
      12.  00:6CF2  D3 99               	out	[099h],a
      13.  00:6CF4                      
      14.  00:6CF4                      ; Initialization
      15.  00:6CF4  7E                  	ld	a,[hl]
      16.  00:6CF5  23                  	inc	hl
      17.  00:6CF6  D9                  	exx
      18.  00:6CF7  11 00 00            	ld	de,0
      19.  00:6CFA  87                  	add	a,a
      20.  00:6CFB  3C                  	inc	a
      21.  00:6CFC  CB 13               	rl	e
      22.  00:6CFE  87                  	add	a,a
      23.  00:6CFF  CB 13               	rl	e
      24.  00:6D01  87                  	add	a,a
      25.  00:6D02  CB 13               	rl	e
      26.  00:6D04  CB 13               	rl	e
      27.  00:6D06  21 BD 6D            	ld	hl,modes
      28.  00:6D09  19                  	add	hl,de
      29.  00:6D0A  5E                  	ld	e,[hl]
      30.  00:6D0B  DD 6B               	ld	ixl,e
      31.  00:6D0D  23                  	inc	hl
      32.  00:6D0E  5E                  	ld	e,[hl]
      33.  00:6D0F  DD 63               	ld	ixh,e
      34.  00:6D11  1E 01               	ld	e,1
      35.  00:6D13  D9                  	exx
      36.  00:6D14  FD 21 1D 6D         	ld	iy,loop
      37.  00:6D18                      
      38.  00:6D18                      ; Main depack loop
      39.  00:6D18  0E 98               literal:ld	c,098h
      40.  00:6D1A  ED A3               	outi
      41.  00:6D1C  13                  	inc	de
      42.  00:6D1D  87                  loop:	add	a,a
      43.  00:6D1E  CC B1 6D              	call	z,getbit
      44.  00:6D21  30 F5               	jr	nc,literal
      45.  00:6D23                      
      46.  00:6D23                      ; Compressed data
      47.  00:6D23  D9                  	exx
      48.  00:6D24  62                  	ld	h,d
      49.  00:6D25  6B                  	ld	l,e
      50.  00:6D26  87                  getlen: add	a,a
      51.  00:6D27  CC B5 6D            	call	z,getbitexx
      52.  00:6D2A  30 1D               	jr	nc,lenok
      53.  00:6D2C  87                  lus:	add	a,a
      54.  00:6D2D  CC B5 6D            	call	z,getbitexx
      55.  00:6D30  ED 6A               	adc	hl,hl
      56.  00:6D32  D8                  	ret	c
      57.  00:6D33  87                  	add	a,a
      58.  00:6D34  CC B5 6D            	call	z,getbitexx
      59.  00:6D37  30 10               	jr	nc,lenok
      60.  00:6D39  87                  	add	a,a
      61.  00:6D3A  CC B5 6D            	call	z,getbitexx
      62.  00:6D3D  ED 6A               	adc	hl,hl
      63.  00:6D3F  DA BB 6D            	jp	c,Depack_out
      64.  00:6D42  87                  	add	a,a
      65.  00:6D43  CC B5 6D            	call	z,getbitexx
      66.  00:6D46  DA 2C 6D            	jp	c,lus
      67.  00:6D49  23                  lenok:  inc	hl
      68.  00:6D4A  D9                  	exx
      69.  00:6D4B  4E                  	ld	c,[hl]
      70.  00:6D4C  23                  	inc	hl
      71.  00:6D4D  06 00               	ld	b,0
      72.  00:6D4F  CB 79               	bit	7,c
      73.  00:6D51  CA 84 6D            	jp	z,offsok
      74.  00:6D54  DD E9               	jp	ix
      75.  00:6D56                      
      76.  00:6D56  87                  mode7:  add	a,a
      77.  00:6D57  CC B1 6D              	call	z,getbit
      78.  00:6D5A  CB 10               	rl	b
      79.  00:6D5C  87                  mode6:	add	a,a
      80.  00:6D5D  CC B1 6D              	call	z,getbit
      81.  00:6D60  CB 10               	rl	b
      82.  00:6D62  87                  mode5:  add	a,a
      83.  00:6D63  CC B1 6D              	call	z,getbit
      84.  00:6D66  CB 10               	rl	b
      85.  00:6D68  87                  mode4:  add	a,a
      86.  00:6D69  CC B1 6D              	call	z,getbit
      87.  00:6D6C  CB 10               	rl	b
      88.  00:6D6E  87                  mode3:  add	a,a
      89.  00:6D6F  CC B1 6D              	call	z,getbit
      90.  00:6D72  CB 10               	rl	b
      91.  00:6D74  87                  mode2:	add	a,a
      92.  00:6D75  CC B1 6D              	call	z,getbit
      93.  00:6D78  CB 10               	rl	b
      94.  00:6D7A  87                  	add	a,a
      95.  00:6D7B  CC B1 6D              	call	z,getbit
      96.  00:6D7E  30 04               	jr	nc,offsok
      97.  00:6D80  B7                  	or	a
      98.  00:6D81  04                  	inc	b
      99.  00:6D82  CB B9               	res	7,c
     100.  00:6D84  03                  offsok: inc	bc
     101.  00:6D85  E5                  	push	hl
     102.  00:6D86  D9                  	exx
     103.  00:6D87  E5                  	push	hl
     104.  00:6D88  D9                  	exx
     105.  00:6D89  6B                  	ld	l,e
     106.  00:6D8A  62                  	ld	h,d
     107.  00:6D8B  ED 42               	sbc	hl,bc
     108.  00:6D8D  C1                  	pop	bc
     109.  00:6D8E  F5                  	push	af
     110.  00:6D8F  7D                  .loop:	ld	a,l
     111.  00:6D90  D3 99               	out	[099h],a
     112.  00:6D92  7C                  	ld	a,h
     113.  00:6D93  00                  	nop                     ; VDP timing
     114.  00:6D94  D3 99               	out	[099h],a
     115.  00:6D96  00                  	nop                     ; VDP timing
     116.  00:6D97  DB 98               	in	a,[098h]
     117.  00:6D99  08                  	ex	af,af'
     118.  00:6D9A  7B                  	ld	a,e
     119.  00:6D9B  00                  	nop			; VDP timing
     120.  00:6D9C  D3 99               	out	[099h],a
     121.  00:6D9E  7A                  	ld	a,d
     122.  00:6D9F  F6 40               	or	040h
     123.  00:6DA1  D3 99               	out	[099h],a
     124.  00:6DA3  08                  	ex	af,af'
     125.  00:6DA4  00                  	nop			; VDP timing
     126.  00:6DA5  D3 98               	out	[098h],a
     127.  00:6DA7  13                  	inc	de
     128.  00:6DA8  ED A1               	cpi
     129.  00:6DAA  EA 8F 6D            	jp	pe,.loop
     130.  00:6DAD  F1                  	pop	af
     131.  00:6DAE  E1                  	pop	hl
     132.  00:6DAF  FD E9               	jp	iy
     133.  00:6DB1                      
     134.  00:6DB1  7E                  getbit: ld	a,[hl]
     135.  00:6DB2  23                  	inc	hl
     136.  00:6DB3  17                  	rla
     137.  00:6DB4  C9                  	ret
     138.  00:6DB5                      
     139.  00:6DB5                      getbitexx:
     140.  00:6DB5  D9                  	exx
     141.  00:6DB6  7E                  	ld	a,[hl]
     142.  00:6DB7  23                  	inc	hl
     143.  00:6DB8  D9                  	exx
     144.  00:6DB9  17                  	rla
     145.  00:6DBA  C9                  	ret
     146.  00:6DBB                      
     147.  00:6DBB                      ; Depacker exit
     148.  00:6DBB                      Depack_out:
     149.  00:6DBB  FB                  	ei
     150.  00:6DBC  C9                  	ret
     151.  00:6DBD                      
     152.  00:6DBD                      modes:
     153.  00:6DBD  84 6D               	dw	offsok
     154.  00:6DBF  74 6D               	dw	mode2
     155.  00:6DC1  6E 6D               	dw	mode3
     156.  00:6DC3  68 6D               	dw	mode4
     157.  00:6DC5  62 6D               	dw	mode5
     158.  00:6DC7  5C 6D               	dw	mode6
     159.  00:6DC9  56 6D               	dw	mode7
    7093   00:6DCB                      
    7094   00:6DCB                      depack:
    7095   00:6DCB                      
    7096   00:6DCB                      		include	"unpack.asm"									; hl=ram/rom fuente de=ram destino
       1.  00:6DCB                      ; pletter v0.5c msx unpacker
       2.  00:6DCB                      
       3.  00:6DCB                      ; call unpack with hl pointing to some pletter5 data, and de pointing to the destination.
       4.  00:6DCB                      ; changes all registers
       5.  00:6DCB                      
       6.  00:6DCB                      ; define lengthindata when the original size is written in the pletter data
       7.  00:6DCB                      
       8.  00:6DCB                      ;  define LENGTHINDATA
       9.  00:6DCB                      
      10.  00:6DCB                        module pletter
      11.  00:6DCB                      
      12.  00:6DCB                        macro GETBIT
      13.  00:6DCB                    <   add a,a
      14.  00:6DCB                    <   call z,getbit
      15.  00:6DCB                    <   endmacro
      16.  00:6DCB                      
      17.  00:6DCB                        macro GETBITEXX
      18.  00:6DCB                    <   add a,a
      19.  00:6DCB                    <   call z,getbitexx
      20.  00:6DCB                    <   endmacro
      21.  00:6DCB                      
      22.  00:6DCB                      @unpack
      23.  00:6DCB                      
      24.  00:6DCB                        ifdef LENGTHINDATA
      25.  00:6DCB                    ~   inc hl
      26.  00:6DCB                    ~   inc hl
      27.  00:6DCB                    ~   endif
      28.  00:6DCB                      
      29.  00:6DCB  7E                    ld a,(hl)
      30.  00:6DCC  23                    inc hl
      31.  00:6DCD  D9                    exx
      32.  00:6DCE  11 00 00              ld de,0
      33.  00:6DD1  87                    add a,a
      34.  00:6DD2  3C                    inc a
      35.  00:6DD3  CB 13                 rl e
      36.  00:6DD5  87                    add a,a
      37.  00:6DD6  CB 13                 rl e
      38.  00:6DD8  87                    add a,a
      39.  00:6DD9  CB 13                 rl e
      40.  00:6DDB  CB 13                 rl e
      41.  00:6DDD  21 69 6E              ld hl,modes
      42.  00:6DE0  19                    add hl,de
      43.  00:6DE1  5E                    ld e,(hl)
      44.  00:6DE2  DD 6B                 ld ixl,e
      45.  00:6DE4  23                    inc hl
      46.  00:6DE5  5E                    ld e,(hl)
      47.  00:6DE6  DD 63                 ld ixh,e
      48.  00:6DE8  1E 01                 ld e,1
      49.  00:6DEA  D9                    exx
      50.  00:6DEB  FD 21 F1 6D           ld iy,loop
      51.  00:6DEF                      literal
      52.  00:6DEF  ED A0                 ldi
      53.  00:6DF1                      loop
      54.  00:6DF1                        GETBIT
      54.  00:6DF1  87                >   add a,a
      54.  00:6DF2  CC 5F 6E          >   call z,getbit
      55.  00:6DF5  30 F8                 jr nc,literal
      56.  00:6DF7  D9                    exx
      57.  00:6DF8  62                    ld h,d
      58.  00:6DF9  6B                    ld l,e
      59.  00:6DFA                      getlen
      60.  00:6DFA                        GETBITEXX
      60.  00:6DFA  87                >   add a,a
      60.  00:6DFB  CC 63 6E          >   call z,getbitexx
      61.  00:6DFE  30 1B                 jr nc,.lenok
      62.  00:6E00                      .lus
      63.  00:6E00                        GETBITEXX
      63.  00:6E00  87                >   add a,a
      63.  00:6E01  CC 63 6E          >   call z,getbitexx
      64.  00:6E04  ED 6A                 adc hl,hl
      65.  00:6E06  D8                    ret c
      66.  00:6E07                        GETBITEXX
      66.  00:6E07  87                >   add a,a
      66.  00:6E08  CC 63 6E          >   call z,getbitexx
      67.  00:6E0B  30 0E                 jr nc,.lenok
      68.  00:6E0D                        GETBITEXX
      68.  00:6E0D  87                >   add a,a
      68.  00:6E0E  CC 63 6E          >   call z,getbitexx
      69.  00:6E11  ED 6A                 adc hl,hl
      70.  00:6E13  D8                    ret c
      71.  00:6E14                        GETBITEXX
      71.  00:6E14  87                >   add a,a
      71.  00:6E15  CC 63 6E          >   call z,getbitexx
      72.  00:6E18  DA 00 6E              jp c,.lus
      73.  00:6E1B                      .lenok
      74.  00:6E1B  23                    inc hl
      75.  00:6E1C  D9                    exx
      76.  00:6E1D  4E                    ld c,(hl)
      77.  00:6E1E  23                    inc hl
      78.  00:6E1F  06 00                 ld b,0
      79.  00:6E21  CB 79                 bit 7,c
      80.  00:6E23  CA 50 6E              jp z,offsok
      81.  00:6E26  DD E9                 jp ix
      82.  00:6E28                      
      83.  00:6E28                      mode6
      84.  00:6E28                        GETBIT
      84.  00:6E28  87                >   add a,a
      84.  00:6E29  CC 5F 6E          >   call z,getbit
      85.  00:6E2C  CB 10                 rl b
      86.  00:6E2E                      mode5
      87.  00:6E2E                        GETBIT
      87.  00:6E2E  87                >   add a,a
      87.  00:6E2F  CC 5F 6E          >   call z,getbit
      88.  00:6E32  CB 10                 rl b
      89.  00:6E34                      mode4
      90.  00:6E34                        GETBIT
      90.  00:6E34  87                >   add a,a
      90.  00:6E35  CC 5F 6E          >   call z,getbit
      91.  00:6E38  CB 10                 rl b
      92.  00:6E3A                      mode3
      93.  00:6E3A                        GETBIT
      93.  00:6E3A  87                >   add a,a
      93.  00:6E3B  CC 5F 6E          >   call z,getbit
      94.  00:6E3E  CB 10                 rl b
      95.  00:6E40                      mode2
      96.  00:6E40                        GETBIT
      96.  00:6E40  87                >   add a,a
      96.  00:6E41  CC 5F 6E          >   call z,getbit
      97.  00:6E44  CB 10                 rl b
      98.  00:6E46                        GETBIT
      98.  00:6E46  87                >   add a,a
      98.  00:6E47  CC 5F 6E          >   call z,getbit
      99.  00:6E4A  30 04                 jr nc,offsok
     100.  00:6E4C  B7                    or a
     101.  00:6E4D  04                    inc b
     102.  00:6E4E  CB B9                 res 7,c
     103.  00:6E50                      offsok
     104.  00:6E50  03                    inc bc
     105.  00:6E51  E5                    push hl
     106.  00:6E52  D9                    exx
     107.  00:6E53  E5                    push hl
     108.  00:6E54  D9                    exx
     109.  00:6E55  6B                    ld l,e
     110.  00:6E56  62                    ld h,d
     111.  00:6E57  ED 42                 sbc hl,bc
     112.  00:6E59  C1                    pop bc
     113.  00:6E5A  ED B0                 ldir
     114.  00:6E5C  E1                    pop hl
     115.  00:6E5D  FD E9                 jp iy
     116.  00:6E5F                      
     117.  00:6E5F                      getbit
     118.  00:6E5F  7E                    ld a,(hl)
     119.  00:6E60  23                    inc hl
     120.  00:6E61  17                    rla
     121.  00:6E62  C9                    ret
     122.  00:6E63                      
     123.  00:6E63                      getbitexx
     124.  00:6E63  D9                    exx
     125.  00:6E64  7E                    ld a,(hl)
     126.  00:6E65  23                    inc hl
     127.  00:6E66  D9                    exx
     128.  00:6E67  17                    rla
     129.  00:6E68  C9                    ret
     130.  00:6E69                      
     131.  00:6E69                      modes
     132.  00:6E69  50 6E                 word offsok
     133.  00:6E6B  40 6E                 word mode2
     134.  00:6E6D  3A 6E                 word mode3
     135.  00:6E6F  34 6E                 word mode4
     136.  00:6E71  2E 6E                 word mode5
     137.  00:6E73  28 6E                 word mode6
     138.  00:6E75                      
     139.  00:6E75                        endmodule
     140.  00:6E75                      
     141.  00:6E75                      ;eof
    7097   00:6E75                      
    7098   00:6E75                      		;la instrucción que dejaremos en lugar del gancho
    7099   00:6E75                      		
    7100   00:6E75                      nuestra_isr:
    7101   00:6E75                      
    7102   00:6E75  CD E3 73            		call	PT3_ROUT												;envia los datos a los registros del PSG
    7103   00:6E78  CD EB 72            		call	PT3_PLAY												;calcula el siguiente trozo de música que será enviado la próxima vez
    7104   00:6E7B  CD D5 74            		call	ayFX_PLAY												;calcula el siguiente trozo de efecto que será enviado la próxima vez
    7105   00:6E7E  C3 08 C0            		jp		VIEJA_INTERR											;ahora se va a ejecutar la original que había en el gancho
    7106   00:6E81                      		
    7107   00:6E81                      		;gancho area salvada
    7108   00:6E81                      		
    7109   00:6E81                      		;MUSICA Y EFECTOS
    7110   00:6E81                      		
    7111   00:6E81                      		include 	"PT3-ROM_sjasm.asm"									;incluye el codigo del reproductor de PT3 (musica)
       1.  00:6E81                      		; --- PT3 REPLAYER WORKING ON ROM ---
       2.  00:6E81                      		; --- Can be assembled with asMSX ---
       3.  00:6E81                      		; --- ROM version: MSX-KUN        ---
       4.  00:6E81                      		; --- asMSX version 2: SapphiRe   ---
       5.  00:6E81                      
       6.  00:6E81                      ; Based on MSX full version of PT3 by Dioniso
       7.  00:6E81                      ;
       8.  00:6E81                      ; This version of the replayer can be used with any note table
       9.  00:6E81                      ; This version also allows the use of PT3 commands
      10.  00:6E81                      ; First 99 bytes of each PT3 module should be stripped off
      11.  00:6E81                      ;
      12.  00:6E81                      ; PLAY and PSG WRITE routines seperated to allow independent calls
      13.  00:6E81                      ;
      14.  00:6E81                      ; ROM LENGTH: 1549 bytes
      15.  00:6E81                      ; RAM LENGTH:  576 bytes
      16.  00:6E81                      
      17.  00:6E81                      
      18.  00:6E81                      
      19.  00:6E81                      ;SJASM version by BTV 2016
      20.  00:6E81                      
      21.  00:6E81                      
      22.  00:6E81                      		; --- CONSTANT VALUES DEFINITION ---
      23.  00:6E81                      
      24.  00:6E81                      ;ChannelsVars
      25.  00:6E81                      ;struc	CHNPRM
      26.  00:6E81                      ;reset group
      27.  00:6E81  (00:0000)           CHNPRM_PsInOr	equ 0	;RESB 1
      28.  00:6E81  (00:0001)           CHNPRM_PsInSm	equ 1	;RESB 1
      29.  00:6E81  (00:0002)           CHNPRM_CrAmSl	equ 2	;RESB 1
      30.  00:6E81  (00:0003)           CHNPRM_CrNsSl	equ 3	;RESB 1
      31.  00:6E81  (00:0004)           CHNPRM_CrEnSl	equ 4	;RESB 1
      32.  00:6E81  (00:0005)           CHNPRM_TSlCnt	equ 5	;RESB 1
      33.  00:6E81  (00:0006)           CHNPRM_CrTnSl	equ 6	;RESW 1
      34.  00:6E81  (00:0008)           CHNPRM_TnAcc	equ 8	;RESW 1
      35.  00:6E81  (00:000A)           CHNPRM_COnOff	equ 10	;RESB 1
      36.  00:6E81                      ;reset group
      37.  00:6E81                      
      38.  00:6E81  (00:000B)           CHNPRM_OnOffD	equ 11	;RESB 1
      39.  00:6E81                      
      40.  00:6E81                      ;IX for PTDECOD here [+12]
      41.  00:6E81  (00:000C)           CHNPRM_OffOnD	equ 12	;RESB 1
      42.  00:6E81  (00:000D)           CHNPRM_OrnPtr	equ 13	;RESW 1
      43.  00:6E81  (00:000F)           CHNPRM_SamPtr	equ 15	;RESW 1
      44.  00:6E81  (00:0011)           CHNPRM_NNtSkp	equ 17	;RESB 1
      45.  00:6E81  (00:0012)           CHNPRM_Note	equ 18	;RESB 1
      46.  00:6E81  (00:0013)           CHNPRM_SlToNt	equ 19	;RESB 1
      47.  00:6E81  (00:0014)           CHNPRM_Env_En	equ 20	;RESB 1
      48.  00:6E81  (00:0015)           CHNPRM_Flags	equ 21	;RESB 1
      49.  00:6E81                       ;Enabled - 0,SimpleGliss - 2
      50.  00:6E81  (00:0016)           CHNPRM_TnSlDl	equ 22	;RESB 1
      51.  00:6E81  (00:0017)           CHNPRM_TSlStp	equ 23	;RESW 1
      52.  00:6E81  (00:0019)           CHNPRM_TnDelt	equ 25	;RESW 1
      53.  00:6E81  (00:001B)           CHNPRM_NtSkCn	equ 27	;RESB 1
      54.  00:6E81  (00:001C)           CHNPRM_Volume	equ 28	;RESB 1
      55.  00:6E81  (00:001D)           CHNPRM_Size	equ 29	;RESB 1
      56.  00:6E81                      ;endstruc
      57.  00:6E81                      
      58.  00:6E81                      ;struc	AR
      59.  00:6E81  (00:0000)           AR_TonA		equ 0	;RESW 1
      60.  00:6E81  (00:0002)           AR_TonB		equ 2	;RESW 1
      61.  00:6E81  (00:0004)           AR_TonC		equ 4	;RESW 1
      62.  00:6E81  (00:0006)           AR_Noise	equ 6	;RESB 1
      63.  00:6E81  (00:0007)           AR_Mixer	equ 7	;RESB 1
      64.  00:6E81  (00:0008)           AR_AmplA	equ 8	;RESB 1
      65.  00:6E81  (00:0009)           AR_AmplB	equ 9	;RESB 1
      66.  00:6E81  (00:000A)           AR_AmplC	equ 10	;RESB 1
      67.  00:6E81  (00:000B)           AR_Env		equ 11	;RESW 1
      68.  00:6E81  (00:000D)           AR_EnvTp	equ 13	;RESB 1
      69.  00:6E81                      ;endstruc
      70.  00:6E81                      
      71.  00:6E81                      		; --- CODE STARTS HERE ---
      72.  00:6E81                      
      73.  00:6E81  21 00 F0            CHECKLP:	LD	HL,PT3_SETUP
      74.  00:6E84  CB FE               		SET	7,[HL]
      75.  00:6E86  CB 46               		BIT	0,[HL]
      76.  00:6E88  C8                  		RET	Z
      77.  00:6E89  E1                  		POP	HL
      78.  00:6E8A  21 7A F0            		LD	HL,DelyCnt
      79.  00:6E8D  34                  		INC	[HL]
      80.  00:6E8E  21 3E F0            		LD	HL,ChanA+CHNPRM_NtSkCn
      81.  00:6E91  34                  		INC	[HL]
      82.  00:6E92  AF                  PT3_MUTE:	XOR	A
      83.  00:6E93  67                  		LD	H,A
      84.  00:6E94  6F                  		LD	L,A
      85.  00:6E95  32 48 F1            		LD	[AYREGS+AR_AmplA],A
      86.  00:6E98  22 49 F1            		LD	[AYREGS+AR_AmplB],HL
      87.  00:6E9B  C3 E4 73            		JP	ROUT_A0
      88.  00:6E9E                      
      89.  00:6E9E                      PT3_INIT:	;HL - AddressOfModule - 100
      90.  00:6E9E  22 01 F0            		LD [PT3_MODADDR],HL
      91.  00:6EA1  E5                  		PUSH HL
      92.  00:6EA2  11 64 00            		LD DE,100
      93.  00:6EA5  19                  		ADD HL,DE
      94.  00:6EA6  7E                  		LD A,[HL]
      95.  00:6EA7  32 1C F0            		LD [PT3_Delay],A
      96.  00:6EAA  E5                  		PUSH HL
      97.  00:6EAB  DD E1               		POP IX
      98.  00:6EAD  19                  		ADD HL,DE
      99.  00:6EAE  22 03 F0            		LD [PT3_CrPsPtr],HL
     100.  00:6EB1  DD 5E 02            		LD E,[IX+102-100]
     101.  00:6EB4  19                  		ADD HL,DE
     102.  00:6EB5  23                  		INC HL
     103.  00:6EB6  22 18 F0            		LD [PT3_LPosPtr],HL
     104.  00:6EB9  D1                  		POP DE
     105.  00:6EBA  DD 6E 03            		LD L,[IX+103-100]
     106.  00:6EBD  DD 66 04            		LD H,[IX+104-100]
     107.  00:6EC0  19                  		ADD HL,DE
     108.  00:6EC1  22 1A F0            		LD [PT3_PatsPtr],HL
     109.  00:6EC4  21 A9 00            		LD HL,169
     110.  00:6EC7  19                  		ADD HL,DE
     111.  00:6EC8  22 07 F0            		LD [PT3_OrnPtrs],HL
     112.  00:6ECB  21 69 00            		LD HL,105
     113.  00:6ECE  19                  		ADD HL,DE
     114.  00:6ECF  22 05 F0            		LD [PT3_SAMPTRS],HL
     115.  00:6ED2  21 00 F0            		LD HL,PT3_SETUP
     116.  00:6ED5  CB BE               		RES 7,[HL]
     117.  00:6ED7                      
     118.  00:6ED7                      		; --- note table data depacker ---
     119.  00:6ED7                      		; Depacks first 12 tones of each tone table
     120.  00:6ED7                      
     121.  00:6ED7  11 58 74            		LD DE,T_PACK
     122.  00:6EDA  01 B1 F1            		LD BC,T1_+(2*49)-1
     123.  00:6EDD  1A                  .TP_0:		LD A,[DE]
     124.  00:6EDE  13                  		INC DE
     125.  00:6EDF  FE 1E               		CP 15*2
     126.  00:6EE1  30 06               		JR NC,.TP_1
     127.  00:6EE3  67                  		LD H,A
     128.  00:6EE4  1A                  		LD A,[DE]
     129.  00:6EE5  6F                  		LD L,A
     130.  00:6EE6  13                  		INC DE
     131.  00:6EE7  18 07               		JR .TP_2
     132.  00:6EE9  D5                  .TP_1:		PUSH DE
     133.  00:6EEA  16 00               		LD D,0
     134.  00:6EEC  5F                  		LD E,A
     135.  00:6EED  19                  		ADD HL,DE
     136.  00:6EEE  19                  		ADD HL,DE
     137.  00:6EEF  D1                  		POP DE
     138.  00:6EF0  7C                  .TP_2:		LD A,H
     139.  00:6EF1  02                  		LD [BC],A
     140.  00:6EF2  0B                  		DEC BC
     141.  00:6EF3  7D                  		LD A,L
     142.  00:6EF4  02                  		LD [BC],A
     143.  00:6EF5  0B                  		DEC BC
     144.  00:6EF6  D6 F0               		SUB $F0
     145.  00:6EF8  20 E3               		JR NZ,.TP_0
     146.  00:6EFA                      
     147.  00:6EFA                      		; --- INITIALIZE PT3 VARIABLES ---
     148.  00:6EFA  21 23 F0            		LD HL,VARS
     149.  00:6EFD  77                  		LD [HL],A
     150.  00:6EFE  11 24 F0            		LD DE,VARS+1
     151.  00:6F01  01 2C 01            		LD BC,VAR0END-VARS-1
     152.  00:6F04  ED B0               		LDIR
     153.  00:6F06                      
     154.  00:6F06  3C                  		INC A
     155.  00:6F07  32 7A F0            		LD [DelyCnt],A
     156.  00:6F0A  21 01 F0            		LD HL,$F001 ;H - CHNPRM_Volume, L - CHNPRM_NtSkCn
     157.  00:6F0D  22 3E F0            		LD [ChanA+CHNPRM_NtSkCn],HL
     158.  00:6F10  22 5B F0            		LD [ChanB+CHNPRM_NtSkCn],HL
     159.  00:6F13  22 78 F0            		LD [ChanC+CHNPRM_NtSkCn],HL
     160.  00:6F16                      
     161.  00:6F16  21 54 74            		LD HL,EMPTYSAMORN
     162.  00:6F19  22 12 F0            		LD [PT3_AdInPtA],HL ;ptr to zero
     163.  00:6F1C  22 30 F0            		LD [ChanA+CHNPRM_OrnPtr],HL ;ornament 0 is "0,1,0"
     164.  00:6F1F  22 4D F0            		LD [ChanB+CHNPRM_OrnPtr],HL ;in all versions from
     165.  00:6F22  22 6A F0            		LD [ChanC+CHNPRM_OrnPtr],HL ;3.xx to 3.6x and VTII
     166.  00:6F25                      
     167.  00:6F25  22 32 F0            		LD [ChanA+CHNPRM_SamPtr],HL ;S1 There is no default
     168.  00:6F28  22 4F F0            		LD [ChanB+CHNPRM_SamPtr],HL ;S2 sample in PT3, so, you
     169.  00:6F2B  22 6C F0            		LD [ChanC+CHNPRM_SamPtr],HL ;S3 can comment S1,2,3; see
     170.  00:6F2E                      					    ;also EMPTYSAMORN comment
     171.  00:6F2E                      
     172.  00:6F2E                      		; --- NOTE TABLE CREATOR (c) Ivan Roshin, adapted by SapphiRe ---
     173.  00:6F2E  DD 7E FF            		LD A,[IX+99-100] ;TONE TABLE NUMBER
     174.  00:6F31  17                  		RLA
     175.  00:6F32  E6 07               		AND 7
     176.  00:6F34  21 04 74            		LD HL,NT_DATA
     177.  00:6F37  D5                  		PUSH DE
     178.  00:6F38  50                  		LD D,B		; ld d,0 (bc is 0000 after LDIR)
     179.  00:6F39  87                  		ADD A,A
     180.  00:6F3A  5F                  		LD E,A
     181.  00:6F3B  19                  		ADD HL,DE	; hl -> init of correct note table data
     182.  00:6F3C  5E                  		LD E,[HL]
     183.  00:6F3D  23                  		INC HL
     184.  00:6F3E  CB 3B               		SRL E
     185.  00:6F40  9F                  		SBC A,A
     186.  00:6F41  E6 A7               		AND $A7			;$00 (NOP) or $A7 (AND A)
     187.  00:6F43  32 21 F0            		LD [PT3_NTL3],A		; CORRECT INSTRUCTION, DEPENDS OF SELECTED TABLE
     188.  00:6F46  3E C9               		LD A,$C9		; RET CODE
     189.  00:6F48  32 22 F0            		LD [PT3_NTL3+1],A	; RET PLACED
     190.  00:6F4B  EB                  		EX DE,HL
     191.  00:6F4C  C1                  		POP BC ;BC=T1_
     192.  00:6F4D  09                  		ADD HL,BC
     193.  00:6F4E                      
     194.  00:6F4E  1A                  		LD A,[DE]                           
     195.  00:6F4F                      
     196.  00:6F4F  01 14 74            		LD BC,T_
     197.  00:6F52  81                  		ADD A,C
     198.  00:6F53  4F                  		LD C,A
     199.  00:6F54  88                  		ADC A,B
     200.  00:6F55                      
     201.  00:6F55  91                  		SUB C
     202.  00:6F56  47                  		LD B,A
     203.  00:6F57  C5                  		PUSH BC
     204.  00:6F58  11 80 F0            		LD DE,NT_
     205.  00:6F5B  D5                  		PUSH DE
     206.  00:6F5C                      
     207.  00:6F5C  06 0C               		LD B,12
     208.  00:6F5E  C5                  .L1:		PUSH BC
     209.  00:6F5F  4E                  		LD C,[HL]
     210.  00:6F60  23                  		INC HL
     211.  00:6F61  E5                  		PUSH HL
     212.  00:6F62  46                  		LD B,[HL]
     213.  00:6F63                      
     214.  00:6F63  D5                  		PUSH DE
     215.  00:6F64  EB                  		EX DE,HL
     216.  00:6F65  11 17 00            		LD DE,23
     217.  00:6F68  DD 26 08            		db $DD,$26,$08	;LD XH,8
     218.  00:6F6B                      
     219.  00:6F6B  CB 38               .L2:		SRL B
     220.  00:6F6D  CB 19               		RR C
     221.  00:6F6F  CD 21 F0            .L3:		CALL PT3_NTL3	;AND A or NOP
     222.  00:6F72  79                  		LD A,C
     223.  00:6F73  8A                  		ADC A,D	;=ADC 0
     224.  00:6F74  77                  		LD [HL],A
     225.  00:6F75  23                  		INC HL
     226.  00:6F76  78                  		LD A,B
     227.  00:6F77  8A                  		ADC A,D
     228.  00:6F78  77                  		LD [HL],A
     229.  00:6F79  19                  		ADD HL,DE
     230.  00:6F7A  DD 25               		db $DD,$25	;DEC XH
     231.  00:6F7C  20 ED               		JR NZ,.L2
     232.  00:6F7E                      
     233.  00:6F7E  D1                  		POP DE
     234.  00:6F7F  13                  		INC DE
     235.  00:6F80  13                  		INC DE
     236.  00:6F81  E1                  		POP HL
     237.  00:6F82  23                  		INC HL
     238.  00:6F83  C1                  		POP BC
     239.  00:6F84  10 D8               		DJNZ .L1
     240.  00:6F86                      
     241.  00:6F86  E1                  		POP HL
     242.  00:6F87  D1                  		POP DE
     243.  00:6F88                      
     244.  00:6F88  7B                  		LD A,E
     245.  00:6F89  D5                  		PUSH DE
     246.  00:6F8A  11 20 74            		LD DE,TCOLD_1
     247.  00:6F8D  BB                  		CP E
     248.  00:6F8E  D1                  		POP DE
     249.  00:6F8F  20 05               		JR NZ,.CORR_1
     250.  00:6F91  3E FD               		LD A,$FD
     251.  00:6F93  32 AE F0            		LD [NT_+$2E],A
     252.  00:6F96                      
     253.  00:6F96  1A                  .CORR_1:	LD A,[DE]
     254.  00:6F97  A7                  		AND A
     255.  00:6F98  28 11               		JR Z,.TC_EXIT
     256.  00:6F9A  1F                  		RRA
     257.  00:6F9B  F5                  		PUSH AF
     258.  00:6F9C  87                  		ADD A,A
     259.  00:6F9D  4F                  		LD C,A
     260.  00:6F9E  09                  		ADD HL,BC
     261.  00:6F9F  F1                  		POP AF
     262.  00:6FA0  30 02               		JR NC,.CORR_2
     263.  00:6FA2  35                  		DEC [HL]
     264.  00:6FA3  35                  		DEC [HL]
     265.  00:6FA4  34                  .CORR_2:	INC [HL]
     266.  00:6FA5  A7                  		AND A
     267.  00:6FA6  ED 42               		SBC HL,BC
     268.  00:6FA8  13                  		INC DE
     269.  00:6FA9  18 EB               		JR .CORR_1
     270.  00:6FAB                      
     271.  00:6FAB                      .TC_EXIT:	;POP AF
     272.  00:6FAB                      
     273.  00:6FAB                      		; --- CREATE PT3 VOLUME TABLE (c) Ivan Roshin, adapted by SapphiRe ---
     274.  00:6FAB  21 11 00            		ld	hl,$11
     275.  00:6FAE  54                  		ld	d,h
     276.  00:6FAF  5C                  		ld	e,h
     277.  00:6FB0  DD 21 50 F1         		ld	IX,VT_+16
     278.  00:6FB4  06 0F               		ld	b,15
     279.  00:6FB6  E5                  .INITV1:	push	hl
     280.  00:6FB7  19                  		add	hl,de
     281.  00:6FB8  EB                  		ex	de,hl
     282.  00:6FB9  ED 62               		sbc	hl,hl
     283.  00:6FBB  48                  		ld	c,b
     284.  00:6FBC  06 10               		ld	b,16
     285.  00:6FBE  7D                  .INITV2:	ld	a,l
     286.  00:6FBF  17                  		rla
     287.  00:6FC0  7C                  		ld	a,h
     288.  00:6FC1  CE 00               		adc	a,0
     289.  00:6FC3  DD 77 00            		ld	[ix],a
     290.  00:6FC6  DD 23               		inc	ix
     291.  00:6FC8  19                  		add	hl,de
     292.  00:6FC9  10 F3               		djnz	.INITV2
     293.  00:6FCB  E1                  		pop	hl
     294.  00:6FCC  7B                  		ld	a,e
     295.  00:6FCD  FE 77               		cp	$77
     296.  00:6FCF  20 01               		jr	nz,.INITV3
     297.  00:6FD1  1C                  		inc	e
     298.  00:6FD2  41                  .INITV3:	ld	b,c
     299.  00:6FD3  10 E1               		djnz	.INITV1
     300.  00:6FD5                      
     301.  00:6FD5  C9                  		RET
     302.  00:6FD6                      
     303.  00:6FD6                      		;pattern decoder
     304.  00:6FD6  DD 36 08 00         PD_OrSm:	LD [IX+(CHNPRM_Env_En-12)],0
     305.  00:6FDA  CD 60 71            		CALL SETORN
     306.  00:6FDD  0A                  		LD A,[BC]
     307.  00:6FDE  03                  		INC BC
     308.  00:6FDF  0F                  		RRCA
     309.  00:6FE0                      
     310.  00:6FE0  87                  PD_SAM:		ADD A,A
     311.  00:6FE1  5F                  PD_SAM_:	LD E,A
     312.  00:6FE2  16 00               		LD D,0
     313.  00:6FE4  2A 05 F0            		LD HL,[PT3_SAMPTRS]
     314.  00:6FE7  19                  		ADD HL,DE
     315.  00:6FE8  5E                  		LD E,[HL]
     316.  00:6FE9  23                  		INC HL
     317.  00:6FEA  56                  		LD D,[HL]
     318.  00:6FEB  2A 01 F0            		LD HL,[PT3_MODADDR]
     319.  00:6FEE  19                  		ADD HL,DE
     320.  00:6FEF  DD 75 03            		LD [IX+(CHNPRM_SamPtr-12)],L
     321.  00:6FF2  DD 74 04            		LD [IX+(CHNPRM_SamPtr+1-12)],H
     322.  00:6FF5  18 41               		JR PD_LOOP
     323.  00:6FF7                      
     324.  00:6FF7  07                  PD_VOL:		RLCA
     325.  00:6FF8  07                  		RLCA
     326.  00:6FF9  07                  		RLCA
     327.  00:6FFA  07                  		RLCA
     328.  00:6FFB  DD 77 10            		LD [IX+(CHNPRM_Volume-12)],A
     329.  00:6FFE  18 3B               		JR PD_LP2
     330.  00:7000                      	
     331.  00:7000  DD 77 08            PD_EOff:	LD [IX+(CHNPRM_Env_En-12)],A
     332.  00:7003  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     333.  00:7006  18 33               		JR PD_LP2
     334.  00:7008                      
     335.  00:7008  3D                  PD_SorE:	DEC A
     336.  00:7009  20 07               		JR NZ,PD_ENV
     337.  00:700B  0A                  		LD A,[BC]
     338.  00:700C  03                  		INC BC
     339.  00:700D  DD 77 05            		LD [IX+(CHNPRM_NNtSkp-12)],A
     340.  00:7010  18 29               		JR PD_LP2
     341.  00:7012                      
     342.  00:7012  CD 44 71            PD_ENV:		CALL SETENV
     343.  00:7015  18 24               		JR PD_LP2
     344.  00:7017                      
     345.  00:7017  CD 60 71            PD_ORN:		CALL SETORN
     346.  00:701A  18 1C               		JR PD_LOOP
     347.  00:701C                             
     348.  00:701C  DD 77 08            PD_ESAM:	LD [IX+(CHNPRM_Env_En-12)],A
     349.  00:701F  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     350.  00:7022  C4 44 71            		CALL NZ,SETENV
     351.  00:7025  0A                  		LD A,[BC]
     352.  00:7026  03                  		INC BC
     353.  00:7027  18 B8               		JR PD_SAM_
     354.  00:7029                      
     355.  00:7029  DD 7E 06            PTDECOD:	LD A,[IX+(CHNPRM_Note-12)]
     356.  00:702C  32 0F F0            		LD [PT3_PrNote],A
     357.  00:702F  DD 6E FA            		LD L,[IX+(CHNPRM_CrTnSl-12)]
     358.  00:7032  DD 66 FB            		LD H,[IX+(CHNPRM_CrTnSl+1-12)]
     359.  00:7035  22 10 F0            		LD [PT3_PrSlide],HL
     360.  00:7038                      
     361.  00:7038  11 10 20            PD_LOOP:	LD DE,$2010
     362.  00:703B  0A                  PD_LP2:		LD A,[BC]
     363.  00:703C  03                  		INC BC
     364.  00:703D  83                  		ADD A,E
     365.  00:703E  38 96               		JR C,PD_OrSm
     366.  00:7040  82                  		ADD A,D
     367.  00:7041  28 4A               		JR Z,PD_FIN
     368.  00:7043  38 9B               		JR C,PD_SAM
     369.  00:7045  83                  		ADD A,E
     370.  00:7046  28 25               		JR Z,PD_REL
     371.  00:7048  38 AD               		JR C,PD_VOL
     372.  00:704A  83                  		ADD A,E
     373.  00:704B  28 B3               		JR Z,PD_EOff
     374.  00:704D  38 B9               		JR C,PD_SorE
     375.  00:704F  C6 60               		ADD A,96
     376.  00:7051  38 20               		JR C,PD_NOTE
     377.  00:7053  83                  		ADD A,E
     378.  00:7054  38 C1               		JR C,PD_ORN
     379.  00:7056  82                  		ADD A,D
     380.  00:7057  38 0F               		JR C,PD_NOIS
     381.  00:7059  83                  		ADD A,E
     382.  00:705A  38 C0               		JR C,PD_ESAM
     383.  00:705C  87                  		ADD A,A
     384.  00:705D  5F                  		LD E,A
     385.  00:705E  21 99 50            		LD HL,(SPCCOMS+$DF20) % 65536	; Adapted from original Speccy version (saves 6 bytes)
     386.  00:7061  19                  		ADD HL,DE
     387.  00:7062  5E                  		LD E,[HL]
     388.  00:7063  23                  		INC HL
     389.  00:7064  56                  		LD D,[HL]
     390.  00:7065  D5                  		PUSH DE
     391.  00:7066  18 D0               		JR PD_LOOP
     392.  00:7068                      
     393.  00:7068  32 7E F0            PD_NOIS:	LD [Ns_Base],A
     394.  00:706B  18 CE               		JR PD_LP2
     395.  00:706D                      
     396.  00:706D  DD CB 09 86         PD_REL:		RES 0,[IX+(CHNPRM_Flags-12)]
     397.  00:7071  18 08               		JR PD_RES
     398.  00:7073                      	
     399.  00:7073  DD 77 06            PD_NOTE:	LD [IX+(CHNPRM_Note-12)],A
     400.  00:7076  DD CB 09 C6         		SET 0,[IX+(CHNPRM_Flags-12)]
     401.  00:707A  AF                  		XOR A
     402.  00:707B                      
     403.  00:707B  ED 73 09 F0         PD_RES:		LD [PT3_PDSP],SP
     404.  00:707F  DD F9               		LD SP,IX
     405.  00:7081  67                  		LD H,A
     406.  00:7082  6F                  		LD L,A
     407.  00:7083  E5                  		PUSH HL
     408.  00:7084  E5                  		PUSH HL
     409.  00:7085  E5                  		PUSH HL
     410.  00:7086  E5                  		PUSH HL
     411.  00:7087  E5                  		PUSH HL
     412.  00:7088  E5                  		PUSH HL
     413.  00:7089  ED 7B 09 F0         		LD SP,[PT3_PDSP]
     414.  00:708D                      
     415.  00:708D  DD 7E 05            PD_FIN:		LD A,[IX+(CHNPRM_NNtSkp-12)]
     416.  00:7090  DD 77 0F            		LD [IX+(CHNPRM_NtSkCn-12)],A
     417.  00:7093  C9                  		RET
     418.  00:7094                      
     419.  00:7094  DD CB 09 96         C_PORTM:	RES 2,[IX+(CHNPRM_Flags-12)]
     420.  00:7098  0A                  		LD A,[BC]
     421.  00:7099  03                  		INC BC
     422.  00:709A                      		;SKIP PRECALCULATED TONE DELTA [BECAUSE
     423.  00:709A                      		;CANNOT BE RIGHT AFTER PT3 COMPILATION]
     424.  00:709A  03                  		INC BC
     425.  00:709B  03                  		INC BC
     426.  00:709C  DD 77 0A            		LD [IX+(CHNPRM_TnSlDl-12)],A
     427.  00:709F  DD 77 F9            		LD [IX+(CHNPRM_TSlCnt-12)],A
     428.  00:70A2  11 80 F0            		LD DE,NT_
     429.  00:70A5  DD 7E 06            		LD A,[IX+(CHNPRM_Note-12)]
     430.  00:70A8  DD 77 07            		LD [IX+(CHNPRM_SlToNt-12)],A
     431.  00:70AB  87                  		ADD A,A
     432.  00:70AC  6F                  		LD L,A
     433.  00:70AD  26 00               		LD H,0
     434.  00:70AF  19                  		ADD HL,DE
     435.  00:70B0  7E                  		LD A,[HL]
     436.  00:70B1  23                  		INC HL
     437.  00:70B2  66                  		LD H,[HL]
     438.  00:70B3  6F                  		LD L,A
     439.  00:70B4  E5                  		PUSH HL
     440.  00:70B5  3A 0F F0            		LD A,[PT3_PrNote]
     441.  00:70B8  DD 77 06            		LD [IX+(CHNPRM_Note-12)],A
     442.  00:70BB  87                  		ADD A,A
     443.  00:70BC  6F                  		LD L,A
     444.  00:70BD  26 00               		LD H,0
     445.  00:70BF  19                  		ADD HL,DE
     446.  00:70C0  5E                  		LD E,[HL]
     447.  00:70C1  23                  		INC HL
     448.  00:70C2  56                  		LD D,[HL]
     449.  00:70C3  E1                  		POP HL
     450.  00:70C4  ED 52               		SBC HL,DE
     451.  00:70C6  DD 75 0D            		LD [IX+(CHNPRM_TnDelt-12)],L
     452.  00:70C9  DD 74 0E            		LD [IX+(CHNPRM_TnDelt+1-12)],H
     453.  00:70CC  ED 5B 10 F0         		LD DE,[PT3_PrSlide]
     454.  00:70D0  DD 73 FA            		LD [IX+(CHNPRM_CrTnSl-12)],E
     455.  00:70D3  DD 72 FB            		LD [IX+(CHNPRM_CrTnSl+1-12)],D
     456.  00:70D6  0A                  		LD A,[BC] ;SIGNED TONE STEP
     457.  00:70D7  03                  		INC BC
     458.  00:70D8  08                  		EX AF,AF'
     459.  00:70D9  0A                  		LD A,[BC]
     460.  00:70DA  03                  		INC BC
     461.  00:70DB  A7                  		AND A
     462.  00:70DC  28 01               		JR Z,.NOSIG
     463.  00:70DE  EB                  		EX DE,HL
     464.  00:70DF  ED 52               .NOSIG:	SBC HL,DE
     465.  00:70E1  F2 E9 70            		JP P,SET_STP
     466.  00:70E4  2F                  		CPL
     467.  00:70E5  08                  		EX AF,AF'
     468.  00:70E6  ED 44               		NEG
     469.  00:70E8  08                  		EX AF,AF'
     470.  00:70E9  DD 77 0C            SET_STP:	LD [IX+(CHNPRM_TSlStp+1-12)],A
     471.  00:70EC  08                  		EX AF,AF'
     472.  00:70ED  DD 77 0B            		LD [IX+(CHNPRM_TSlStp-12)],A
     473.  00:70F0  DD 36 FE 00         		LD [IX+(CHNPRM_COnOff-12)],0
     474.  00:70F4  C9                  		RET
     475.  00:70F5                      
     476.  00:70F5  DD CB 09 D6         C_GLISS:	SET 2,[IX+(CHNPRM_Flags-12)]
     477.  00:70F9  0A                  		LD A,[BC]
     478.  00:70FA  03                  		INC BC
     479.  00:70FB  DD 77 0A            		LD [IX+(CHNPRM_TnSlDl-12)],A
     480.  00:70FE  DD 77 F9            		LD [IX+(CHNPRM_TSlCnt-12)],A
     481.  00:7101  0A                  		LD A,[BC]
     482.  00:7102  03                  		INC BC
     483.  00:7103  08                  		EX AF,AF'
     484.  00:7104  0A                  		LD A,[BC]
     485.  00:7105  03                  		INC BC
     486.  00:7106  18 E1               		JR SET_STP
     487.  00:7108                      
     488.  00:7108  0A                  C_SMPOS:	LD A,[BC]
     489.  00:7109  03                  		INC BC
     490.  00:710A  DD 77 F5            		LD [IX+(CHNPRM_PsInSm-12)],A
     491.  00:710D  C9                  		RET
     492.  00:710E                      
     493.  00:710E  0A                  C_ORPOS:	LD A,[BC]
     494.  00:710F  03                  		INC BC
     495.  00:7110  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     496.  00:7113  C9                  		RET
     497.  00:7114                      
     498.  00:7114  0A                  C_VIBRT:	LD A,[BC]
     499.  00:7115  03                  		INC BC
     500.  00:7116  DD 77 FF            		LD [IX+(CHNPRM_OnOffD-12)],A
     501.  00:7119  DD 77 FE            		LD [IX+(CHNPRM_COnOff-12)],A
     502.  00:711C  0A                  		LD A,[BC]
     503.  00:711D  03                  		INC BC
     504.  00:711E  DD 77 00            		LD [IX+(CHNPRM_OffOnD-12)],A
     505.  00:7121  AF                  		XOR A
     506.  00:7122  DD 77 F9            		LD [IX+(CHNPRM_TSlCnt-12)],A
     507.  00:7125  DD 77 FA            		LD [IX+(CHNPRM_CrTnSl-12)],A
     508.  00:7128  DD 77 FB            		LD [IX+(CHNPRM_CrTnSl+1-12)],A
     509.  00:712B  C9                  		RET
     510.  00:712C                      
     511.  00:712C  0A                  C_ENGLS:	LD A,[BC]
     512.  00:712D  03                  		INC BC
     513.  00:712E  32 1E F0            		LD [PT3_Env_Del],A
     514.  00:7131  32 7D F0            		LD [CurEDel],A
     515.  00:7134  0A                  		LD A,[BC]
     516.  00:7135  03                  		INC BC
     517.  00:7136  6F                  		LD L,A
     518.  00:7137  0A                  		LD A,[BC]
     519.  00:7138  03                  		INC BC
     520.  00:7139  67                  		LD H,A
     521.  00:713A  22 1F F0            		LD [PT3_ESldAdd],HL
     522.  00:713D  C9                  		RET
     523.  00:713E                      
     524.  00:713E  0A                  C_DELAY:	LD A,[BC]
     525.  00:713F  03                  		INC BC
     526.  00:7140  32 1C F0            		LD [PT3_Delay],A
     527.  00:7143  C9                  		RET
     528.  00:7144                      	
     529.  00:7144  DD 73 08            SETENV:		LD [IX+(CHNPRM_Env_En-12)],E
     530.  00:7147  32 4D F1            		LD [AYREGS+AR_EnvTp],A
     531.  00:714A  0A                  		LD A,[BC]
     532.  00:714B  03                  		INC BC
     533.  00:714C  67                  		LD H,A
     534.  00:714D  0A                  		LD A,[BC]
     535.  00:714E  03                  		INC BC
     536.  00:714F  6F                  		LD L,A
     537.  00:7150  22 4E F1            		LD [EnvBase],HL
     538.  00:7153  AF                  		XOR A
     539.  00:7154  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     540.  00:7157  32 7D F0            		LD [CurEDel],A
     541.  00:715A  67                  		LD H,A
     542.  00:715B  6F                  		LD L,A
     543.  00:715C  22 7B F0            		LD [CurESld],HL
     544.  00:715F  C9                  C_NOP:		RET
     545.  00:7160                      
     546.  00:7160  87                  SETORN:		ADD A,A
     547.  00:7161  5F                  		LD E,A
     548.  00:7162  16 00               		LD D,0
     549.  00:7164  DD 72 F4            		LD [IX+(CHNPRM_PsInOr-12)],D
     550.  00:7167  2A 07 F0            		LD HL,[PT3_OrnPtrs]
     551.  00:716A  19                  		ADD HL,DE
     552.  00:716B  5E                  		LD E,[HL]
     553.  00:716C  23                  		INC HL
     554.  00:716D  56                  		LD D,[HL]
     555.  00:716E  2A 01 F0            		LD HL,[PT3_MODADDR]
     556.  00:7171  19                  		ADD HL,DE
     557.  00:7172  DD 75 01            		LD [IX+(CHNPRM_OrnPtr-12)],L
     558.  00:7175  DD 74 02            		LD [IX+(CHNPRM_OrnPtr+1-12)],H
     559.  00:7178  C9                  		RET
     560.  00:7179                      
     561.  00:7179                      		;ALL 16 ADDRESSES TO PROTECT FROM BROKEN PT3 MODULES
     562.  00:7179  5F 71               SPCCOMS:	dw C_NOP
     563.  00:717B  F5 70               		dw C_GLISS
     564.  00:717D  94 70               		dw C_PORTM
     565.  00:717F  08 71               		dw C_SMPOS
     566.  00:7181  0E 71               		dw C_ORPOS
     567.  00:7183  14 71               		dw C_VIBRT
     568.  00:7185  5F 71               		dw C_NOP
     569.  00:7187  5F 71               		dw C_NOP
     570.  00:7189  2C 71               		dw C_ENGLS
     571.  00:718B  3E 71               		dw C_DELAY
     572.  00:718D  5F 71               		dw C_NOP
     573.  00:718F  5F 71               		dw C_NOP
     574.  00:7191  5F 71               		dw C_NOP
     575.  00:7193  5F 71               		dw C_NOP
     576.  00:7195  5F 71               		dw C_NOP
     577.  00:7197  5F 71               		dw C_NOP
     578.  00:7199                      
     579.  00:7199  AF                  CHREGS:		XOR A
     580.  00:719A  32 4A F1            		LD [AYREGS+AR_AmplC],A
     581.  00:719D  DD CB 15 46         		BIT 0,[IX+CHNPRM_Flags]
     582.  00:71A1  E5                  		PUSH HL
     583.  00:71A2  CA C8 72            		JP Z,.CH_EXIT
     584.  00:71A5  ED 73 0B F0         		LD [PT3_CSP],SP
     585.  00:71A9  DD 6E 0D            		LD L,[IX+CHNPRM_OrnPtr]
     586.  00:71AC  DD 66 0E            		LD H,[IX+CHNPRM_OrnPtr+1]
     587.  00:71AF  F9                  		LD SP,HL
     588.  00:71B0  D1                  		POP DE
     589.  00:71B1  67                  		LD H,A
     590.  00:71B2  DD 7E 00            		LD A,[IX+CHNPRM_PsInOr]
     591.  00:71B5  6F                  		LD L,A
     592.  00:71B6  39                  		ADD HL,SP
     593.  00:71B7  3C                  		INC A
     594.  00:71B8  BA                  		CP D
     595.  00:71B9  38 01               		JR C,.CH_ORPS
     596.  00:71BB  7B                  		LD A,E
     597.  00:71BC  DD 77 00            .CH_ORPS:	LD [IX+CHNPRM_PsInOr],A
     598.  00:71BF  DD 7E 12            		LD A,[IX+CHNPRM_Note]
     599.  00:71C2  86                  		ADD A,[HL]
     600.  00:71C3  F2 C7 71            		JP P,.CH_NTP
     601.  00:71C6  AF                  		XOR A
     602.  00:71C7  FE 60               .CH_NTP:	CP 96
     603.  00:71C9  38 02               		JR C,.CH_NOK
     604.  00:71CB  3E 5F               		LD A,95
     605.  00:71CD  87                  .CH_NOK:	ADD A,A
     606.  00:71CE  08                  		EX AF,AF'
     607.  00:71CF  DD 6E 0F            		LD L,[IX+CHNPRM_SamPtr]
     608.  00:71D2  DD 66 10            		LD H,[IX+CHNPRM_SamPtr+1]
     609.  00:71D5  F9                  		LD SP,HL
     610.  00:71D6  D1                  		POP DE
     611.  00:71D7  26 00               		LD H,0
     612.  00:71D9  DD 7E 01            		LD A,[IX+CHNPRM_PsInSm]
     613.  00:71DC  47                  		LD B,A
     614.  00:71DD  87                  		ADD A,A
     615.  00:71DE  87                  		ADD A,A
     616.  00:71DF  6F                  		LD L,A
     617.  00:71E0  39                  		ADD HL,SP
     618.  00:71E1  F9                  		LD SP,HL
     619.  00:71E2  78                  		LD A,B
     620.  00:71E3  3C                  		INC A
     621.  00:71E4  BA                  		CP D
     622.  00:71E5  38 01               		JR C,.CH_SMPS
     623.  00:71E7  7B                  		LD A,E
     624.  00:71E8  DD 77 01            .CH_SMPS:	LD [IX+CHNPRM_PsInSm],A
     625.  00:71EB  C1                  		POP BC
     626.  00:71EC  E1                  		POP HL
     627.  00:71ED  DD 5E 08            		LD E,[IX+CHNPRM_TnAcc]
     628.  00:71F0  DD 56 09            		LD D,[IX+CHNPRM_TnAcc+1]
     629.  00:71F3  19                  		ADD HL,DE
     630.  00:71F4  CB 70               		BIT 6,B
     631.  00:71F6  28 06               		JR Z,.CH_NOAC
     632.  00:71F8  DD 75 08            		LD [IX+CHNPRM_TnAcc],L
     633.  00:71FB  DD 74 09            		LD [IX+CHNPRM_TnAcc+1],H
     634.  00:71FE  EB                  .CH_NOAC:	EX DE,HL
     635.  00:71FF  08                  		EX AF,AF'
     636.  00:7200  6F                  		LD L,A
     637.  00:7201  26 00               		LD H,0
     638.  00:7203  31 80 F0            		LD SP,NT_
     639.  00:7206  39                  		ADD HL,SP
     640.  00:7207  F9                  		LD SP,HL
     641.  00:7208  E1                  		POP HL
     642.  00:7209  19                  		ADD HL,DE
     643.  00:720A  DD 5E 06            		LD E,[IX+CHNPRM_CrTnSl]
     644.  00:720D  DD 56 07            		LD D,[IX+CHNPRM_CrTnSl+1]
     645.  00:7210  19                  		ADD HL,DE
     646.  00:7211  ED 7B 0B F0         		LD SP,[PT3_CSP]
     647.  00:7215  E3                  		EX [SP],HL
     648.  00:7216  AF                  		XOR A
     649.  00:7217  DD B6 05            		OR [IX+CHNPRM_TSlCnt]
     650.  00:721A  28 3E               		JR Z,.CH_AMP
     651.  00:721C  DD 35 05            		DEC [IX+CHNPRM_TSlCnt]
     652.  00:721F  20 39               		JR NZ,.CH_AMP
     653.  00:7221  DD 7E 16            		LD A,[IX+CHNPRM_TnSlDl]
     654.  00:7224  DD 77 05            		LD [IX+CHNPRM_TSlCnt],A
     655.  00:7227  DD 6E 17            		LD L,[IX+CHNPRM_TSlStp]
     656.  00:722A  DD 66 18            		LD H,[IX+CHNPRM_TSlStp+1]
     657.  00:722D  7C                  		LD A,H
     658.  00:722E  19                  		ADD HL,DE
     659.  00:722F  DD 75 06            		LD [IX+CHNPRM_CrTnSl],L
     660.  00:7232  DD 74 07            		LD [IX+CHNPRM_CrTnSl+1],H
     661.  00:7235  DD CB 15 56         		BIT 2,[IX+CHNPRM_Flags]
     662.  00:7239  20 1F               		JR NZ,.CH_AMP
     663.  00:723B  DD 5E 19            		LD E,[IX+CHNPRM_TnDelt]
     664.  00:723E  DD 56 1A            		LD D,[IX+CHNPRM_TnDelt+1]
     665.  00:7241  A7                  		AND A
     666.  00:7242  28 01               		JR Z,.CH_STPP
     667.  00:7244  EB                  		EX DE,HL
     668.  00:7245  ED 52               .CH_STPP:	SBC HL,DE
     669.  00:7247  FA 5A 72            		JP M,.CH_AMP
     670.  00:724A  DD 7E 13            		LD A,[IX+CHNPRM_SlToNt]
     671.  00:724D  DD 77 12            		LD [IX+CHNPRM_Note],A
     672.  00:7250  AF                  		XOR A
     673.  00:7251  DD 77 05            		LD [IX+CHNPRM_TSlCnt],A
     674.  00:7254  DD 77 06            		LD [IX+CHNPRM_CrTnSl],A
     675.  00:7257  DD 77 07            		LD [IX+CHNPRM_CrTnSl+1],A
     676.  00:725A  DD 7E 02            .CH_AMP:	LD A,[IX+CHNPRM_CrAmSl]
     677.  00:725D  CB 79               		BIT 7,C
     678.  00:725F  28 13               		JR Z,.CH_NOAM
     679.  00:7261  CB 71               		BIT 6,C
     680.  00:7263  28 07               		JR Z,.CH_AMIN
     681.  00:7265  FE 0F               		CP 15
     682.  00:7267  28 0B               		JR Z,.CH_NOAM
     683.  00:7269  3C                  		INC A
     684.  00:726A  18 05               		JR .CH_SVAM
     685.  00:726C  FE F1               .CH_AMIN:	CP -15
     686.  00:726E  28 04               		JR Z,.CH_NOAM
     687.  00:7270  3D                  		DEC A
     688.  00:7271  DD 77 02            .CH_SVAM:	LD [IX+CHNPRM_CrAmSl],A
     689.  00:7274  6F                  .CH_NOAM:	LD L,A
     690.  00:7275  78                  		LD A,B
     691.  00:7276  E6 0F               		AND 15
     692.  00:7278  85                  		ADD A,L
     693.  00:7279  F2 7D 72            		JP P,.CH_APOS
     694.  00:727C  AF                  		XOR A
     695.  00:727D  FE 10               .CH_APOS:	CP 16
     696.  00:727F  38 02               		JR C,.CH_VOL
     697.  00:7281  3E 0F               		LD A,15
     698.  00:7283  DD B6 1C            .CH_VOL:	OR [IX+CHNPRM_Volume]
     699.  00:7286  6F                  		LD L,A
     700.  00:7287  26 00               		LD H,0
     701.  00:7289  11 40 F1            		LD DE,VT_
     702.  00:728C  19                  		ADD HL,DE
     703.  00:728D  7E                  		LD A,[HL]
     704.  00:728E  CB 41               .CH_ENV:	BIT 0,C
     705.  00:7290  20 03               		JR NZ,.CH_NOEN
     706.  00:7292  DD B6 14            		OR [IX+CHNPRM_Env_En]
     707.  00:7295  32 4A F1            .CH_NOEN:	LD [AYREGS+AR_AmplC],A
     708.  00:7298  CB 78               		BIT 7,B
     709.  00:729A  79                  		LD A,C
     710.  00:729B  28 19               		JR Z,.NO_ENSL
     711.  00:729D  17                  		RLA
     712.  00:729E  17                  		RLA
     713.  00:729F  CB 2F               		SRA A
     714.  00:72A1  CB 2F               		SRA A
     715.  00:72A3  CB 2F               		SRA A
     716.  00:72A5  DD 86 04            		ADD A,[IX+CHNPRM_CrEnSl] ;SEE COMMENT BELOW
     717.  00:72A8  CB 68               		BIT 5,B
     718.  00:72AA  28 03               		JR Z,.NO_ENAC
     719.  00:72AC  DD 77 04            		LD [IX+CHNPRM_CrEnSl],A
     720.  00:72AF  21 1D F0            .NO_ENAC:	LD HL,PT3_AddToEn
     721.  00:72B2  86                  		ADD A,[HL] ;BUG IN PT3 - NEED WORD HERE.
     722.  00:72B3                      			   ;FIX IT IN NEXT VERSION?
     723.  00:72B3  77                  		LD [HL],A
     724.  00:72B4  18 0E               		JR .CH_MIX
     725.  00:72B6  1F                  .NO_ENSL:	RRA
     726.  00:72B7  DD 86 03            		ADD A,[IX+CHNPRM_CrNsSl]
     727.  00:72BA  32 7F F0            		LD [AddToNs],A
     728.  00:72BD  CB 68               		BIT 5,B
     729.  00:72BF  28 03               		JR Z,.CH_MIX
     730.  00:72C1  DD 77 03            		LD [IX+CHNPRM_CrNsSl],A
     731.  00:72C4  78                  .CH_MIX:	LD A,B
     732.  00:72C5  1F                  		RRA
     733.  00:72C6  E6 48               		AND $48
     734.  00:72C8  21 47 F1            .CH_EXIT:	LD HL,AYREGS+AR_Mixer
     735.  00:72CB  B6                  		OR [HL]
     736.  00:72CC  0F                  		RRCA
     737.  00:72CD  77                  		LD [HL],A
     738.  00:72CE  E1                  		POP HL
     739.  00:72CF  AF                  		XOR A
     740.  00:72D0  DD B6 0A            		OR [IX+CHNPRM_COnOff]
     741.  00:72D3  C8                  		RET Z
     742.  00:72D4  DD 35 0A            		DEC [IX+CHNPRM_COnOff]
     743.  00:72D7  C0                  		RET NZ
     744.  00:72D8  DD AE 15            		XOR [IX+CHNPRM_Flags]
     745.  00:72DB  DD 77 15            		LD [IX+CHNPRM_Flags],A
     746.  00:72DE  1F                  		RRA
     747.  00:72DF  DD 7E 0B            		LD A,[IX+CHNPRM_OnOffD]
     748.  00:72E2  38 03               		JR C,.CH_ONDL
     749.  00:72E4  DD 7E 0C            		LD A,[IX+CHNPRM_OffOnD]
     750.  00:72E7  DD 77 0A            .CH_ONDL:	LD [IX+CHNPRM_COnOff],A
     751.  00:72EA  C9                  		RET
     752.  00:72EB                      
     753.  00:72EB  AF                  PT3_PLAY:	XOR A
     754.  00:72EC  32 1D F0            		LD [PT3_AddToEn],A
     755.  00:72EF  32 47 F1            		LD [AYREGS+AR_Mixer],A
     756.  00:72F2  3D                  		DEC A
     757.  00:72F3  32 4D F1            		LD [AYREGS+AR_EnvTp],A
     758.  00:72F6  21 7A F0            		LD HL,DelyCnt
     759.  00:72F9  35                  		DEC [HL]
     760.  00:72FA  C2 81 73            		JP NZ,.PL2
     761.  00:72FD  21 3E F0            		LD HL,ChanA+CHNPRM_NtSkCn
     762.  00:7300  35                  		DEC [HL]
     763.  00:7301  20 4E               		JR NZ,.PL1B
     764.  00:7303  ED 4B 12 F0         		LD BC,[PT3_AdInPtA]
     765.  00:7307  0A                  		LD A,[BC]
     766.  00:7308  A7                  		AND A
     767.  00:7309  20 3B               		JR NZ,.PL1A
     768.  00:730B  57                  		LD D,A
     769.  00:730C  32 7E F0            		LD [Ns_Base],A
     770.  00:730F  2A 03 F0            		LD HL,[PT3_CrPsPtr]
     771.  00:7312  23                  		INC HL
     772.  00:7313  7E                  		LD A,[HL]
     773.  00:7314  3C                  		INC A
     774.  00:7315  20 08               		JR NZ,.PLNLP
     775.  00:7317  CD 81 6E            		CALL CHECKLP
     776.  00:731A  2A 18 F0            		LD HL,[PT3_LPosPtr]
     777.  00:731D  7E                  		LD A,[HL]
     778.  00:731E  3C                  		INC A
     779.  00:731F  22 03 F0            .PLNLP:	LD [PT3_CrPsPtr],HL
     780.  00:7322  3D                  		DEC A
     781.  00:7323  87                  		ADD A,A
     782.  00:7324  5F                  		LD E,A
     783.  00:7325  CB 12               		RL D
     784.  00:7327  2A 1A F0            		LD HL,[PT3_PatsPtr]
     785.  00:732A  19                  		ADD HL,DE
     786.  00:732B  ED 5B 01 F0         		LD DE,[PT3_MODADDR]
     787.  00:732F  ED 73 0D F0         		LD [PT3_PSP],SP
     788.  00:7333  F9                  		LD SP,HL
     789.  00:7334  E1                  		POP HL
     790.  00:7335  19                  		ADD HL,DE
     791.  00:7336  44                  		LD B,H
     792.  00:7337  4D                  		LD C,L
     793.  00:7338  E1                  		POP HL
     794.  00:7339  19                  		ADD HL,DE
     795.  00:733A  22 14 F0            		LD [PT3_AdInPtB],HL
     796.  00:733D  E1                  		POP HL
     797.  00:733E  19                  		ADD HL,DE
     798.  00:733F  22 16 F0            		LD [PT3_AdInPtC],HL
     799.  00:7342  ED 7B 0D F0         		LD SP,[PT3_PSP]
     800.  00:7346                      
     801.  00:7346  DD 21 2F F0         .PL1A:		LD IX,ChanA+12
     802.  00:734A  CD 29 70            		CALL PTDECOD
     803.  00:734D  ED 43 12 F0         		LD [PT3_AdInPtA],BC
     804.  00:7351                      
     805.  00:7351  21 5B F0            .PL1B:		LD HL,ChanB+CHNPRM_NtSkCn
     806.  00:7354  35                  		DEC [HL]
     807.  00:7355  20 0F               		JR NZ,.PL1C
     808.  00:7357  DD 21 4C F0         		LD IX,ChanB+12
     809.  00:735B  ED 4B 14 F0         		LD BC,[PT3_AdInPtB]
     810.  00:735F  CD 29 70            		CALL PTDECOD
     811.  00:7362  ED 43 14 F0         		LD [PT3_AdInPtB],BC
     812.  00:7366                      
     813.  00:7366  21 78 F0            .PL1C:		LD HL,ChanC+CHNPRM_NtSkCn
     814.  00:7369  35                  		DEC [HL]
     815.  00:736A  20 0F               		JR NZ,.PL1D
     816.  00:736C  DD 21 69 F0         		LD IX,ChanC+12
     817.  00:7370  ED 4B 16 F0         		LD BC,[PT3_AdInPtC]
     818.  00:7374  CD 29 70            		CALL PTDECOD
     819.  00:7377  ED 43 16 F0         		LD [PT3_AdInPtC],BC
     820.  00:737B                      
     821.  00:737B  3A 1C F0            .PL1D:		LD A,[PT3_Delay]
     822.  00:737E  32 7A F0            		LD [DelyCnt],A
     823.  00:7381                      
     824.  00:7381  DD 21 23 F0         .PL2:		LD IX,ChanA
     825.  00:7385  2A 40 F1            		LD HL,[AYREGS+AR_TonA]
     826.  00:7388  CD 99 71            		CALL CHREGS
     827.  00:738B  22 40 F1            		LD [AYREGS+AR_TonA],HL
     828.  00:738E  3A 4A F1            		LD A,[AYREGS+AR_AmplC]
     829.  00:7391  32 48 F1            		LD [AYREGS+AR_AmplA],A
     830.  00:7394  DD 21 40 F0         		LD IX,ChanB
     831.  00:7398  2A 42 F1            		LD HL,[AYREGS+AR_TonB]
     832.  00:739B  CD 99 71            		CALL CHREGS
     833.  00:739E  22 42 F1            		LD [AYREGS+AR_TonB],HL
     834.  00:73A1  3A 4A F1            		LD A,[AYREGS+AR_AmplC]
     835.  00:73A4  32 49 F1            		LD [AYREGS+AR_AmplB],A
     836.  00:73A7  DD 21 5D F0         		LD IX,ChanC
     837.  00:73AB  2A 44 F1            		LD HL,[AYREGS+AR_TonC]
     838.  00:73AE  CD 99 71            		CALL CHREGS
     839.  00:73B1  22 44 F1            		LD [AYREGS+AR_TonC],HL
     840.  00:73B4                      
     841.  00:73B4  2A 7E F0            		LD HL,[Ns_Base_AddToNs]
     842.  00:73B7  7C                  		LD A,H
     843.  00:73B8  85                  		ADD A,L
     844.  00:73B9  32 46 F1            		LD [AYREGS+AR_Noise],A
     845.  00:73BC                      
     846.  00:73BC  3A 1D F0            		LD A,[PT3_AddToEn]
     847.  00:73BF  5F                  		LD E,A
     848.  00:73C0  87                  		ADD A,A
     849.  00:73C1  9F                  		SBC A,A
     850.  00:73C2  57                  		LD D,A
     851.  00:73C3  2A 4E F1            		LD HL,[EnvBase]
     852.  00:73C6  19                  		ADD HL,DE
     853.  00:73C7  ED 5B 7B F0         		LD DE,[CurESld]
     854.  00:73CB  19                  		ADD HL,DE
     855.  00:73CC  22 4B F1            		LD [AYREGS+AR_Env],HL
     856.  00:73CF                      
     857.  00:73CF  AF                  		XOR A
     858.  00:73D0  21 7D F0            		LD HL,CurEDel
     859.  00:73D3  B6                  		OR [HL]
     860.  00:73D4  C8                  		RET Z
     861.  00:73D5  35                  		DEC [HL]
     862.  00:73D6  C0                  		RET NZ
     863.  00:73D7  3A 1E F0            		LD A,[PT3_Env_Del]
     864.  00:73DA  77                  		LD [HL],A
     865.  00:73DB  2A 1F F0            		LD HL,[PT3_ESldAdd]
     866.  00:73DE  19                  		ADD HL,DE
     867.  00:73DF  22 7B F0            		LD [CurESld],HL
     868.  00:73E2  C9                  		RET
     869.  00:73E3                      
     870.  00:73E3  AF                  PT3_ROUT:	XOR A
     871.  00:73E4                      	
     872.  00:73E4                      ROUT_A0:	; --- FIXES BITS 6 AND 7 OF MIXER ---
     873.  00:73E4  21 47 F1            		LD	HL,AYREGS+AR_Mixer
     874.  00:73E7  CB FE               		set	7,[hl]
     875.  00:73E9  CB B6               		res	6,[hl]
     876.  00:73EB                      
     877.  00:73EB  0E A0               		LD C,$A0
     878.  00:73ED  21 40 F1            		LD HL,AYREGS
     879.  00:73F0  ED 79               .LOUT:		OUT [C],A
     880.  00:73F2  0C                  		INC C
     881.  00:73F3  ED A3               		OUTI 
     882.  00:73F5  0D                  		DEC C
     883.  00:73F6  3C                  		INC A
     884.  00:73F7  FE 0D               		CP 13
     885.  00:73F9  20 F5               		JR NZ,.LOUT
     886.  00:73FB  ED 79               		OUT [C],A
     887.  00:73FD  7E                  		LD A,[HL]
     888.  00:73FE  A7                  		AND A
     889.  00:73FF  F8                  		RET M
     890.  00:7400  0C                  		INC C
     891.  00:7401  ED 79               		OUT [C],A
     892.  00:7403  C9                  		RET
     893.  00:7404                      
     894.  00:7404  64                  NT_DATA:	db (T_NEW_0-T1_)*2
     895.  00:7405  2A                  		db TCNEW_0-T_
     896.  00:7406  65                  		db (T_OLD_0-T1_)*2+1
     897.  00:7407  00                  		db TCOLD_0-T_
     898.  00:7408  01                  		db (T_NEW_1-T1_)*2+1
     899.  00:7409  0C                  		db TCNEW_1-T_
     900.  00:740A  01                  		db (T_OLD_1-T1_)*2+1
     901.  00:740B  0C                  		db TCOLD_1-T_
     902.  00:740C  94                  		db (T_NEW_2-T1_)*2
     903.  00:740D  35                  		db TCNEW_2-T_
     904.  00:740E  30                  		db (T_OLD_2-T1_)*2
     905.  00:740F  0E                  		db TCOLD_2-T_
     906.  00:7410  60                  		db (T_NEW_3-T1_)*2
     907.  00:7411  20                  		db TCNEW_3-T_
     908.  00:7412  60                  		db (T_OLD_3-T1_)*2
     909.  00:7413  21                  		db TCOLD_3-T_
     910.  00:7414                      
     911.  00:7414                      T_:
     912.  00:7414                      
     913.  00:7414                      TCOLD_0:	db $00+1,$04+1,$08+1,$0A+1,$0C+1,$0E+1,$12+1,$14+1
     913.  00:7414  01 05 09 0B 0D 0F 13 15 
     914.  00:741C  19 25 3D 00         		db $18+1,$24+1,$3C+1,0
     915.  00:7420                      TCNEW_1:	
     916.  00:7420  5D 00               TCOLD_1:	db $5C+1,0
     917.  00:7422                      TCOLD_2:	db $30+1,$36+1,$4C+1,$52+1,$5E+1,$70+1,$82,$8C,$9C
     917.  00:7422  31 37 4D 53 5F 71 82 8C 9C 
     918.  00:742B                      		db $9E,$A0,$A6,$A8,$AA,$AC,$AE,$AE,0
     918.  00:742B  9E A0 A6 A8 AA AC AE AE 00 
     919.  00:7434  57                  TCNEW_3:	db $56+1
     920.  00:7435                      TCOLD_3:	db $1E+1,$22+1,$24+1,$28+1,$2C+1,$2E+1,$32+1,$BE+1,0
     920.  00:7435  1F 23 25 29 2D 2F 33 BF 00 
     921.  00:743E                      TCNEW_0:	db $1C+1,$20+1,$22+1,$26+1,$2A+1,$2C+1,$30+1,$54+1
     921.  00:743E  1D 21 23 27 2B 2D 31 55 
     922.  00:7446  BD BF 00            		db $BC+1,$BE+1,0
     923.  00:7449                      TCNEW_2:	db $1A+1,$20+1,$24+1,$28+1,$2A+1,$3A+1,$4C+1,$5E+1
     923.  00:7449  1B 21 25 29 2B 3B 4D 5F 
     924.  00:7451  BB BD BF            		db $BA+1,$BC+1,$BE+1
     925.  00:7454                      
     926.  00:7454  00 01 00 90         EMPTYSAMORN: 	db 0,1,0,$90 ;delete $90 if you don't need default sample
     927.  00:7458                      
     928.  00:7458                      T_PACK:		; First 12 values of tone tables (packed)
     929.  00:7458  0D                  		db ($06EC*2)/256
     930.  00:7459  D8                  		db #d8
     931.  00:745A  69                  		db $0755-$06EC
     932.  00:745B  70                  		db $07C5-$0755
     933.  00:745C  76                  		db $083B-$07C5
     934.  00:745D  7D                  		db $08B8-$083B
     935.  00:745E  85                  		db $093D-$08B8
     936.  00:745F  8D                  		db $09CA-$093D
     937.  00:7460  95                  		db $0A5F-$09CA
     938.  00:7461  9D                  		db $0AFC-$0A5F
     939.  00:7462  A8                  		db $0BA4-$0AFC
     940.  00:7463  B1                  		db $0C55-$0BA4
     941.  00:7464  BB                  		db $0D10-$0C55
     942.  00:7465  0C                  		db ($066D*2)/256
     943.  00:7466  DA                  		db #da
     944.  00:7467  62                  		db $06CF-$066D
     945.  00:7468  68                  		db $0737-$06CF
     946.  00:7469  6D                  		db $07A4-$0737
     947.  00:746A  75                  		db $0819-$07A4
     948.  00:746B  7B                  		db $0894-$0819
     949.  00:746C  83                  		db $0917-$0894
     950.  00:746D  8A                  		db $09A1-$0917
     951.  00:746E  92                  		db $0A33-$09A1
     952.  00:746F  9C                  		db $0ACF-$0A33
     953.  00:7470  A4                  		db $0B73-$0ACF
     954.  00:7471  AF                  		db $0C22-$0B73
     955.  00:7472  B8                  		db $0CDA-$0C22
     956.  00:7473  0E                  		db ($0704*2)/256
     957.  00:7474  08                  		db #08
     958.  00:7475  6A                  		db $076E-$0704
     959.  00:7476  72                  		db $07E0-$076E
     960.  00:7477  78                  		db $0858-$07E0
     961.  00:7478  7E                  		db $08D6-$0858
     962.  00:7479  86                  		db $095C-$08D6
     963.  00:747A  90                  		db $09EC-$095C
     964.  00:747B  96                  		db $0A82-$09EC
     965.  00:747C  A0                  		db $0B22-$0A82
     966.  00:747D  AA                  		db $0BCC-$0B22
     967.  00:747E  B4                  		db $0C80-$0BCC
     968.  00:747F  BE                  		db $0D3E-$0C80
     969.  00:7480  0F                  		db ($07E0*2)/256
     970.  00:7481  C0                  		db #c0
     971.  00:7482  78                  		db $0858-$07E0
     972.  00:7483  88                  		db $08E0-$0858
     973.  00:7484  80                  		db $0960-$08E0
     974.  00:7485  90                  		db $09F0-$0960
     975.  00:7486  98                  		db $0A88-$09F0
     976.  00:7487  A0                  		db $0B28-$0A88
     977.  00:7488  B0                  		db $0BD8-$0B28
     978.  00:7489  A8                  		db $0C80-$0BD8
     979.  00:748A  E0                  		db $0D60-$0C80
     980.  00:748B  B0                  		db $0E10-$0D60
     981.  00:748C  E8                  		db $0EF8-$0E10
    7112   00:748D                      		include		"ayFX-ROM_sjasm.asm"								;incluye el codigo del reproductor AY (efectos)
       1.  00:748D                      		; --- ayFX REPLAYER v1.31 ---
       2.  00:748D                      
       3.  00:748D                      		; --- v1.31	Fixed bug on previous version, only PSG channel C worked
       4.  00:748D                      		; --- v1.3	Fixed volume and Relative volume versions on the same file, conditional compilation
       5.  00:748D                      		; ---		Support for dynamic or fixed channel allocation
       6.  00:748D                      		; --- v1.2f/r	ayFX bank support
       7.  00:748D                      		; --- v1.11f/r	If a frame volume is zero then no AYREGS update
       8.  00:748D                      		; --- v1.1f/r	Fixed volume for all ayFX streams
       9.  00:748D                      		; --- v1.1	Explicit priority (as suggested by AR)
      10.  00:748D                      		; --- v1.0f	Bug fixed (error when using noise)
      11.  00:748D                      		; --- v1.0	Initial release
      12.  00:748D                      
      13.  00:748D                      		; --- DEFINE AYFXRELATIVE AS 0 FOR FIXED VOLUME VERSION ---
      14.  00:748D                      		; --- DEFINE AYFXRELATIVE AS 1 FOR RELATIVE VOLUME VERSION ---
      15.  00:748D  (00:0000)           AYFXRELATIVE equ 0
      16.  00:748D                      
      17.  00:748D                      ayFX_SETUP:																; ---          ayFX replayer setup          ---
      18.  00:748D                      																		; --- INPUT: HL -> pointer to the ayFX bank ---
      19.  00:748D  22 41 F2            		ld	[ayFX_BANK],hl												; Current ayFX bank
      20.  00:7490  3E 01               		ld	a,1															; a:=0
      21.  00:7492  32 40 F2            		ld	[ayFX_MODE],a												; Initial mode: fixed channel
      22.  00:7495  3C                  		inc	a															; Starting channel (=1)
      23.  00:7496  32 4A F2            		ld	[ayFX_CHANNEL],a											; Updated
      24.  00:7499                      ayFX_END:																; --- End of an ayFX stream ---
      25.  00:7499  3E FF               		ld	a,255														; Lowest ayFX priority
      26.  00:749B  32 43 F2            		ld	[ayFX_PRIORITY],a											; Priority saved (not playing ayFX stream)
      27.  00:749E  C9                  		ret																; Return
      28.  00:749F                      
      29.  00:749F                      ayFX_INIT:	; ---     INIT A NEW ayFX STREAM     ---
      30.  00:749F                      		; --- INPUT: A -> sound to be played ---
      31.  00:749F                      		; ---        C -> sound priority     ---
      32.  00:749F  C5                  		push	bc				; Store bc in stack
      33.  00:74A0  D5                  		push	de				; Store de in stack
      34.  00:74A1  E5                  		push	hl				; Store hl in stack
      35.  00:74A2                      		; --- Check if the index is in the bank ---
      36.  00:74A2  47                  		ld	b,a				; b:=a (new ayFX stream index)
      37.  00:74A3  2A 41 F2            		ld	hl,[ayFX_BANK]			; Current ayFX BANK
      38.  00:74A6  7E                  		ld	a,[hl]				; Number of samples in the bank
      39.  00:74A7  B7                  		or	a				; If zero (means 256 samples)...
      40.  00:74A8  28 06               		jr	z,.CHECK_PRI			; ...goto .CHECK_PRI
      41.  00:74AA                      		; The bank has less than 256 samples
      42.  00:74AA  78                  		ld	a,b				; a:=b (new ayFX stream index)
      43.  00:74AB  BE                  		cp	[hl]				; If new index is not in the bank...
      44.  00:74AC  3E 02               		ld	a,2				; a:=2 (error 2: Sample not in the bank)
      45.  00:74AE  30 21               		jr	nc,.INIT_END			; ...we can't init it
      46.  00:74B0                      .CHECK_PRI:	; --- Check if the new priority is lower than the current one ---
      47.  00:74B0                      		; ---   Remember: 0 = highest priority, 15 = lowest priority  ---
      48.  00:74B0  78                  		ld	a,b				; a:=b (new ayFX stream index)
      49.  00:74B1  3A 43 F2            		ld	a,[ayFX_PRIORITY]		; a:=Current ayFX stream priority
      50.  00:74B4  B9                  		cp	c				; If new ayFX stream priority is lower than current one...
      51.  00:74B5  3E 01               		ld	a,1				; a:=1 (error 1: A sample with higher priority is being played)
      52.  00:74B7  38 18               		jr	c,.INIT_END			; ...we don't start the new ayFX stream
      53.  00:74B9                      		; --- Set new priority ---
      54.  00:74B9  79                  		ld	a,c				; a:=New priority
      55.  00:74BA  E6 0F               		and	$0F				; We mask the priority
      56.  00:74BC  32 43 F2            		ld	[ayFX_PRIORITY],a		; new ayFX stream priority saved in RAM
      57.  00:74BF                      
      58.  00:74BF                      		IF ( AYFXRELATIVE == 1 )
      59.  00:74BF                    ~ 			; --- Volume adjust using PT3 volume table ---
      60.  00:74BF                    ~ 			ld	c,a				; c:=New priority (fixed)
      61.  00:74BF                    ~ 			ld	a,15				; a:=15
      62.  00:74BF                    ~ 			sub	c				; a:=15-New priority = relative volume
      63.  00:74BF                    ~ 			jr	z,.INIT_NOSOUND		; If priority is 15 -> no sound output (volume is zero)
      64.  00:74BF                    ~ 			add	a,a				; a:=a*2
      65.  00:74BF                    ~ 			add	a,a				; a:=a*4
      66.  00:74BF                    ~ 			add	a,a				; a:=a*8
      67.  00:74BF                    ~ 			add	a,a				; a:=a*16
      68.  00:74BF                    ~ 			ld	e,a				; e:=a
      69.  00:74BF                    ~ 			ld	d,0				; de:=a
      70.  00:74BF                    ~ 			ld	hl,VT_				; hl:=PT3 volume table
      71.  00:74BF                    ~ 			add	hl,de				; hl is a pointer to the relative volume table
      72.  00:74BF                    ~ 			ld	[ayFX_VT],hl			; Save pointer
      73.  00:74BF                    ~ 		ENDIF
      74.  00:74BF                      
      75.  00:74BF                      		; --- Calculate the pointer to the new ayFX stream ---
      76.  00:74BF  ED 5B 41 F2         		ld	de,[ayFX_BANK]			; de:=Current ayFX bank
      77.  00:74C3  13                  		inc	de				; de points to the increments table of the bank
      78.  00:74C4  68                  		ld	l,b				; l:=b (new ayFX stream index)
      79.  00:74C5  26 00               		ld	h,0				; hl:=b (new ayFX stream index)
      80.  00:74C7  29                  		add	hl,hl				; hl:=hl*2
      81.  00:74C8  19                  		add	hl,de				; hl:=hl+de (hl points to the correct increment)
      82.  00:74C9  5E                  		ld	e,[hl]				; e:=lower byte of the increment
      83.  00:74CA  23                  		inc	hl				; hl points to the higher byte of the correct increment
      84.  00:74CB  56                  		ld	d,[hl]				; de:=increment
      85.  00:74CC  19                  		add	hl,de				; hl:=hl+de (hl points to the new ayFX stream)
      86.  00:74CD  22 44 F2            		ld	[ayFX_POINTER],hl		; Pointer saved in RAM
      87.  00:74D0  AF                  		xor	a				; a:=0 (no errors)
      88.  00:74D1  E1                  .INIT_END:	pop	hl				; Retrieve hl from stack
      89.  00:74D2  D1                  		pop	de				; Retrieve de from stack
      90.  00:74D3  C1                  		pop	bc				; Retrieve bc from stack
      91.  00:74D4  C9                  		ret					; Return
      92.  00:74D5                      
      93.  00:74D5                      		IF ( AYFXRELATIVE == 1 )
      94.  00:74D5                    ~ .INIT_NOSOUND:	; --- Init a sample with relative volume zero -> no sound output ---
      95.  00:74D5                    ~ 			ld	a,255				; Lowest ayFX priority
      96.  00:74D5                    ~ 			ld	[ayFX_PRIORITY],a		; Priority saved (not playing ayFX stream)
      97.  00:74D5                    ~ 			jr	.INIT_END			; Jumps to .INIT_END
      98.  00:74D5                    ~ 		ENDIF
      99.  00:74D5                      
     100.  00:74D5                      ayFX_PLAY:	; --- PLAY A FRAME OF AN ayFX STREAM ---
     101.  00:74D5  3A 43 F2            		ld	a,[ayFX_PRIORITY]		; a:=Current ayFX stream priority
     102.  00:74D8  B7                  		or	a				; If priority has bit 7 on...
     103.  00:74D9  F8                  		ret	m				; ...return
     104.  00:74DA                      		; --- Calculate next ayFX channel (if needed) ---
     105.  00:74DA  3A 40 F2            		ld	a,[ayFX_MODE]			; ayFX mode
     106.  00:74DD  E6 01               		and	1				; If bit0=0 (fixed channel)...
     107.  00:74DF  28 08               		jr	z,.TAKECB			; ...skip channel changing
     108.  00:74E1  21 4A F2            		ld	hl,ayFX_CHANNEL			; Old ayFX playing channel
     109.  00:74E4  35                  		dec	[hl]				; New ayFX playing channel
     110.  00:74E5  20 02               		jr	nz,.TAKECB			; If not zero jump to .TAKECB
     111.  00:74E7  36 03               		ld	[hl],3				; If zero -> set channel 3
     112.  00:74E9                      .TAKECB:	; --- Extract control byte from stream ---
     113.  00:74E9  2A 44 F2            		ld	hl,[ayFX_POINTER]		; Pointer to the current ayFX stream
     114.  00:74EC  4E                  		ld	c,[hl]				; c:=Control byte
     115.  00:74ED  23                  		inc	hl				; Increment pointer
     116.  00:74EE                      		; --- Check if there's new tone on stream ---
     117.  00:74EE  CB 69               		bit	5,c				; If bit 5 c is off...
     118.  00:74F0  28 08               		jr	z,.CHECK_NN			; ...jump to .CHECK_NN (no new tone)
     119.  00:74F2                      		; --- Extract new tone from stream ---
     120.  00:74F2  5E                  		ld	e,[hl]				; e:=lower byte of new tone
     121.  00:74F3  23                  		inc	hl				; Increment pointer
     122.  00:74F4  56                  		ld	d,[hl]				; d:=higher byte of new tone
     123.  00:74F5  23                  		inc	hl				; Increment pointer
     124.  00:74F6  ED 53 46 F2         		ld	[ayFX_TONE],de			; ayFX tone updated
     125.  00:74FA                      .CHECK_NN:	; --- Check if there's new noise on stream ---
     126.  00:74FA  CB 71               		bit	6,c				; if bit 6 c is off...
     127.  00:74FC  28 09               		jr	z,.SETPOINTER			; ...jump to .SETPOINTER (no new noise)
     128.  00:74FE                      		; --- Extract new noise from stream ---
     129.  00:74FE  7E                  		ld	a,[hl]				; a:=New noise
     130.  00:74FF  23                  		inc	hl				; Increment pointer
     131.  00:7500  FE 20               		cp	$20				; If it's an illegal value of noise (used to mark end of stream)...
     132.  00:7502  28 95               		jr.	z,ayFX_END			; ...jump to ayFX_END
     133.  00:7504  32 48 F2            		ld	[ayFX_NOISE],a			; ayFX noise updated
     134.  00:7507                      .SETPOINTER:	; --- Update ayFX pointer ---
     135.  00:7507  22 44 F2            		ld	[ayFX_POINTER],hl		; Update ayFX stream pointer
     136.  00:750A                      		; --- Extract volume ---
     137.  00:750A  79                  		ld	a,c				; a:=Control byte
     138.  00:750B  E6 0F               		and	$0F				; lower nibble
     139.  00:750D                      
     140.  00:750D                      		IF ( AYFXRELATIVE == 1 )
     141.  00:750D                    ~ 			; --- Fix the volume using PT3 Volume Table ---
     142.  00:750D                    ~ 			ld	hl,[ayFX_VT]			; hl:=Pointer to relative volume table
     143.  00:750D                    ~ 			ld	e,a				; e:=a (ayFX volume)
     144.  00:750D                    ~ 			ld	d,0				; d:=0
     145.  00:750D                    ~ 			add	hl,de				; hl:=hl+de (hl points to the relative volume of this frame
     146.  00:750D                    ~ 			ld	a,[hl]				; a:=ayFX relative volume
     147.  00:750D                    ~ 			or	a				; If relative volume is zero...
     148.  00:750D                    ~ 		ENDIF
     149.  00:750D                      
     150.  00:750D  32 49 F2            		ld	[ayFX_VOLUME],a			; ayFX volume updated
     151.  00:7510  C8                  		ret	z				; ...return (don't copy ayFX values in to AYREGS)
     152.  00:7511                      		; -------------------------------------
     153.  00:7511                      		; --- COPY ayFX VALUES IN TO AYREGS ---
     154.  00:7511                      		; -------------------------------------
     155.  00:7511                      		; --- Set noise channel ---
     156.  00:7511  CB 79               		bit	7,c				; If noise is off...
     157.  00:7513  20 06               		jr	nz,.SETMASKS			; ...jump to .SETMASKS
     158.  00:7515  3A 48 F2            		ld	a,[ayFX_NOISE]			; ayFX noise value
     159.  00:7518  32 46 F1            		ld	[AYREGS+6],a			; copied in to AYREGS (noise channel)
     160.  00:751B                      .SETMASKS:	; --- Set mixer masks ---
     161.  00:751B  79                  		ld	a,c				; a:=Control byte
     162.  00:751C  E6 90               		and	$90				; Only bits 7 and 4 (noise and tone mask for psg reg 7)
     163.  00:751E  FE 90               		cp	$90				; If no noise and no tone...
     164.  00:7520  C8                  		ret	z				; ...return (don't copy ayFX values in to AYREGS)
     165.  00:7521                      		; --- Copy ayFX values in to ARYREGS ---
     166.  00:7521  0F                  		rrca					; Rotate a to the right (1 TIME)
     167.  00:7522  0F                  		rrca					; Rotate a to the right (2 TIMES) (OR mask)
     168.  00:7523  16 DB               		ld	d,$DB				; d:=Mask for psg mixer (AND mask)
     169.  00:7525                      		; --- Dump to correct channel ---
     170.  00:7525  21 4A F2            		ld	hl,ayFX_CHANNEL			; Next ayFX playing channel
     171.  00:7528  46                  		ld	b,[hl]				; Channel counter
     172.  00:7529                      .CHK1:		; --- Check if playing channel was 1 ---
     173.  00:7529  10 0D               		djnz	.CHK2				; Decrement and jump if channel was not 1
     174.  00:752B                      .PLAY_C:	; --- Play ayFX stream on channel C ---
     175.  00:752B  CD 5A 75            		call	.SETMIXER			; Set PSG mixer value (returning a=ayFX volume and hl=ayFX tone)
     176.  00:752E  32 4A F1            		ld	[AYREGS+10],a			; Volume copied in to AYREGS (channel C volume)
     177.  00:7531  CB 51               		bit	2,c				; If tone is off...
     178.  00:7533  C0                  		ret	nz				; ...return
     179.  00:7534  22 44 F1            		ld	[AYREGS+4],hl			; copied in to AYREGS (channel C tone)
     180.  00:7537  C9                  		ret					; Return
     181.  00:7538                      .CHK2:		; --- Check if playing channel was 2 ---
     182.  00:7538  CB 0A               		rrc	d				; Rotate right AND mask
     183.  00:753A  0F                  		rrca					; Rotate right OR mask
     184.  00:753B  10 0D               		djnz	.CHK3				; Decrement and jump if channel was not 2
     185.  00:753D                      .PLAY_B:	; --- Play ayFX stream on channel B ---
     186.  00:753D  CD 5A 75            		call	.SETMIXER			; Set PSG mixer value (returning a=ayFX volume and hl=ayFX tone)
     187.  00:7540  32 49 F1            		ld	[AYREGS+9],a			; Volume copied in to AYREGS (channel B volume)
     188.  00:7543  CB 49               		bit	1,c				; If tone is off...
     189.  00:7545  C0                  		ret	nz				; ...return
     190.  00:7546  22 42 F1            		ld	[AYREGS+2],hl			; copied in to AYREGS (channel B tone)
     191.  00:7549  C9                  		ret					; Return
     192.  00:754A                      .CHK3:		; --- Check if playing channel was 3 ---
     193.  00:754A  CB 0A               		rrc	d				; Rotate right AND mask
     194.  00:754C  0F                  		rrca					; Rotate right OR mask
     195.  00:754D                      .PLAY_A:	; --- Play ayFX stream on channel A ---
     196.  00:754D  CD 5A 75            		call	.SETMIXER			; Set PSG mixer value (returning a=ayFX volume and hl=ayFX tone)
     197.  00:7550  32 48 F1            		ld	[AYREGS+8],a			; Volume copied in to AYREGS (channel A volume)
     198.  00:7553  CB 41               		bit	0,c				; If tone is off...
     199.  00:7555  C0                  		ret	nz				; ...return
     200.  00:7556  22 40 F1            		ld	[AYREGS+0],hl			; copied in to AYREGS (channel A tone)
     201.  00:7559  C9                  		ret					; Return
     202.  00:755A                      .SETMIXER:	; --- Set PSG mixer value ---
     203.  00:755A  4F                  		ld	c,a				; c:=OR mask
     204.  00:755B  3A 47 F1            		ld	a,[AYREGS+7]			; a:=PSG mixer value
     205.  00:755E  A2                  		and	d				; AND mask
     206.  00:755F  B1                  		or	c				; OR mask
     207.  00:7560  32 47 F1            		ld	[AYREGS+7],a			; PSG mixer value updated
     208.  00:7563  3A 49 F2            		ld	a,[ayFX_VOLUME]			; a:=ayFX volume value
     209.  00:7566  2A 46 F2            		ld	hl,[ayFX_TONE]			; ayFX tone value
     210.  00:7569  C9                  		ret					; Return
     211.  00:756A                      
     212.  00:756A                      		IF ( AYFXRELATIVE == 1 )
     213.  00:756A                    ~ 			; --- UNCOMMENT THIS IF YOU DON'T USE THIS REPLAYER WITH PT3 REPLAYER ---
     214.  00:756A                    ~ 		;VT_:	.INCBIN	"VT.BIN"
     215.  00:756A                    ~ 			; --- UNCOMMENT THIS IF YOU DON'T USE THIS REPLAYER WITH PT3 REPLAYER ---
     216.  00:756A                    ~ 		ENDIF
    7113   00:756A                      
    7114   00:756A                      CANCION:
    7115   00:756A                      
    7116   00:756A  (02E1)              	incbin		"SAXSOLOPLETTER.99"										;incluye la cancion de apertura desde el modo binario
    7117   00:784B                      
    7118   00:784B                      SILENCIO:
    7119   00:784B                      	
    7120   00:784B  (001C)              	incbin		"MUTEPLETTER.99"										;para crear un mute a la música
    7121   00:7867                      	
    7122   00:7867                      MUSICA_GAMEOVER:
    7123   00:7867                      
    7124   00:7867  (013A)              	incbin		"GAMEOVERPLETTER.99"									;música de game over
    7125   00:79A1                      	
    7126   00:79A1                      ;MUSICA_FASES:
    7127   00:79A1                      
    7128   00:79A1                      ;	incbin		"FASESPLETTER.99"										;música de fases
    7129   00:79A1                      	
    7130   00:79A1                      EFECTOS_BANCO:
    7131   00:79A1                      
    7132   00:79A1  (06E0)              	incbin		"efectos.afb"											;incluye el banco de efectos
    7133   00:8081                      
    7134   00:8081                      MUSICA_MUERTO:
    7135   00:8081                      
    7136   00:8081  (0090)              	incbin		"MUERTOPLETTER.99"										;musica de muere
    7137   00:8111                      	
    7138   00:8111                      MUSICA_ENTRE_FASES:
    7139   00:8111                      
    7140   00:8111  (011E)              	incbin		"ENTRE_FASESPLETTER.99"										;musica de muere
    7141   00:822F                      		
    7142   00:822F                      	;Variables del replayer... las coloco desde aqui.
    7143   00:822F                      	;mirar que hace la directiva MAP del SJASM
    7144   00:822F  (F000)              	map		#f000
    7145   00:822F                      
    7146   00:822F                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;PT3 REPLAYER
    7147   00:822F                      
    7148   00:822F  (00:F000)           PT3_SETUP:			#1	;set bit0 to 1, if you want to play without looping
    7149   00:822F                      					;bit7 is set each time, when loop point is passed
    7150   00:822F  (00:F001)           PT3_MODADDR:		#2
    7151   00:822F  (00:F003)           PT3_CrPsPtr:		#2
    7152   00:822F  (00:F005)           PT3_SAMPTRS:		#2
    7153   00:822F  (00:F007)           PT3_OrnPtrs:		#2
    7154   00:822F  (00:F009)           PT3_PDSP:			#2
    7155   00:822F  (00:F00B)           PT3_CSP:			#2
    7156   00:822F  (00:F00D)           PT3_PSP:			#2
    7157   00:822F  (00:F00F)           PT3_PrNote:			#1
    7158   00:822F  (00:F010)           PT3_PrSlide:		#2
    7159   00:822F  (00:F012)           PT3_AdInPtA:		#2
    7160   00:822F  (00:F014)           PT3_AdInPtB:		#2
    7161   00:822F  (00:F016)           PT3_AdInPtC:		#2
    7162   00:822F  (00:F018)           PT3_LPosPtr:		#2
    7163   00:822F  (00:F01A)           PT3_PatsPtr:		#2
    7164   00:822F  (00:F01C)           PT3_Delay:			#1
    7165   00:822F  (00:F01D)           PT3_AddToEn:		#1
    7166   00:822F  (00:F01E)           PT3_Env_Del:		#1
    7167   00:822F  (00:F01F)           PT3_ESldAdd:		#2
    7168   00:822F  (00:F021)           PT3_NTL3:			#2	; AND A / NOP (note table creator)
    7169   00:822F                      
    7170   00:822F  (00:F023)           VARS:				#0
    7171   00:822F                      
    7172   00:822F  (00:F023)           ChanA:				#29			;CHNPRM_Size
    7173   00:822F  (00:F040)           ChanB:				#29			;CHNPRM_Size
    7174   00:822F  (00:F05D)           ChanC:				#29			;CHNPRM_Size
    7175   00:822F                      
    7176   00:822F                      ;GlobalVars
    7177   00:822F  (00:F07A)           DelyCnt:			#1
    7178   00:822F  (00:F07B)           CurESld:			#2
    7179   00:822F  (00:F07D)           CurEDel:			#1
    7180   00:822F  (00:F07E)           Ns_Base_AddToNs:	#0
    7181   00:822F  (00:F07E)           Ns_Base:			#1
    7182   00:822F  (00:F07F)           AddToNs:			#1
    7183   00:822F                      
    7184   00:822F  (00:F080)           NT_:				#192	; Puntero a/tabla de frecuencias
    7185   00:822F                      
    7186   00:822F  (00:F140)           AYREGS:				#0
    7187   00:822F  (00:F140)           VT_:				#14
    7188   00:822F  (00:F14E)           EnvBase:			#2
    7189   00:822F  (00:F150)           VAR0END:			#0
    7190   00:822F                      
    7191   00:822F  (00:F150)           T1_:				#0		
    7192   00:822F  (00:F150)           T_NEW_1:			#0
    7193   00:822F  (00:F150)           T_OLD_1:			#24
    7194   00:822F  (00:F168)           T_OLD_2:			#24
    7195   00:822F  (00:F180)           T_NEW_3:			#0
    7196   00:822F  (00:F180)           T_OLD_3:			#2
    7197   00:822F  (00:F182)           T_OLD_0:			#0
    7198   00:822F  (00:F182)           T_NEW_0:			#24
    7199   00:822F  (00:F19A)           T_NEW_2:			#166
    7200   00:822F                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;PT3 REPLAYER END
    7201   00:822F                      
    7202   00:822F                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ayFX REPLAYER 
    7203   00:822F  (00:F240)           ayFX_MODE:			#1			; ayFX mode
    7204   00:822F  (00:F241)           ayFX_BANK:			#2			; Current ayFX Bank
    7205   00:822F  (00:F243)           ayFX_PRIORITY:		#1			; Current ayFX stream priotity
    7206   00:822F  (00:F244)           ayFX_POINTER:		#2			; Pointer to the current ayFX stream
    7207   00:822F  (00:F246)           ayFX_TONE:			#2			; Current tone of the ayFX stream
    7208   00:822F  (00:F248)           ayFX_NOISE:			#1			; Current noise of the ayFX stream
    7209   00:822F  (00:F249)           ayFX_VOLUME:		#1			; Current volume of the ayFX stream
    7210   00:822F  (00:F24A)           ayFX_CHANNEL:		#1			; PSG channel to play the ayFX stream
    7211   00:822F                      
    7212   00:822F                      	;IF (AYFXRELATIVE == 1 ) 
    7213   00:822F                      ;ayFX_VT:	ds	2			; ayFX relative volume table pointer
    7214   00:822F                      	;ENDIF
    7215   00:822F                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ayFX REPLAYER END
    7216   00:822F                      																
    7217   00:822F                      ;CONSTANTES
    7218   00:822F                      
    7219   00:822F  (010F)              instru_caste:	incbin	"INSTRUCCIONES.DAT"
    7220   00:833E  (0113)              instru_ingle:	incbin	"INSTRUCTIONS.DAT"
    7221   00:8451  (0E2E)              pant_carga_til:	incbin	"PANTALLA_DE_CARGA_TILES.til"
    7222   00:927F  (07DE)              pant_carga_col:	incbin	"PANTALLA_DE_CARGA_TILES.col"
    7223   00:9A5D  (0128)              pant_carga:		incbin	"PANTALLA_DE_CARGA.DAT"		
    7224   00:9B85  (043F)              tiles_1:		incbin	"TILESFpletter.til"
    7225   00:9FC4  (01EC)              colores_1:		incbin	"TILESFpletter.col"
    7226   00:A1B0  (00A4)              fase_1:			incbin	"FASE_1_pletter.dat"
    7227   00:A254  (00FF)              fase_2:			incbin	"FASE_2_pletter.dat"
    7228   00:A353  (014D)              fase_3:			incbin	"FASE_3_pletter.dat"
    7229   00:A4A0  (00E9)              fase_4:			incbin	"FASE_4_pletter.dat"
    7230   00:A589  (012F)              fase_5:			incbin	"FASE_5_pletter.dat"
    7231   00:A6B8  (013D)              fase_6:			incbin	"FASE_6_pletter.dat"
    7232   00:A7F5  (00EC)              fase_7:			incbin	"FASE_7_pletter.dat"
    7233   00:A8E1  (0108)              fase_8:			incbin	"FASE_8_pletter.dat"
    7234   00:A9E9  (011B)              fase_9:			incbin	"FASE_9_pletter.dat"
    7235   00:AB04  (0115)              fase_10:		incbin	"FASE_10_pletter.dat"
    7236   00:AC19  (00D2)              FINAL:			incbin	"FINAL_TEMPLO.dat"
    7237   00:ACEB                      
    7238   00:ACEB                      sanctuary_1:	db	242,224,237,226,243,244,224,241,248,255,192,193
    7238   00:ACEB  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C1 
    7239   00:ACF7                      sanctuary_2:	db	242,224,237,226,243,244,224,241,248,255,192,194
    7239   00:ACF7  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C2 
    7240   00:AD03                      sanctuary_3:	db	242,224,237,226,243,244,224,241,248,255,192,195
    7240   00:AD03  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C3 
    7241   00:AD0F                      sanctuary_4:	db	242,224,237,226,243,244,224,241,248,255,192,196
    7241   00:AD0F  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C4 
    7242   00:AD1B                      sanctuary_5:	db	242,224,237,226,243,244,224,241,248,255,192,197
    7242   00:AD1B  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C5 
    7243   00:AD27                      sanctuary_6:	db	242,224,237,226,243,244,224,241,248,255,192,198
    7243   00:AD27  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C6 
    7244   00:AD33                      sanctuary_7:	db	242,224,237,226,243,244,224,241,248,255,192,199
    7244   00:AD33  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C7 
    7245   00:AD3F                      sanctuary_8:	db	242,224,237,226,243,244,224,241,248,255,192,200
    7245   00:AD3F  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C8 
    7246   00:AD4B                      sanctuary_9:	db	242,224,237,226,243,244,224,241,248,255,192,201
    7246   00:AD4B  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C9 
    7247   00:AD57                      sanctuary_10:	db	242,224,237,226,243,244,224,241,248,255,193,192
    7247   00:AD57  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C1 C0 
    7248   00:AD63                      
    7249   00:AD63                      sanctuario_1:	db	242,224,237,243,244,224,241,232,238,255,192,193
    7249   00:AD63  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C1 
    7250   00:AD6F                      sanctuario_2:	db	242,224,237,243,244,224,241,232,238,255,192,194
    7250   00:AD6F  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C2 
    7251   00:AD7B                      sanctuario_3:	db	242,224,237,243,244,224,241,232,238,255,192,195
    7251   00:AD7B  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C3 
    7252   00:AD87                      sanctuario_4:	db	242,224,237,243,244,224,241,232,238,255,192,196
    7252   00:AD87  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C4 
    7253   00:AD93                      sanctuario_5:	db	242,224,237,243,244,224,241,232,238,255,192,197
    7253   00:AD93  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C5 
    7254   00:AD9F                      sanctuario_6:	db	242,224,237,243,244,224,241,232,238,255,192,198
    7254   00:AD9F  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C6 
    7255   00:ADAB                      sanctuario_7:	db	242,224,237,243,244,224,241,232,238,255,192,199
    7255   00:ADAB  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C7 
    7256   00:ADB7                      sanctuario_8:	db	242,224,237,243,244,224,241,232,238,255,192,200
    7256   00:ADB7  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C8 
    7257   00:ADC3                      sanctuario_9:	db	242,224,237,243,244,224,241,232,238,255,192,201
    7257   00:ADC3  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C9 
    7258   00:ADCF                      sanctuario_10:	db	242,224,237,243,244,224,241,232,238,255,193,192
    7258   00:ADCF  F2 E0 ED F3 F4 E0 F1 E8 EE FF C1 C0 
    7259   00:ADDB                      
    7260   00:ADDB                      consejo_2:		db	195,253,225,238,236,225,224,242,253,210,253,193,253,242,244,228,235,238
    7260   00:ADDB  C3 FD E1 EE EC E1 E0 F2 FD D2 FD C1 FD F2 F4 E4 
    7260   00:ADEB  EB EE 
    7261   00:ADED                      consejo_3:		db	226, 238, 237, 3, 228, 235, 253, 209, 253, 241, 228, 239, 224, 241, 224, 253, 235, 224, 253, 228, 242, 226, 224, 235, 228, 241, 224, 253, 41, 42, 3
    7261   00:ADED  E2 EE ED 03 E4 EB FD D1 FD F1 E4 EF E0 F1 E0 FD 
    7261   00:ADFD  EB E0 FD E4 F2 E2 E0 EB E4 F1 E0 FD 29 2A 03 
    7262   00:AE0C                      				db 	253, 253, 236, 238, 233, 224, 227, 238, 253, 237, 238, 253, 224, 241, 227, 228, 241, 224, 242, 251, 253, 253, 242, 228, 226, 224, 243, 228, 253, 213, 253, 253
    7262   00:AE0C  FD FD EC EE E9 E0 E3 EE FD ED EE FD E0 F1 E3 E4 
    7262   00:AE1C  F1 E0 F2 FB FD FD F2 E4 E2 E0 F3 E4 FD D5 FD FD 
    7263   00:AE2C                      				db 	253, 237, 238, 253, 243, 238, 227, 238, 242, 253, 235, 238, 242, 253, 236, 244, 241, 238, 242, 253, 242, 238, 237, 253, 232, 230, 244, 224, 235, 228, 242, 253
    7263   00:AE2C  FD ED EE FD F3 EE E3 EE F2 FD EB EE F2 FD EC F4 
    7263   00:AE3C  F1 EE F2 FD F2 EE ED FD E8 E6 F4 E0 EB E4 F2 FD 
    7264   00:AE4C                      consejo_5:		db	224, 226, 243, 232, 245, 224, 253, 235, 224, 242, 253, 228, 242, 226, 224, 235, 228, 241, 224, 242, 253, 253, 242, 228, 226, 241, 228, 243, 224, 242, 224, 227,238
    7264   00:AE4C  E0 E2 F3 E8 F5 E0 FD EB E0 F2 FD E4 F2 E2 E0 EB 
    7264   00:AE5C  E4 F1 E0 F2 FD FD F2 E4 E2 F1 E4 F3 E0 F2 E0 E3 
    7264   00:AE6C  EE 
    7265   00:AE6D                      consejo_7:		db	228, 235, 253, 225, 238, 236, 225, 228, 241, 238, 253, 243, 228, 253, 236, 238, 233, 224, 241, 224, 253, 227, 228, 236, 224, 242, 232, 224, 227, 238
    7265   00:AE6D  E4 EB FD E1 EE EC E1 E4 F1 EE FD F3 E4 FD EC EE 
    7265   00:AE7D  E9 E0 F1 E0 FD E3 E4 EC E0 F2 E8 E0 E3 EE 
    7266   00:AE8B                      consejo_10:		db	228, 237, 226, 232, 228, 237, 227, 228, 253, 235, 224, 253, 235, 244, 249, 253, 239, 224, 241, 224, 253, 239, 238, 227, 228, 241, 253, 245, 228, 241
    7266   00:AE8B  E4 ED E2 E8 E4 ED E3 E4 FD EB E0 FD EB F4 F9 FD 
    7266   00:AE9B  EF E0 F1 E0 FD EF EE E3 E4 F1 FD F5 E4 F1 
    7267   00:AEA9                      advice_2:		db	195,253,225,238,236,225,242,253,253,210,253,193,253,229,235,238,238,241
    7267   00:AEA9  C3 FD E1 EE EC E1 F2 FD FD D2 FD C1 FD E5 EB EE 
    7267   00:AEB9  EE F1 
    7268   00:AEBB                      advice_3:		db	246, 232, 243, 231, 253, 209, 253, 253, 241, 228, 239, 224, 232, 241, 253, 253, 243, 231, 228, 253, 253, 235, 224, 227, 227, 228, 241, 253, 41, 42
    7268   00:AEBB  F6 E8 F3 E7 FD D1 FD FD F1 E4 EF E0 E8 F1 FD FD 
    7268   00:AECB  F3 E7 E4 FD FD EB E0 E3 E3 E4 F1 FD 29 2A 
    7269   00:AED9                      				db 	253, 253, 246, 228, 243, 253, 248, 238, 244, 253, 226, 224, 237, 214, 243, 253, 225, 244, 241, 237, 251, 253, 225, 228, 253, 227, 241, 248, 253, 213, 253, 253
    7269   00:AED9  FD FD F6 E4 F3 FD F8 EE F4 FD E2 E0 ED D6 F3 FD 
    7269   00:AEE9  E1 F4 F1 ED FB FD E1 E4 FD E3 F1 F8 FD D5 FD FD 
    7270   00:AEF9                      				db 	253, 237, 238, 243, 253, 224, 235, 235, 253, 253, 246, 224, 235, 235, 242, 253, 253, 224, 241, 228, 253, 253, 243, 231, 228, 253, 253, 242, 224, 236, 228, 253
    7270   00:AEF9  FD ED EE F3 FD E0 EB EB FD FD F6 E0 EB EB F2 FD 
    7270   00:AF09  FD E0 F1 E4 FD FD F3 E7 E4 FD FD F2 E0 EC E4 FD 
    7271   00:AF19                      advice_5:		db	224, 226, 243, 232, 245, 224, 243, 228, 253, 253, 243, 231, 228, 253, 253, 242, 228, 226, 241, 228, 243, 253, 253, 235, 224, 227, 227, 228, 241, 242
    7271   00:AF19  E0 E2 F3 E8 F5 E0 F3 E4 FD FD F3 E7 E4 FD FD F2 
    7271   00:AF29  E4 E2 F1 E4 F3 FD FD EB E0 E3 E3 E4 F1 F2 
    7272   00:AF37                      advice_7:		db	229, 232, 241, 228, 236, 224, 237, 253, 246, 232, 235, 235, 253, 246, 228, 243, 253, 248, 238, 244, 253, 243, 238, 238, 253, 253, 236, 244, 226, 231
    7272   00:AF37  E5 E8 F1 E4 EC E0 ED FD F6 E8 EB EB FD F6 E4 F3 
    7272   00:AF47  FD F8 EE F4 FD F3 EE EE FD FD EC F4 E2 E7 
    7273   00:AF55                      advice_10:		db	243, 244, 241, 237, 253, 253, 238, 237, 253, 253, 243, 231, 228, 253, 253, 235, 232, 230, 231, 243, 253, 253, 243, 238, 253, 253, 253, 242, 228, 228
    7273   00:AF55  F3 F4 F1 ED FD FD EE ED FD FD F3 E7 E4 FD FD EB 
    7273   00:AF65  E8 E6 E7 F3 FD FD F3 EE FD FD FD F2 E4 E4 
    7274   00:AF73                      
    7275   00:AF73                      lo_has_logrado:	db	235,238,253,231,224,242,253,235,238,230,241,224,227,238,251,253,228,242,243,224,242,253,236,244,241,232,228,237,227,238,252
    7275   00:AF73  EB EE FD E7 E0 F2 FD EB EE E6 F1 E0 E3 EE FB FD 
    7275   00:AF83  E4 F2 F3 E0 F2 FD EC F4 F1 E8 E4 ED E3 EE FC 
    7276   00:AF92                      felicidades:	db	212,253,212,253,229,253,228,253,235,253,232,253,226,253,232,253,227,253,224,253,227,253,228,253,242,253,252,253,252,253
    7276   00:AF92  D4 FD D4 FD E5 FD E4 FD EB FD E8 FD E2 FD E8 FD 
    7276   00:AFA2  E3 FD E0 FD E3 FD E4 FD F2 FD FC FD FC FD 
    7277   00:AFB0                      camino_a:		db	226,224,236,232,237,238,253,224,253,244,237,253,237,244,228,245,238,253,253,242,224,237,243,244,224,241,232,238
    7277   00:AFB0  E2 E0 EC E8 ED EE FD E0 FD F4 ED FD ED F4 E4 F5 
    7277   00:AFC0  EE FD FD F2 E0 ED F3 F4 E0 F1 E8 EE 
    7278   00:AFCC  (0026)              blanco:			incbin	"BLANCO_pletter.DAT"
    7279   00:AFF2  (0096)              entre_fases:	incbin	"ENTRESAN.DAT"
    7280   00:B088  (0024)              marcador:		incbin	"marcador_pletter.dat"
    7281   00:B0AC  (000D)              trofeos:		incbin	"trofeos_pletter.dat"
    7282   00:B0B9  (0398)              sprites:		incbin	"sprites_pletter.dat"
    7283   00:B451                      
    7284   00:B451                      sprites2:		; --- BOMBERO DERECHA QUIETO
    7285   00:B451                      				; color 1
    7286   00:B451                      				DB $00,$03,$07,$1F,$04,$05,$06,$0D
    7286   00:B451  00 03 07 1F 04 05 06 0D 
    7287   00:B459                      				DB $08,$18,$1B,$0C,$0F,$07,$06,$03
    7287   00:B459  08 18 1B 0C 0F 07 06 03 
    7288   00:B461                      				DB $00,$00,$90,$E0,$80,$00,$00,$00
    7288   00:B461  00 00 90 E0 80 00 00 00 
    7289   00:B469                      				DB $80,$F0,$C0,$80,$80,$00,$00,$00
    7289   00:B469  80 F0 C0 80 80 00 00 00 
    7290   00:B471                      				; color 9
    7291   00:B471                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7291   00:B471  00 00 00 00 00 00 00 00 
    7292   00:B479                      				DB $00,$00,$00,$00,$00,$03,$02,$00
    7292   00:B479  00 00 00 00 00 03 02 00 
    7293   00:B481                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7293   00:B481  00 00 00 00 00 00 00 00 
    7294   00:B489                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7294   00:B489  00 00 00 00 00 00 00 00 
    7295   00:B491                      				; color 13
    7296   00:B491                      				DB $02,$07,$07,$04,$03,$00,$00,$00
    7296   00:B491  02 07 07 04 03 00 00 00 
    7297   00:B499                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7297   00:B499  00 00 00 00 00 00 00 00 
    7298   00:B4A1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7298   00:B4A1  00 00 00 00 00 00 00 00 
    7299   00:B4A9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7299   00:B4A9  00 00 00 00 00 00 00 00 
    7300   00:B4B1                      				; 
    7301   00:B4B1                      				; --- BOMBERO DERECHA ANDANDO
    7302   00:B4B1                      				; color 1
    7303   00:B4B1                      				DB $00,$00,$03,$07,$1F,$04,$05,$06
    7303   00:B4B1  00 00 03 07 1F 04 05 06 
    7304   00:B4B9                      				DB $0D,$08,$18,$1B,$0C,$2F,$51,$00
    7304   00:B4B9  0D 08 18 1B 0C 2F 51 00 
    7305   00:B4C1                      				DB $00,$00,$00,$90,$E0,$80,$00,$00
    7305   00:B4C1  00 00 00 90 E0 80 00 00 
    7306   00:B4C9                      				DB $00,$80,$F0,$C0,$80,$80,$40,$80
    7306   00:B4C9  00 80 F0 C0 80 80 40 80 
    7307   00:B4D1                      				; color 9
    7308   00:B4D1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7308   00:B4D1  00 00 00 00 00 00 00 00 
    7309   00:B4D9                      				DB $00,$00,$00,$00,$00,$00,$03,$02
    7309   00:B4D9  00 00 00 00 00 00 03 02 
    7310   00:B4E1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7310   00:B4E1  00 00 00 00 00 00 00 00 
    7311   00:B4E9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7311   00:B4E9  00 00 00 00 00 00 00 00 
    7312   00:B4F1                      				; color 13
    7313   00:B4F1                      				DB $00,$02,$07,$07,$04,$03,$00,$00
    7313   00:B4F1  00 02 07 07 04 03 00 00 
    7314   00:B4F9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7314   00:B4F9  00 00 00 00 00 00 00 00 
    7315   00:B501                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7315   00:B501  00 00 00 00 00 00 00 00 
    7316   00:B509                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7316   00:B509  00 00 00 00 00 00 00 00 
    7317   00:B511                      				; 
    7318   00:B511                      				; --- BOMBERO IZQUIERDA QUIETO
    7319   00:B511                      				; color 1
    7320   00:B511                      				DB $00,$00,$09,$07,$01,$00,$00,$00
    7320   00:B511  00 00 09 07 01 00 00 00 
    7321   00:B519                      				DB $01,$0F,$03,$01,$01,$00,$00,$00
    7321   00:B519  01 0F 03 01 01 00 00 00 
    7322   00:B521                      				DB $00,$C0,$E0,$F8,$20,$A0,$60,$B0
    7322   00:B521  00 C0 E0 F8 20 A0 60 B0 
    7323   00:B529                      				DB $10,$18,$D8,$30,$F0,$E0,$60,$C0
    7323   00:B529  10 18 D8 30 F0 E0 60 C0 
    7324   00:B531                      				; color 9
    7325   00:B531                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7325   00:B531  00 00 00 00 00 00 00 00 
    7326   00:B539                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7326   00:B539  00 00 00 00 00 00 00 00 
    7327   00:B541                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7327   00:B541  00 00 00 00 00 00 00 00 
    7328   00:B549                      				DB $00,$00,$00,$00,$00,$c0,$40,$00
    7328   00:B549  00 00 00 00 00 C0 40 00 
    7329   00:B551                      				; color 13
    7330   00:B551                      sprites3:		DB $00,$00,$00,$00,$00,$00,$00,$00
    7330   00:B551  00 00 00 00 00 00 00 00 
    7331   00:B559                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7331   00:B559  00 00 00 00 00 00 00 00 
    7332   00:B561                      				DB $40,$e0,$e0,$20,$c0,$00,$00,$00
    7332   00:B561  40 E0 E0 20 C0 00 00 00 
    7333   00:B569                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7333   00:B569  00 00 00 00 00 00 00 00 
    7334   00:B571                      				; 
    7335   00:B571                      				; --- BOMBERO IZQUIERDA ANDANDO
    7336   00:B571                      				; color 1
    7337   00:B571                      				DB $00,$00,$00,$09,$07,$01,$00,$00
    7337   00:B571  00 00 00 09 07 01 00 00 
    7338   00:B579                      				DB $00,$01,$0F,$03,$01,$01,$02,$01
    7338   00:B579  00 01 0F 03 01 01 02 01 
    7339   00:B581                      				DB $00,$00,$C0,$E0,$F8,$20,$A0,$60
    7339   00:B581  00 00 C0 E0 F8 20 A0 60 
    7340   00:B589                      				DB $B0,$10,$18,$D8,$30,$F4,$8A,$00
    7340   00:B589  B0 10 18 D8 30 F4 8A 00 
    7341   00:B591                      				; color 9
    7342   00:B591                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7342   00:B591  00 00 00 00 00 00 00 00 
    7343   00:B599                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7343   00:B599  00 00 00 00 00 00 00 00 
    7344   00:B5A1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7344   00:B5A1  00 00 00 00 00 00 00 00 
    7345   00:B5A9                      				DB $00,$00,$00,$00,$00,$00,$c0,$40
    7345   00:B5A9  00 00 00 00 00 00 C0 40 
    7346   00:B5B1                      				; color 13
    7347   00:B5B1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7347   00:B5B1  00 00 00 00 00 00 00 00 
    7348   00:B5B9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7348   00:B5B9  00 00 00 00 00 00 00 00 
    7349   00:B5C1                      				DB $00,$40,$e0,$e0,$20,$c0,$00,$00
    7349   00:B5C1  00 40 E0 E0 20 C0 00 00 
    7350   00:B5C9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7350   00:B5C9  00 00 00 00 00 00 00 00 
    7351   00:B5D1                      				; 
    7352   00:B5D1                      				; --- BOMBERO SUBIENDO 1
    7353   00:B5D1                      				; color 1
    7354   00:B5D1                      				DB $00,$03,$0F,$03,$03,$31,$2A,$2C
    7354   00:B5D1  00 03 0F 03 03 31 2A 2C 
    7355   00:B5D9                      				DB $20,$38,$17,$A0,$7E,$21,$00,$00
    7355   00:B5D9  20 38 17 A0 7E 21 00 00 
    7356   00:B5E1                      				DB $00,$C0,$F0,$C0,$C3,$85,$5A,$34
    7356   00:B5E1  00 C0 F0 C0 C3 85 5A 34 
    7357   00:B5E9                      				DB $48,$90,$20,$10,$08,$E5,$16,$0C
    7357   00:B5E9  48 90 20 10 08 E5 16 0C 
    7358   00:B5F1                      				; color 9
    7359   00:B5F1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7359   00:B5F1  00 00 00 00 00 00 00 00 
    7360   00:B5F9                      				DB $00,$00,$00,$00,$04,$30,$00,$00
    7360   00:B5F9  00 00 00 00 04 30 00 00 
    7361   00:B601                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7361   00:B601  00 00 00 00 00 00 00 00 
    7362   00:B609                      				DB $00,$00,$00,$00,$23,$00,$00,$00
    7362   00:B609  00 00 00 00 23 00 00 00 
    7363   00:B611                      				
    7364   00:B611                      				; color 13
    7365   00:B611                      sprites4:		DB $13,$1f,$07,$08,$1f,$01,$00,$00
    7365   00:B611  13 1F 07 08 1F 01 00 00 
    7366   00:B619                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7366   00:B619  00 00 00 00 00 00 00 00 
    7367   00:B621                      				DB $c8,$b0,$60,$e0,$e0,$f0,$18,$08
    7367   00:B621  C8 B0 60 E0 E0 F0 18 08 
    7368   00:B629                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7368   00:B629  00 00 00 00 00 00 00 00 
    7369   00:B631                      				; 
    7370   00:B631                      				; --- BOMBERO SUBIENDO 2
    7371   00:B631                      				; color 1
    7372   00:B631                      				DB $00,$03,$0F,$03,$C3,$A1,$5A,$2C
    7372   00:B631  00 03 0F 03 C3 A1 5A 2C 
    7373   00:B639                      				DB $12,$09,$04,$08,$10,$A7,$68,$30
    7373   00:B639  12 09 04 08 10 A7 68 30 
    7374   00:B641                      				DB $00,$C0,$F0,$C0,$C0,$8C,$54,$34
    7374   00:B641  00 C0 F0 C0 C0 8C 54 34 
    7375   00:B649                      				DB $04,$1C,$E8,$05,$7E,$84,$00,$00
    7375   00:B649  04 1C E8 05 7E 84 00 00 
    7376   00:B651                      				; color 9
    7377   00:B651                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7377   00:B651  00 00 00 00 00 00 00 00 
    7378   00:B659                      				DB $00,$00,$00,$00,$c4,$00,$00,$00
    7378   00:B659  00 00 00 00 C4 00 00 00 
    7379   00:B661                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7379   00:B661  00 00 00 00 00 00 00 00 
    7380   00:B669                      				DB $00,$00,$00,$00,$20,$0c,$00,$00
    7380   00:B669  00 00 00 00 20 0C 00 00 
    7381   00:B671                      				; color 13
    7382   00:B671                      				DB $13,$0d,$06,$03,$07,$0f,$18,$10
    7382   00:B671  13 0D 06 03 07 0F 18 10 
    7383   00:B679                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7383   00:B679  00 00 00 00 00 00 00 00 
    7384   00:B681                      				DB $c8,$f8,$e0,$10,$f8,$80,$00,$00
    7384   00:B681  C8 F8 E0 10 F8 80 00 00 
    7385   00:B689                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7385   00:B689  00 00 00 00 00 00 00 00 
    7386   00:B691                      				
    7387   00:B691                      				; --- CHORRO IZQUIERDA
    7388   00:B691                      				; color 9
    7389   00:B691                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7389   00:B691  00 00 00 00 00 00 00 00 
    7390   00:B699                      				DB $00,$00,$10,$11,$02,$00,$00,$00
    7390   00:B699  00 00 10 11 02 00 00 00 
    7391   00:B6A1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7391   00:B6A1  00 00 00 00 00 00 00 00 
    7392   00:B6A9                      				DB $00,$00,$00,$40,$20,$00,$18,$00
    7392   00:B6A9  00 00 00 40 20 00 18 00 
    7393   00:B6B1                      				; color 15
    7394   00:B6B1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7394   00:B6B1  00 00 00 00 00 00 00 00 
    7395   00:B6B9                      				DB $00,$01,$07,$0E,$0C,$1F,$7F,$FF
    7395   00:B6B9  00 01 07 0E 0C 1F 7F FF 
    7396   00:B6C1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7396   00:B6C1  00 00 00 00 00 00 00 00 
    7397   00:B6C9                      				DB $00,$FC,$FF,$BC,$90,$F0,$E0,$F8
    7397   00:B6C9  00 FC FF BC 90 F0 E0 F8 
    7398   00:B6D1                      				; 
    7399   00:B6D1                      				; --- CHORRO DERECHA
    7400   00:B6D1                      				; color 9
    7401   00:B6D1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7401   00:B6D1  00 00 00 00 00 00 00 00 
    7402   00:B6D9                      				DB $00,$00,$00,$02,$04,$00,$18,$00
    7402   00:B6D9  00 00 00 02 04 00 18 00 
    7403   00:B6E1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7403   00:B6E1  00 00 00 00 00 00 00 00 
    7404   00:B6E9                      				DB $00,$00,$08,$88,$40,$00,$00,$00
    7404   00:B6E9  00 00 08 88 40 00 00 00 
    7405   00:B6F1                      				; color 15
    7406   00:B6F1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7406   00:B6F1  00 00 00 00 00 00 00 00 
    7407   00:B6F9                      				DB $00,$3F,$FF,$3D,$09,$0F,$07,$1F
    7407   00:B6F9  00 3F FF 3D 09 0F 07 1F 
    7408   00:B701                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7408   00:B701  00 00 00 00 00 00 00 00 
    7409   00:B709                      				DB $00,$80,$E0,$70,$30,$F8,$FE,$FF
    7409   00:B709  00 80 E0 70 30 F8 FE FF 
    7410   00:B711                      
    7411   00:B711                      				; --- prota quieto derecha bomba
    7412   00:B711                      				; color 1
    7413   00:B711                      sprites5:		DB $07,$0F,$0D,$0C,$04,$05,$06,$09
    7413   00:B711  07 0F 0D 0C 04 05 06 09 
    7414   00:B719                      				DB $08,$0C,$07,$09,$09,$05,$06,$03
    7414   00:B719  08 0C 07 09 09 05 06 03 
    7415   00:B721                      				DB $00,$80,$40,$80,$80,$00,$00,$40
    7415   00:B721  00 80 40 80 80 00 00 40 
    7416   00:B729                      				DB $E0,$E0,$C0,$00,$00,$00,$00,$00
    7416   00:B729  E0 E0 C0 00 00 00 00 00 
    7417   00:B731                      				; 
    7418   00:B731                      				; --- prota quieto derecha cuchillo
    7419   00:B731                      				; color 1
    7420   00:B731                      sprites9:		DB $07,$0F,$0D,$0C,$04,$05,$06,$09
    7420   00:B731  07 0F 0D 0C 04 05 06 09 
    7421   00:B739                      				DB $08,$0C,$07,$09,$09,$05,$06,$03
    7421   00:B739  08 0C 07 09 09 05 06 03 
    7422   00:B741                      				DB $00,$80,$40,$80,$80,$00,$00,$00
    7422   00:B741  00 80 40 80 80 00 00 00 
    7423   00:B749                      				DB $90,$A0,$C0,$00,$00,$00,$00,$00
    7423   00:B749  90 A0 C0 00 00 00 00 00 
    7424   00:B751                      				; 
    7425   00:B751                      				; --- prota andando derecha bomba
    7426   00:B751                      				; color 1
    7427   00:B751                      sprites6:		DB $00,$07,$0F,$0D,$0C,$04,$05,$06
    7427   00:B751  00 07 0F 0D 0C 04 05 06 
    7428   00:B759                      				DB $09,$08,$08,$0B,$09,$2F,$54,$08
    7428   00:B759  09 08 08 0B 09 2F 54 08 
    7429   00:B761                      				DB $00,$00,$80,$40,$80,$80,$00,$00
    7429   00:B761  00 00 80 40 80 80 00 00 
    7430   00:B769                      				DB $40,$E0,$E0,$C0,$40,$20,$E8,$10
    7430   00:B769  40 E0 E0 C0 40 20 E8 10 
    7431   00:B771                      				; 
    7432   00:B771                      				; --- prota andando derecha cuchillo
    7433   00:B771                      				; color 1
    7434   00:B771                      sprites10:		DB $00,$07,$0F,$0D,$0C,$04,$05,$06
    7434   00:B771  00 07 0F 0D 0C 04 05 06 
    7435   00:B779                      				DB $09,$08,$08,$0B,$09,$2F,$54,$08
    7435   00:B779  09 08 08 0B 09 2F 54 08 
    7436   00:B781                      				DB $00,$00,$80,$40,$80,$80,$00,$00
    7436   00:B781  00 00 80 40 80 80 00 00 
    7437   00:B789                      				DB $00,$90,$E0,$C0,$40,$20,$E8,$10
    7437   00:B789  00 90 E0 C0 40 20 E8 10 
    7438   00:B791                      				; 
    7439   00:B791                      				; --- prota quieto izquierda bomba
    7440   00:B791                      				; color 1
    7441   00:B791                      sprites7:		DB $00,$01,$02,$01,$01,$00,$00,$02
    7441   00:B791  00 01 02 01 01 00 00 02 
    7442   00:B799                      				DB $07,$07,$03,$00,$00,$00,$00,$00
    7442   00:B799  07 07 03 00 00 00 00 00 
    7443   00:B7A1                      				DB $E0,$F0,$B0,$30,$20,$A0,$60,$90
    7443   00:B7A1  E0 F0 B0 30 20 A0 60 90 
    7444   00:B7A9                      				DB $10,$30,$E0,$90,$90,$A0,$60,$C0
    7444   00:B7A9  10 30 E0 90 90 A0 60 C0 
    7445   00:B7B1                      				; 
    7446   00:B7B1                      				; --- prota quieto izquierda cuchillo
    7447   00:B7B1                      				; color 1
    7448   00:B7B1                      sprites11:		DB $00,$01,$02,$01,$01,$00,$00,$00
    7448   00:B7B1  00 01 02 01 01 00 00 00 
    7449   00:B7B9                      				DB $09,$05,$03,$00,$00,$00,$00,$00
    7449   00:B7B9  09 05 03 00 00 00 00 00 
    7450   00:B7C1                      				DB $E0,$F0,$B0,$30,$20,$A0,$60,$90
    7450   00:B7C1  E0 F0 B0 30 20 A0 60 90 
    7451   00:B7C9                      				DB $10,$30,$E0,$90,$90,$A0,$60,$C0
    7451   00:B7C9  10 30 E0 90 90 A0 60 C0 
    7452   00:B7D1                      				; 
    7453   00:B7D1                      				; --- prota andando izquierda bomba
    7454   00:B7D1                      				; color 1
    7455   00:B7D1                      sprites8:		DB $00,$00,$01,$02,$01,$01,$00,$00
    7455   00:B7D1  00 00 01 02 01 01 00 00 
    7456   00:B7D9                      				DB $02,$07,$07,$03,$02,$04,$17,$08
    7456   00:B7D9  02 07 07 03 02 04 17 08 
    7457   00:B7E1                      				DB $00,$E0,$F0,$B0,$30,$20,$A0,$60
    7457   00:B7E1  00 E0 F0 B0 30 20 A0 60 
    7458   00:B7E9                      				DB $90,$10,$10,$D0,$90,$F4,$2A,$10
    7458   00:B7E9  90 10 10 D0 90 F4 2A 10 
    7459   00:B7F1                      				; 
    7460   00:B7F1                      				; --- prota andando izquierda cuchillo
    7461   00:B7F1                      				; color 1
    7462   00:B7F1                      sprites12:		DB $00,$00,$01,$02,$01,$01,$00,$00
    7462   00:B7F1  00 00 01 02 01 01 00 00 
    7463   00:B7F9                      				DB $00,$09,$07,$03,$02,$04,$17,$08
    7463   00:B7F9  00 09 07 03 02 04 17 08 
    7464   00:B801                      				DB $00,$E0,$F0,$B0,$30,$20,$A0,$60
    7464   00:B801  00 E0 F0 B0 30 20 A0 60 
    7465   00:B809                      				DB $90,$10,$10,$D0,$90,$F4,$2A,$10
    7465   00:B809  90 10 10 D0 90 F4 2A 10 
    7466   00:B811                      
    7467   00:B811                      				; --- prota derecha quieto
    7468   00:B811                      				; color 1
    7469   00:B811                      sprites13:		DB $07,$0F,$0D,$0C,$04,$05,$06,$09
    7469   00:B811  07 0F 0D 0C 04 05 06 09 
    7470   00:B819                      				DB $08,$08,$05,$09,$09,$05,$06,$03
    7470   00:B819  08 08 05 09 09 05 06 03 
    7471   00:B821                      				DB $00,$80,$40,$80,$80,$00,$00,$00
    7471   00:B821  00 80 40 80 80 00 00 00 
    7472   00:B829                      				DB $80,$80,$00,$00,$00,$00,$00,$00
    7472   00:B829  80 80 00 00 00 00 00 00 
    7473   00:B831                      				; 
    7474   00:B831                      				; --- prota derecha andando
    7475   00:B831                      				; color 1
    7476   00:B831                      sprites14		DB $00,$07,$0F,$0D,$0C,$04,$05,$06
    7476   00:B831  00 07 0F 0D 0C 04 05 06 
    7477   00:B839                      				DB $09,$08,$08,$0A,$09,$2F,$54,$08
    7477   00:B839  09 08 08 0A 09 2F 54 08 
    7478   00:B841                      				DB $00,$00,$80,$40,$80,$80,$00,$00
    7478   00:B841  00 00 80 40 80 80 00 00 
    7479   00:B849                      				DB $00,$80,$80,$80,$40,$20,$E8,$10
    7479   00:B849  00 80 80 80 40 20 E8 10 
    7480   00:B851                      				; 
    7481   00:B851                      				; --- prota izquierda quieto
    7482   00:B851                      				; color 1
    7483   00:B851                      sprites15:		DB $00,$01,$02,$01,$01,$00,$00,$00
    7483   00:B851  00 01 02 01 01 00 00 00 
    7484   00:B859                      				DB $01,$01,$00,$00,$00,$00,$00,$00
    7484   00:B859  01 01 00 00 00 00 00 00 
    7485   00:B861                      				DB $E0,$F0,$B0,$30,$20,$A0,$60,$90
    7485   00:B861  E0 F0 B0 30 20 A0 60 90 
    7486   00:B869                      				DB $10,$10,$A0,$90,$90,$A0,$60,$C0
    7486   00:B869  10 10 A0 90 90 A0 60 C0 
    7487   00:B871                      				; 
    7488   00:B871                      				; --- prota izquierda andando
    7489   00:B871                      				; color 1
    7490   00:B871                      sprites16:		DB $00,$00,$01,$02,$01,$01,$00,$00
    7490   00:B871  00 00 01 02 01 01 00 00 
    7491   00:B879                      				DB $00,$01,$01,$01,$02,$04,$17,$08
    7491   00:B879  00 01 01 01 02 04 17 08 
    7492   00:B881                      				DB $00,$E0,$F0,$B0,$30,$20,$A0,$60
    7492   00:B881  00 E0 F0 B0 30 20 A0 60 
    7493   00:B889                      				DB $90,$10,$10,$50,$90,$F4,$2A,$10
    7493   00:B889  90 10 10 50 90 F4 2A 10 
    7494   00:B891                      				
    7495   00:B891                      				; --- petiso quieto
    7496   00:B891                      				; color 1
    7497   00:B891                      sprites_pet:	DB $01,$02,$04,$04,$0F,$10,$10,$0F
    7497   00:B891  01 02 04 04 0F 10 10 0F 
    7498   00:B899                      				DB $08,$10,$10,$10,$14,$0C,$13,$0C
    7498   00:B899  08 10 10 10 14 0C 13 0C 
    7499   00:B8A1                      				DB $C0,$30,$08,$08,$08,$90,$B0,$18
    7499   00:B8A1  C0 30 08 08 08 90 B0 18 
    7500   00:B8A9                      				DB $08,$44,$2C,$14,$04,$38,$E4,$38
    7500   00:B8A9  08 44 2C 14 04 38 E4 38 
    7501   00:B8B1                      				; color 4
    7502   00:B8B1                      				DB $00,$00,$00,$02,$00,$00,$00,$00
    7502   00:B8B1  00 00 00 02 00 00 00 00 
    7503   00:B8B9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7503   00:B8B9  00 00 00 00 00 00 00 00 
    7504   00:B8C1                      				DB $00,$00,$00,$80,$00,$00,$00,$00
    7504   00:B8C1  00 00 00 80 00 00 00 00 
    7505   00:B8C9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7505   00:B8C9  00 00 00 00 00 00 00 00 
    7506   00:B8D1                      				; color 10
    7507   00:B8D1                      				DB $00,$00,$03,$01,$00,$00,$0E,$00
    7507   00:B8D1  00 00 03 01 00 00 0E 00 
    7508   00:B8D9                      				DB $07,$0F,$0F,$0F,$0B,$03,$08,$00
    7508   00:B8D9  07 0F 0F 0F 0B 03 08 00 
    7509   00:B8E1                      				DB $00,$00,$C0,$60,$E0,$60,$40,$C0
    7509   00:B8E1  00 00 C0 60 E0 60 40 C0 
    7510   00:B8E9                      				DB $E0,$B0,$C0,$E0,$E0,$00,$10,$00
    7510   00:B8E9  E0 B0 C0 E0 E0 00 10 00 
    7511   00:B8F1                      				; color 11
    7512   00:B8F1                      				DB $00,$01,$00,$00,$00,$0F,$01,$00
    7512   00:B8F1  00 01 00 00 00 0F 01 00 
    7513   00:B8F9                      				DB $00,$00,$00,$00,$00,$00,$04,$00
    7513   00:B8F9  00 00 00 00 00 00 04 00 
    7514   00:B901                      				DB $00,$C0,$30,$10,$10,$00,$00,$20
    7514   00:B901  00 C0 30 10 10 00 00 20 
    7515   00:B909                      				DB $10,$08,$10,$08,$18,$C0,$08,$00
    7515   00:B909  10 08 10 08 18 C0 08 00 
    7516   00:B911                      				; 
    7517   00:B911                      				; --- petiso salto
    7518   00:B911                      				; color 1
    7519   00:B911                      				DB $01,$02,$04,$04,$0F,$10,$10,$0F
    7519   00:B911  01 02 04 04 0F 10 10 0F 
    7520   00:B919                      				DB $08,$10,$10,$30,$48,$3C,$07,$00
    7520   00:B919  08 10 10 30 48 3C 07 00 
    7521   00:B921                      				DB $C0,$30,$08,$08,$08,$96,$B9,$02
    7521   00:B921  C0 30 08 08 08 96 B9 02 
    7522   00:B929                      				DB $04,$1C,$04,$0C,$12,$3C,$C0,$00
    7522   00:B929  04 1C 04 0C 12 3C C0 00 
    7523   00:B931                      				; color 4
    7524   00:B931                      				DB $00,$00,$00,$02,$00,$00,$00,$00
    7524   00:B931  00 00 00 02 00 00 00 00 
    7525   00:B939                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7525   00:B939  00 00 00 00 00 00 00 00 
    7526   00:B941                      				DB $00,$00,$00,$80,$00,$00,$00,$00
    7526   00:B941  00 00 00 80 00 00 00 00 
    7527   00:B949                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7527   00:B949  00 00 00 00 00 00 00 00 
    7528   00:B951                      				; color 10
    7529   00:B951                      				DB $00,$00,$03,$01,$00,$08,$0E,$00
    7529   00:B951  00 00 03 01 00 08 0E 00 
    7530   00:B959                      				DB $07,$0F,$0F,$0F,$27,$03,$00,$00
    7530   00:B959  07 0F 0F 0F 27 03 00 00 
    7531   00:B961                      				DB $00,$00,$C0,$60,$E0,$60,$44,$F8
    7531   00:B961  00 00 C0 60 E0 60 44 F8 
    7532   00:B969                      				DB $F0,$E0,$F0,$E0,$C8,$00,$00,$00
    7532   00:B969  F0 E0 F0 E0 C8 00 00 00 
    7533   00:B971                      				; color 11
    7534   00:B971                      				DB $00,$01,$00,$00,$00,$07,$01,$00
    7534   00:B971  00 01 00 00 00 07 01 00 
    7535   00:B979                      				DB $00,$00,$00,$00,$10,$00,$00,$00
    7535   00:B979  00 00 00 00 10 00 00 00 
    7536   00:B981                      				DB $00,$C0,$30,$10,$10,$00,$02,$04
    7536   00:B981  00 C0 30 10 10 00 02 04 
    7537   00:B989                      				DB $08,$00,$08,$10,$24,$C0,$00,$00
    7537   00:B989  08 00 08 10 24 C0 00 00 
    7538   00:B991                      
    7539   00:B991                      game_over:		db	230,224,236,228,253,253,238,245,228,241
    7539   00:B991  E6 E0 EC E4 FD FD EE F5 E4 F1 
    7540   00:B99B                      se__acabo:		db	242,228,253,253,253,224,226,224,225,238
    7540   00:B99B  F2 E4 FD FD FD E0 E2 E0 E1 EE 
    7541   00:B9A5  EF E0 F4 F2 E4      pause:			db	239,224,244,242,228
    7542   00:B9AA  14 14 14 14 14      ladrillos:		db	20,20,20,20,20			;ladrillos en la zona donde se escribe el pause
    7543   00:B9AF                      
    7544   00:B9AF                      
    7545   00:B9AF                      										
    7546   00:B9AF                      empresa:		db	28,"CARAMBALAN STUDIOS  PRESENTS"					;PANTALLA DE MENU
    7546   00:B9AF  1C 43 41 52 41 4D 42 41 4C 41 4E 20 53 54 55 44 
    7546   00:B9BF  49 4F 53 20 20 50 52 45 53 45 4E 54 53 
    7547   00:B9CC                      empresa_e:		db	28,"CARAMBALAN STUDIOS  PRESENTA"
    7547   00:B9CC  1C 43 41 52 41 4D 42 41 4C 41 4E 20 53 54 55 44 
    7547   00:B9DC  49 4F 53 20 20 50 52 45 53 45 4E 54 41 
    7548   00:B9E9                      titulo_1:		db	224,"bkc  f  f bklc bc  f   f  f  baca a  l  a k  a kdc l   a  a be jkbe  a  k alme l k m   m  k dc  ldkc k  l lmkc m m a   l  a  dc m  l l  m m  a a dcm   k  l   dca  m dale g  g g  de   daleprtvalhme                       qsuwl"    
    7548   00:B9E9  E0 62 6B 63 20 20 66 20 20 66 20 62 6B 6C 63 20 
    7548   00:B9F9  62 63 20 20 66 20 20 20 66 20 20 66 20 20 62 61 
    7548   00:BA09  63 61 20 61 20 20 6C 20 20 61 20 6B 20 20 61 20 
    7548   00:BA19  6B 64 63 20 6C 20 20 20 61 20 20 61 20 62 65 20 
    7548   00:BA29  6A 6B 62 65 20 20 61 20 20 6B 20 61 6C 6D 65 20 
    7548   00:BA39  6C 20 6B 20 6D 20 20 20 6D 20 20 6B 20 64 63 20 
    7548   00:BA49  20 6C 64 6B 63 20 6B 20 20 6C 20 6C 6D 6B 63 20 
    7548   00:BA59  6D 20 6D 20 61 20 20 20 6C 20 20 61 20 20 64 63 
    7548   00:BA69  20 6D 20 20 6C 20 6C 20 20 6D 20 6D 20 20 61 20 
    7548   00:BA79  61 20 64 63 6D 20 20 20 6B 20 20 6C 20 20 20 64 
    7548   00:BA89  63 61 20 20 6D 20 64 61 6C 65 20 67 20 20 67 20 
    7548   00:BA99  67 20 20 64 65 20 20 20 64 61 6C 65 70 72 74 76 
    7548   00:BAA9  61 6C 68 6D 65 20 20 20 20 20 20 20 20 20 20 20 
    7548   00:BAB9  20 20 20 20 20 20 20 20 20 20 20 20 71 73 75 77 
    7548   00:BAC9  6C 
    7549   00:BACA                      titulo_8:		db	32,"daalmakaklkamakamkakakamlakaalae"
    7549   00:BACA  20 64 61 61 6C 6D 61 6B 61 6B 6C 6B 61 6D 61 6B 
    7549   00:BADA  61 6D 6B 61 6B 61 6B 61 6D 6C 61 6B 61 61 6C 61 
    7549   00:BAEA  65 
    7550   00:BAEB  04 4D 45 4E 55      mensaje:		db	4,"MENU"
    7551   00:BAF0                      teclado:		db	10,"- KEYBOARD"
    7551   00:BAF0  0A 2D 20 4B 45 59 42 4F 41 52 44 
    7552   00:BAFB                      mando:			db	10,"- JOYSTICK"
    7552   00:BAFB  0A 2D 20 4A 4F 59 53 54 49 43 4B 
    7553   00:BB06                      instrucciones:	db	10,"- LANGUAGE"
    7553   00:BB06  0A 2D 20 4C 41 4E 47 55 41 47 45 
    7554   00:BB11                      teclado_e:		db	9,"- TECLADO"
    7554   00:BB11  09 2D 20 54 45 43 4C 41 44 4F 
    7555   00:BB1B                      mando_e:		db	7,"- MANDO"
    7555   00:BB1B  07 2D 20 4D 41 4E 44 4F 
    7556   00:BB23                      instruccion_e:	db	8,"- IDIOMA"
    7556   00:BB23  08 2D 20 49 44 49 4F 4D 41 
    7557   00:BB2C                      salir:			db	12,"- COVER PAGE"
    7557   00:BB2C  0C 2D 20 43 4F 56 45 52 20 50 41 47 45 
    7558   00:BB39                      salir_e:		db	9,"- PORTADA"
    7558   00:BB39  09 2D 20 50 4F 52 54 41 44 41 
    7559   00:BB43                      copyright:		db	27,"(C) CARAMBALAN STUDIOS 2018"
    7559   00:BB43  1B 28 43 29 20 43 41 52 41 4D 42 41 4C 41 4E 20 
    7559   00:BB53  53 54 55 44 49 4F 53 20 32 30 31 38 
    7560   00:BB5F                      
    7561   00:BB5F  01 6E               serp_1:			db	1,"n"
    7562   00:BB61  01 6F               serp_2:			db	1,"o"
    7563   00:BB63  01 20               nada:			db	1," "
    7564   00:BB65                      
    7565   00:BB65                      programacion:	db	12,"PROGRAMMING:"
    7565   00:BB65  0C 50 52 4F 47 52 41 4D 4D 49 4E 47 3A 
    7566   00:BB72                      musica:			db	6,"MUSIC:"
    7566   00:BB72  06 4D 55 53 49 43 3A 
    7567   00:BB79                      agradec:		db	7,"THANKS:"
    7567   00:BB79  07 54 48 41 4E 4B 53 3A 
    7568   00:BB81                      programacion_e:	db	13,"PROGRAMACION"
    7568   00:BB81  0D 50 52 4F 47 52 41 4D 41 43 49 4F 4E 
    7569   00:BB8E                      musica_e:		db	7,"MUSICA:"
    7569   00:BB8E  07 4D 55 53 49 43 41 3A 
    7570   00:BB96                      agradec_e:		db	16,"AGRADECIMIENTOS:"
    7570   00:BB96  10 41 47 52 41 44 45 43 49 4D 49 45 4E 54 4F 53 
    7570   00:BBA6  3A 
    7571   00:BBA7                      benja:			db	15,"BENJAMIN MIGUEL"
    7571   00:BBA7  0F 42 45 4E 4A 41 4D 49 4E 20 4D 49 47 55 45 4C 
    7572   00:BBB7                      manu:			db	14,"MANUEL BARROSO"
    7572   00:BBB7  0E 4D 41 4E 55 45 4C 20 42 41 52 52 4F 53 4F 
    7573   00:BBC6                      ramon:			db	32,"IMANOK            RAMON CASTILLO"
    7573   00:BBC6  20 49 4D 41 4E 4F 4B 20 20 20 20 20 20 20 20 20 
    7573   00:BBD6  20 20 20 52 41 4D 4F 4E 20 43 41 53 54 49 4C 4C 
    7573   00:BBE6  4F 
    7574   00:BBE7                      fernando1:		db	32,"JORGE ROMERO     FERNANDO GARCIA"
    7574   00:BBE7  20 4A 4F 52 47 45 20 52 4F 4D 45 52 4F 20 20 20 
    7574   00:BBF7  20 20 46 45 52 4E 41 4E 44 4F 20 47 41 52 43 49 
    7574   00:BC07  41 
    7575   00:BC08                      fernando2:		db	32,"VICTOR MARTINEZ   FERNANDO LOPEZ"
    7575   00:BC08  20 56 49 43 54 4F 52 20 4D 41 52 54 49 4E 45 5A 
    7575   00:BC18  20 20 20 46 45 52 4E 41 4E 44 4F 20 4C 4F 50 45 
    7575   00:BC28  5A 
    7576   00:BC29                      felix:			db	32,"FELIX ESPINA          JORDI ORTE"
    7576   00:BC29  20 46 45 4C 49 58 20 45 53 50 49 4E 41 20 20 20 
    7576   00:BC39  20 20 20 20 20 20 20 4A 4F 52 44 49 20 4F 52 54 
    7576   00:BC49  45 
    7577   00:BC4A                      tromax:			db	22,"DAVID F.GISBERT TROMAX"
    7577   00:BC4A  16 44 41 56 49 44 20 46 2E 47 49 53 42 45 52 54 
    7577   00:BC5A  20 54 52 4F 4D 41 58 
    7578   00:BC61                      royal:			db	15,"EVGENY SHVARYOV"
    7578   00:BC61  0F 45 56 47 45 4E 59 20 53 48 56 41 52 59 4F 56 
    7579   00:BC71                      mano_derecha:	db	13,"MANO DERECHA:"
    7579   00:BC71  0D 4D 41 4E 4F 20 44 45 52 45 43 48 41 3A 
    7580   00:BC7F                      mano_derecha_e:	db	11,"RIGHT HAND:"
    7580   00:BC7F  0B 52 49 47 48 54 20 48 41 4E 44 3A 
    7581   00:BC8B                      
    7582   00:BC8B                      letras_A:		db	#7C,#82,#82,#FE,#82,#82,#44,#00						;DEFINICION DE LETRAS
    7582   00:BC8B  7C 82 82 FE 82 82 44 00 
    7583   00:BC93                      letras_B:		db	#78,#84,#84,#F8,#84,#82,#7C,#00
    7583   00:BC93  78 84 84 F8 84 82 7C 00 
    7584   00:BC9B                      letras_C:		db	#7C,#82,#80,#80,#80,#82,#7C,#00
    7584   00:BC9B  7C 82 80 80 80 82 7C 00 
    7585   00:BCA3                      letras_D:		db	#78,#84,#82,#82,#82,#84,#78,#00
    7585   00:BCA3  78 84 82 82 82 84 78 00 
    7586   00:BCAB                      letras_E:		db	#7C,#82,#80,#FC,#80,#82,#7C,#00
    7586   00:BCAB  7C 82 80 FC 80 82 7C 00 
    7587   00:BCB3                      letras_F:		db	#7C,#82,#80,#FC,#80,#80,#40,#00
    7587   00:BCB3  7C 82 80 FC 80 80 40 00 
    7588   00:BCBB                      letras_G:		db	#7C,#82,#80,#80,#8C,#82,#7C,#00
    7588   00:BCBB  7C 82 80 80 8C 82 7C 00 
    7589   00:BCC3                      letras_H:		db	#44,#82,#82,#FE,#82,#82,#44,#00
    7589   00:BCC3  44 82 82 FE 82 82 44 00 
    7590   00:BCCB                      letras_I:		db	#7C,#92,#10,#10,#10,#92,#7C,#00
    7590   00:BCCB  7C 92 10 10 10 92 7C 00 
    7591   00:BCD3                      letras_J:		db	#7C,#92,#10,#0C,#02,#82,#7C,#00
    7591   00:BCD3  7C 92 10 0C 02 82 7C 00 
    7592   00:BCDB                      letras_K:		db	#44,#82,#84,#F8,#84,#82,#44,#00
    7592   00:BCDB  44 82 84 F8 84 82 44 00 
    7593   00:BCE3                      letras_L:		db	#40,#80,#80,#80,#80,#82,#7C,#00
    7593   00:BCE3  40 80 80 80 80 82 7C 00 
    7594   00:BCEB                      letras_M:		db	#44,#BA,#92,#82,#82,#82,#44,#00
    7594   00:BCEB  44 BA 92 82 82 82 44 00 
    7595   00:BCF3                      letras_N:		db	#44,#A2,#A2,#92,#8A,#8A,#44,#00
    7595   00:BCF3  44 A2 A2 92 8A 8A 44 00 
    7596   00:BCFB                      letras_O:		db	#7C,#82,#82,#82,#82,#82,#7C,#00
    7596   00:BCFB  7C 82 82 82 82 82 7C 00 
    7597   00:BD03                      letras_P:		db	#7C,#82,#82,#FC,#80,#80,#40,#00
    7597   00:BD03  7C 82 82 FC 80 80 40 00 
    7598   00:BD0B                      letras_Q:		db	#7C,#82,#82,#82,#9A,#8C,#7C,#00
    7598   00:BD0B  7C 82 82 82 9A 8C 7C 00 
    7599   00:BD13                      letras_R:		db	#7C,#82,#82,#FC,#82,#82,#44,#00
    7599   00:BD13  7C 82 82 FC 82 82 44 00 
    7600   00:BD1B                      letras_S:		db	#7C,#82,#80,#7C,#02,#82,#7C,#00
    7600   00:BD1B  7C 82 80 7C 02 82 7C 00 
    7601   00:BD23                      letras_T:		db	#7C,#92,#10,#10,#10,#10,#10,#00
    7601   00:BD23  7C 92 10 10 10 10 10 00 
    7602   00:BD2B                      letras_U:		db	#44,#82,#82,#82,#82,#82,#7C,#00
    7602   00:BD2B  44 82 82 82 82 82 7C 00 
    7603   00:BD33                      letras_V:		db	#44,#82,#82,#44,#44,#28,#10,#00
    7603   00:BD33  44 82 82 44 44 28 10 00 
    7604   00:BD3B                      letras_W:		db	#44,#82,#82,#82,#92,#AA,#44,#00
    7604   00:BD3B  44 82 82 82 92 AA 44 00 
    7605   00:BD43                      letras_X:		db	#44,#82,#6C,#10,#6C,#82,#44,#00
    7605   00:BD43  44 82 6C 10 6C 82 44 00 
    7606   00:BD4B                      letras_Y:		db	#44,#82,#82,#7C,#10,#10,#10,#00
    7606   00:BD4B  44 82 82 7C 10 10 10 00 
    7607   00:BD53                      letras_Z:		db	#7C,#82,#04,#38,#40,#82,#7C,#00
    7607   00:BD53  7C 82 04 38 40 82 7C 00 
    7608   00:BD5B                      
    7609   00:BD5B                      titulo_centro1:	db	#DF,#9A,#FF,#6D,#ED,#FF,#D9,#DF						;DEFINICION DE TITULO
    7609   00:BD5B  DF 9A FF 6D ED FF D9 DF 
    7610   00:BD63                      titulo_no:		db	#07,#1A,#3F,#6D,#6D,#FF,#D9,#DF
    7610   00:BD63  07 1A 3F 6D 6D FF D9 DF 
    7611   00:BD6B                      titulo_ne:		db	#E0,#98,#FE,#6C,#EC,#FF,#D9,#FF
    7611   00:BD6B  E0 98 FE 6C EC FF D9 FF 
    7612   00:BD73                      titulo_so:		db	#DF,#9A,#FF,#ED,#ED,#3F,#19,#07
    7612   00:BD73  DF 9A FF ED ED 3F 19 07 
    7613   00:BD7B                      titulo_se:		db	#DF,#9A,#FF,#6E,#EC,#FC,#D8,#E0
    7613   00:BD7B  DF 9A FF 6E EC FC D8 E0 
    7614   00:BD83                      titulo_ru:		db	#18,#1A,#7E,#6C,#6C,#FF,#D9,#DF
    7614   00:BD83  18 1A 7E 6C 6C FF D9 DF 
    7615   00:BD8B                      titulo_rd:		db	#DF,#9A,#FF,#6C,#6C,#7E,#58,#18
    7615   00:BD8B  DF 9A FF 6C 6C 7E 58 18 
    7616   00:BD93                      titulo_rr:		db	#07,#1A,#7F,#6D,#ED,#7F,#59,#07
    7616   00:BD93  07 1A 7F 6D ED 7F 59 07 
    7617   00:BD9B                      titulo_el:		db	#E0,#98,#FE,#6D,#ED,#FE,#D8,#E0
    7617   00:BD9B  E0 98 FE 6D ED FE D8 E0 
    7618   00:BDA3                      cabeza_serp:	db	#FF,#BD,#DB,#7E,#7E,#5A,#24,#18
    7618   00:BDA3  FF BD DB 7E 7E 5A 24 18 
    7619   00:BDAB                      titulo_centro2:	db	#9A,#6D,#D9,#ED,#FF,#DF,#9A,#DF
    7619   00:BDAB  9A 6D D9 ED FF DF 9A DF 
    7620   00:BDB3                      titulo_centro3:	db	#DF,#D9,#9A,#ED,#DF,#FF,#6D,#D9
    7620   00:BDB3  DF D9 9A ED DF FF 6D D9 
    7621   00:BDBB                      titulo_centro4:	db	#ED,#FF,#6D,#9A,#6D,#FF,#D9,#DF
    7621   00:BDBB  ED FF 6D 9A 6D FF D9 DF 
    7622   00:BDC3                      serpiente_1:	db	#0C,#1E,#38,#64,#60,#3C,#1E,#01
    7622   00:BDC3  0C 1E 38 64 60 3C 1E 01 
    7623   00:BDCB                      serpiente_2:	db	#18,#3C,#70,#68,#60,#3C,#1E,#01
    7623   00:BDCB  18 3C 70 68 60 3C 1E 01 
    7624   00:BDD3                      
    7625   00:BDD3                      parentesis_a:	db	#02,#04,#04,#08,#04,#04,#02,#00						;DEFINICION DE PARENTESIS, GUION Y PUNTO
    7625   00:BDD3  02 04 04 08 04 04 02 00 
    7626   00:BDDB                      parentesis_c:	db	#80,#40,#40,#20,#40,#40,#80,#00
    7626   00:BDDB  80 40 40 20 40 40 80 00 
    7627   00:BDE3                      guion:			db	#00,#00,#00,#82,#7C,#00,#00,#00
    7627   00:BDE3  00 00 00 82 7C 00 00 00 
    7628   00:BDEB                      punto:			db	#00,#00,#00,#00,#00,#60,#60,#00
    7628   00:BDEB  00 00 00 00 00 60 60 00 
    7629   00:BDF3                      
    7630   00:BDF3                      numero0:		db	#7C,#82,#A2,#92,#8A,#82,#7C,#00						;DEFINICION DE NÚMEROS Y DOS PUNTOS
    7630   00:BDF3  7C 82 A2 92 8A 82 7C 00 
    7631   00:BDFB                      numero1:		db	#00,#02,#02,#00,#02,#02,#00,#00
    7631   00:BDFB  00 02 02 00 02 02 00 00 
    7632   00:BE03                      numero2:		db	#7C,#02,#02,#7C,#80,#80,#7C,#00
    7632   00:BE03  7C 02 02 7C 80 80 7C 00 
    7633   00:BE0B                      numero3:		db	#7C,#02,#02,#7C,#02,#02,#7C,#00
    7633   00:BE0B  7C 02 02 7C 02 02 7C 00 
    7634   00:BE13                      numero4:		db	#00,#82,#82,#7C,#02,#02,#00,#00
    7634   00:BE13  00 82 82 7C 02 02 00 00 
    7635   00:BE1B                      numero5:		db	#7C,#80,#80,#7C,#02,#02,#7C,#00
    7635   00:BE1B  7C 80 80 7C 02 02 7C 00 
    7636   00:BE23                      numero6:		db	#7C,#80,#80,#7C,#82,#82,#7C,#00
    7636   00:BE23  7C 80 80 7C 82 82 7C 00 
    7637   00:BE2B                      numero7:		db	#7C,#02,#02,#00,#02,#02,#00,#00
    7637   00:BE2B  7C 02 02 00 02 02 00 00 
    7638   00:BE33                      numero8:		db	#7C,#82,#82,#7C,#82,#82,#7C,#00
    7638   00:BE33  7C 82 82 7C 82 82 7C 00 
    7639   00:BE3B                      numero9:		db	#7C,#82,#82,#7C,#02,#02,#7C,#00
    7639   00:BE3B  7C 82 82 7C 02 02 7C 00 
    7640   00:BE43                      dospuntos:		db	#00,#00,#60,#60,#00,#60,#60,#00
    7640   00:BE43  00 00 60 60 00 60 60 00 
    7641   00:BE4B                      
    7642   00:BE4B                      freeware:		DB	$3D,$21,$39,$21,$21,$20,$20,$21						;DEFINICION DE FREEWARE
    7642   00:BE4B  3D 21 39 21 21 20 20 21 
    7643   00:BE53                      				DB 	$20,$20,$2F,$00,$00,$00,$00,$00
    7643   00:BE53  20 20 2F 00 00 00 00 00 
    7644   00:BE5B                      				DB 	$CF,$28,$CE,$28,$2F,$00,$C2,$22
    7644   00:BE5B  CF 28 CE 28 2F 00 C2 22 
    7645   00:BE63                      				DB 	$2A,$2A,$94,$00,$00,$00,$00,$00
    7645   00:BE63  2A 2A 94 00 00 00 00 00 
    7646   00:BE6B                      				
    7647   00:BE6B                      				DB 	$7F,$40,$70,$40,$78,$00,$F7,$94
    7647   00:BE6B  7F 40 70 40 78 00 F7 94 
    7648   00:BE73                      				DB 	$F7,$94,$94,$00,$00,$00,$00,$00
    7648   00:BE73  F7 94 94 00 00 00 00 00 
    7649   00:BE7B                      				DB 	$FC,$00,$04,$04,$04,$00,$3C,$A0
    7649   00:BE7B  FC 00 04 04 04 00 3C A0 
    7650   00:BE83                      				DB 	$38,$A0,$BC,$00,$00,$00,$00,$00		
    7650   00:BE83  38 A0 BC 00 00 00 00 00 
    7651   00:BE8B                      
    7652   00:BE8B                      		
    7653   00:BE8B  00 (373)            		ds		#C000-$								;FIN DE LA APLICACION
    7654   00:C000                      		
    7655   00:C000                      		
    7656   00:C000                      		;VARIABLES
    7657   00:C000                      
    7658   00:C000  (00:C000)           inicio_ram:						equ	#c000
    7659   00:C000                      		
    7660   00:C000  (00:C001)           idioma:							equ	inicio_ram+1						;0 ingles 1 castellano 2 catalán
    7661   00:C000                      
    7662   00:C000  (00:C002)           petiso_que_toca:				equ	idioma+1							;0 quieto 1 saltando
    7663   00:C000  (00:C003)           petisox:						equ	petiso_que_toca+1
    7664   00:C000  (00:C004)           petisoy:						equ	petisox+1
    7665   00:C000  (00:C005)           espera_petiso:					equ	petisoy+1
    7666   00:C000  (00:C006)           espera_petiso_resta:			equ	espera_petiso+1
    7667   00:C000  (00:C007)           espera_petiso_resta_2:			equ	espera_petiso_resta+1
    7668   00:C000                      
    7669   00:C000  (00:C008)           VIEJA_INTERR:					EQU	espera_petiso_resta_2+1				;le damos 5 bytes
    7670   00:C000                      
    7671   00:C000  (00:C00D)           estado_serp:					equ	VIEJA_INTERR+5						;ESTADO Y POSICION DE LA SERPIENTE DE SELECCION
    7672   00:C000  (00:C00E)           y_serp:							equ	estado_serp+1
    7673   00:C000                      
    7674   00:C000  (00:C00F)           stick_a_usar:					equ	y_serp+1							;valor de on stick y on strig para el juego
    7675   00:C000                      
    7676   00:C000  (00:C010)           clock:							equ	stick_a_usar+1						;variables de tiempo para intercalar menu y creditos
    7677   00:C000                      
    7678   00:C000  (00:C012)           px:								equ	clock+2								;x prota
    7679   00:C000  (00:C013)           py:								equ	px+1								;y prota
    7680   00:C000  (00:C014)           puede_cambiar_de_direccion:		equ	py+1								;0 - no 1 - si
    7681   00:C000  (00:C015)           vidas_prota:					equ	puede_cambiar_de_direccion+1
    7682   00:C000  (00:C016)           color_prota:					equ	vidas_prota+1						;7 - mojado		8 - seco
    7683   00:C000  (00:C017)           color_lineas_prota:				equ	color_prota+1						;1 - seco		14 - moojado
    7684   00:C000  (00:C018)           muerto:							equ	color_lineas_prota+1				;0 muerto - 1 vivo
    7685   00:C000  (00:C019)           fase_en_la_que_esta:			equ	muerto+1							;fase en la que jugamos
    7686   00:C000  (00:C01A)           estado_prota:					equ	fase_en_la_que_esta+1				;0=quieto 1=andando 2=saltando 3=cayendo 4=subiendo/bajando
    7687   00:C000  (00:C01B)           prev_dir_prota:					equ	estado_prota+1						;hacia qué lado miraba antes el prota
    7688   00:C000  (00:C01C)           pasos_de_salto:					equ	prev_dir_prota+1					;si está saltando indica cuánto le queda para dejar de saltar
    7689   00:C000  (00:C01D)           dir_prota:						equ	pasos_de_salto+1					;0 derecha 1 izquierda
    7690   00:C000  (00:C01E)           paso:							equ	dir_prota+1							;0 recto 1 andando 2 subiendo A 3 subiendo B
    7691   00:C000  (00:C01F)           retard_anim:					equ	paso+1								;entre 0 y 9
    7692   00:C000  (00:C020)           atributos_sprite_general:		equ	retard_anim+1						;4 bytes y,x,patron,color PARA 4 SPRITES
    7693   00:C000  (00:C050)           tiene_objeto:					equ	atributos_sprite_general+48			;0=no 1=bomba 2=cuchillo
    7694   00:C000  (00:C051)           px_salida:						equ	tiene_objeto+1						;para recordar el punto de la puerta
    7695   00:C000  (00:C052)           py_salida:						equ	px_salida+1
    7696   00:C000                      
    7697   00:C000  (00:C053)           x_explosion:					equ	py_salida+1
    7698   00:C000  (00:C054)           y_explosion:					equ	x_explosion+1
    7699   00:C000  (00:C055)           estado_de_explosion:			equ	y_explosion+1						;0=no 1,2,3 sprites 22,23,24
    7700   00:C000  (00:C056)           contador_retardo_explosion:		equ	estado_de_explosion+1
    7701   00:C000                      
    7702   00:C000  (00:C057)           buffer_colisiones:				equ	contador_retardo_explosion+1		;para leer las colisiones en RAM ya que es mucho más ràpido
    7703   00:C000                      
    7704   00:C000  (00:C337)           estado_de_salto:				equ	buffer_colisiones+736				;1a8-9a20-21a28 salto derecha - 31a38-39a50-51a58 salto izquierda
    7705   00:C000  (00:C338)           mechero:						equ	estado_de_salto+1					;0 no lo tienes 1 lo tienes
    7706   00:C000  (00:C339)           gasolina:						equ	mechero+1							;0 no lo tienes 1 lo tienes
    7707   00:C000  (00:C33A)           posicion_puerta:				equ	gasolina+1							;posicion de la puerta
    7708   00:C000  (00:C33C)           ya_ha_cambiado_puerta:			equ	posicion_puerta+2					;0 está cerrada 1 está abierta
    7709   00:C000  (00:C33D)           increm:							equ	ya_ha_cambiado_puerta+1				;para borrado concreto de vram
    7710   00:C000                      
    7711   00:C000  (00:C33E)           score:							equ	increm+1							;puntos
    7712   00:C000  (00:C340)           contador_para_puntuacion:		equ	score+2								;compara con score para controlar los tiles a pintar en puntuacion
    7713   00:C000  (00:C342)           posicion_del_punto_unidades:	equ contador_para_puntuacion+2			;control tile unidades
    7714   00:C000  (00:C343)           posicion_del_punto_decenas:		equ	posicion_del_punto_unidades+1		;control tile decenas
    7715   00:C000  (00:C344)           posicion_del_punto_centenas:	equ	posicion_del_punto_decenas+1		;control tile centenas
    7716   00:C000  (00:C345)           posicion_del_punto_millares:	equ	posicion_del_punto_centenas+1		;control tile unidades de millar
    7717   00:C000  (00:C346)           cuenta_puntos_o_no:				equ	posicion_del_punto_millares+1		;0 no cuenta 1 si cuenta
    7718   00:C000  (00:C347)           cuanto_sumamos_a_score:			equ	cuenta_puntos_o_no+1				;para el contador evolutivo
    7719   00:C000                      
    7720   00:C000  (00:C348)           variables_serpiente_1:			equ	cuanto_sumamos_a_score+1			;	0	-	serp_x_1
    7721   00:C000                      																		;	1	-	serp_y_1
    7722   00:C000                      																		;	2	-	serp_direcion_1
    7723   00:C000                      																		;	3	-	serp_paso_1
    7724   00:C000                      																		;	4	-	color_serp_1
    7725   00:C000                      																		;	5	-	cont_retardo_serp_1
    7726   00:C000                      																		;	6	-	cont_retardo_serp_1_mobil
    7727   00:C000                      																		;	7	-	retardo_veloc_serp_1
    7728   00:C000                      																		;	8	-	retardo_veloc_serp_1_mobil
    7729   00:C000  (00:C351)           variables_serpiente_2:			equ	variables_serpiente_1+9				;	0	-	serp_x_2
    7730   00:C000                      																		;	1	-	serp_y_2
    7731   00:C000                      																		;	2	-	serp_direcion_2
    7732   00:C000                      																		;	3	-	serp_paso_2
    7733   00:C000                      																		;	4	-	color_serp_2
    7734   00:C000                      																		;	5	-	cont_retardo_serp_2
    7735   00:C000                      																		;	6	-	cont_retardo_serp_2_mobil
    7736   00:C000                      																		;	7	-	retardo_veloc_serp_2
    7737   00:C000                      																		;	8	-	retardo_veloc_serp_2_mobil
    7738   00:C000  (00:C35A)           variables_serpiente_3:			equ	variables_serpiente_2+9				;	0	-	serp_x_3
    7739   00:C000                      																		;	1	-	serp_y_3
    7740   00:C000                      																		;	2	-	serp_direcion_3
    7741   00:C000                      																		;	3	-	serp_paso_3
    7742   00:C000                      																		;	4	-	color_serp_3
    7743   00:C000                      																		;	5	-	cont_retardo_serp_3
    7744   00:C000                      																		;	6	-	cont_retardo_serp_3_mobil
    7745   00:C000                      																		;	7	-	retardo_veloc_serp_3
    7746   00:C000                      																		;	8	-	retardo_veloc_serp_3_mobil
    7747   00:C000  (00:C363)           variables_serpiente_4:			equ	variables_serpiente_3+9				;	0	-	serp_x_4
    7748   00:C000                      																		;	1	-	serp_y_4
    7749   00:C000                      																		;	2	-	serp_direcion_4
    7750   00:C000                      																		;	3	-	serp_paso_4
    7751   00:C000                      																		;	4	-	color_serp_4
    7752   00:C000                      																		;	5	-	cont_retardo_serp_4
    7753   00:C000                      																		;	6	-	cont_retardo_serp_4_mobil
    7754   00:C000                      																		;	7	-	retardo_veloc_serp_4
    7755   00:C000                      																		;	8	-	retardo_veloc_serp_4_mobil
    7756   00:C000  (00:C36C)           colision_cuchillo_serp_real:	equ	variables_serpiente_4+9				;	0	-	no hay colision, 1	-	si la hay															
    7757   00:C000  (00:C36D)           serp1:							equ	colision_cuchillo_serp_real+1		;serpiente 1 1-presente 0-ausente
    7758   00:C000  (00:C36E)           serp2:							equ	serp1+1								;serpiente 2 1-presente 0-ausente
    7759   00:C000  (00:C36F)           serp3:							equ	serp2+1								;serpiente 3 1-presente 0-ausente
    7760   00:C000  (00:C370)           serp4:							equ	serp3+1								;serpiente 4 1-presente 0-ausente
    7761   00:C000                      
    7762   00:C000  (00:C371)           cont_no_salta_dos_seguidas:		equ	serp4+1							;para evitar el doble salto
    7763   00:C000                      
    7764   00:C000  (00:C372)           pasamos_la_fase:				equ	cont_no_salta_dos_seguidas+1		;0 estamos jugando 1 pasamos la fase
    7765   00:C000                      
    7766   00:C000  (00:C373)           momento_lanzamiento:			equ	pasamos_la_fase+1					;0 no lanza - 1 movm 1 - 2 mov 2 - 3 en órbita
    7767   00:C000  (00:C374)           contador_poses_lanzar:			equ	momento_lanzamiento+1				;para retrasar las poses de lanzar
    7768   00:C000  (00:C375)           recordar_lo_que_habia:			equ	contador_poses_lanzar+1				;guarda el valor de lo que borra si hay que pintar circunstancialmente una cosa
    7769   00:C000  (00:C377)           dir_cuchillo:					equ	recordar_lo_que_habia+2				;la dirección hacia la que ba el cuchillo
    7770   00:C000  (00:C378)           cx:								equ	dir_cuchillo+1						;x cuchillo
    7771   00:C000  (00:C379)           cy:								equ	cx+1								;y cuchillo
    7772   00:C000                      
    7773   00:C000  (00:C37A)           escalera_activada:				equ	cy+1								;0 no - 1 si
    7774   00:C000  (00:C37B)           posicion_escalera:				equ	escalera_activada+1					;numero de tile que tiene que pintar de la escalera alternativa
    7775   00:C000  (00:C37D)           contador_escalera:				equ	posicion_escalera+2					;retardo para la construccion de la escalaera
    7776   00:C000  (00:C37E)           limite_escalera					equ	contador_escalera+1					;numero de tile en el que tiene que parar de construir
    7777   00:C000                      
    7778   00:C000                      
    7779   00:C000  (00:C380)           grifo_estado:					equ	limite_escalera+2					;0 - cerrado	1 - abierto
    7780   00:C000                      
    7781   00:C000                      
    7782   00:C000  (00:C381)           ESTADO_MUSICA:					EQU	grifo_estado+1						;0 - apagada y 1 - encendida
    7783   00:C000                      
    7784   00:C000  (00:C382)           vision_estado:					equ	ESTADO_MUSICA+1						;	1 	-	ve nada y 1 - lo ve todo
    7785   00:C000                      
    7786   00:C000  (00:C383)           colision_bombero_prota_real:	equ	vision_estado+1						;	0	-	no hay colision,	1	-	si la hay			
    7787   00:C000  (00:C384)           bombero_1:						equ	colision_bombero_prota_real+1		;	0 	- 	existe				1 	- 	no existe
    7788   00:C000  (00:C385)           bombero_control:				equ	bombero_1+1							;	0	-	x					(0 - 255)
    7789   00:C000                      																		;	1	-	y					(0 - 255)
    7790   00:C000                      																		;	2	.	velocidad			(1 - 3)
    7791   00:C000                      																		;	3	-	cada cuanto para	(0 - 255)
    7792   00:C000                      																		;	4	-	tiempo que para		(0 - 255)
    7793   00:C000                      																		;	5	-	paso				(0 - quieto	1 - andando)
    7794   00:C000                      																		;	6	-	direccion			(0 - derecha)	1 - izquierda)
    7795   00:C000                      																		;	7	-	en escalera			(0 - no	1 - si)
    7796   00:C000                      																		;	8	-	tiempo para aparecer(0-255)
    7797   00:C000                      																		;	9	-	retardo de velocidad(0-10)
    7798   00:C000                      																		;	10	-	0 - decide subir 1 - decide bajar 2- decide no utilizar
    7799   00:C000                      																		;	11	-	contador de reten para evitar que suba  y baje escaleras de forma seguida
    7800   00:C000                      																
    7801   00:C000  (00:C391)           velocidad_paseo_fases:			equ	bombero_control+12					;1 - mas tiempo para leer mensaje 2-menos tiempo
    7802   00:C000  (00:C392)           SAXOLO:							EQU	velocidad_paseo_fases+1				;MUSICA INICIO
    7803   00:C000  (00:CAC3)           GAME_OVER:						EQU	SAXOLO+1841							;MUSICA FIN PARTIDA
    7804   00:C000                      
    7805   00:C000  (00:CDB9)           MUTE:							EQU	GAME_OVER+758						;silencio musical								
    7806   00:C000  (00:CE2E)           MUERTO:							EQU	MUTE+117							;MUSICA MUERTO
    7807   00:C000  (00:CF52)           ENTRE_FASES:					equ	MUERTO+292							;MUSICA ENTRE FASES
    7808   00:C000                      

    LABELS
-------------------------------------------------
00:000000C3   CLS
00:0000006C X SCREEN0
00:0000006F   SCREEN1
00:000000D2 X MODOTEXTO
00:000000C6   LOCATE
00:000000A2   CHPUT
00:000000CC   KEYOFF
00:00000062   COLOR
00:0000F3E9   COLLETRA
00:0000F3EA   COLFONDO
00:0000F3EB   COLBORDE
00:0000009F X INPUT
00:0000F3AF X ANCHOSC0
00:0000F3AF   ANCHOSC1
00:0000F3DB   CLICKOFF
00:00000041   DISSCR
00:00000044   ENASCR
00:0000013E X RDVDP
00:00000047   WRTVDP
00:0000005C   GRABAVRAM
00:00000059 X GRABARAM
00:0000005F   SCREENX
00:000000D5   ONSTICK
00:000000D8   ONSTRIG
00:0000003B X RESET
00:0000FD9A X H.KEYI
00:0000FD9F   H.TIMI
00:00000141   SNSMAT
00:00000024   ENASLT
00:00000138   RSLREG
00:0000C000   SLOTVAR
00:0000F3DF X RG0SAV
00:0000F3E0   RG1SAV
00:0000F3E1 X RG2SAV
00:0000F3E2 X RG3SAV
00:0000F3E3 X RG4SAV
00:0000F3E4 X RG5SAV
00:0000F3E5 X RG6SAV
00:0000F3E6 X RG7SAV
00:0000F3E7 X STATFL
00:00004010   search_slotset
00:00004016   search_slot
00:00004037   START
00:00004095   PANTALLA_DE_CARGA
00:000040CC   INICIA_MUSICA
00:000040E4   petisos
00:000040F5   petiso_activity
00:00004133   petiso_a_saltar
00:00004142   registros_petiso
00:00004191   MENU
00:000041AE X PREPARA_VARIABLES_SERPIENTE
00:000041D4 X RUTINA_DE_MENU
00:0000421C X PANTALLA_DE_SELECCION
00:0000425B X menu_ingles
00:0000429E   menu_castellano
00:000042DF   rutina_colores_inicio
00:000042E1   rutina_colores
00:000042FB X contro_serpiente_a_pintar
00:00004312   control_stick_menu
00:00004325   control_strig_menu
00:0000432E X controla_tiempo_para_cambio
00:00004345   termina_secuencia_color
00:00004349   CREDITOS
00:000043BF X creditos_ingles
00:000043F5   creditos_castellano
00:00004429   controla_tiempo_para_cambio_2
00:0000443F   prepara_contador_para_menu
00:00004449   que_ha_elegido
00:00004465   idioma_a_pintar
00:0000446C X castellano
00:00004474   ingles
00:0000447B   prepara_teclado
00:00004482   prepara_mando
00:0000448A   lee_pinta_una
00:0000448C   loop_lee_pinta_una
00:00004494   controla_serpiente
00:0000449F   pinta_serpiente_1
00:000044B9   pinta_serpiente_2
00:000044D3   sube_cursor
00:000044DE   lo_sube
00:00004501   baja_cursor
00:0000450C   lo_baja
00:0000452F   limpia_sprites
00:0000455D   prepara_juego
00:00004588 X instrucciones_en_ingles
00:00004593   instrucciones_en_castellano
00:0000459C   esperando
00:000045DE   bloque_sanctuary_1
00:000045ED   bloque_sanctuary_1_esp
00:000045F0   bloque_sanctuary_1_cont
00:0000465F   bloque_sanctuary_2
00:0000466E   bloque_sanctuary_2_esp
00:00004671   bloque_sanctuary_2_cont
00:0000470D   bloque_sanctuary_3
00:0000471C   bloque_sanctuary_3_esp
00:0000471F   bloque_sanctuary_3_cont
00:00004788   bloque_sanctuary_4
00:00004797   bloque_sanctuary_4_esp
00:0000479A   bloque_sanctuary_4_cont
00:0000482D   bloque_sanctuary_5
00:0000483C   bloque_sanctuary_5_esp
00:0000483F   bloque_sanctuary_5_cont
00:000048BA   bloque_sanctuary_6
00:000048C9   bloque_sanctuary_6_esp
00:000048CC   bloque_sanctuary_6_cont
00:000049A3   bloque_sanctuary_7
00:000049B2   bloque_sanctuary_7_esp
00:000049B5   bloque_sanctuary_7_cont
00:00004A3C   bloque_sanctuary_8
00:00004A4B   bloque_sanctuary_8_esp
00:00004A4E   bloque_sanctuary_8_cont
00:00004AD5   bloque_sanctuary_9
00:00004AE4   bloque_sanctuary_9_esp
00:00004AE7   bloque_sanctuary_9_cont
00:00004B63   bloque_sanctuary_10
00:00004B72   bloque_sanctuary_10_esp
00:00004B75   bloque_sanctuary_10_cont
00:00004C11   FINAL_TEMPLO
00:00004C3F   FINAL_TEMPLO_CONTINUA
00:00004C79   animacion_final
00:00004CC0   pantalla_en_blanco
00:00004CD9   copiamos_en_pantalla_lo_de_memoria
00:00004CE5   anunciamos_el_santuario_correspondiente
00:00004CEE   variables_iguales
00:00004D63   SPRITES_PETISOS
00:00004D70   SPRITES_UNO
00:00004D80   SPRITES_DOS
00:00004DA5   SPRITES_BOMBA
00:00004DD6   SPRITES_CUCHILLO
00:00004E07   SPRITES_PROTA_NORMAL
00:00004E38   string_de_espera
00:00004E44   activa_mute
00:00004E4F   activa_musica_fases
00:00004E63   activa_musica_menu
00:00004E6E   activa_musica_muerto
00:00004E79   activa_musica_entre_fases
00:00004E84   rutina_de_esperar_un_rato
00:00004E93   PREPARACION_SCREEN_2
00:00004EA6   gran_rutina
00:00004EFC   vigila_si_cierra_puertas
00:00004F21   movimiento_forzado_en_puertas
00:00004F39   recoloca_puerta_amarilla_derecha
00:00004F6D   recoloca_puerta_amarilla_izquierda
00:00004FA1   recoloca_puerta_azul_derecha
00:00004FD5   recoloca_puerta_azul_izquierda
00:00005009   grifo_bombero
00:0000504D   revisa_bombero
00:00005063   se_activa_el_bombero
00:00005097   resta_y_camina
00:0000509E   revisa_subida_bombero
00:000050B3   continua_rvb
00:000050D5   revisa_bajada_bombero
00:000050F2   continua_rbb
00:00005114   corrige_en_escalera_bombero
00:0000511D   sigue_andando
00:00005128   decide_paso_en_escalera
00:00005133   paso_uno_escaleras
00:00005140   paso_dos_escaleras
00:0000514C   revisa_caida_bombero
00:0000519B   define_direccion_bombero
00:000051A6 X va_hacia_la_izquierda
00:000051D3 X paso_movido_izquierda
00:000051DF   paso_quieto_izquierda
00:000051EC   va_hacia_la_derecha
00:00005219 X paso_movido_derecha
00:00005224   paso_quieto_derecha
00:00005230   cambia_la_direccion_bombero
00:00005237 X cambia_a_derecha
00:0000523C   cambia_a_izquierda
00:00005242   hacia_donde_quiero_ir
00:0000525F   damos_valor_bajada_bombero
00:00005265   damos_valor_subida_bombero
00:0000526B   estamos_en_escalera
00:00005272   ultimas_variables_bombero
00:000052AD   revisa_escalera
00:00005327   se_acabo_la_escalera
00:0000532C   pulsa_una_tecla
00:00005343   una_vida_menos
00:00005355   musica_off_on
00:00005363   rutina_de_espera_tras_la_musica
00:00005366   valor_anadido_2
00:00005368   retardo_rutina_de_pausa_2
00:00005376   reconectamos_musica
00:00005380   pausa_el_juego
00:00005397   valor_anadido
00:00005399   retardo_rutina_de_pausa
00:000053A6   rutina_de_pausa
00:000053B1   reconectamos
00:000053C5   valor_anadido_1
00:000053C7   retardo_rutina_de_pausa_1
00:000053DE   repite_fase
00:00005432   termina_partida_mal
00:00005445 X termina_en_ingles
00:00005453   termina_en_castellano
00:0000545F   termina_partida_mal_continua
00:00005471   string_para_reiniciar_programa
00:00005489   inicio
00:0000548F   musica_sin_bucle
00:00005498   musica_con_bucle
00:000054A1   colision_bombero_prota
00:00005522   colisiones_serpientes_prota_1
00:00005570   espera_por_muerte
00:0000557F X on_string_de_muerte
00:00005589   colisiones_serpientes_prota_2
00:000055D9   colisiones_serpientes_prota_3
00:0000562A   colisiones_serpientes_prota_4
00:00005679   coteja_colision_prota_serpiente
00:000056B2   coteja_colision_prota_bombero
00:000056EB   colisiones_serpientes_cuchillos
00:000056F8 X colision_cuchillo_serp_1
00:0000571B   colision_cuchillo_serp_2
00:00005745   colision_cuchillo_serp_3
00:0000576F   colision_cuchillo_serp_4
00:00005798   colision_cuchillo_serpiente
00:000057F0   atributos_sprites
00:000057FD   estado_en_que_se_encuentra
00:0000582D   continua_estado
00:00005868   cambio_estado_a_subiendo_para_la_caida
00:0000586E   segunda_comprovacion_caida
00:00005881   final_rutina_sin_caida
00:00005887   caigo
00:000058B9   rectifico_caida_a_izquierda
00:000058C1   rectifico_caida_a_derecha
00:000058C9   mueve_prota
00:00005903   sube_escaleras
00:0000594F   sube_escaleras_afirmativo
00:00005973   a_mover_a_la_izquierda
00:0000597C   comprueba_derecha
00:000059A7   a_mover_a_la_derecha
00:000059AE   a_subir
00:000059BD   baja_escaleras
00:00005A07   baja_escaleras_afirmativo
00:00005A2B   a_mover_a_la_izquierda_bajando
00:00005A34   comprueba_derecha_bajando
00:00005A5C   a_mover_a_la_derecha_bajando
00:00005A63   a_bajar
00:00005A71   mueve_izquierda_prota
00:00005AB3   actualiza_el_paso_subiendo
00:00005AC1   reset_retardo_y_cambia_paso_subiendo
00:00005AD1   gira_puerta_derecha_amarilla
00:00005AFF   gira_puerta_izquierda_amarilla
00:00005B2D   gira_puerta_derecha_azul
00:00005B5B   gira_puerta_izquierda_azul
00:00005B89   mueve_derecha_prota
00:00005BC9   actualiza_el_paso
00:00005BD7   reset_retardo_y_cambia_paso
00:00005BE7   actualiza_atributos_sprite
00:00005C34   lanza_derecha_1
00:00005C38   lanza_derecha_2
00:00005C3C   mirando_izquierda
00:00005C4B   lanza_izquierda_1
00:00005C4F   lanza_izquierda_2
00:00005C53   mirar_paso
00:00005C63   todo_va_bien
00:00005C6B   ultimos_valores
00:00005C94   esta_cayendo_para_el_patron
00:00005C99   esta_subiendo_o_bajando_para_el_patron
00:00005C9D   end
00:00005CA3   set_parado
00:00005CA9   get_bloque_en_X_Y
00:00005CCE   get_bloque_en_X_Y_paravram
00:00005CE9   pone_estado_prota_a_0
00:00005CED   pose_si_esta_parado
00:00005D02   esta_en_escalera
00:00005D08   usa_objeto_o_salta
00:00005D59   reduce_el_contador_de_salto
00:00005D5E   decide_si_usa_o_salta
00:00005D94   fase_superada
00:00005DAC   apaga_los_chorros
00:00005DE8   quita_a_tu_derecha
00:00005E25   quita_a_tu_izquierda
00:00005E62   quita_a_tu_derecha_2
00:00005EB1   quita_a_tu_izquierda_2
00:00005EEE   coge_algun_objeto
00:00005F4C   activa_escalera_extra
00:00005F6B   activa_chorro_1
00:00005FB4   activa_chorro_3
00:00005FFB   moja_prota
00:00006006   activa_chorro_2
00:00006049   coge_toalla
00:0000607A   cierra_grifo
00:000060A5   coge_mechero
00:000060E2   damos_la_luz
00:00006106   coge_gasolina
00:00006143   coge_la_bomba
00:00006183   coge_cuchillo
00:000061C2   usa_bomba
00:000061DD   continuamos
00:0000622D   segunda_comprovacion_de_agujeros
00:0000624A   hace_agujero_1
00:0000626D   hace_agujero_1_2
00:00006282   hace_agujero_2
00:000062A6   hace_agujero_2_2
00:000062BB   hace_agujero_3
00:000062EA   hace_agujero_3_2
00:000062FF   usa_cuchillo
00:00006323   rutina_cuchillo_volador
00:00006346   comprueba_lugar_cuchillo
00:00006352 X lanzamos_a_la_derecha
00:0000638D   lanzamos_a_la_izquierda
00:000063C6   intento_fallido
00:000063D0   avanza_cuchillo
00:000063D8 X avanza_hacia_la_derecha
00:00006438   clava_a_la_derecha
00:00006466   continua_clava_derecha_normal
00:0000648D   avanza_hacia_la_izquierda
00:000064ED   clava_a_la_izquierda
00:0000651B   continua_clava_izquierda_normal
00:00006542   actualiza_la_puerta
00:0000658E   alegria_de_color
00:000065CD   comprueba_estado_de_explosion
00:0000660C   finalizamos_la_explosion
00:00006623   puntuacion_vidas_fase
00:00006674   fase_superior_a_diez
00:0000668A   rutina_de_puntos
00:0000669F   resetea_los_numeros
00:000066D2   termina_de_contar_puntuacion
00:0000671B   ha_saltado
00:00006726   salta_hacia_la_derecha
00:0000672C   salta_hacia_la_izquierda
00:00006732   salta_sube
00:0000674E   la_y_a_la_derecha
00:00006756   salta_resolucion
00:00006766   resetea_el_salto
00:00006770   salta_sube_izquierda
00:00006793   la_y_a_la_izquierda
00:0000679B   salta_sigue
00:000067AF   salta_sigue_izquierda
00:000067C2   salta_baja
00:000067F2   salta_baja_izquierda
00:00006822   animacion_entre_fases
00:00006827   quemando_al_prota
00:00006844   rutina_espera_quemando_1
00:00006861   rutina_espera_quemando_2
00:000068A2   rutina_pone_consejo
00:000068BD   consejos_fase_2
00:000068C4 X consejo_ing_fase_2
00:000068D3   consejo_esp_fase_2
00:000068E2   consejos_fase_3
00:000068E9 X consejo_ing_fase_3
00:000068F7   consejo_esp_fase_3
00:00006905   consejos_fase_5
00:0000690C X consejo_ing_fase_5
00:0000691A   consejo_esp_fase_5
00:00006928   consejos_fase_7
00:0000692F X consejo_ing_fase_7
00:0000693D   consejo_esp_fase_7
00:0000694B   consejos_fase_10
00:00006952 X consejo_ing_fase_10
00:00006960   consejo_esp_fase_10
00:0000696E   rutina_espera_quemando_2_cont
00:00006978   paseito_entre_fases
00:000069EE   movimiento_serpientes
00:000069F2 X analiza_serpiente_1
00:00006A00 X detalla_atributos_serp_1
00:00006A27   analiza_serpiente_2
00:00006A35 X detalla_atributos_serp_2
00:00006A5C   analiza_serpiente_3
00:00006A6A X detalla_atributos_serp_3
00:00006A91   analiza_serpiente_4
00:00006A9E X detalla_atributos_serp_4
00:00006AC6   rutina_de_movimiento_serpientes
00:00006ACD X resta_x_serpiente
00:00006AF9   suma_x_serpiente
00:00006B26   serp_cambia_paso_a_derecha
00:00006B2D   serp_cambia_paso_a_izquierda
00:00006B33   pose_serp
00:00006B4B X paso_1_serp
00:00006B52   paso_2_serp
00:00006B56   elegir_sprite_serp
00:00006B5D X suma_direccion_0_serp
00:00006B64 X suma_paso_00_serp
00:00006B69   suma_paso_01_serp
00:00006B6E   suma_direccion_1_serp
00:00006B75 X suma_paso_10_serp
00:00006B7A   suma_paso_11_serp
00:00006B7F   seis_diez
00:00006B8C   dos_diez
00:00006B99   menos_dos_diez
00:00006BA6   seis_dos
00:00006BB3   cero_cero
00:00006BBC   siete_diecisiete
00:00006BC9   menos_uno_dieciseis
00:00006BD5   dieciseis_dieciseis
00:00006BE2   menos_dos_dieciocho
00:00006BEF   catorce_diez
00:00006BFC   catorce_dos
00:00006C09   catorce_dieciocho
00:00006C16 X veinte_diez
00:00006C23   veintidos_diez
00:00006C30   menos_diez_diez
00:00006C3D   seis_dieciocho
00:00006C4A   menos_diez_dieciocho
00:00006C57   tres_quince
00:00006C64   tres_dos
00:00006C71   cero_dieciocho
00:00006C7C   ocho_dieciocho
00:00006C89   ocho_uno
00:00006C95   dieciseis_quince
00:00006CA2   dieciseis_dos
00:00006CAF   uno_menos_cuatro
00:00006CBB   menos_uno_quince
00:00006CC7   menos_uno_dos
00:00006CD3   pinta_en_pantalla
00:00006CE6   efecto_sonido
00:00006CEB   depack_VRAM
00:00006D18   literal
00:00006D1D   loop
00:00006D26 X getlen
00:00006D2C   lus
00:00006D49   lenok
00:00006D56   mode7
00:00006D5C   mode6
00:00006D62   mode5
00:00006D68   mode4
00:00006D6E   mode3
00:00006D74   mode2
00:00006D84   offsok
00:00006D8F   offsok.loop
00:00006DB1   getbit
00:00006DB5   getbitexx
00:00006DBB   Depack_out
00:00006DBD   modes
00:00006DCB   depack
00:00006DCB X unpack
00:00006DEF   pletter.literal
00:00006DF1   pletter.loop
00:00006DFA X pletter.getlen
00:00006E00   pletter.getlen.lus
00:00006E1B   pletter.getlen.lenok
00:00006E28   pletter.mode6
00:00006E2E   pletter.mode5
00:00006E34   pletter.mode4
00:00006E3A   pletter.mode3
00:00006E40   pletter.mode2
00:00006E50   pletter.offsok
00:00006E5F   pletter.getbit
00:00006E63   pletter.getbitexx
00:00006E69   pletter.modes
00:00006E75   nuestra_isr
00:00000000   CHNPRM_PsInOr
00:00000001   CHNPRM_PsInSm
00:00000002   CHNPRM_CrAmSl
00:00000003   CHNPRM_CrNsSl
00:00000004   CHNPRM_CrEnSl
00:00000005   CHNPRM_TSlCnt
00:00000006   CHNPRM_CrTnSl
00:00000008   CHNPRM_TnAcc
00:0000000A   CHNPRM_COnOff
00:0000000B   CHNPRM_OnOffD
00:0000000C   CHNPRM_OffOnD
00:0000000D   CHNPRM_OrnPtr
00:0000000F   CHNPRM_SamPtr
00:00000011   CHNPRM_NNtSkp
00:00000012   CHNPRM_Note
00:00000013   CHNPRM_SlToNt
00:00000014   CHNPRM_Env_En
00:00000015   CHNPRM_Flags
00:00000016   CHNPRM_TnSlDl
00:00000017   CHNPRM_TSlStp
00:00000019   CHNPRM_TnDelt
00:0000001B   CHNPRM_NtSkCn
00:0000001C   CHNPRM_Volume
00:0000001D X CHNPRM_Size
00:00000000   AR_TonA
00:00000002   AR_TonB
00:00000004   AR_TonC
00:00000006   AR_Noise
00:00000007   AR_Mixer
00:00000008   AR_AmplA
00:00000009   AR_AmplB
00:0000000A   AR_AmplC
00:0000000B   AR_Env
00:0000000D   AR_EnvTp
00:00006E81   CHECKLP
00:00006E92 X PT3_MUTE
00:00006E9E   PT3_INIT
00:00006EDD   PT3_INIT.TP_0
00:00006EE9   PT3_INIT.TP_1
00:00006EF0   PT3_INIT.TP_2
00:00006F5E   PT3_INIT.L1
00:00006F6B   PT3_INIT.L2
00:00006F6F X PT3_INIT.L3
00:00006F96   PT3_INIT.CORR_1
00:00006FA4   PT3_INIT.CORR_2
00:00006FAB   PT3_INIT.TC_EXIT
00:00006FB6   PT3_INIT.INITV1
00:00006FBE   PT3_INIT.INITV2
00:00006FD2   PT3_INIT.INITV3
00:00006FD6   PD_OrSm
00:00006FE0   PD_SAM
00:00006FE1   PD_SAM_
00:00006FF7   PD_VOL
00:00007000   PD_EOff
00:00007008   PD_SorE
00:00007012   PD_ENV
00:00007017   PD_ORN
00:0000701C   PD_ESAM
00:00007029   PTDECOD
00:00007038   PD_LOOP
00:0000703B   PD_LP2
00:00007068   PD_NOIS
00:0000706D   PD_REL
00:00007073   PD_NOTE
00:0000707B   PD_RES
00:0000708D   PD_FIN
00:00007094   C_PORTM
00:000070DF   C_PORTM.NOSIG
00:000070E9   SET_STP
00:000070F5   C_GLISS
00:00007108   C_SMPOS
00:0000710E   C_ORPOS
00:00007114   C_VIBRT
00:0000712C   C_ENGLS
00:0000713E   C_DELAY
00:00007144   SETENV
00:0000715F   C_NOP
00:00007160   SETORN
00:00007179   SPCCOMS
00:00007199   CHREGS
00:000071BC   CHREGS.CH_ORPS
00:000071C7   CHREGS.CH_NTP
00:000071CD   CHREGS.CH_NOK
00:000071E8   CHREGS.CH_SMPS
00:000071FE   CHREGS.CH_NOAC
00:00007245   CHREGS.CH_STPP
00:0000725A   CHREGS.CH_AMP
00:0000726C   CHREGS.CH_AMIN
00:00007271   CHREGS.CH_SVAM
00:00007274   CHREGS.CH_NOAM
00:0000727D   CHREGS.CH_APOS
00:00007283   CHREGS.CH_VOL
00:0000728E X CHREGS.CH_ENV
00:00007295   CHREGS.CH_NOEN
00:000072AF   CHREGS.NO_ENAC
00:000072B6   CHREGS.NO_ENSL
00:000072C4   CHREGS.CH_MIX
00:000072C8   CHREGS.CH_EXIT
00:000072E7   CHREGS.CH_ONDL
00:000072EB   PT3_PLAY
00:0000731F   PT3_PLAY.PLNLP
00:00007346   PT3_PLAY.PL1A
00:00007351   PT3_PLAY.PL1B
00:00007366   PT3_PLAY.PL1C
00:0000737B   PT3_PLAY.PL1D
00:00007381   PT3_PLAY.PL2
00:000073E3   PT3_ROUT
00:000073E4   ROUT_A0
00:000073F0   ROUT_A0.LOUT
00:00007404   NT_DATA
00:00007414   T_
00:00007414   TCOLD_0
00:00007420   TCNEW_1
00:00007420   TCOLD_1
00:00007422   TCOLD_2
00:00007434   TCNEW_3
00:00007435   TCOLD_3
00:0000743E   TCNEW_0
00:00007449   TCNEW_2
00:00007454   EMPTYSAMORN
00:00007458   T_PACK
00:00000000 X AYFXRELATIVE
00:0000748D   ayFX_SETUP
00:00007499   ayFX_END
00:0000749F   ayFX_INIT
00:000074B0   ayFX_INIT.CHECK_PRI
00:000074D1   ayFX_INIT.INIT_END
00:000074D5   ayFX_PLAY
00:000074E9   ayFX_PLAY.TAKECB
00:000074FA   ayFX_PLAY.CHECK_NN
00:00007507   ayFX_PLAY.SETPOINTER
00:0000751B   ayFX_PLAY.SETMASKS
00:00007529 X ayFX_PLAY.CHK1
00:0000752B X ayFX_PLAY.PLAY_C
00:00007538   ayFX_PLAY.CHK2
00:0000753D X ayFX_PLAY.PLAY_B
00:0000754A   ayFX_PLAY.CHK3
00:0000754D X ayFX_PLAY.PLAY_A
00:0000755A   ayFX_PLAY.SETMIXER
00:0000756A   CANCION
00:0000784B   SILENCIO
00:00007867   MUSICA_GAMEOVER
00:000079A1   EFECTOS_BANCO
00:00008081   MUSICA_MUERTO
00:00008111   MUSICA_ENTRE_FASES
00:0000F000   PT3_SETUP
00:0000F001   PT3_MODADDR
00:0000F003   PT3_CrPsPtr
00:0000F005   PT3_SAMPTRS
00:0000F007   PT3_OrnPtrs
00:0000F009   PT3_PDSP
00:0000F00B   PT3_CSP
00:0000F00D   PT3_PSP
00:0000F00F   PT3_PrNote
00:0000F010   PT3_PrSlide
00:0000F012   PT3_AdInPtA
00:0000F014   PT3_AdInPtB
00:0000F016   PT3_AdInPtC
00:0000F018   PT3_LPosPtr
00:0000F01A   PT3_PatsPtr
00:0000F01C   PT3_Delay
00:0000F01D   PT3_AddToEn
00:0000F01E   PT3_Env_Del
00:0000F01F   PT3_ESldAdd
00:0000F021   PT3_NTL3
00:0000F023   VARS
00:0000F023   ChanA
00:0000F040   ChanB
00:0000F05D   ChanC
00:0000F07A   DelyCnt
00:0000F07B   CurESld
00:0000F07D   CurEDel
00:0000F07E   Ns_Base_AddToNs
00:0000F07E   Ns_Base
00:0000F07F   AddToNs
00:0000F080   NT_
00:0000F140   AYREGS
00:0000F140   VT_
00:0000F14E   EnvBase
00:0000F150   VAR0END
00:0000F150   T1_
00:0000F150   T_NEW_1
00:0000F150   T_OLD_1
00:0000F168   T_OLD_2
00:0000F180   T_NEW_3
00:0000F180   T_OLD_3
00:0000F182   T_OLD_0
00:0000F182   T_NEW_0
00:0000F19A   T_NEW_2
00:0000F240   ayFX_MODE
00:0000F241   ayFX_BANK
00:0000F243   ayFX_PRIORITY
00:0000F244   ayFX_POINTER
00:0000F246   ayFX_TONE
00:0000F248   ayFX_NOISE
00:0000F249   ayFX_VOLUME
00:0000F24A   ayFX_CHANNEL
00:0000822F   instru_caste
00:0000833E   instru_ingle
00:00008451   pant_carga_til
00:0000927F   pant_carga_col
00:00009A5D   pant_carga
00:00009B85   tiles_1
00:00009FC4   colores_1
00:0000A1B0   fase_1
00:0000A254   fase_2
00:0000A353   fase_3
00:0000A4A0   fase_4
00:0000A589   fase_5
00:0000A6B8   fase_6
00:0000A7F5   fase_7
00:0000A8E1   fase_8
00:0000A9E9   fase_9
00:0000AB04   fase_10
00:0000AC19   FINAL
00:0000ACEB   sanctuary_1
00:0000ACF7   sanctuary_2
00:0000AD03   sanctuary_3
00:0000AD0F   sanctuary_4
00:0000AD1B   sanctuary_5
00:0000AD27   sanctuary_6
00:0000AD33   sanctuary_7
00:0000AD3F   sanctuary_8
00:0000AD4B   sanctuary_9
00:0000AD57   sanctuary_10
00:0000AD63   sanctuario_1
00:0000AD6F   sanctuario_2
00:0000AD7B   sanctuario_3
00:0000AD87   sanctuario_4
00:0000AD93   sanctuario_5
00:0000AD9F   sanctuario_6
00:0000ADAB   sanctuario_7
00:0000ADB7   sanctuario_8
00:0000ADC3   sanctuario_9
00:0000ADCF   sanctuario_10
00:0000ADDB   consejo_2
00:0000ADED   consejo_3
00:0000AE4C   consejo_5
00:0000AE6D   consejo_7
00:0000AE8B   consejo_10
00:0000AEA9   advice_2
00:0000AEBB   advice_3
00:0000AF19   advice_5
00:0000AF37   advice_7
00:0000AF55   advice_10
00:0000AF73   lo_has_logrado
00:0000AF92   felicidades
00:0000AFB0   camino_a
00:0000AFCC   blanco
00:0000AFF2   entre_fases
00:0000B088   marcador
00:0000B0AC   trofeos
00:0000B0B9   sprites
00:0000B451   sprites2
00:0000B551   sprites3
00:0000B611   sprites4
00:0000B711   sprites5
00:0000B731   sprites9
00:0000B751   sprites6
00:0000B771   sprites10
00:0000B791   sprites7
00:0000B7B1   sprites11
00:0000B7D1   sprites8
00:0000B7F1   sprites12
00:0000B811   sprites13
00:0000B831   sprites14
00:0000B851   sprites15
00:0000B871   sprites16
00:0000B891   sprites_pet
00:0000B991   game_over
00:0000B99B   se__acabo
00:0000B9A5   pause
00:0000B9AA   ladrillos
00:0000B9AF   empresa
00:0000B9CC   empresa_e
00:0000B9E9   titulo_1
00:0000BACA   titulo_8
00:0000BAEB   mensaje
00:0000BAF0   teclado
00:0000BAFB   mando
00:0000BB06   instrucciones
00:0000BB11   teclado_e
00:0000BB1B   mando_e
00:0000BB23   instruccion_e
00:0000BB2C   salir
00:0000BB39   salir_e
00:0000BB43   copyright
00:0000BB5F   serp_1
00:0000BB61   serp_2
00:0000BB63   nada
00:0000BB65   programacion
00:0000BB72   musica
00:0000BB79   agradec
00:0000BB81   programacion_e
00:0000BB8E   musica_e
00:0000BB96   agradec_e
00:0000BBA7   benja
00:0000BBB7   manu
00:0000BBC6   ramon
00:0000BBE7   fernando1
00:0000BC08   fernando2
00:0000BC29   felix
00:0000BC4A   tromax
00:0000BC61   royal
00:0000BC71   mano_derecha
00:0000BC7F   mano_derecha_e
00:0000BC8B   letras_A
00:0000BC93 X letras_B
00:0000BC9B X letras_C
00:0000BCA3 X letras_D
00:0000BCAB X letras_E
00:0000BCB3 X letras_F
00:0000BCBB X letras_G
00:0000BCC3 X letras_H
00:0000BCCB X letras_I
00:0000BCD3 X letras_J
00:0000BCDB X letras_K
00:0000BCE3 X letras_L
00:0000BCEB X letras_M
00:0000BCF3 X letras_N
00:0000BCFB X letras_O
00:0000BD03 X letras_P
00:0000BD0B X letras_Q
00:0000BD13 X letras_R
00:0000BD1B X letras_S
00:0000BD23 X letras_T
00:0000BD2B X letras_U
00:0000BD33 X letras_V
00:0000BD3B X letras_W
00:0000BD43 X letras_X
00:0000BD4B X letras_Y
00:0000BD53 X letras_Z
00:0000BD5B   titulo_centro1
00:0000BD63 X titulo_no
00:0000BD6B X titulo_ne
00:0000BD73 X titulo_so
00:0000BD7B X titulo_se
00:0000BD83 X titulo_ru
00:0000BD8B X titulo_rd
00:0000BD93 X titulo_rr
00:0000BD9B X titulo_el
00:0000BDA3 X cabeza_serp
00:0000BDAB X titulo_centro2
00:0000BDB3 X titulo_centro3
00:0000BDBB X titulo_centro4
00:0000BDC3 X serpiente_1
00:0000BDCB X serpiente_2
00:0000BDD3   parentesis_a
00:0000BDDB X parentesis_c
00:0000BDE3   guion
00:0000BDEB X punto
00:0000BDF3   numero0
00:0000BDFB X numero1
00:0000BE03 X numero2
00:0000BE0B X numero3
00:0000BE13 X numero4
00:0000BE1B X numero5
00:0000BE23 X numero6
00:0000BE2B X numero7
00:0000BE33 X numero8
00:0000BE3B X numero9
00:0000BE43 X dospuntos
00:0000BE4B   freeware
00:0000C000   inicio_ram
00:0000C001   idioma
00:0000C002   petiso_que_toca
00:0000C003   petisox
00:0000C004   petisoy
00:0000C005   espera_petiso
00:0000C006   espera_petiso_resta
00:0000C007   espera_petiso_resta_2
00:0000C008   VIEJA_INTERR
00:0000C00D   estado_serp
00:0000C00E   y_serp
00:0000C00F   stick_a_usar
00:0000C010   clock
00:0000C012   px
00:0000C013   py
00:0000C014   puede_cambiar_de_direccion
00:0000C015   vidas_prota
00:0000C016   color_prota
00:0000C017   color_lineas_prota
00:0000C018   muerto
00:0000C019   fase_en_la_que_esta
00:0000C01A   estado_prota
00:0000C01B   prev_dir_prota
00:0000C01C   pasos_de_salto
00:0000C01D   dir_prota
00:0000C01E   paso
00:0000C01F   retard_anim
00:0000C020   atributos_sprite_general
00:0000C050   tiene_objeto
00:0000C051   px_salida
00:0000C052   py_salida
00:0000C053   x_explosion
00:0000C054   y_explosion
00:0000C055   estado_de_explosion
00:0000C056   contador_retardo_explosion
00:0000C057   buffer_colisiones
00:0000C337   estado_de_salto
00:0000C338   mechero
00:0000C339   gasolina
00:0000C33A   posicion_puerta
00:0000C33C   ya_ha_cambiado_puerta
00:0000C33D   increm
00:0000C33E   score
00:0000C340   contador_para_puntuacion
00:0000C342   posicion_del_punto_unidades
00:0000C343   posicion_del_punto_decenas
00:0000C344   posicion_del_punto_centenas
00:0000C345   posicion_del_punto_millares
00:0000C346   cuenta_puntos_o_no
00:0000C347   cuanto_sumamos_a_score
00:0000C348   variables_serpiente_1
00:0000C351   variables_serpiente_2
00:0000C35A   variables_serpiente_3
00:0000C363   variables_serpiente_4
00:0000C36C   colision_cuchillo_serp_real
00:0000C36D   serp1
00:0000C36E   serp2
00:0000C36F   serp3
00:0000C370   serp4
00:0000C371   cont_no_salta_dos_seguidas
00:0000C372   pasamos_la_fase
00:0000C373   momento_lanzamiento
00:0000C374   contador_poses_lanzar
00:0000C375   recordar_lo_que_habia
00:0000C377   dir_cuchillo
00:0000C378   cx
00:0000C379   cy
00:0000C37A   escalera_activada
00:0000C37B   posicion_escalera
00:0000C37D   contador_escalera
00:0000C37E   limite_escalera
00:0000C380   grifo_estado
00:0000C381   ESTADO_MUSICA
00:0000C382   vision_estado
00:0000C383   colision_bombero_prota_real
00:0000C384   bombero_1
00:0000C385   bombero_control
00:0000C391   velocidad_paseo_fases
00:0000C392   SAXOLO
00:0000CAC3   GAME_OVER
00:0000CDB9   MUTE
00:0000CE2E   MUERTO
00:0000CF52   ENTRE_FASES


 Output: burnusrom.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: BURNUS.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00008000

   Address   Length Align   Label
   00004000   32768         search_slotset
