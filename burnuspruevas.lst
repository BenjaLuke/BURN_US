Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2018.03.26 - 21:07:14]

BURNUSpruevas.ASM
Errors: 0

       1   00:0000                      	output "BURNUS.rom"
       2   00:4000                      	
       3   00:4000                      	
       4   00:4000  (00:00C3)           CLS			equ	#00C3	;CLS											;borra la pantalla
       5   00:4000  (00:006C)           SCREEN0		equ	#006C	;INITXT											;pasa a modo screen 0
       6   00:4000  (00:006F)           SCREEN1		equ	#006F	;INIT32											;pasa a modo screen 1 
       7   00:4000  (00:00D2)           MODOTEXTO	equ	#00D2	;TOTEXT											:fuerza a modo texto
       8   00:4000  (00:00C6)           LOCATE		equ	#00C6	;POSIT											;coloca el cursor en una directrices h,l
       9   00:4000  (00:00A2)           CHPUT		equ	#00A2	;CHPUT											;escribe un caracter en pantalla
      10   00:4000  (00:00CC)           KEYOFF		equ	#00CC	;ERAFNK											;hace desaparecer las teclas de función
      11   00:4000  (00:0062)           COLOR		equ	#0062	;CHGCLR											;da color a la pantalla
      12   00:4000  (00:F3E9)           COLLETRA	equ	#F3E9	;FORCLR											;define el color de letras para CHGCLR
      13   00:4000  (00:F3EA)           COLFONDO	equ	#F3EA	;BAKCLR											;define el color de fondo para CHGCLR
      14   00:4000  (00:F3EB)           COLBORDE	equ	#F3EB	;BDRCLR											;defeine el color de bordes para CHGCLR
      15   00:4000  (00:009F)           INPUT		equ	#009F	;CHGET											;espera que pulses una tecla y manda el valor a registro a
      16   00:4000  (00:F3AF)           ANCHOSC0	equ	#F3AF	;LINL40											;define el width de screen 0
      17   00:4000  (00:F3AF)           ANCHOSC1	equ	#f3AF	;LINL32											;define el width de screen 1
      18   00:4000  (00:F3DB)           CLICKOFF	equ	#f3DB	;CLIKSW											;quita el sonido del toque de teclas
      19   00:4000  (00:0041)           DISSCR		equ	#0041													;desconecta la pantalla_en_blanco
      20   00:4000  (00:0044)           ENASCR		equ	#0044													;conecta la pantalla
      21   00:4000                      
      22   00:4000                      
      23   00:4000  (00:013E)           RDVDP		equ	#013E													;lee registro 8 del VDP
      24   00:4000  (00:0047)           WRTVDP		equ	#0047													;escribe registros del VDP
      25   00:4000  (00:005C)           GRABAVRAM	equ	#005C	;LDIRVM											;graba en vram una parte de ram
      26   00:4000  (00:0059)           GRABARAM	equ	#0059	;LDIRMV											;grava en ram una parte de vram
      27   00:4000                      
      28   00:4000  (00:005F)           SCREENX		equ	#005F	;CHGMOD											;elige el modo grafico
      29   00:4000  (00:00D5)           ONSTICK		equ	#00D5	;GTSTCK											;controla el stick
      30   00:4000  (00:00D8)           ONSTRIG		equ	#00D8	;GTTRIG											;controla los botones del joystick o la barra espaciadora
      31   00:4000  (00:003B)           RESET		equ #003B	;INITIO											;reinicia el ordenador
      32   00:4000                      
      33   00:4000  (00:FD9A)           H.KEYI		equ	#FD9A	;H.KEYI
      34   00:4000  (00:FD9F)           H.TIMI		equ	#FD9F	;H.TIMI
      35   00:4000                      
      36   00:4000  (00:0141)           SNSMAT		equ	#0141	;INKEY$											;controla si se ha pulsado una tecla_pulsada
      37   00:4000                      
      38   00:4000  (00:0024)           ENASLT		equ	#0024													;para ampliar la rom		
      39   00:4000  (00:0138)           RSLREG  	equ	#0138
      40   00:4000  (00:C000)           SLOTVAR		equ	#C000
      41   00:4000                      
      42   00:4000  (00:F3DF)           RG0SAV		equ	#F3DF													;COPIA DE vdp DEL REGISTRO 0 (BASIC:VDP(0))
      43   00:4000  (00:F3E0)           RG1SAV		equ	#F3E0													;COPIA DE vdp DEL REGISTRO 1 (BASIC:VDP(1))
      44   00:4000  (00:F3E1)           RG2SAV		equ	#F3E1													;COPIA DE vdp DEL REGISTRO 2 (BASIC:VDP(2))
      45   00:4000  (00:F3E2)           RG3SAV		equ	#F3E2													;COPIA DE vdp DEL REGISTRO 3 (BASIC:VDP(3))
      46   00:4000  (00:F3E3)           RG4SAV		equ	#F3E3													;COPIA DE vdp DEL REGISTRO 4 (BASIC:VDP(4))
      47   00:4000  (00:F3E4)           RG5SAV		equ	#F3E4													;COPIA DE vdp DEL REGISTRO 5 (BASIC:VDP(5))
      48   00:4000  (00:F3E5)           RG6SAV		equ	#F3E5													;COPIA DE vdp DEL REGISTRO 6 (BASIC:VDP(6))
      49   00:4000  (00:F3E6)           RG7SAV		equ	#F3E6													;COPIA DE vdp DEL REGISTRO 7 (BASIC:VDP(7))
      50   00:4000  (00:F3E7)           STATFL		equ	#F3E7													;COPIA DE vdp DEL REGISTRO 8 (EL QUE ES DE ESCRITURA (S#0))
      51   00:4000                      
      52   00:4000                      	org		#4000	
      53   00:4000                      
      54   00:4000  41 42               	db	"AB"															;Cabecera de fichero ROM
      55   00:4002  37 40               	word	START														;Dónde empieza la ejecución
      56   00:4004                      	word	0,0,0,0,0,0
      56   00:4004  00 00 00 00 00 00 00 00 00 00 00 00 
      57   00:4010                      		
      58   00:4010                      ;original from Ramones (http://karoshi.auic.es/index.php?topic=628.0)
      59   00:4010                      ; -----------------------
      60   00:4010                      ; SEARCH_SLOTSET
      61   00:4010                      ; Posiciona en pagina 2
      62   00:4010                      ; Nuestro ROM.
      63   00:4010                      ; -----------------------
      64   00:4010                      
      65   00:4010                      search_slotset:
      66   00:4010  CD 16 40            		call search_slot
      67   00:4013  C3 24 00            		jp ENASLT
      68   00:4016                      
      69   00:4016                      
      70   00:4016                      ; -----------------------
      71   00:4016                      ; SEARCH_SLOT
      72   00:4016                      ; Busca slot de nuestro rom
      73   00:4016                      ; -----------------------
      74   00:4016                      
      75   00:4016                      search_slot:
      76   00:4016                      
      77   00:4016  CD 38 01            	call RSLREG
      78   00:4019  0F                  	rrca
      79   00:401A  0F                  	rrca
      80   00:401B  E6 03               	and 3
      81   00:401D  4F                  	ld c,a
      82   00:401E  06 00               	ld b,0
      83   00:4020  21 C1 FC            	ld hl,0FCC1h
      84   00:4023  09                  	add hl,bc
      85   00:4024  7E                  	ld a,(hl)
      86   00:4025  E6 80               	and 080h
      87   00:4027  B1                  	or c
      88   00:4028  4F                  	ld c,a
      89   00:4029  23                  	inc hl
      90   00:402A  23                  	inc hl
      91   00:402B  23                  	inc hl
      92   00:402C  23                  	inc hl
      93   00:402D  7E                  	ld a,(hl)
      94   00:402E  E6 0C               	and 0Ch
      95   00:4030  B1                  	or c
      96   00:4031  26 80               	ld h,080h
      97   00:4033  32 00 C0            	ld (SLOTVAR),a
      98   00:4036  C9                  	ret		
      99   00:4037                      	
     100   00:4037                      START:
     101   00:4037                      
     102   00:4037                      ; ampliamos la lectura de rom a 32 k
     103   00:4037                      
     104   00:4037  F3                  		di
     105   00:4038                      		
     106   00:4038  ED 56               		im		1														;modo de interrupciones 1
     107   00:403A  31 80 F3            		ld		sp,#F380												; colocmos la pila en esta posicion, que suele ser donde empieza las zona ram que usa el S.O. del MSX. Recuerda que la pila crece hacia abajo así que no pisaremos nada
     108   00:403D                      
     109   00:403D  CD 10 40            		call	search_slotset
     110   00:4040                      		
     111   00:4040  FB                  		ei
     112   00:4041                      
     113   00:4041                      ;descomprimimos la musica
     114   00:4041                      
     115   00:4041  21 48 75            		ld		hl,CANCION												;descomprime musica de inicio
     116   00:4044  11 91 C3            		ld		de,SAXOLO
     117   00:4047  CD A9 6D            		call	depack
     118   00:404A                      		
     119   00:404A  21 45 78            		ld		hl,MUSICA_GAMEOVER										;descomprime musica game over
     120   00:404D  11 C2 CA            		ld		de,GAME_OVER
     121   00:4050  CD A9 6D            		call	depack
     122   00:4053                      		
     123   00:4053                      ;		ld		hl,MUSICA_FASES											;descomprime musica game over
     124   00:4053                      ;		ld		de,FASES
     125   00:4053                      ;		call	depack	
     126   00:4053                      		
     127   00:4053  21 29 78            		ld		hl,SILENCIO												;descomprime musica mute
     128   00:4056  11 B8 CD            		ld		de,MUTE
     129   00:4059  CD A9 6D            		call	depack
     130   00:405C                      		
     131   00:405C  21 B9 80            		ld		hl,MUSICA_MUERTO										;descomprime musica mute
     132   00:405F  11 2D CE            		ld		de,MUERTO
     133   00:4062  CD A9 6D            		call	depack
     134   00:4065                      		
     135   00:4065  21 49 81            		ld		hl,MUSICA_ENTRE_FASES									;descomprime musica entre fases
     136   00:4068  11 51 CF            		ld		de,ENTRE_FASES
     137   00:406B  CD A9 6D            		call	depack
     138   00:406E                      								
     139   00:406E                      ;inicializamos la música
     140   00:406E                      		
     141   00:406E  CD 3A 4E            		call	activa_musica_menu
     142   00:4071                      		
     143   00:4071  21 7F 79            		ld		hl,EFECTOS_BANCO										;hl ahora vale la direccion donde se encuentran los efectos
     144   00:4074  CD 6B 74            		call	ayFX_SETUP												;inicia el reproductor de efectos
     145   00:4077                      		
     146   00:4077                      ;salva actual rutina en H.KEYI
     147   00:4077                      
     148   00:4077  11 07 C0            		ld		de,VIEJA_INTERR											;coge la dirección de la antigua interrupcion de gancho
     149   00:407A  21 9F FD            		ld		hl,H.TIMI												;coge la dirección de la entrada de gancho de interrupción
     150   00:407D  01 05 00            		ld		bc,5													;longitud del gancho a 5 bytes
     151   00:4080  ED B0               		ldir															;lo transfiere
     152   00:4082                      		
     153   00:4082                      ;engancha nuestra rutina de servicio al gancho que djea preparada la BIOS cuando se termina de pintar la pantalla (50 o 60 veces por segundo)
     154   00:4082                      
     155   00:4082  3E C3               		ld		a,#C3													;#c3 es el código binario de jump (jp)
     156   00:4084  32 9F FD            		ld		[H.TIMI],a												;metemos en H.TIMI ese jp
     157   00:4087  21 53 6E            		ld		hl,nuestra_isr											;cargamos nuestra secuencia en hl
     158   00:408A  22 A0 FD            		ld		[H.TIMI+1],hl											;la ponemos a continuación del jp
     159   00:408D                      		
     160   00:408D  FB                  		ei																;conectamos las interrupciones
     161   00:408E                      		
     162   00:408E  CD 7C 54            		call	musica_con_bucle
     163   00:4091                      
     164   00:4091                      PANTALLA_DE_CARGA:
     165   00:4091                      		
     166   00:4091  CD 6A 4E            		call	PREPARACION_SCREEN_2
     167   00:4094  CD 41 00            		call	DISSCR													;desconectamos la pantalla
     168   00:4097  CD 1F 45            		call	limpia_sprites
     169   00:409A                      		
     170   00:409A  AF                  		xor		a
     171   00:409B  32 E9 F3            		ld		[COLLETRA],a											;aunque sólo quieras cambiar uno de los colores, tienes que volver a definir los otros dos para que te acepte un cambio
     172   00:409E  32 EA F3            		ld		[COLFONDO],a
     173   00:40A1  32 EB F3            		ld		[COLBORDE],a
     174   00:40A4  CD 62 00            		call	COLOR
     175   00:40A7                      		
     176   00:40A7  21 89 84            		ld		hl,pant_carga_til										;cargamos patrones
     177   00:40AA  11 00 00            		ld		de,#0000
     178   00:40AD  CD C9 6C            		call	depack_VRAM
     179   00:40B0                      		
     180   00:40B0  21 95 9A            		ld		hl,pant_carga											;carga el marcador
     181   00:40B3  11 00 18            		ld		de,#1800
     182   00:40B6  CD C9 6C            		call	depack_VRAM
     183   00:40B9                      		
     184   00:40B9  21 B7 92            		ld		hl,pant_carga_col										;cargamos colores de patrones
     185   00:40BC  11 00 20            		ld		de,#2000
     186   00:40BF  CD C9 6C            		call	depack_VRAM
     187   00:40C2                      			
     188   00:40C2  CD 3A 4D            		call	SPRITES_PETISOS
     189   00:40C5                      		
     190   00:40C5  CD 44 00            		call	ENASCR													;conectamos la pantalla
     191   00:40C8                      		
     192   00:40C8                      INICIA_MUSICA:
     193   00:40C8                      
     194   00:40C8  CD 3A 4E            		call	activa_musica_menu										;inicia el reproductor de PT3
     195   00:40CB                      		
     196   00:40CB  3E 0F               		ld		a,15
     197   00:40CD  32 03 C0            		ld		(petisoy),a
     198   00:40D0  3E 6E               		ld		a,110
     199   00:40D2  32 02 C0            		ld		(petisox),a
     200   00:40D5  3E 28               		ld		a,40
     201   00:40D7  32 04 C0            		ld		(espera_petiso),a
     202   00:40DA  32 06 C0            		ld		(espera_petiso_resta_2),a
     203   00:40DD  32 05 C0            		ld		(espera_petiso_resta),a
     204   00:40E0                      petisos:
     205   00:40E0                      		
     206   00:40E0  AF                  		xor		a
     207   00:40E1  CD D8 00            		CALL	ONSTRIG
     208   00:40E4  FE 00               		cp		0
     209   00:40E6  C2 8D 41            		jr.		nz,MENU
     210   00:40E9                      		
     211   00:40E9                      		
     212   00:40E9  CD F1 40            		call	petiso_activity
     213   00:40EC                      		
     214   00:40EC  18 F2               		jr.		petisos
     215   00:40EE                      		
     216   00:40EE  C3 8D 41            		jr.		MENU
     217   00:40F1                      
     218   00:40F1                      petiso_activity:
     219   00:40F1                      
     220   00:40F1  3A 05 C0            		ld		a,(espera_petiso_resta)
     221   00:40F4  3D                  		dec		a
     222   00:40F5  FE 00               		cp		0
     223   00:40F7  32 05 C0            		ld		(espera_petiso_resta),a
     224   00:40FA  C0                  		ret		nz
     225   00:40FB  3A 04 C0            		ld		a,(espera_petiso)
     226   00:40FE  32 05 C0            		ld		(espera_petiso_resta),a
     227   00:4101  3A 06 C0            		ld		a,(espera_petiso_resta_2)
     228   00:4104  3D                  		dec		a
     229   00:4105  FE 00               		cp		0
     230   00:4107  32 06 C0            		ld		(espera_petiso_resta_2),a
     231   00:410A  C0                  		ret		nz
     232   00:410B  3A 04 C0            		ld		a,(espera_petiso)
     233   00:410E  32 05 C0            		ld		(espera_petiso_resta),a
     234   00:4111  32 06 C0            		ld		(espera_petiso_resta_2),a
     235   00:4114                      		
     236   00:4114  2A 04 C0            		ld		hl,(espera_petiso)
     237   00:4117  22 05 C0            		ld		(espera_petiso_resta),hl
     238   00:411A                      
     239   00:411A  3A 01 C0            		ld		a,(petiso_que_toca)
     240   00:411D  FE 00               		cp		0
     241   00:411F  28 0E               		jr.		z,petiso_a_saltar
     242   00:4121                      		
     243   00:4121  AF                  		xor		a
     244   00:4122  32 01 C0            		ld		(petiso_que_toca),a
     245   00:4125  3A 03 C0            		ld		a,(petisoy)
     246   00:4128  C6 03               		add		3
     247   00:412A  32 03 C0            		ld		(petisoy),a
     248   00:412D  18 0F               		jr.		registros_petiso
     249   00:412F                      		
     250   00:412F                      petiso_a_saltar:
     251   00:412F                      		
     252   00:412F  3E 10               		ld		a,16
     253   00:4131  32 01 C0            		ld		(petiso_que_toca),a
     254   00:4134  3A 03 C0            		ld		a,(petisoy)
     255   00:4137  D6 03               		sub		3
     256   00:4139  32 03 C0            		ld		(petisoy),a
     257   00:413C  18 00               		jr.		registros_petiso
     258   00:413E                      
     259   00:413E                      registros_petiso:
     260   00:413E                      
     261   00:413E  76                  		halt
     262   00:413F  DD 21 20 C0         		ld		ix,atributos_sprite_general
     263   00:4143  3A 03 C0            		ld		a,(petisoy)
     264   00:4146  DD 77 00            		ld		(ix),a
     265   00:4149  DD 77 04            		ld		(ix+4),a
     266   00:414C  DD 77 08            		ld		(ix+8),a
     267   00:414F  DD 77 0C            		ld		(ix+12),a
     268   00:4152  3A 02 C0            		ld		a,(petisox)
     269   00:4155  DD 77 01            		ld		(ix+1),a
     270   00:4158  DD 77 05            		ld		(ix+5),a
     271   00:415B  DD 77 09            		ld		(ix+9),a
     272   00:415E  DD 77 0D            		ld		(ix+13),a
     273   00:4161  3A 01 C0            		ld		a,(petiso_que_toca)
     274   00:4164  DD 77 02            		ld		(ix+2),a
     275   00:4167  C6 04               		add		4
     276   00:4169  DD 77 06            		ld		(ix+6),a
     277   00:416C  C6 04               		add		4
     278   00:416E  DD 77 0A            		ld		(ix+10),a
     279   00:4171  C6 04               		add		4
     280   00:4173  DD 77 0E            		ld		(ix+14),a
     281   00:4176  3E 01               		ld		a,1
     282   00:4178  DD 77 03            		ld		(ix+3),a
     283   00:417B  3E 04               		ld		a,4
     284   00:417D  DD 77 07            		ld		(ix+7),a
     285   00:4180  3E 0A               		ld		a,10
     286   00:4182  DD 77 0B            		ld		(ix+11),a
     287   00:4185  3E 0F               		ld		a,15
     288   00:4187  DD 77 0F            		ld		(ix+15),a
     289   00:418A                      		
     290   00:418A  C3 D4 57            		jr.	atributos_sprites
     291   00:418D                      						
     292   00:418D                      MENU:		
     293   00:418D                      
     294   00:418D                      		;prepara la pantalla
     295   00:418D                      		
     296   00:418D  CD 1F 45            		call	limpia_sprites
     297   00:4190  CD 6A 4E            		call	PREPARACION_SCREEN_2
     298   00:4193                      		
     299   00:4193  AF                  		xor		a														;XOR se lo carga todo poniendolo a 0, es como un ld a,0 pero ocupa menos
     300   00:4194  CD C3 00            		call	CLS
     301   00:4197                      		
     302   00:4197  3E 20               		ld		a,32													;pone el width a 32
     303   00:4199  32 AF F3            		ld		[ANCHOSC1],a
     304   00:419C  3E 00               		ld		a,0
     305   00:419E  32 DB F3            		ld		[CLICKOFF],a											;quita el click de las teclas
     306   00:41A1  CD 6F 00            		call	SCREEN1													;pasa a modo screen 1
     307   00:41A4                      	
     308   00:41A4  CD CC 00            		call	KEYOFF													;borramos las teclas de función
     309   00:41A7  CD 3A 4D            		call	SPRITES_PETISOS
     310   00:41AA                      
     311   00:41AA                      PREPARA_VARIABLES_SERPIENTE:
     312   00:41AA                      
     313   00:41AA  3E 02               		ld		a,2
     314   00:41AC  32 0C C0            		ld		(estado_serp),a
     315   00:41AF  3E 10               		ld		a,16
     316   00:41B1  32 0D C0            		ld		(y_serp),a
     317   00:41B4  01 E8 03            		ld		bc,1000
     318   00:41B7  ED 43 0F C0         		ld		(clock),bc
     319   00:41BB                      		
     320   00:41BB  3E AE               		ld		a,174
     321   00:41BD  32 03 C0            		ld		(petisoy),a
     322   00:41C0  3E 31               		ld		a,49
     323   00:41C2  32 02 C0            		ld		(petisox),a
     324   00:41C5  3E 04               		ld		a,4
     325   00:41C7  32 04 C0            		ld		(espera_petiso),a
     326   00:41CA  32 06 C0            		ld		(espera_petiso_resta_2),a
     327   00:41CD  32 05 C0            		ld		(espera_petiso_resta),a
     328   00:41D0                      		
     329   00:41D0                      RUTINA_DE_MENU:
     330   00:41D0                      
     331   00:41D0  21 B9 BC            		ld		hl,letras_A					;redefine las letras
     332   00:41D3  11 08 02            		ld		de,#0208
     333   00:41D6  01 D0 00            		ld		bc,8*26
     334   00:41D9  CD 5C 00            		call	GRABAVRAM
     335   00:41DC                      		
     336   00:41DC  21 89 BD            		ld		hl,titulo_centro1			;redefine tiles de título
     337   00:41DF  11 08 03            		ld		de,#0308
     338   00:41E2  01 78 00            		ld		bc,8*15
     339   00:41E5  CD 5C 00            		call	GRABAVRAM
     340   00:41E8                      		
     341   00:41E8  21 01 BE            		ld		hl,parentesis_a				;redefine parentesis
     342   00:41EB  11 40 01            		ld		de,#0140
     343   00:41EE  01 10 00            		ld		bc,8*2
     344   00:41F1  CD 5C 00            		call	GRABAVRAM
     345   00:41F4                      		
     346   00:41F4  21 11 BE            		ld		hl,guion					;redefine guion y punto
     347   00:41F7  11 58 01            		ld		de,#0158
     348   00:41FA  01 10 00            		ld		bc,8*2
     349   00:41FD  CD 5C 00            		call	GRABAVRAM
     350   00:4200                      		
     351   00:4200  21 21 BE            		ld		hl,numero0					;redefine numeros y dos puntos
     352   00:4203  11 80 01            		ld		de,#0180	
     353   00:4206  01 58 00            		ld		bc,8*11
     354   00:4209  CD 5C 00            		call	GRABAVRAM
     355   00:420C                      				
     356   00:420C                      PANTALLA_DE_SELECCION:
     357   00:420C                      		
     358   00:420C  AF                  		xor		a
     359   00:420D  CD C3 00            		call	CLS
     360   00:4210                      				
     361   00:4210  26 01               		ld		h,1
     362   00:4212  2E 04               		ld		l,4
     363   00:4214  CD C6 00            		call	LOCATE
     364   00:4217  21 21 BA            		ld		hl,titulo_1
     365   00:421A  CD 7A 44            		call	lee_pinta_una
     366   00:421D                      				
     367   00:421D  26 01               		ld		h,1
     368   00:421F  2E 0B               		ld		l,11
     369   00:4221  CD C6 00            		call	LOCATE
     370   00:4224  21 02 BB            		ld		hl,titulo_8
     371   00:4227  CD 7A 44            		call	lee_pinta_una
     372   00:422A                      		
     373   00:422A  26 0F               		ld		h,15
     374   00:422C  2E 0E               		ld		l,14
     375   00:422E  CD C6 00            		call	LOCATE
     376   00:4231  21 23 BB            		ld		hl,mensaje
     377   00:4234  CD 7A 44            		call	lee_pinta_una
     378   00:4237                      		
     379   00:4237  26 05               		ld		h,5
     380   00:4239  2E 18               		ld		l,24
     381   00:423B  CD C6 00            		call	LOCATE
     382   00:423E  21 7B BB            		ld		hl,copyright
     383   00:4241  CD 7A 44            		call	lee_pinta_una
     384   00:4244                      		
     385   00:4244  3A 00 C0            		ld		a,(idioma)
     386   00:4247  FE 00               		cp		0
     387   00:4249  28 43               		jr.		z,menu_castellano
     388   00:424B                      
     389   00:424B                      menu_ingles:
     390   00:424B                      
     391   00:424B  26 03               		ld		h,3							;escribe pantalla de menu
     392   00:424D  2E 01               		ld		l,1
     393   00:424F  CD C6 00            		call	LOCATE
     394   00:4252  21 E7 B9            		ld		hl,empresa
     395   00:4255  CD 7A 44            		call	lee_pinta_una
     396   00:4258                      			
     397   00:4258  26 0C               		ld		h,12
     398   00:425A  2E 10               		ld		l,16
     399   00:425C  CD C6 00            		call	LOCATE
     400   00:425F  21 28 BB            		ld		hl,teclado
     401   00:4262  CD 7A 44            		call	lee_pinta_una	
     402   00:4265                      		
     403   00:4265  26 0C               		ld		h,12
     404   00:4267  2E 12               		ld		l,18
     405   00:4269  CD C6 00            		call	LOCATE
     406   00:426C  21 33 BB            		ld		hl,mando
     407   00:426F  CD 7A 44            		call	lee_pinta_una
     408   00:4272                      				
     409   00:4272  26 0C               		ld		h,12
     410   00:4274  2E 14               		ld		l,20
     411   00:4276  CD C6 00            		call	LOCATE
     412   00:4279  21 3E BB            		ld		hl,instrucciones
     413   00:427C  CD 7A 44            		call	lee_pinta_una
     414   00:427F                      		
     415   00:427F  26 0C               		ld		h,12
     416   00:4281  2E 16               		ld		l,22
     417   00:4283  CD C6 00            		call	LOCATE
     418   00:4286  21 64 BB            		ld		hl,salir
     419   00:4289  CD 7A 44            		call	lee_pinta_una
     420   00:428C                      		
     421   00:428C  18 41               		jr.		rutina_colores_inicio
     422   00:428E                      		
     423   00:428E                      menu_castellano:
     424   00:428E                      
     425   00:428E  26 03               		ld		h,3							;escribe pantalla de menu
     426   00:4290  2E 01               		ld		l,1
     427   00:4292  CD C6 00            		call	LOCATE
     428   00:4295  21 04 BA            		ld		hl,empresa_e
     429   00:4298  CD 7A 44            		call	lee_pinta_una
     430   00:429B                      		
     431   00:429B  26 0C               		ld		h,12
     432   00:429D  2E 10               		ld		l,16
     433   00:429F  CD C6 00            		call	LOCATE
     434   00:42A2  21 49 BB            		ld		hl,teclado_e
     435   00:42A5  CD 7A 44            		call	lee_pinta_una	
     436   00:42A8                      		
     437   00:42A8  26 0C               		ld		h,12
     438   00:42AA  2E 12               		ld		l,18
     439   00:42AC  CD C6 00            		call	LOCATE
     440   00:42AF  21 53 BB            		ld		hl,mando_e
     441   00:42B2  CD 7A 44            		call	lee_pinta_una
     442   00:42B5                      				
     443   00:42B5  26 0C               		ld		h,12
     444   00:42B7  2E 14               		ld		l,20
     445   00:42B9  CD C6 00            		call	LOCATE
     446   00:42BC  21 5B BB            		ld		hl,instruccion_e
     447   00:42BF  CD 7A 44            		call	lee_pinta_una
     448   00:42C2                      		
     449   00:42C2  26 0C               		ld		h,12
     450   00:42C4  2E 16               		ld		l,22
     451   00:42C6  CD C6 00            		call	LOCATE
     452   00:42C9  21 71 BB            		ld		hl,salir_e
     453   00:42CC  CD 7A 44            		call	lee_pinta_una		
     454   00:42CF                      				
     455   00:42CF                      rutina_colores_inicio:						;rutina de colores
     456   00:42CF                      		
     457   00:42CF  3E 0F               		ld		a,15
     458   00:42D1                      		
     459   00:42D1                      rutina_colores:		
     460   00:42D1                      					
     461   00:42D1  32 E9 F3            		ld		[COLLETRA],a				;aunque sólo quieras cambiar uno de los colores, tienes que volver a definir los otros dos para que te acepte un cambio
     462   00:42D4  F5                  		push	af							;guardo el valor de a en la pila para utilizar ese registro pero la pila son dos bytes, por lo que debo guardar tambien f aunque no lo use
     463   00:42D5  3E 00               		ld		a,0
     464   00:42D7  32 EA F3            		ld		[COLFONDO],a
     465   00:42DA  3E 01               		ld		a,1
     466   00:42DC  32 EB F3            		ld		[COLBORDE],a
     467   00:42DF  CD 62 00            		call	COLOR
     468   00:42E2  F1                  		pop		af							;recupero el valor de a
     469   00:42E3  3D                  		dec		a
     470   00:42E4  47                  		ld		b,a
     471   00:42E5  FE 02               		cp		2
     472   00:42E7  C2 D1 42            		jp		nz,rutina_colores
     473   00:42EA                      		
     474   00:42EA  F5                  		push	af
     475   00:42EB                      
     476   00:42EB                      contro_serpiente_a_pintar:
     477   00:42EB                      
     478   00:42EB  CD F1 40            		call	petiso_activity
     479   00:42EE                      
     480   00:42EE  3A 0C C0            		ld		a,(estado_serp)
     481   00:42F1  3C                  		inc		a
     482   00:42F2  32 0C C0            		ld		(estado_serp),a										;controla la serpiente que se pinta
     483   00:42F5  FE 02               		cp		2
     484   00:42F7  CA A9 44            		jp		z,pinta_serpiente_2
     485   00:42FA  FE 03               		cp		3
     486   00:42FC  CA A9 44            		jp		z,pinta_serpiente_2
     487   00:42FF  C3 8F 44            		jp		pinta_serpiente_1
     488   00:4302                      		
     489   00:4302                      		
     490   00:4302                      		
     491   00:4302                      control_stick_menu:
     492   00:4302                      		
     493   00:4302  AF                  		xor		a							;controla el movimiento de la serpiente en menu
     494   00:4303  CD D5 00            		call	ONSTICK
     495   00:4306  FE 01               		cp		1
     496   00:4308  CA C3 44            		jp		z,sube_cursor
     497   00:430B  FE 05               		cp		5
     498   00:430D  CA F1 44            		jp		z,baja_cursor
     499   00:4310  FE 00               		cp		0
     500   00:4312  CA 15 43            		jp		z,control_strig_menu
     501   00:4315                      		
     502   00:4315                      control_strig_menu:							;controla si pulsa espacio para seleccionar una opcion
     503   00:4315                      
     504   00:4315  AF                  		xor		a
     505   00:4316  CD D8 00            		CALL	ONSTRIG
     506   00:4319  FE 00               		cp		0
     507   00:431B  C2 39 44            		jp		nz,que_ha_elegido
     508   00:431E                      				
     509   00:431E                      controla_tiempo_para_cambio:				;contador para ir a mostrar los creditos
     510   00:431E                      
     511   00:431E  2A 0F C0            		ld		hl,(clock)
     512   00:4321  01 01 00            		ld		bc,1		
     513   00:4324  ED 42               		sbc		hl,bc
     514   00:4326  22 0F C0            		ld		(clock),hl
     515   00:4329  20 0A               		jr		nz,termina_secuencia_color
     516   00:432B                      								
     517   00:432B  01 60 EA            		ld		bc,60000
     518   00:432E  ED 43 0F C0         		ld		(clock),bc
     519   00:4332                      				
     520   00:4332  C3 39 43            		jp		CREDITOS
     521   00:4335                      		
     522   00:4335                      		
     523   00:4335                      termina_secuencia_color:					;cerramos este loop
     524   00:4335                      				
     525   00:4335  F1                  		pop		af
     526   00:4336                      		
     527   00:4336  C3 CF 42            		jp		rutina_colores_inicio
     528   00:4339                      				
     529   00:4339                      CREDITOS:
     530   00:4339                      		
     531   00:4339  CD 1F 45            		call	limpia_sprites
     532   00:433C                      						
     533   00:433C  AF                  		xor		a
     534   00:433D  CD C3 00            		call	CLS
     535   00:4340                      				
     536   00:4340  26 12               		ld		h,18
     537   00:4342  2E 02               		ld		l,2
     538   00:4344  CD C6 00            		call	LOCATE
     539   00:4347  21 DF BB            		ld		hl,benja
     540   00:434A  CD 7A 44            		call	lee_pinta_una
     541   00:434D                      				
     542   00:434D  26 1C               		ld		h,28
     543   00:434F  2E 07               		ld		l,7
     544   00:4351  CD C6 00            		call	LOCATE
     545   00:4354  21 99 BC            		ld		hl,royal
     546   00:4357  CD 7A 44            		call	lee_pinta_una
     547   00:435A                      					
     548   00:435A  26 13               		ld		h,19
     549   00:435C  2E 0A               		ld		l,10
     550   00:435E  CD C6 00            		call	LOCATE
     551   00:4361  21 EF BB            		ld		hl,manu
     552   00:4364  CD 7A 44            		call	lee_pinta_una
     553   00:4367                      		
     554   00:4367  26 01               		ld		h,1
     555   00:4369  2E 0C               		ld		l,12
     556   00:436B  CD C6 00            		call	LOCATE
     557   00:436E  21 FE BB            		ld		hl,ramon
     558   00:4371  CD 7A 44            		call	lee_pinta_una
     559   00:4374                      		
     560   00:4374  26 01               		ld		h,1
     561   00:4376  2E 0E               		ld		l,14
     562   00:4378  CD C6 00            		call	LOCATE
     563   00:437B  21 1F BC            		ld		hl,fernando1
     564   00:437E  CD 7A 44            		call	lee_pinta_una
     565   00:4381                      		
     566   00:4381  26 01               		ld		h,1
     567   00:4383  2E 10               		ld		l,16
     568   00:4385  CD C6 00            		call	LOCATE
     569   00:4388  21 40 BC            		ld		hl,fernando2
     570   00:438B  CD 7A 44            		call	lee_pinta_una
     571   00:438E                      		
     572   00:438E  26 01               		ld		h,1
     573   00:4390  2E 12               		ld		l,18
     574   00:4392  CD C6 00            		call	LOCATE
     575   00:4395  21 61 BC            		ld		hl,felix
     576   00:4398  CD 7A 44            		call	lee_pinta_una
     577   00:439B                      		
     578   00:439B  26 0B               		ld		h,11
     579   00:439D  2E 04               		ld		l,4
     580   00:439F  CD C6 00            		call	LOCATE
     581   00:43A2  21 82 BC            		ld		hl,tromax
     582   00:43A5  CD 7A 44            		call	lee_pinta_una
     583   00:43A8                      		
     584   00:43A8  3A 00 C0            		ld		a,(idioma)
     585   00:43AB  FE 00               		cp		0
     586   00:43AD  28 36               		jr.		z,creditos_castellano
     587   00:43AF                      
     588   00:43AF                      creditos_ingles:
     589   00:43AF                      
     590   00:43AF  26 01               		ld		h,1
     591   00:43B1  2E 03               		ld		l,3
     592   00:43B3  CD C6 00            		call	LOCATE
     593   00:43B6  21 AD BC            		ld		hl,mano_derecha_e
     594   00:43B9  CD 7A 44            		call	lee_pinta_una
     595   00:43BC                      		
     596   00:43BC  26 01               		ld		h,1
     597   00:43BE  2E 01               		ld		l,1
     598   00:43C0  CD C6 00            		call	LOCATE
     599   00:43C3  21 9D BB            		ld		hl,programacion
     600   00:43C6  CD 7A 44            		call	lee_pinta_una
     601   00:43C9                      		
     602   00:43C9  26 01               		ld		h,1
     603   00:43CB  2E 06               		ld		l,6
     604   00:43CD  CD C6 00            		call	LOCATE
     605   00:43D0  21 AA BB            		ld		hl,musica
     606   00:43D3  CD 7A 44            		call	lee_pinta_una
     607   00:43D6                      		
     608   00:43D6  26 01               		ld		h,1
     609   00:43D8  2E 09               		ld		l,9
     610   00:43DA  CD C6 00            		call	LOCATE
     611   00:43DD  21 B1 BB            		ld		hl,agradec
     612   00:43E0  CD 7A 44            		call	lee_pinta_una
     613   00:43E3                      		
     614   00:43E3  18 34               		jr.		controla_tiempo_para_cambio_2
     615   00:43E5                      		
     616   00:43E5                      creditos_castellano:
     617   00:43E5                      		
     618   00:43E5  26 01               		ld		h,1
     619   00:43E7  2E 03               		ld		l,3
     620   00:43E9  CD C6 00            		call	LOCATE
     621   00:43EC  21 9F BC            		ld		hl,mano_derecha
     622   00:43EF  CD 7A 44            		call	lee_pinta_una
     623   00:43F2                      		
     624   00:43F2  26 01               		ld		h,1
     625   00:43F4  2E 01               		ld		l,1
     626   00:43F6  CD C6 00            		call	LOCATE
     627   00:43F9  21 B9 BB            		ld		hl,programacion_e
     628   00:43FC  CD 7A 44            		call	lee_pinta_una
     629   00:43FF                      		
     630   00:43FF  26 01               		ld		h,1
     631   00:4401  2E 06               		ld		l,6
     632   00:4403  CD C6 00            		call	LOCATE
     633   00:4406  21 C6 BB            		ld		hl,musica_e
     634   00:4409  CD 7A 44            		call	lee_pinta_una
     635   00:440C                      		
     636   00:440C  26 01               		ld		h,1
     637   00:440E  2E 09               		ld		l,9
     638   00:4410  CD C6 00            		call	LOCATE
     639   00:4413  21 CE BB            		ld		hl,agradec_e
     640   00:4416  CD 7A 44            		call	lee_pinta_una
     641   00:4419                      		
     642   00:4419                      controla_tiempo_para_cambio_2:
     643   00:4419                      
     644   00:4419  AF                  		xor		a
     645   00:441A  CD D8 00            		CALL	ONSTRIG
     646   00:441D  FE 00               		cp		0
     647   00:441F  C2 2F 44            		jp		nz,prepara_contador_para_menu
     648   00:4422                      		
     649   00:4422  2A 0F C0            		ld		hl,(clock)	
     650   00:4425  01 01 00            		ld		bc,1				
     651   00:4428  ED 42               		sbc		hl,bc
     652   00:442A  22 0F C0            		ld		(clock),hl
     653   00:442D                      		
     654   00:442D  20 EA               		jr		nz,controla_tiempo_para_cambio_2
     655   00:442F                      			
     656   00:442F                      prepara_contador_para_menu:
     657   00:442F                      
     658   00:442F  01 E8 03            		ld		bc,1000
     659   00:4432  ED 43 0F C0         		ld		(clock),bc
     660   00:4436                      
     661   00:4436  C3 8D 41            		jp		MENU
     662   00:4439                      				
     663   00:4439                      que_ha_elegido:
     664   00:4439                      
     665   00:4439  3E 01               		ld		a,1							;efecto de pinchar opción
     666   00:443B  CD C4 6C            		call	efecto_sonido
     667   00:443E                      		
     668   00:443E  3A 0D C0            		ld		a,(y_serp)
     669   00:4441  FE 10               		cp		16
     670   00:4443  CA 6B 44            		jp		z,prepara_teclado
     671   00:4446  FE 12               		cp		18
     672   00:4448  CA 72 44            		jp		z,prepara_mando
     673   00:444B  FE 14               		cp		20
     674   00:444D  CA 55 44            		jp		z,idioma_a_pintar
     675   00:4450  FE 16               		cp		22
     676   00:4452  CA 91 40            		jp		z,PANTALLA_DE_CARGA
     677   00:4455                      
     678   00:4455                      idioma_a_pintar:
     679   00:4455                      		
     680   00:4455  3A 00 C0            		ld		a,(idioma)
     681   00:4458  FE 00               		cp		0
     682   00:445A  20 08               		jr.		nz,ingles
     683   00:445C                      
     684   00:445C                      castellano
     685   00:445C                      
     686   00:445C  3E 01               		ld		a,1
     687   00:445E  32 00 C0            		ld		(idioma),a
     688   00:4461                      		
     689   00:4461  C3 8D 41            		jr.		MENU
     690   00:4464                      		
     691   00:4464                      ingles:
     692   00:4464                      	
     693   00:4464  AF                  		xor		a
     694   00:4465  32 00 C0            		ld		(idioma),a
     695   00:4468                      		
     696   00:4468  C3 8D 41            		JR.		MENU
     697   00:446B                      					
     698   00:446B                      prepara_teclado:
     699   00:446B                      
     700   00:446B  AF                  		xor		a
     701   00:446C  32 0E C0            		ld		(stick_a_usar),a
     702   00:446F  CD 4D 45            		call	prepara_juego
     703   00:4472                      
     704   00:4472                      prepara_mando:
     705   00:4472                      
     706   00:4472  3E 01               		ld		a,1
     707   00:4474  32 0E C0            		ld		(stick_a_usar),a
     708   00:4477  CD 4D 45            		call	prepara_juego
     709   00:447A                      		
     710   00:447A                      lee_pinta_una:								;imprime el texto fijo
     711   00:447A  7E                  		ld		a,[hl]
     712   00:447B  47                  		ld		b,a
     713   00:447C                      		
     714   00:447C                      loop_lee_pinta_una:
     715   00:447C  23                  		inc		hl
     716   00:447D  7E                  		ld		a,[hl]
     717   00:447E  CD A2 00            		call	CHPUT
     718   00:4481  10 F9               		djnz	loop_lee_pinta_una
     719   00:4483  C9                  		ret
     720   00:4484                      		
     721   00:4484                      controla_serpiente:
     722   00:4484                      
     723   00:4484  3A 0C C0            		ld		a,(estado_serp)
     724   00:4487  FE 04               		cp		4
     725   00:4489  C0                  		ret		nz
     726   00:448A  AF                  		xor		a
     727   00:448B  32 0C C0            		ld		(estado_serp),a
     728   00:448E  C9                  		ret
     729   00:448F                      		
     730   00:448F                      pinta_serpiente_1:
     731   00:448F                      		
     732   00:448F  ED 4B 0D C0         		ld		bc,[y_serp]
     733   00:4493  26 0A               		ld		h,10
     734   00:4495  69                  		ld		l,c
     735   00:4496  CD C6 00            		call	LOCATE
     736   00:4499  21 97 BB            		ld		hl,serp_1
     737   00:449C  CD 7A 44            		call	lee_pinta_una
     738   00:449F  CD 84 44            		call	controla_serpiente
     739   00:44A2  ED 43 0D C0         		ld		[y_serp],bc
     740   00:44A6  C3 02 43            		jp		control_stick_menu
     741   00:44A9                      
     742   00:44A9                      pinta_serpiente_2:
     743   00:44A9                      		
     744   00:44A9  ED 4B 0D C0         		ld		bc,[y_serp]
     745   00:44AD  26 0A               		ld		h,10
     746   00:44AF  69                  		ld		l,c
     747   00:44B0  CD C6 00            		call	LOCATE
     748   00:44B3  21 99 BB            		ld		hl,serp_2
     749   00:44B6  CD 7A 44            		call	lee_pinta_una
     750   00:44B9  CD 84 44            		call	controla_serpiente
     751   00:44BC  ED 43 0D C0         		ld		[y_serp],bc
     752   00:44C0  C3 02 43            		jp		control_stick_menu
     753   00:44C3                      	
     754   00:44C3                      sube_cursor:								;comprueva si lo puede subir
     755   00:44C3                       		 		
     756   00:44C3  3A 0D C0             		ld		a,(y_serp)
     757   00:44C6  FE 10                		cp		16
     758   00:44C8  C2 CE 44             		jp		nz,lo_sube
     759   00:44CB  C3 35 43             		jp		termina_secuencia_color
     760   00:44CE                      
     761   00:44CE                      lo_sube:									;lo sube porque es posible
     762   00:44CE                      
     763   00:44CE  76 76 76 76 76      [5]		halt								;espera hasta el vblank 5 veces
     764   00:44D3                      	
     765   00:44D3  AF                  		xor		a							;efecto de movimiento
     766   00:44D4  CD C4 6C            		call	efecto_sonido
     767   00:44D7                      		
     768   00:44D7  3A 0D C0            		ld		a,(y_serp)
     769   00:44DA  26 0A               		ld		h,10
     770   00:44DC  6F                  		ld		l,a
     771   00:44DD  CD C6 00            		call	LOCATE
     772   00:44E0  21 9B BB            		ld		hl,nada
     773   00:44E3  CD 7A 44            		call	lee_pinta_una
     774   00:44E6                      		
     775   00:44E6  3A 0D C0            		ld		a,(y_serp)
     776   00:44E9  D6 02               		sub		2							;decrementa a 2 veces
     777   00:44EB  32 0D C0            		ld		(y_serp),a
     778   00:44EE  C3 35 43            		jp		termina_secuencia_color
     779   00:44F1                      
     780   00:44F1                      baja_cursor:								;comprueva si lo puede bajar
     781   00:44F1                      	
     782   00:44F1  3A 0D C0            		ld		a,(y_serp)
     783   00:44F4  FE 16                		cp		22
     784   00:44F6  C2 FC 44             		jp		nz,lo_baja
     785   00:44F9  C3 35 43             		jp		termina_secuencia_color	
     786   00:44FC                      
     787   00:44FC                      lo_baja:									;lo baja porque es posbile
     788   00:44FC                      
     789   00:44FC  76 76 76 76 76      [5]		halt								;espera hasta el vblank 5 veces
     790   00:4501                      
     791   00:4501  AF                  		xor		a							;efecto de movimiento
     792   00:4502  CD C4 6C            		call	efecto_sonido
     793   00:4505                      		
     794   00:4505  3A 0D C0            		ld		a,(y_serp)
     795   00:4508  26 0A               		ld		h,10
     796   00:450A  6F                  		ld		l,a
     797   00:450B  CD C6 00            		call	LOCATE
     798   00:450E  21 9B BB            		ld		hl,nada
     799   00:4511  CD 7A 44            		call	lee_pinta_una
     800   00:4514                      				
     801   00:4514  3A 0D C0            		ld		a,(y_serp)
     802   00:4517  C6 02               		add		2					;incrementa a 2 veces
     803   00:4519  32 0D C0            		ld		(y_serp),a
     804   00:451C  C3 35 43            		jp		termina_secuencia_color
     805   00:451F                      
     806   00:451F                      limpia_sprites:
     807   00:451F                      
     808   00:451F  3E C0               		ld		a,192
     809   00:4521  DD 21 20 C0         		ld		ix,atributos_sprite_general
     810   00:4525                      				
     811   00:4525  DD 77 00            		ld		(ix),a
     812   00:4528  DD 77 04            		ld		(ix+4),a
     813   00:452B  DD 77 08            		ld		(ix+8),a
     814   00:452E  DD 77 0C            		ld		(ix+12),a
     815   00:4531  DD 77 10            		ld		(ix+16),a
     816   00:4534  DD 77 14            		ld		(ix+20),a
     817   00:4537  DD 77 18            		ld		(ix+24),a
     818   00:453A  DD 77 1C            		ld		(ix+28),a
     819   00:453D  DD 77 20            		ld		(ix+32),a
     820   00:4540  DD 77 24            		ld		(ix+36),a
     821   00:4543  DD 77 28            		ld		(ix+40),a
     822   00:4546  DD 77 2C            		ld		(ix+44),a
     823   00:4549                      				
     824   00:4549  CD D4 57            		call	atributos_sprites
     825   00:454C                      		
     826   00:454C  C9                  		ret
     827   00:454D                      		
     828   00:454D                      prepara_juego:
     829   00:454D                      		
     830   00:454D  CD 1F 45            		call	limpia_sprites
     831   00:4550                      		
     832   00:4550  CD 1B 4E            		call	activa_mute												
     833   00:4553                      		
     834   00:4553  CD 6A 4E            		call	PREPARACION_SCREEN_2
     835   00:4556                      		
     836   00:4556  CD 47 4D            		call	SPRITES_UNO
     837   00:4559                      		
     838   00:4559  CD 41 00            		call	DISSCR													;desconectamos la pantalla
     839   00:455C                      		
     840   00:455C  CD 1F 45            		call	limpia_sprites
     841   00:455F                      		
     842   00:455F  21 BD 9B            		ld		hl,tiles_1												;cargamos patrones
     843   00:4562  11 00 00            		ld		de,#0000
     844   00:4565  CD C9 6C            		call	depack_VRAM
     845   00:4568                      		
     846   00:4568  21 FC 9F            		ld		hl,colores_1											;cargamos colores de patrones
     847   00:456B  11 00 20            		ld		de,#2000
     848   00:456E  CD C9 6C            		call	depack_VRAM
     849   00:4571                      
     850   00:4571  3A 00 C0            		ld		a,(idioma)
     851   00:4574  FE 00               		cp		0
     852   00:4576  28 0B               		jr.		z,instrucciones_en_castellano
     853   00:4578                      
     854   00:4578                      instrucciones_en_ingles:
     855   00:4578                      
     856   00:4578  21 76 83            		ld		hl,instru_ingle											;instrucciones en castellano
     857   00:457B  11 00 18            		ld		de,#1800
     858   00:457E  CD C9 6C            		call	depack_VRAM
     859   00:4581  18 09               		jr.		esperando
     860   00:4583                      		
     861   00:4583                      instrucciones_en_castellano:
     862   00:4583                      
     863   00:4583  21 67 82            		ld		hl,instru_caste											;instrucciones en castellano
     864   00:4586  11 00 18            		ld		de,#1800
     865   00:4589  CD C9 6C            		call	depack_VRAM
     866   00:458C                      		
     867   00:458C                      esperando:
     868   00:458C                      		
     869   00:458C  CD 44 00            		call	ENASCR													;conectamos la pantalla
     870   00:458F  3A 0E C0            		ld		a,(stick_a_usar)
     871   00:4592  CD D8 00            		CALL	ONSTRIG
     872   00:4595  FE 00               		cp		0
     873   00:4597  CA 8C 45            		jp		z,esperando
     874   00:459A                      		
     875   00:459A  CD 41 00            		call	DISSCR		
     876   00:459D  21 04 B0            		ld		hl,blanco												;tiles de base de pantalla
     877   00:45A0  11 20 18            		ld		de,#1820
     878   00:45A3  CD C9 6C            		call	depack_VRAM
     879   00:45A6                      		
     880   00:45A6  21 C0 B0            		ld		hl,marcador												;carga el marcador
     881   00:45A9  11 00 18            		ld		de,#1800
     882   00:45AC  CD C9 6C            		call	depack_VRAM
     883   00:45AF  CD 44 00            		CALL	ENASCR
     884   00:45B2                      		
     885   00:45B2  3E C0               		ld		a,192
     886   00:45B4  32 44 C3            		ld		(posicion_del_punto_centenas),a
     887   00:45B7  32 43 C3            		ld		(posicion_del_punto_decenas),a
     888   00:45BA  32 45 C3            		ld		(posicion_del_punto_millares),a
     889   00:45BD  32 42 C3            		ld		(posicion_del_punto_unidades),a
     890   00:45C0                      		
     891   00:45C0  3E 06               		ld		a,6
     892   00:45C2  32 14 C0            		ld		(vidas_prota),a
     893   00:45C5                      		
     894   00:45C5  3E 01               		ld		a,1
     895   00:45C7  32 81 C3            		ld		(ESTADO_MUSICA),a
     896   00:45CA                      		
     897   00:45CA  AF                  		xor		a
     898   00:45CB  32 3E C3            		ld		(score),a
     899   00:45CE                      
     900   00:45CE                      bloque_sanctuary_1:
     901   00:45CE                      		
     902   00:45CE  CD AB 4C            		call	pantalla_en_blanco
     903   00:45D1                      		
     904   00:45D1  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 1
     905   00:45D4  FE 00               		cp		0
     906   00:45D6  28 05               		jr.		z,bloque_sanctuary_1_esp
     907   00:45D8  21 23 AD            		ld		hl,sanctuary_1
     908   00:45DB  18 03               		jr.		bloque_sanctuary_1_cont
     909   00:45DD                      
     910   00:45DD                      bloque_sanctuary_1_esp:
     911   00:45DD                      
     912   00:45DD  21 9B AD            		ld		hl,sanctuario_1
     913   00:45E0                      
     914   00:45E0                      bloque_sanctuary_1_cont:
     915   00:45E0                      		
     916   00:45E0  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
     917   00:45E3                      
     918   00:45E3                      		;		coordenadas prota
     919   00:45E3  3E E8               		ld		a,232						;define variables
     920   00:45E5  32 11 C0            		ld		(px),a
     921   00:45E8  32 51 C0            		ld		(px_salida),a
     922   00:45EB  3E 18               		ld		a,24						
     923   00:45ED  32 12 C0            		ld		(py),a
     924   00:45F0  32 52 C0            		ld		(py_salida),a
     925   00:45F3                      		
     926   00:45F3  CD D9 4C            		call	variables_iguales
     927   00:45F6                      				
     928   00:45F6                      		;		coordenadas serpientes
     929   00:45F6                      		
     930   00:45F6  FD 21 48 C3         		ld		iy,variables_serpiente_1
     931   00:45FA  3E 98               		ld		a,152
     932   00:45FC  FD 77 00            		ld		(iy),a
     933   00:45FF  3E A7               		ld		a,167
     934   00:4601  FD 77 01            		ld		(iy+1),a
     935   00:4604  AF                  		xor	a
     936   00:4605  FD 77 02            		ld		(iy+2),a
     937   00:4608  FD 77 03            		ld		(iy+3),a
     938   00:460B  3E 08               		ld		a,8
     939   00:460D  FD 77 04            		ld		(iy+4),a
     940   00:4610  FD 77 05            		ld		(iy+5),a
     941   00:4613  AF                  		xor		a
     942   00:4614  FD 77 06            		ld		(iy+6),a
     943   00:4617  3E 01               		ld		a,1
     944   00:4619  FD 77 07            		ld		(iy+7),a
     945   00:461C  3E FF               		ld		a,255
     946   00:461E  FD 77 08            		ld		(iy+8),a
     947   00:4621                      				
     948   00:4621  3E 01               		ld		a,1
     949   00:4623  32 6D C3            		ld		(serp1),a
     950   00:4626                      		
     951   00:4626                      		;		otras variables
     952   00:4626  3E 01               		ld		a,1
     953   00:4628  32 18 C0            		ld		(fase_en_la_que_esta),a
     954   00:462B  21 7D 00            		ld		hl,125
     955   00:462E  22 3A C3            		ld		(posicion_puerta),hl
     956   00:4631                      		
     957   00:4631  21 C8 00            		ld		hl,200
     958   00:4634  22 0F C0            		ld		(clock),hl						
     959   00:4637  CD 5B 4E            		call	rutina_de_esperar_un_rato
     960   00:463A                      
     961   00:463A  CD 26 4E            		call	activa_musica_fases										;inicia el reproductor de PT3
     962   00:463D                      		
     963   00:463D  21 E8 A1            		ld		hl,fase_1												;cargamos sanctuary 1 en ram
     964   00:4640  11 57 C0            		ld		de,buffer_colisiones
     965   00:4643  CD A9 6D            		call	depack
     966   00:4646                      		
     967   00:4646  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
     968   00:4649                      
     969   00:4649  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
     970   00:464C                      		
     971   00:464C  C3 C2 53            		jr.		repite_fase
     972   00:464F                      								
     973   00:464F                      bloque_sanctuary_2:
     974   00:464F                      		
     975   00:464F  CD AB 4C            		call	pantalla_en_blanco
     976   00:4652                      		
     977   00:4652  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 1
     978   00:4655  FE 00               		cp		0
     979   00:4657  28 05               		jr.		z,bloque_sanctuary_2_esp
     980   00:4659  21 2F AD            		ld		hl,sanctuary_2
     981   00:465C  18 03               		jr.		bloque_sanctuary_2_cont
     982   00:465E                      
     983   00:465E                      bloque_sanctuary_2_esp:
     984   00:465E                      
     985   00:465E  21 A7 AD            		ld		hl,sanctuario_2
     986   00:4661                      
     987   00:4661                      bloque_sanctuary_2_cont:
     988   00:4661                      		
     989   00:4661  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
     990   00:4664                      
     991   00:4664                      		;		coordenadas prota
     992   00:4664  3E D0               		ld		a,208						;define variables
     993   00:4666  32 11 C0            		ld		(px),a
     994   00:4669  32 51 C0            		ld		(px_salida),a
     995   00:466C  3E A7               		ld		a,167						
     996   00:466E  32 12 C0            		ld		(py),a
     997   00:4671  32 52 C0            		ld		(py_salida),a
     998   00:4674                      		
     999   00:4674  CD D9 4C            		call	variables_iguales
    1000   00:4677                      				
    1001   00:4677                      		;		coordenadas serpientes
    1002   00:4677                      		
    1003   00:4677  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1004   00:467B  3E 40               		ld		a,64
    1005   00:467D  FD 77 00            		ld		(iy),a
    1006   00:4680  3E A7               		ld		a,167
    1007   00:4682  FD 77 01            		ld		(iy+1),a
    1008   00:4685  AF                  		xor	a
    1009   00:4686  FD 77 02            		ld		(iy+2),a
    1010   00:4689  FD 77 03            		ld		(iy+3),a
    1011   00:468C  3E 08               		ld		a,8
    1012   00:468E  FD 77 04            		ld		(iy+4),a
    1013   00:4691  FD 77 05            		ld		(iy+5),a
    1014   00:4694  AF                  		xor		a
    1015   00:4695  FD 77 06            		ld		(iy+6),a
    1016   00:4698  3E 01               		ld		a,1
    1017   00:469A  FD 77 07            		ld		(iy+7),a
    1018   00:469D  3E FF               		ld		a,255
    1019   00:469F  FD 77 08            		ld		(iy+8),a
    1020   00:46A2                      		
    1021   00:46A2  FD 21 51 C3         		ld		iy,variables_serpiente_2
    1022   00:46A6  3E 98               		ld		a,152
    1023   00:46A8  FD 77 00            		ld		(iy),a
    1024   00:46AB  3E 8F               		ld		a,143
    1025   00:46AD  FD 77 01            		ld		(iy+1),a
    1026   00:46B0  FD 77 02            		ld		(iy+2),a
    1027   00:46B3  3E FF               		ld		a,255
    1028   00:46B5  FD 77 08            		ld		(iy+8),a
    1029   00:46B8  3E 0F               		ld		a,15
    1030   00:46BA  FD 77 05            		ld		(iy+5),a
    1031   00:46BD  3E 0A               		ld		a,10
    1032   00:46BF  FD 77 04            		ld		(iy+4),a
    1033   00:46C2  3E 02               		ld		a,2
    1034   00:46C4  FD 77 07            		ld		(iy+7),a
    1035   00:46C7                      		
    1036   00:46C7  3E 01               		ld		a,1
    1037   00:46C9  32 6D C3            		ld		(serp1),a
    1038   00:46CC  32 6E C3            		ld		(serp2),a
    1039   00:46CF                      		
    1040   00:46CF                      		;		otras variables
    1041   00:46CF  3E 02               		ld		a,2
    1042   00:46D1  32 18 C0            		ld		(fase_en_la_que_esta),a
    1043   00:46D4  21 BA 02            		ld		hl,698
    1044   00:46D7  22 3A C3            		ld		(posicion_puerta),hl
    1045   00:46DA                      		
    1046   00:46DA  21 C8 00            		ld		hl,200
    1047   00:46DD  22 0F C0            		ld		(clock),hl						
    1048   00:46E0  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1049   00:46E3                      
    1050   00:46E3  CD 26 4E            		call	activa_musica_fases										;inicia el reproductor de PT3
    1051   00:46E6                      		
    1052   00:46E6  21 8C A2            		ld		hl,fase_2												;cargamos sanctuary 1 en ram
    1053   00:46E9  11 57 C0            		ld		de,buffer_colisiones
    1054   00:46EC  CD A9 6D            		call	depack
    1055   00:46EF                      		
    1056   00:46EF  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1057   00:46F2                      
    1058   00:46F2  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1059   00:46F5                      		
    1060   00:46F5  C3 C2 53            		jr.		repite_fase
    1061   00:46F8                      		
    1062   00:46F8                      bloque_sanctuary_3:
    1063   00:46F8                      		
    1064   00:46F8  CD AB 4C            		call	pantalla_en_blanco
    1065   00:46FB                      		
    1066   00:46FB  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 3
    1067   00:46FE  FE 00               		cp		0
    1068   00:4700  28 05               		jr.		z,bloque_sanctuary_3_esp
    1069   00:4702  21 3B AD            		ld		hl,sanctuary_3
    1070   00:4705  18 03               		jr.		bloque_sanctuary_3_cont
    1071   00:4707                      
    1072   00:4707                      bloque_sanctuary_3_esp:
    1073   00:4707                      
    1074   00:4707  21 B3 AD            		ld		hl,sanctuario_3
    1075   00:470A                      
    1076   00:470A                      bloque_sanctuary_3_cont:
    1077   00:470A                      
    1078   00:470A  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1079   00:470D                      
    1080   00:470D                      		;		variables coordenadas prota
    1081   00:470D                      		
    1082   00:470D  3E 10               		ld		a,16						;define variables
    1083   00:470F  32 11 C0            		ld		(px),a
    1084   00:4712  32 51 C0            		ld		(px_salida),a
    1085   00:4715  3E 40               		ld		a,64						
    1086   00:4717  32 12 C0            		ld		(py),a
    1087   00:471A  32 52 C0            		ld		(py_salida),a
    1088   00:471D                      		
    1089   00:471D  CD D9 4C            		call	variables_iguales
    1090   00:4720                      		
    1091   00:4720                      		;variables coordenadas serpientes
    1092   00:4720                      		
    1093   00:4720  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1094   00:4724                      		
    1095   00:4724  3E A8               		ld		a,168
    1096   00:4726  FD 77 01            		ld		(iy+1),a
    1097   00:4729  3E B0               		ld		a,176
    1098   00:472B  FD 77 00            		ld		(iy),a
    1099   00:472E  FD 77 02            		ld		(iy+2),a
    1100   00:4731  3E FF               		ld		a,255
    1101   00:4733  FD 77 08            		ld		(iy+8),a
    1102   00:4736  3E 05               		ld		a,5
    1103   00:4738  FD 77 05            		ld		(iy+5),a
    1104   00:473B  3E 01               		ld		a,1
    1105   00:473D  FD 77 07            		ld		(iy+7),a
    1106   00:4740  3E 08               		ld		a,8
    1107   00:4742  FD 77 04            		ld		(iy+4),a
    1108   00:4745                      				
    1109   00:4745  3E 01               		ld		a,1	
    1110   00:4747  32 6D C3            		ld		(serp1),a
    1111   00:474A                      		
    1112   00:474A                      		;		otras variables
    1113   00:474A                      			
    1114   00:474A  3E 03               		ld		a,3
    1115   00:474C  32 18 C0            		ld		(fase_en_la_que_esta),a
    1116   00:474F  21 02 01            		ld		hl,258
    1117   00:4752  22 3A C3            		ld		(posicion_puerta),hl
    1118   00:4755                      
    1119   00:4755  21 C8 00            		ld		hl,200
    1120   00:4758  22 0F C0            		ld		(clock),hl						
    1121   00:475B  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1122   00:475E                      		
    1123   00:475E  CD 26 4E            		call	activa_musica_fases
    1124   00:4761                      		
    1125   00:4761  21 8B A3            		ld		hl,fase_3												;cargamos sanctuary 3 en ram
    1126   00:4764  11 57 C0            		ld		de,buffer_colisiones
    1127   00:4767  CD A9 6D            		call	depack
    1128   00:476A                      		
    1129   00:476A  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1130   00:476D                      
    1131   00:476D  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1132   00:4770                      		
    1133   00:4770  C3 C2 53            		jr.		repite_fase
    1134   00:4773                      
    1135   00:4773                      bloque_sanctuary_4:
    1136   00:4773                      		
    1137   00:4773  CD AB 4C            		call	pantalla_en_blanco
    1138   00:4776                      		
    1139   00:4776  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 4
    1140   00:4779  FE 00               		cp		0
    1141   00:477B  28 05               		jr.		z,bloque_sanctuary_4_esp
    1142   00:477D  21 47 AD            		ld		hl,sanctuary_4
    1143   00:4780  18 03               		jr.		bloque_sanctuary_4_cont
    1144   00:4782                      
    1145   00:4782                      bloque_sanctuary_4_esp:
    1146   00:4782                      
    1147   00:4782  21 BF AD            		ld		hl,sanctuario_4
    1148   00:4785                      
    1149   00:4785                      bloque_sanctuary_4_cont:
    1150   00:4785                      
    1151   00:4785  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1152   00:4788                      
    1153   00:4788                      		;		variables coordenadas prota
    1154   00:4788                      		
    1155   00:4788  3E A8               		ld		a,168													;define variables
    1156   00:478A  32 11 C0            		ld		(px),a
    1157   00:478D  32 51 C0            		ld		(px_salida),a
    1158   00:4790  3E A8               		ld		a,168						
    1159   00:4792  32 12 C0            		ld		(py),a
    1160   00:4795  32 52 C0            		ld		(py_salida),a
    1161   00:4798                      		
    1162   00:4798  CD D9 4C            		call	variables_iguales
    1163   00:479B                      		
    1164   00:479B                      		;variables coordenadas serpientes
    1165   00:479B                      		
    1166   00:479B  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1167   00:479F                      		
    1168   00:479F  3E A8               		ld		a,168
    1169   00:47A1  FD 77 01            		ld		(iy+1),a
    1170   00:47A4  3E 60               		ld		a,96
    1171   00:47A6  FD 77 00            		ld		(iy),a
    1172   00:47A9  FD 77 02            		ld		(iy+2),a
    1173   00:47AC  3E FF               		ld		a,255
    1174   00:47AE  FD 77 08            		ld		(iy+8),a
    1175   00:47B1  3E 05               		ld		a,5
    1176   00:47B3  FD 77 05            		ld		(iy+5),a
    1177   00:47B6  3E 01               		ld		a,1
    1178   00:47B8  FD 77 07            		ld		(iy+7),a
    1179   00:47BB  3E 08               		ld		a,8
    1180   00:47BD  FD 77 04            		ld		(iy+4),a
    1181   00:47C0                      		
    1182   00:47C0  FD 21 51 C3         		ld		iy,variables_serpiente_2
    1183   00:47C4                      		
    1184   00:47C4  3E 10               		ld		a,16
    1185   00:47C6  FD 77 01            		ld		(iy+1),a
    1186   00:47C9  3E 78               		ld		a,120
    1187   00:47CB  FD 77 00            		ld		(iy),a
    1188   00:47CE  3E 01               		ld		a,1
    1189   00:47D0  FD 77 02            		ld		(iy+2),a
    1190   00:47D3  3E FF               		ld		a,255
    1191   00:47D5  FD 77 08            		ld		(iy+8),a
    1192   00:47D8  3E 0E               		ld		a,14
    1193   00:47DA  FD 77 05            		ld		(iy+5),a
    1194   00:47DD  3E 02               		ld		a,2
    1195   00:47DF  FD 77 07            		ld		(iy+7),a
    1196   00:47E2  3E 08               		ld		a,8
    1197   00:47E4  FD 77 04            		ld		(iy+4),a		
    1198   00:47E7                      		
    1199   00:47E7  3E 01               		ld		a,1	
    1200   00:47E9  32 6D C3            		ld		(serp1),a
    1201   00:47EC  32 6E C3            		ld		(serp2),a
    1202   00:47EF                      		
    1203   00:47EF                      		;		otras variables
    1204   00:47EF                      		
    1205   00:47EF  3E 04               		ld		a,4
    1206   00:47F1  32 18 C0            		ld		(fase_en_la_que_esta),a
    1207   00:47F4  21 B5 02            		ld		hl,693
    1208   00:47F7  22 3A C3            		ld		(posicion_puerta),hl
    1209   00:47FA                      
    1210   00:47FA  21 C8 00            		ld		hl,200
    1211   00:47FD  22 0F C0            		ld		(clock),hl						
    1212   00:4800  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1213   00:4803                      		
    1214   00:4803  CD 26 4E            		call	activa_musica_fases
    1215   00:4806                      		
    1216   00:4806  21 D8 A4            		ld		hl,fase_4												;cargamos sanctuary 4 en ram
    1217   00:4809  11 57 C0            		ld		de,buffer_colisiones
    1218   00:480C  CD A9 6D            		call	depack
    1219   00:480F                      		
    1220   00:480F  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1221   00:4812                      
    1222   00:4812  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1223   00:4815                      		
    1224   00:4815  C3 C2 53            		jr.		repite_fase
    1225   00:4818                      
    1226   00:4818                      bloque_sanctuary_5:
    1227   00:4818                      		
    1228   00:4818  CD AB 4C            		call	pantalla_en_blanco
    1229   00:481B                      		
    1230   00:481B  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 5
    1231   00:481E  FE 00               		cp		0
    1232   00:4820  28 05               		jr.		z,bloque_sanctuary_5_esp
    1233   00:4822  21 53 AD            		ld		hl,sanctuary_5
    1234   00:4825  18 03               		jr.		bloque_sanctuary_5_cont
    1235   00:4827                      
    1236   00:4827                      bloque_sanctuary_5_esp:
    1237   00:4827                      
    1238   00:4827  21 CB AD            		ld		hl,sanctuario_5
    1239   00:482A                      
    1240   00:482A                      bloque_sanctuary_5_cont:
    1241   00:482A                      											;anunciamos sanctuary 5
    1242   00:482A  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1243   00:482D                      
    1244   00:482D                      		;		coordenadas prota
    1245   00:482D                      		
    1246   00:482D  3E 78               		ld		a,120													;define variables
    1247   00:482F  32 11 C0            		ld		(px),a
    1248   00:4832  32 51 C0            		ld		(px_salida),a
    1249   00:4835  3E 18               		ld		a,24						
    1250   00:4837  32 12 C0            		ld		(py),a
    1251   00:483A  32 52 C0            		ld		(py_salida),a
    1252   00:483D                      		
    1253   00:483D  CD D9 4C            		call	variables_iguales
    1254   00:4840                      		
    1255   00:4840                      		;		coordenadas serpientes
    1256   00:4840                      		
    1257   00:4840  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1258   00:4844  3E 78               		ld		a,120
    1259   00:4846  FD 77 00            		ld		(iy),a
    1260   00:4849  3E A8               		ld		a,168
    1261   00:484B  FD 77 01            		ld		(iy+1),a
    1262   00:484E  AF                  		xor	a
    1263   00:484F  FD 77 02            		ld		(iy+2),a
    1264   00:4852  FD 77 03            		ld		(iy+3),a
    1265   00:4855  3E 08               		ld		a,8
    1266   00:4857  FD 77 04            		ld		(iy+4),a
    1267   00:485A  FD 77 05            		ld		(iy+5),a
    1268   00:485D  AF                  		xor		a
    1269   00:485E  FD 77 06            		ld		(iy+6),a
    1270   00:4861  3E 01               		ld		a,1
    1271   00:4863  FD 77 07            		ld		(iy+7),a
    1272   00:4866  3E FF               		ld		a,255
    1273   00:4868  FD 77 08            		ld		(iy+8),a
    1274   00:486B                      				
    1275   00:486B  3E 01               		ld		a,1
    1276   00:486D  32 6D C3            		ld		(serp1),a
    1277   00:4870                      						
    1278   00:4870                      		;		otras variables
    1279   00:4870                      		
    1280   00:4870  21 D2 00            		ld		hl,210
    1281   00:4873  22 7B C3            		ld		(posicion_escalera),hl
    1282   00:4876  21 52 00            		ld		hl,82
    1283   00:4879  22 7E C3            		ld		(limite_escalera),hl
    1284   00:487C  3E 05               		ld		a,5
    1285   00:487E  32 18 C0            		ld		(fase_en_la_que_esta),a
    1286   00:4881  21 6F 00            		ld		hl,111
    1287   00:4884  22 3A C3            		ld		(posicion_puerta),hl
    1288   00:4887                      		
    1289   00:4887  21 C8 00            		ld		hl,200
    1290   00:488A  22 0F C0            		ld		(clock),hl						
    1291   00:488D  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1292   00:4890                      		
    1293   00:4890  CD 26 4E            		call	activa_musica_fases
    1294   00:4893                      
    1295   00:4893  21 C1 A5            		ld		hl,fase_5					;cargamos sanctuary 1 en ram
    1296   00:4896  11 57 C0            		ld		de,buffer_colisiones
    1297   00:4899  CD A9 6D            		call	depack
    1298   00:489C                      		
    1299   00:489C  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1300   00:489F                      
    1301   00:489F  CD 7D 4E            		call 	gran_rutina					;vamos a la rutina de movimientos general
    1302   00:48A2                      		
    1303   00:48A2  C3 C2 53            		jr.		repite_fase
    1304   00:48A5                      
    1305   00:48A5                      bloque_sanctuary_6:
    1306   00:48A5                      		
    1307   00:48A5  CD AB 4C            		call	pantalla_en_blanco
    1308   00:48A8                      		
    1309   00:48A8  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 6
    1310   00:48AB  FE 00               		cp		0
    1311   00:48AD  28 05               		jr.		z,bloque_sanctuary_6_esp
    1312   00:48AF  21 5F AD            		ld		hl,sanctuary_6
    1313   00:48B2  18 03               		jr.		bloque_sanctuary_6_cont
    1314   00:48B4                      
    1315   00:48B4                      bloque_sanctuary_6_esp:
    1316   00:48B4                      
    1317   00:48B4  21 D7 AD            		ld		hl,sanctuario_6
    1318   00:48B7                      
    1319   00:48B7                      bloque_sanctuary_6_cont:
    1320   00:48B7                      
    1321   00:48B7  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1322   00:48BA                      
    1323   00:48BA                      		;		coordenadas prota
    1324   00:48BA                      
    1325   00:48BA  3E E8               		ld		a,232						;define variables
    1326   00:48BC  32 11 C0            		ld		(px),a
    1327   00:48BF  32 51 C0            		ld		(px_salida),a
    1328   00:48C2  3E 18               		ld		a,24						
    1329   00:48C4  32 12 C0            		ld		(py),a
    1330   00:48C7  32 52 C0            		ld		(py_salida),a
    1331   00:48CA                      		
    1332   00:48CA  CD D9 4C            		call	variables_iguales
    1333   00:48CD                      		
    1334   00:48CD                      		;		coordenadas serpientes
    1335   00:48CD                      		
    1336   00:48CD  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1337   00:48D1  3E C8               		ld		a,200
    1338   00:48D3  FD 77 00            		ld		(iy),a
    1339   00:48D6  3E 38               		ld		a,56
    1340   00:48D8  FD 77 01            		ld		(iy+1),a
    1341   00:48DB  AF                  		xor	a
    1342   00:48DC  FD 77 02            		ld		(iy+2),a
    1343   00:48DF  FD 77 03            		ld		(iy+3),a
    1344   00:48E2  3E 08               		ld		a,8
    1345   00:48E4  FD 77 04            		ld		(iy+4),a
    1346   00:48E7  FD 77 05            		ld		(iy+5),a
    1347   00:48EA  AF                  		xor		a
    1348   00:48EB  FD 77 06            		ld		(iy+6),a
    1349   00:48EE  3E 02               		ld		a,2
    1350   00:48F0  FD 77 07            		ld		(iy+7),a
    1351   00:48F3  3E FF               		ld		a,255
    1352   00:48F5  FD 77 08            		ld		(iy+8),a
    1353   00:48F8                      		
    1354   00:48F8  FD 21 51 C3         		ld		iy,variables_serpiente_2
    1355   00:48FC  3E 78               		ld		a,120
    1356   00:48FE  FD 77 00            		ld		(iy),a
    1357   00:4901  3E 50               		ld		a,80
    1358   00:4903  FD 77 01            		ld		(iy+1),a
    1359   00:4906  AF                  		xor	a
    1360   00:4907  FD 77 02            		ld		(iy+2),a
    1361   00:490A  FD 77 03            		ld		(iy+3),a
    1362   00:490D  3E 0E               		ld		a,14
    1363   00:490F  FD 77 04            		ld		(iy+4),a
    1364   00:4912  FD 77 05            		ld		(iy+5),a
    1365   00:4915  AF                  		xor		a
    1366   00:4916  FD 77 06            		ld		(iy+6),a
    1367   00:4919  3E 03               		ld		a,3
    1368   00:491B  FD 77 07            		ld		(iy+7),a
    1369   00:491E  3E FF               		ld		a,255
    1370   00:4920  FD 77 08            		ld		(iy+8),a
    1371   00:4923                      		
    1372   00:4923  FD 21 5A C3         		ld		iy,variables_serpiente_3
    1373   00:4927  3E 68               		ld		a,104
    1374   00:4929  FD 77 00            		ld		(iy),a
    1375   00:492C  3E 90               		ld		a,144
    1376   00:492E  FD 77 01            		ld		(iy+1),a
    1377   00:4931  AF                  		xor	a
    1378   00:4932  FD 77 02            		ld		(iy+2),a
    1379   00:4935  FD 77 03            		ld		(iy+3),a
    1380   00:4938  3E 02               		ld		a,2
    1381   00:493A  FD 77 04            		ld		(iy+4),a
    1382   00:493D  FD 77 05            		ld		(iy+5),a
    1383   00:4940  AF                  		xor		a
    1384   00:4941  FD 77 06            		ld		(iy+6),a
    1385   00:4944  3E 01               		ld		a,1
    1386   00:4946  FD 77 07            		ld		(iy+7),a
    1387   00:4949  3E FF               		ld		a,255
    1388   00:494B  FD 77 08            		ld		(iy+8),a
    1389   00:494E                      		
    1390   00:494E                      				
    1391   00:494E  3E 01               		ld		a,1
    1392   00:4950  32 6D C3            		ld		(serp1),a
    1393   00:4953  32 6E C3            		ld		(serp2),a
    1394   00:4956  32 6F C3            		ld		(serp3),a
    1395   00:4959                      						
    1396   00:4959                      		;		otras variables
    1397   00:4959                      		
    1398   00:4959  21 CF 00            		ld		hl,207
    1399   00:495C  22 7B C3            		ld		(posicion_escalera),hl
    1400   00:495F  21 4F 00            		ld		hl,79
    1401   00:4962  22 7E C3            		ld		(limite_escalera),hl
    1402   00:4965  3E 06               		ld		a,6
    1403   00:4967  32 18 C0            		ld		(fase_en_la_que_esta),a
    1404   00:496A  21 7D 00            		ld		hl,125
    1405   00:496D  22 3A C3            		ld		(posicion_puerta),hl
    1406   00:4970                      					
    1407   00:4970  21 C8 00            		ld		hl,200
    1408   00:4973  22 0F C0            		ld		(clock),hl						
    1409   00:4976  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1410   00:4979                      		
    1411   00:4979  CD 26 4E            		call	activa_musica_fases
    1412   00:497C                      		
    1413   00:497C  21 F0 A6            		ld		hl,fase_6												;cargamos sanctuary 6 en ram
    1414   00:497F  11 57 C0            		ld		de,buffer_colisiones
    1415   00:4982  CD A9 6D            		call	depack
    1416   00:4985                      		
    1417   00:4985  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1418   00:4988                      
    1419   00:4988  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1420   00:498B                      		
    1421   00:498B  C3 C2 53            		jr.		repite_fase
    1422   00:498E                      
    1423   00:498E                      bloque_sanctuary_7:
    1424   00:498E                      		
    1425   00:498E  CD AB 4C            		call	pantalla_en_blanco
    1426   00:4991                      		
    1427   00:4991  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 7
    1428   00:4994  FE 00               		cp		0
    1429   00:4996  28 05               		jr.		z,bloque_sanctuary_7_esp
    1430   00:4998  21 6B AD            		ld		hl,sanctuary_7
    1431   00:499B  18 03               		jr.		bloque_sanctuary_7_cont
    1432   00:499D                      
    1433   00:499D                      bloque_sanctuary_7_esp:
    1434   00:499D                      
    1435   00:499D  21 E3 AD            		ld		hl,sanctuario_7
    1436   00:49A0                      
    1437   00:49A0                      bloque_sanctuary_7_cont:
    1438   00:49A0                      
    1439   00:49A0  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1440   00:49A3                      
    1441   00:49A3  CD 57 4D            		call	SPRITES_DOS
    1442   00:49A6                      		
    1443   00:49A6                      		;		coordenadas prota
    1444   00:49A6                      
    1445   00:49A6  3E 78               		ld		a,120													;define variables
    1446   00:49A8  32 11 C0            		ld		(px),a
    1447   00:49AB  32 51 C0            		ld		(px_salida),a
    1448   00:49AE  3E 18               		ld		a,24						
    1449   00:49B0  32 12 C0            		ld		(py),a
    1450   00:49B3  32 52 C0            		ld		(py_salida),a
    1451   00:49B6                      		
    1452   00:49B6  CD D9 4C            		call	variables_iguales
    1453   00:49B9                      		
    1454   00:49B9                      		;		coordenadas bombero
    1455   00:49B9                      		
    1456   00:49B9  FD 21 85 C3         		ld		iy,bombero_control
    1457   00:49BD  3E 78               		ld		a,120
    1458   00:49BF  FD 77 00            		ld		(iy),a
    1459   00:49C2  3E 18               		ld		a,24
    1460   00:49C4  FD 77 01            		ld		(iy+1),a
    1461   00:49C7  3E 02               		ld		a,2
    1462   00:49C9  FD 77 02            		ld		(iy+2),a
    1463   00:49CC  3E 96               		ld		a,150
    1464   00:49CE  FD 77 03            		ld		(iy+3),a
    1465   00:49D1  3E 0A               		ld		a,10
    1466   00:49D3  FD 77 04            		ld		(iy+4),a
    1467   00:49D6  AF                  		xor		a
    1468   00:49D7  FD 77 05            		ld		(iy+5),a
    1469   00:49DA  FD 77 06            		ld		(iy+6),a
    1470   00:49DD  FD 77 07            		ld		(iy+7),a
    1471   00:49E0  FD 77 0A            		ld		(iy+10),a
    1472   00:49E3  3E C8               		ld		a,200
    1473   00:49E5  FD 77 08            		ld		(iy+8),a
    1474   00:49E8  3E 01               		ld		a,1
    1475   00:49EA  FD 77 09            		ld		(iy+9),a
    1476   00:49ED                      								
    1477   00:49ED                      		;		otras variables
    1478   00:49ED                      		
    1479   00:49ED  21 AF 02            		ld		hl,687
    1480   00:49F0  22 7B C3            		ld		(posicion_escalera),hl
    1481   00:49F3  21 2F 02            		ld		hl,559
    1482   00:49F6  22 7E C3            		ld		(limite_escalera),hl
    1483   00:49F9  3E 07               		ld		a,7
    1484   00:49FB  32 18 C0            		ld		(fase_en_la_que_esta),a
    1485   00:49FE  21 6F 00            		ld		hl,111
    1486   00:4A01  22 3A C3            		ld		(posicion_puerta),hl
    1487   00:4A04  3E 01               		ld		a,1
    1488   00:4A06  32 84 C3            		ld		(bombero_1),a
    1489   00:4A09                      					
    1490   00:4A09  21 C8 00            		ld		hl,200
    1491   00:4A0C  22 0F C0            		ld		(clock),hl						
    1492   00:4A0F  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1493   00:4A12                      		
    1494   00:4A12  CD 26 4E            		call	activa_musica_fases
    1495   00:4A15                      
    1496   00:4A15  21 2D A8            		ld		hl,fase_7					;cargamos sanctuary 1 en ram
    1497   00:4A18  11 57 C0            		ld		de,buffer_colisiones
    1498   00:4A1B  CD A9 6D            		call	depack
    1499   00:4A1E                      		
    1500   00:4A1E  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1501   00:4A21                      
    1502   00:4A21  CD 7D 4E            		call 	gran_rutina					;vamos a la rutina de movimientos general
    1503   00:4A24                      		
    1504   00:4A24  C3 C2 53            		jr.		repite_fase
    1505   00:4A27                      
    1506   00:4A27                      bloque_sanctuary_8:
    1507   00:4A27                      		
    1508   00:4A27  CD AB 4C            		call	pantalla_en_blanco
    1509   00:4A2A                      		
    1510   00:4A2A  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 8
    1511   00:4A2D  FE 00               		cp		0
    1512   00:4A2F  28 05               		jr.		z,bloque_sanctuary_8_esp
    1513   00:4A31  21 77 AD            		ld		hl,sanctuary_8
    1514   00:4A34  18 03               		jr.		bloque_sanctuary_8_cont
    1515   00:4A36                      
    1516   00:4A36                      bloque_sanctuary_8_esp:
    1517   00:4A36                      
    1518   00:4A36  21 EF AD            		ld		hl,sanctuario_8
    1519   00:4A39                      
    1520   00:4A39                      bloque_sanctuary_8_cont:
    1521   00:4A39                      
    1522   00:4A39  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1523   00:4A3C                      		
    1524   00:4A3C  CD 57 4D            		call	SPRITES_DOS
    1525   00:4A3F                      		
    1526   00:4A3F                      		;		coordenadas prota
    1527   00:4A3F                      
    1528   00:4A3F  3E 10               		ld		a,16													;define variables
    1529   00:4A41  32 11 C0            		ld		(px),a
    1530   00:4A44  32 51 C0            		ld		(px_salida),a
    1531   00:4A47  3E 18               		ld		a,24						
    1532   00:4A49  32 12 C0            		ld		(py),a
    1533   00:4A4C  32 52 C0            		ld		(py_salida),a
    1534   00:4A4F                      		
    1535   00:4A4F  CD D9 4C            		call	variables_iguales
    1536   00:4A52                      		
    1537   00:4A52                      		;		coordenadas bombero
    1538   00:4A52                      		
    1539   00:4A52  FD 21 85 C3         		ld		iy,bombero_control
    1540   00:4A56  3E 10               		ld		a,16
    1541   00:4A58  FD 77 00            		ld		(iy),a
    1542   00:4A5B  3E 18               		ld		a,24
    1543   00:4A5D  FD 77 01            		ld		(iy+1),a
    1544   00:4A60  3E 02               		ld		a,2
    1545   00:4A62  FD 77 02            		ld		(iy+2),a
    1546   00:4A65  3E 96               		ld		a,150
    1547   00:4A67  FD 77 03            		ld		(iy+3),a
    1548   00:4A6A  3E 0A               		ld		a,10
    1549   00:4A6C  FD 77 04            		ld		(iy+4),a
    1550   00:4A6F  AF                  		xor		a
    1551   00:4A70  FD 77 05            		ld		(iy+5),a
    1552   00:4A73  FD 77 06            		ld		(iy+6),a
    1553   00:4A76  FD 77 07            		ld		(iy+7),a
    1554   00:4A79  FD 77 0A            		ld		(iy+10),a
    1555   00:4A7C  3E C8               		ld		a,200
    1556   00:4A7E  FD 77 08            		ld		(iy+8),a
    1557   00:4A81  3E 01               		ld		a,1
    1558   00:4A83  FD 77 09            		ld		(iy+9),a
    1559   00:4A86                      								
    1560   00:4A86                      		;		otras variables
    1561   00:4A86                      		
    1562   00:4A86  21 A4 02            		ld		hl,676
    1563   00:4A89  22 7B C3            		ld		(posicion_escalera),hl
    1564   00:4A8C  21 24 02            		ld		hl,548
    1565   00:4A8F  22 7E C3            		ld		(limite_escalera),hl
    1566   00:4A92  3E 08               		ld		a,8
    1567   00:4A94  32 18 C0            		ld		(fase_en_la_que_esta),a
    1568   00:4A97  21 62 00            		ld		hl,98
    1569   00:4A9A  22 3A C3            		ld		(posicion_puerta),hl
    1570   00:4A9D  3E 01               		ld		a,1
    1571   00:4A9F  32 84 C3            		ld		(bombero_1),a
    1572   00:4AA2                      					
    1573   00:4AA2  21 C8 00            		ld		hl,200
    1574   00:4AA5  22 0F C0            		ld		(clock),hl						
    1575   00:4AA8  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1576   00:4AAB                      		
    1577   00:4AAB  CD 26 4E            		call	activa_musica_fases
    1578   00:4AAE                      
    1579   00:4AAE  21 19 A9            		ld		hl,fase_8												;cargamos sanctuary 8 en ram
    1580   00:4AB1  11 57 C0            		ld		de,buffer_colisiones
    1581   00:4AB4  CD A9 6D            		call	depack
    1582   00:4AB7                      		
    1583   00:4AB7  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1584   00:4ABA                      
    1585   00:4ABA  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1586   00:4ABD                      		
    1587   00:4ABD  C3 C2 53            		jr.		repite_fase
    1588   00:4AC0                      
    1589   00:4AC0                      bloque_sanctuary_9:
    1590   00:4AC0                      		
    1591   00:4AC0  CD AB 4C            		call	pantalla_en_blanco
    1592   00:4AC3                      		
    1593   00:4AC3  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 9
    1594   00:4AC6  FE 00               		cp		0
    1595   00:4AC8  28 05               		jr.		z,bloque_sanctuary_9_esp
    1596   00:4ACA  21 83 AD            		ld		hl,sanctuary_9
    1597   00:4ACD  18 03               		jr.		bloque_sanctuary_9_cont
    1598   00:4ACF                      
    1599   00:4ACF                      bloque_sanctuary_9_esp:
    1600   00:4ACF                      
    1601   00:4ACF  21 FB AD            		ld		hl,sanctuario_9
    1602   00:4AD2                      
    1603   00:4AD2                      bloque_sanctuary_9_cont:
    1604   00:4AD2                      
    1605   00:4AD2  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1606   00:4AD5                      
    1607   00:4AD5  CD 47 4D            		call	SPRITES_UNO
    1608   00:4AD8                      		
    1609   00:4AD8                      		;		coordenadas prota
    1610   00:4AD8                      
    1611   00:4AD8  3E 6A               		ld		a,106													;define variables
    1612   00:4ADA  32 11 C0            		ld		(px),a
    1613   00:4ADD  32 51 C0            		ld		(px_salida),a
    1614   00:4AE0  3E A8               		ld		a,168						
    1615   00:4AE2  32 12 C0            		ld		(py),a
    1616   00:4AE5  32 52 C0            		ld		(py_salida),a
    1617   00:4AE8                      		
    1618   00:4AE8  CD D9 4C            		call	variables_iguales
    1619   00:4AEB                      		
    1620   00:4AEB                      		;		coordenadas serpientes
    1621   00:4AEB                      		
    1622   00:4AEB  FD 21 48 C3         		ld		iy,variables_serpiente_1
    1623   00:4AEF  3E 78               		ld		a,120
    1624   00:4AF1  FD 77 00            		ld		(iy),a
    1625   00:4AF4  FD 77 01            		ld		(iy+1),a
    1626   00:4AF7  AF                  		xor	a
    1627   00:4AF8  FD 77 02            		ld		(iy+2),a
    1628   00:4AFB  FD 77 03            		ld		(iy+3),a
    1629   00:4AFE  3E 08               		ld		a,8
    1630   00:4B00  FD 77 04            		ld		(iy+4),a
    1631   00:4B03  FD 77 05            		ld		(iy+5),a
    1632   00:4B06  AF                  		xor		a
    1633   00:4B07  FD 77 06            		ld		(iy+6),a
    1634   00:4B0A  3E 02               		ld		a,2
    1635   00:4B0C  FD 77 07            		ld		(iy+7),a
    1636   00:4B0F  3E FF               		ld		a,255
    1637   00:4B11  FD 77 08            		ld		(iy+8),a
    1638   00:4B14                      		
    1639   00:4B14  3E 01               		ld		a,1
    1640   00:4B16  32 6D C3            		ld		(serp1),a
    1641   00:4B19                      								
    1642   00:4B19                      		;		otras variables
    1643   00:4B19                      		
    1644   00:4B19  21 DD 00            		ld		hl,221
    1645   00:4B1C  22 7B C3            		ld		(posicion_escalera),hl
    1646   00:4B1F  21 5D 00            		ld		hl,93
    1647   00:4B22  22 7E C3            		ld		(limite_escalera),hl
    1648   00:4B25  3E 09               		ld		a,9
    1649   00:4B27  32 18 C0            		ld		(fase_en_la_que_esta),a
    1650   00:4B2A  21 AD 02            		ld		hl,685
    1651   00:4B2D  22 3A C3            		ld		(posicion_puerta),hl
    1652   00:4B30                      							
    1653   00:4B30  21 C8 00            		ld		hl,200
    1654   00:4B33  22 0F C0            		ld		(clock),hl						
    1655   00:4B36  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1656   00:4B39                      		
    1657   00:4B39  CD 26 4E            		call	activa_musica_fases
    1658   00:4B3C                      
    1659   00:4B3C  21 21 AA            		ld		hl,fase_9					;cargamos sanctuary 1 en ram
    1660   00:4B3F  11 57 C0            		ld		de,buffer_colisiones
    1661   00:4B42  CD A9 6D            		call	depack
    1662   00:4B45                      		
    1663   00:4B45  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1664   00:4B48                      
    1665   00:4B48  CD 7D 4E            		call 	gran_rutina					;vamos a la rutina de movimientos general
    1666   00:4B4B                      		
    1667   00:4B4B  C3 C2 53            		jr.		repite_fase
    1668   00:4B4E                      
    1669   00:4B4E                      bloque_sanctuary_10:
    1670   00:4B4E                      		
    1671   00:4B4E  CD AB 4C            		call	pantalla_en_blanco
    1672   00:4B51                      		
    1673   00:4B51  3A 00 C0            		ld		a,(idioma)												;anunciamos sanctuary 10
    1674   00:4B54  FE 00               		cp		0
    1675   00:4B56  28 05               		jr.		z,bloque_sanctuary_10_esp
    1676   00:4B58  21 8F AD            		ld		hl,sanctuary_10
    1677   00:4B5B  18 03               		jr.		bloque_sanctuary_10_cont
    1678   00:4B5D                      
    1679   00:4B5D                      bloque_sanctuary_10_esp:
    1680   00:4B5D                      
    1681   00:4B5D  21 07 AE            		ld		hl,sanctuario_10
    1682   00:4B60                      
    1683   00:4B60                      bloque_sanctuary_10_cont:
    1684   00:4B60                      
    1685   00:4B60  CD D0 4C            		call	anunciamos_el_santuario_correspondiente
    1686   00:4B63                      
    1687   00:4B63  CD 57 4D            		call	SPRITES_DOS
    1688   00:4B66                      		
    1689   00:4B66                      		;		coordenadas prota
    1690   00:4B66                      
    1691   00:4B66  3E D8               		ld		a,216													;define variables
    1692   00:4B68  32 11 C0            		ld		(px),a
    1693   00:4B6B  32 51 C0            		ld		(px_salida),a
    1694   00:4B6E  3E 18               		ld		a,24						
    1695   00:4B70  32 12 C0            		ld		(py),a
    1696   00:4B73  32 52 C0            		ld		(py_salida),a
    1697   00:4B76                      		
    1698   00:4B76  CD D9 4C            		call	variables_iguales
    1699   00:4B79                      		
    1700   00:4B79                      		;		coordenadas bombero
    1701   00:4B79                      		
    1702   00:4B79  FD 21 85 C3         		ld		iy,bombero_control
    1703   00:4B7D  3E D8               		ld		a,216
    1704   00:4B7F  FD 77 00            		ld		(iy),a
    1705   00:4B82  3E 18               		ld		a,24
    1706   00:4B84  FD 77 01            		ld		(iy+1),a
    1707   00:4B87  3E 02               		ld		a,2
    1708   00:4B89  FD 77 02            		ld		(iy+2),a
    1709   00:4B8C  3E 96               		ld		a,150
    1710   00:4B8E  FD 77 03            		ld		(iy+3),a
    1711   00:4B91  3E 0A               		ld		a,10
    1712   00:4B93  FD 77 04            		ld		(iy+4),a
    1713   00:4B96  AF                  		xor		a
    1714   00:4B97  FD 77 05            		ld		(iy+5),a
    1715   00:4B9A  FD 77 06            		ld		(iy+6),a
    1716   00:4B9D  FD 77 07            		ld		(iy+7),a
    1717   00:4BA0  FD 77 0A            		ld		(iy+10),a
    1718   00:4BA3  3E C8               		ld		a,200
    1719   00:4BA5  FD 77 08            		ld		(iy+8),a
    1720   00:4BA8  3E 04               		ld		a,4
    1721   00:4BAA  FD 77 09            		ld		(iy+9),a
    1722   00:4BAD                      								
    1723   00:4BAD                      		;		otras variables
    1724   00:4BAD                      		
    1725   00:4BAD  21 DD 00            		ld		hl,221
    1726   00:4BB0  22 7B C3            		ld		(posicion_escalera),hl
    1727   00:4BB3  21 5D 00            		ld		hl,93
    1728   00:4BB6  22 7E C3            		ld		(limite_escalera),hl
    1729   00:4BB9  3E 0A               		ld		a,10
    1730   00:4BBB  32 18 C0            		ld		(fase_en_la_que_esta),a
    1731   00:4BBE  21 7A 00            		ld		hl,122
    1732   00:4BC1  22 3A C3            		ld		(posicion_puerta),hl
    1733   00:4BC4  AF                  		xor		a
    1734   00:4BC5  32 82 C3            		ld		(vision_estado),a
    1735   00:4BC8  3E 01               		ld		a,1
    1736   00:4BCA  32 84 C3            		ld		(bombero_1),a
    1737   00:4BCD                      							
    1738   00:4BCD  21 C8 00            		ld		hl,200
    1739   00:4BD0  22 0F C0            		ld		(clock),hl						
    1740   00:4BD3  CD 5B 4E            		call	rutina_de_esperar_un_rato
    1741   00:4BD6                      		
    1742   00:4BD6  CD 26 4E            		call	activa_musica_fases
    1743   00:4BD9                      
    1744   00:4BD9  21 3C AB            		ld		hl,fase_10												;cargamos sanctuary 10 en ram
    1745   00:4BDC  11 57 C0            		ld		de,buffer_colisiones
    1746   00:4BDF  CD A9 6D            		call	depack
    1747   00:4BE2                      		
    1748   00:4BE2  CD AB 4C            		call	pantalla_en_blanco
    1749   00:4BE5                      
    1750   00:4BE5  3E 5D               		ld		a,93
    1751   00:4BE7  32 EE EE            		ld		[#eeee],a
    1752   00:4BEA  21 EE EE            		ld		hl,#eeee												;pinta el mando de la luz
    1753   00:4BED  11 C4 19            		ld		de,#19c4
    1754   00:4BF0  01 01 00            		ld		bc,1
    1755   00:4BF3  CD 5C 00            		call	GRABAVRAM
    1756   00:4BF6                      
    1757   00:4BF6  CD 7D 4E            		call 	gran_rutina												;vamos a la rutina de movimientos general
    1758   00:4BF9                      		
    1759   00:4BF9  C3 C2 53            		jr.		repite_fase
    1760   00:4BFC                      		
    1761   00:4BFC                      FINAL_TEMPLO:
    1762   00:4BFC                      		
    1763   00:4BFC  CD 41 00            		call	DISSCR
    1764   00:4BFF  21 51 AC            		ld		hl,FINAL												;cargamos FINAL en ram
    1765   00:4C02  11 57 C0            		ld		de,buffer_colisiones
    1766   00:4C05  CD A9 6D            		call	depack
    1767   00:4C08                      		
    1768   00:4C08  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    1769   00:4C0B  3A 00 C0            		ld		a,(idioma)
    1770   00:4C0E  FE 00               		cp		0
    1771   00:4C10  20 18               		jr.		nz,FINAL_TEMPLO_CONTINUA
    1772   00:4C12                      		
    1773   00:4C12  21 AB AF            		ld		hl,lo_has_logrado
    1774   00:4C15  11 80 18            		ld		de,#1880
    1775   00:4C18  01 1F 00            		ld		bc,31
    1776   00:4C1B  CD 5C 00            		call	GRABAVRAM
    1777   00:4C1E                      		
    1778   00:4C1E  21 CA AF            		ld		hl,felicidades
    1779   00:4C21  11 A1 1A            		ld		de,#1aa1
    1780   00:4C24  01 1E 00            		ld		bc,30
    1781   00:4C27  CD 5C 00            		call	GRABAVRAM
    1782   00:4C2A                      		
    1783   00:4C2A                      FINAL_TEMPLO_CONTINUA:
    1784   00:4C2A                      
    1785   00:4C2A  CD 44 00            		call	ENASCR
    1786   00:4C2D                      		;		coordenadas prota
    1787   00:4C2D                      
    1788   00:4C2D  3E 70               		ld		a,112													;define variables
    1789   00:4C2F  32 11 C0            		ld		(px),a
    1790   00:4C32  32 12 C0            		ld		(py),a
    1791   00:4C35                      
    1792   00:4C35  3E 0C               		ld		a,12
    1793   00:4C37  32 18 C0            		ld		(fase_en_la_que_esta),a
    1794   00:4C3A                      		
    1795   00:4C3A  3A E0 F3            		ld		a,(RG1SAV)
    1796   00:4C3D  F6 01               		or		00000001b												;modo sprites ampliados
    1797   00:4C3F  47                  		ld		b,a
    1798   00:4C40  0E 01               		ld		c,1
    1799   00:4C42  CD 47 00            		call	WRTVDP													;lo escribe en el registro 1 del VDP
    1800   00:4C45                      		
    1801   00:4C45  CD 3A 4E            		call	activa_musica_menu
    1802   00:4C48                      		
    1803   00:4C48  DD 21 20 C0         		ld		ix,atributos_sprite_general
    1804   00:4C4C                      		
    1805   00:4C4C  3E 32               		ld		a,50
    1806   00:4C4E  32 03 C0            		ld		(petisoy),a
    1807   00:4C51  3E 70               		ld		a,112
    1808   00:4C53  32 02 C0            		ld		(petisox),a
    1809   00:4C56  3E 0A               		ld		a,10
    1810   00:4C58  32 04 C0            		ld		(espera_petiso),a
    1811   00:4C5B  32 06 C0            		ld		(espera_petiso_resta_2),a
    1812   00:4C5E  32 05 C0            		ld		(espera_petiso_resta),a
    1813   00:4C61                      		
    1814   00:4C61  CD 3A 4D            		call	SPRITES_PETISOS
    1815   00:4C64                      		
    1816   00:4C64                      animacion_final:
    1817   00:4C64                      		
    1818   00:4C64                      		
    1819   00:4C64                      		
    1820   00:4C64  3A 12 C0            		ld		a,(py)
    1821   00:4C67  DD 77 10            		ld		(ix+16),a
    1822   00:4C6A  DD 77 14            		ld		(ix+20),a
    1823   00:4C6D  3A 11 C0            		ld		a,(px)
    1824   00:4C70  DD 77 11            		ld		(ix+17),a
    1825   00:4C73  DD 77 15            		ld		(ix+21),a
    1826   00:4C76  3E CC               		ld		a,51*4
    1827   00:4C78  DD 77 12            		ld		(ix+18),a
    1828   00:4C7B  3E D0               		ld		a,52*4
    1829   00:4C7D  DD 77 16            		ld		(ix+22),a
    1830   00:4C80  3E 01               		ld		a,1
    1831   00:4C82  DD 77 13            		ld		(ix+19),a
    1832   00:4C85  3E 08               		ld		a,8
    1833   00:4C87  DD 77 17            		ld		(ix+23),a
    1834   00:4C8A                      		
    1835   00:4C8A  CD F1 40            		call	petiso_activity	
    1836   00:4C8D                      			
    1837   00:4C8D  CD D4 57            		call	atributos_sprites
    1838   00:4C90                      		
    1839   00:4C90  3E D4               		ld		a,53*4
    1840   00:4C92  DD 77 12            		ld		(ix+18),a
    1841   00:4C95  3E D8               		ld		a,54*4
    1842   00:4C97  DD 77 16            		ld		(ix+22),a
    1843   00:4C9A                      		
    1844   00:4C9A  CD D4 57            		call	atributos_sprites
    1845   00:4C9D                      		
    1846   00:4C9D  3A 0E C0            		ld		a,(stick_a_usar)
    1847   00:4CA0  CD D8 00            		CALL	ONSTRIG
    1848   00:4CA3  FE 00               		cp		0
    1849   00:4CA5  CA 64 4C            		jp		z,animacion_final
    1850   00:4CA8                      			
    1851   00:4CA8  C3 8D 41            		jr.		MENU
    1852   00:4CAB                      		
    1853   00:4CAB                      pantalla_en_blanco:
    1854   00:4CAB                      		
    1855   00:4CAB  CD 41 00            		call	DISSCR
    1856   00:4CAE  21 04 B0            		ld		hl,blanco												;tiles de base de pantalla
    1857   00:4CB1  11 20 18            		ld		de,#1820
    1858   00:4CB4  CD C9 6C            		call	depack_VRAM
    1859   00:4CB7                      		
    1860   00:4CB7  21 E4 B0            		ld		hl,trofeos												;carga objetos
    1861   00:4CBA  11 18 18            		ld		de,#1818
    1862   00:4CBD  CD C9 6C            		call	depack_VRAM
    1863   00:4CC0  CD 44 00            		call	ENASCR
    1864   00:4CC3  C9                  		ret
    1865   00:4CC4                      
    1866   00:4CC4                      copiamos_en_pantalla_lo_de_memoria:
    1867   00:4CC4                      
    1868   00:4CC4  21 57 C0            		ld		hl,buffer_colisiones									;copia en vram para que lo vea el jugador
    1869   00:4CC7  11 20 18            		ld		de,#1820
    1870   00:4CCA  01 E0 02            		ld		bc,736
    1871   00:4CCD  C3 5C 00            		jr.		GRABAVRAM
    1872   00:4CD0                      
    1873   00:4CD0                      anunciamos_el_santuario_correspondiente:
    1874   00:4CD0                      
    1875   00:4CD0  11 8A 19            		ld		de,#198a
    1876   00:4CD3  01 0C 00            		ld		bc,12
    1877   00:4CD6  C3 5C 00            		jr.		GRABAVRAM
    1878   00:4CD9                      		
    1879   00:4CD9                      variables_iguales:
    1880   00:4CD9                      
    1881   00:4CD9  3E 08               		ld		a,8
    1882   00:4CDB  32 15 C0            		ld		(color_prota),a
    1883   00:4CDE  3E 01               		ld		a,1
    1884   00:4CE0  32 16 C0            		ld		(color_lineas_prota),a
    1885   00:4CE3  32 17 C0            		ld		(muerto),a
    1886   00:4CE6  32 80 C3            		ld		(grifo_estado),a
    1887   00:4CE9  32 82 C3            		ld		(vision_estado),a
    1888   00:4CEC  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    1889   00:4CEF                      
    1890   00:4CEF  AF                  		xor		a
    1891   00:4CF0  32 19 C0            		ld		(estado_prota),a
    1892   00:4CF3  32 72 C3            		ld		(pasamos_la_fase),a
    1893   00:4CF6  32 39 C3            		ld		(gasolina),a
    1894   00:4CF9  32 38 C3            		ld		(mechero),a
    1895   00:4CFC  32 3C C3            		ld		(ya_ha_cambiado_puerta),a
    1896   00:4CFF  32 50 C0            		ld		(tiene_objeto),a
    1897   00:4D02  32 1C C0            		ld		(pasos_de_salto),a
    1898   00:4D05  32 37 C3            		ld		(estado_de_salto),a
    1899   00:4D08  32 73 C3            		ld		(momento_lanzamiento),a
    1900   00:4D0B  32 7A C3            		ld		(escalera_activada),a
    1901   00:4D0E  32 6D C3            		ld		(serp1),a
    1902   00:4D11  32 6E C3            		ld		(serp2),a
    1903   00:4D14  32 6F C3            		ld		(serp3),a
    1904   00:4D17  32 70 C3            		ld		(serp4),a
    1905   00:4D1A  32 84 C3            		ld		(bombero_1),a
    1906   00:4D1D  32 83 C3            		ld		(colision_bombero_prota_real),a
    1907   00:4D20  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    1908   00:4D23                      		
    1909   00:4D23  32 77 C3            		ld		(dir_cuchillo),a
    1910   00:4D26  32 78 C3            		ld		(cx),a
    1911   00:4D29  32 79 C3            		ld		(cy),a
    1912   00:4D2C                      
    1913   00:4D2C  3E 05               		ld		a,5
    1914   00:4D2E  32 71 C3            		ld		(cont_no_salta_dos_seguidas),a
    1915   00:4D31  32 74 C3            		ld		(contador_poses_lanzar),a
    1916   00:4D34  3E 32               		ld		a,50
    1917   00:4D36  32 7D C3            		ld		(contador_escalera),a
    1918   00:4D39                      		
    1919   00:4D39  C9                  		ret
    1920   00:4D3A                      
    1921   00:4D3A                      SPRITES_PETISOS:
    1922   00:4D3A                      
    1923   00:4D3A  21 C9 B8            		ld		hl,sprites_pet											;cargamos petisos
    1924   00:4D3D  11 00 38            		ld		de,#3800
    1925   00:4D40  01 00 01            		ld		bc,256
    1926   00:4D43  CD 5C 00            		call	GRABAVRAM
    1927   00:4D46                      		
    1928   00:4D46  C9                  		ret
    1929   00:4D47                      		
    1930   00:4D47                      SPRITES_UNO:
    1931   00:4D47                      
    1932   00:4D47  CD 41 00            		call	DISSCR
    1933   00:4D4A  21 F1 B0            		ld		hl,sprites												;carga sprites general
    1934   00:4D4D  11 00 38            		ld		de,#3800
    1935   00:4D50  CD C9 6C            		call	depack_VRAM
    1936   00:4D53  CD 44 00            		call	ENASCR
    1937   00:4D56                      		
    1938   00:4D56  C9                  		ret
    1939   00:4D57                      
    1940   00:4D57                      SPRITES_DOS:
    1941   00:4D57                      
    1942   00:4D57  21 89 B4            		ld		hl,sprites2												;cargamos sprites bombero parte 1
    1943   00:4D5A  11 20 3B            		ld		de,#3b20
    1944   00:4D5D  01 00 01            		ld		bc,256
    1945   00:4D60  CD 5C 00            		call	GRABAVRAM
    1946   00:4D63                      
    1947   00:4D63  21 89 B5            		ld		hl,sprites3												;cargamos sprites bombero parte 2
    1948   00:4D66  11 A0 3D            		ld		de,#3da0
    1949   00:4D69  01 C0 00            		ld		bc,192
    1950   00:4D6C  CD 5C 00            		call	GRABAVRAM
    1951   00:4D6F                      		
    1952   00:4D6F  21 49 B6            		ld		hl,sprites4												;cargamos sprites bombero parte 3
    1953   00:4D72  11 E0 3E            		ld		de,#3ee0
    1954   00:4D75  01 00 01            		ld		bc,256
    1955   00:4D78  CD 5C 00            		call	GRABAVRAM
    1956   00:4D7B  C9                  		ret
    1957   00:4D7C                      
    1958   00:4D7C                      SPRITES_BOMBA:
    1959   00:4D7C                      
    1960   00:4D7C  21 49 B7            		ld		hl,sprites5				
    1961   00:4D7F  11 00 38            		ld		de,#3800
    1962   00:4D82  01 20 00            		ld		bc,32
    1963   00:4D85  CD 5C 00            		call	GRABAVRAM
    1964   00:4D88                      		
    1965   00:4D88  21 89 B7            		ld		hl,sprites6			
    1966   00:4D8B  11 60 38            		ld		de,#3860
    1967   00:4D8E  01 20 00            		ld		bc,32
    1968   00:4D91  CD 5C 00            		call	GRABAVRAM
    1969   00:4D94                      		
    1970   00:4D94  21 C9 B7            		ld		hl,sprites7				
    1971   00:4D97  11 C0 38            		ld		de,#38C0
    1972   00:4D9A  01 20 00            		ld		bc,32
    1973   00:4D9D  CD 5C 00            		call	GRABAVRAM
    1974   00:4DA0                      		
    1975   00:4DA0  21 09 B8            		ld		hl,sprites8				
    1976   00:4DA3  11 20 39            		ld		de,#3920
    1977   00:4DA6  01 20 00            		ld		bc,32
    1978   00:4DA9  CD 5C 00            		call	GRABAVRAM
    1979   00:4DAC                      		
    1980   00:4DAC  C9                  		ret
    1981   00:4DAD                      		
    1982   00:4DAD                      SPRITES_CUCHILLO:
    1983   00:4DAD                      
    1984   00:4DAD  21 69 B7            		ld		hl,sprites9				;anunciamos sanctuary 1
    1985   00:4DB0  11 00 38            		ld		de,#3800
    1986   00:4DB3  01 20 00            		ld		bc,32
    1987   00:4DB6  CD 5C 00            		call	GRABAVRAM
    1988   00:4DB9                      		
    1989   00:4DB9  21 A9 B7            		ld		hl,sprites10				
    1990   00:4DBC  11 60 38            		ld		de,#3860
    1991   00:4DBF  01 20 00            		ld		bc,32
    1992   00:4DC2  CD 5C 00            		call	GRABAVRAM
    1993   00:4DC5                      		
    1994   00:4DC5  21 E9 B7            		ld		hl,sprites11			
    1995   00:4DC8  11 C0 38            		ld		de,#38C0
    1996   00:4DCB  01 20 00            		ld		bc,32
    1997   00:4DCE  CD 5C 00            		call	GRABAVRAM
    1998   00:4DD1                      		
    1999   00:4DD1  21 29 B8            		ld		hl,sprites12				
    2000   00:4DD4  11 20 39            		ld		de,#3920
    2001   00:4DD7  01 20 00            		ld		bc,32
    2002   00:4DDA  CD 5C 00            		call	GRABAVRAM
    2003   00:4DDD                      		
    2004   00:4DDD  C9                  		ret
    2005   00:4DDE                      
    2006   00:4DDE                      SPRITES_PROTA_NORMAL:
    2007   00:4DDE                      
    2008   00:4DDE  21 49 B8            		ld		hl,sprites13				;anunciamos sanctuary 1
    2009   00:4DE1  11 00 38            		ld		de,#3800
    2010   00:4DE4  01 20 00            		ld		bc,32
    2011   00:4DE7  CD 5C 00            		call	GRABAVRAM
    2012   00:4DEA                      		
    2013   00:4DEA  21 69 B8            		ld		hl,sprites14				
    2014   00:4DED  11 60 38            		ld		de,#3860
    2015   00:4DF0  01 20 00            		ld		bc,32
    2016   00:4DF3  CD 5C 00            		call	GRABAVRAM
    2017   00:4DF6                      		
    2018   00:4DF6  21 89 B8            		ld		hl,sprites15			
    2019   00:4DF9  11 C0 38            		ld		de,#38C0
    2020   00:4DFC  01 20 00            		ld		bc,32
    2021   00:4DFF  CD 5C 00            		call	GRABAVRAM
    2022   00:4E02                      		
    2023   00:4E02  21 A9 B8            		ld		hl,sprites16				
    2024   00:4E05  11 20 39            		ld		de,#3920
    2025   00:4E08  01 20 00            		ld		bc,32
    2026   00:4E0B  CD 5C 00            		call	GRABAVRAM
    2027   00:4E0E                      		
    2028   00:4E0E  C9                  		ret
    2029   00:4E0F                      								
    2030   00:4E0F                      string_de_espera:
    2031   00:4E0F                      
    2032   00:4E0F  3A 0E C0            		ld		a,(stick_a_usar)
    2033   00:4E12  CD D8 00            		CALL	ONSTRIG
    2034   00:4E15  FE 00               		cp		0
    2035   00:4E17  CA 0F 4E            		jp		z,string_de_espera
    2036   00:4E1A                      		
    2037   00:4E1A  C9                  		ret
    2038   00:4E1B                      
    2039   00:4E1B                      activa_mute:
    2040   00:4E1B                      	
    2041   00:4E1B  F3                  		di
    2042   00:4E1C                      		
    2043   00:4E1C  21 55 CD            		ld		hl,MUTE-99													;SILENCIA LA MUSICA
    2044   00:4E1F  CD 7C 6E            		call	PT3_INIT
    2045   00:4E22                      		
    2046   00:4E22  FB                  		ei
    2047   00:4E23                      		
    2048   00:4E23  C3 7C 54            		jr. musica_con_bucle
    2049   00:4E26                      		
    2050   00:4E26                      activa_musica_fases:
    2051   00:4E26                      		
    2052   00:4E26  CD 1B 4E            		call	activa_mute
    2053   00:4E29                      		
    2054   00:4E29  3A 81 C3            		ld		A,(ESTADO_MUSICA)
    2055   00:4E2C  FE 00               		cp		0
    2056   00:4E2E  C8                  		ret		z
    2057   00:4E2F                      	
    2058   00:4E2F  F3                  		di
    2059   00:4E30                      		
    2060   00:4E30  21 2E C3            		ld		hl,SAXOLO-99												;SILENCIA LA MUSICA
    2061   00:4E33  CD 7C 6E            		call	PT3_INIT
    2062   00:4E36                      		
    2063   00:4E36  FB                  		ei
    2064   00:4E37                      		
    2065   00:4E37  C3 7C 54            		jr.		musica_con_bucle
    2066   00:4E3A                      
    2067   00:4E3A                      activa_musica_menu:
    2068   00:4E3A                      			
    2069   00:4E3A  F3                  		di
    2070   00:4E3B                      		
    2071   00:4E3B  21 2E C3            		ld		hl,SAXOLO-99												;SILENCIA LA MUSICA
    2072   00:4E3E  CD 7C 6E            		call	PT3_INIT
    2073   00:4E41                      		
    2074   00:4E41  FB                  		ei
    2075   00:4E42                      		
    2076   00:4E42  C3 7C 54            		jr.		musica_con_bucle
    2077   00:4E45                      		
    2078   00:4E45                      activa_musica_muerto:
    2079   00:4E45                      	
    2080   00:4E45  F3                  		di
    2081   00:4E46                      		
    2082   00:4E46  21 CA CD            		ld		hl,MUERTO-99											;MUSICA DE MUERTE
    2083   00:4E49  CD 7C 6E            		call	PT3_INIT
    2084   00:4E4C                      		
    2085   00:4E4C  FB                  		ei
    2086   00:4E4D                      		
    2087   00:4E4D  C3 73 54            		jr.		musica_sin_bucle
    2088   00:4E50                      
    2089   00:4E50                      activa_musica_entre_fases:
    2090   00:4E50                      	
    2091   00:4E50  F3                  		di
    2092   00:4E51                      		
    2093   00:4E51  21 EE CE            		ld		hl,ENTRE_FASES-99										;MUSICA ENTRE FASES
    2094   00:4E54  CD 7C 6E            		call	PT3_INIT
    2095   00:4E57                      		
    2096   00:4E57  FB                  		ei
    2097   00:4E58                      		
    2098   00:4E58  C3 73 54            		jr.		musica_sin_bucle
    2099   00:4E5B                      
    2100   00:4E5B                      rutina_de_esperar_un_rato:
    2101   00:4E5B                      
    2102   00:4E5B  76                  		halt
    2103   00:4E5C  2A 0F C0            		ld		hl,(clock)
    2104   00:4E5F  01 01 00            		ld		bc,1		
    2105   00:4E62  ED 42               		sbc		hl,bc
    2106   00:4E64  22 0F C0            		ld		(clock),hl
    2107   00:4E67  20 F2               		jr		nz,rutina_de_esperar_un_rato
    2108   00:4E69                      		
    2109   00:4E69  C9                  		ret
    2110   00:4E6A                      
    2111   00:4E6A                      PREPARACION_SCREEN_2:
    2112   00:4E6A                      
    2113   00:4E6A  3E 02               		ld		a,2
    2114   00:4E6C  CD 5F 00            		call	SCREENX
    2115   00:4E6F  3A E0 F3            		ld		a,(RG1SAV)
    2116   00:4E72  F6 02               		or		00000010b					;modo sprites a 16x16
    2117   00:4E74  E6 FE               		and		11111110b					;modo sprites no ampliados
    2118   00:4E76  47                  		ld		b,a
    2119   00:4E77  0E 01               		ld		c,1
    2120   00:4E79  CD 47 00            		call	WRTVDP						;lo escribe en el registro 1 del VDP
    2121   00:4E7C                      		
    2122   00:4E7C  C9                  		RET
    2123   00:4E7D                      		
    2124   00:4E7D                      gran_rutina:
    2125   00:4E7D                      
    2126   00:4E7D  76                  		halt								;espera a la interrupcion vblank y sincroniza toda la acción
    2127   00:4E7E  CD 03 53            		call	pulsa_una_tecla
    2128   00:4E81  CD D4 57            		call	atributos_sprites
    2129   00:4E84  CD 84 52            		call	revisa_escalera
    2130   00:4E87  CD 24 50            		call	revisa_bombero
    2131   00:4E8A  CD E0 4F            		call	grifo_bombero
    2132   00:4E8D  CD E1 57            		call	estado_en_que_se_encuentra
    2133   00:4E90  CD 8D 5D            		call	apaga_los_chorros
    2134   00:4E93  CD F8 4E            		call	movimiento_forzado_en_puertas
    2135   00:4E96  CD D3 4E            		call	vigila_si_cierra_puertas
    2136   00:4E99  CD AD 58            		call	mueve_prota
    2137   00:4E9C  CD EC 5C            		call	usa_objeto_o_salta
    2138   00:4E9F  CD 04 63            		call	rutina_cuchillo_volador
    2139   00:4EA2  CD CF 5E            		call	coge_algun_objeto
    2140   00:4EA5  CD D1 5C            		call	pose_si_esta_parado
    2141   00:4EA8  CD AE 65            		call	comprueba_estado_de_explosion
    2142   00:4EAB  CD CB 5B            		call	actualiza_atributos_sprite
    2143   00:4EAE  CD 85 54            		call	colision_bombero_prota
    2144   00:4EB1  CD CF 56            		call	colisiones_serpientes_cuchillos
    2145   00:4EB4  CD 06 55            		call	colisiones_serpientes_prota_1
    2146   00:4EB7  CD CC 69            		call	movimiento_serpientes
    2147   00:4EBA  CD 23 65            		call	actualiza_la_puerta
    2148   00:4EBD  CD 04 66            		call	puntuacion_vidas_fase
    2149   00:4EC0                      		
    2150   00:4EC0  3A 72 C3            		ld		a,(pasamos_la_fase)
    2151   00:4EC3  FE 00               		cp		0
    2152   00:4EC5  C2 03 68            		jr.		nz,animacion_entre_fases
    2153   00:4EC8                      		
    2154   00:4EC8  3A 17 C0            		ld		a,(muerto)
    2155   00:4ECB  FE 00               		cp		0
    2156   00:4ECD  CA C2 53            		jr.		z,repite_fase
    2157   00:4ED0                      		
    2158   00:4ED0  C3 7D 4E            		jp		gran_rutina
    2159   00:4ED3                      
    2160   00:4ED3                      vigila_si_cierra_puertas:
    2161   00:4ED3                      		
    2162   00:4ED3  3A 13 C0            		ld		a,(puede_cambiar_de_direccion)
    2163   00:4ED6  FE 01               		cp		1
    2164   00:4ED8  C8                  		ret		z
    2165   00:4ED9                      		
    2166   00:4ED9  CD 73 6C            		call	dieciseis_quince
    2167   00:4EDC  CD 8D 5C            		call	get_bloque_en_X_Y
    2168   00:4EDF                      		
    2169   00:4EDF  FE 75               		cp		117
    2170   00:4EE1  28 61               		jr.		z,recoloca_puerta_amarilla_izquierda
    2171   00:4EE3  FE 76               		cp		118
    2172   00:4EE5  CA AC 4F            		jr.		z,recoloca_puerta_azul_izquierda
    2173   00:4EE8                      		
    2174   00:4EE8  CD 99 6C            		call	menos_uno_quince
    2175   00:4EEB  CD 8D 5C            		call	get_bloque_en_X_Y
    2176   00:4EEE                      		
    2177   00:4EEE  FE 75               		cp		117
    2178   00:4EF0  28 1E               		jr.		z,recoloca_puerta_amarilla_derecha
    2179   00:4EF2  FE 76               		cp		118
    2180   00:4EF4  CA 78 4F            		jr.		z,recoloca_puerta_azul_derecha	
    2181   00:4EF7                      		
    2182   00:4EF7  C9                  		ret
    2183   00:4EF8                      			
    2184   00:4EF8                      movimiento_forzado_en_puertas:
    2185   00:4EF8                      
    2186   00:4EF8  3A 13 C0            		ld		a,(puede_cambiar_de_direccion)
    2187   00:4EFB  FE 01               		cp		1
    2188   00:4EFD  C8                  		ret		z
    2189   00:4EFE                      		
    2190   00:4EFE  3E 0D               		ld		a,13													;efecto sonoro de abrir grifo
    2191   00:4F00  CD C4 6C            		call	efecto_sonido
    2192   00:4F03                      			
    2193   00:4F03  3A 1D C0            		ld		a,(dir_prota)
    2194   00:4F06  FE 00               		cp		0														;va a la derecha forzado
    2195   00:4F08  CA 6D 5B            		jr.		z,(mueve_derecha_prota)
    2196   00:4F0B  FE 01               		cp		1														;va a la izquierda forzado
    2197   00:4F0D  CA 55 5A            		jr.		z,(mueve_izquierda_prota)
    2198   00:4F10                      
    2199   00:4F10                      recoloca_puerta_amarilla_derecha:
    2200   00:4F10                      				
    2201   00:4F10  3A 1D C0            		ld		a,(dir_prota)
    2202   00:4F13  FE 00               		cp		0
    2203   00:4F15  C0                  		ret		nz
    2204   00:4F16                      		
    2205   00:4F16  3E 01               		ld		a,1
    2206   00:4F18  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    2207   00:4F1B                      		
    2208   00:4F1B  CD 99 6C            		call	menos_uno_quince
    2209   00:4F1E  CD 8D 5C            		call	get_bloque_en_X_Y
    2210   00:4F21  3E 71               		ld		a,113
    2211   00:4F23  77                  		ld		[hl],a
    2212   00:4F24                      								
    2213   00:4F24  CD 99 6C            		call	menos_uno_quince
    2214   00:4F27  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2215   00:4F2A                      		
    2216   00:4F2A  3E 71               		ld		a,113
    2217   00:4F2C  CD B1 6C            		call	pinta_en_pantalla
    2218   00:4F2F                      		
    2219   00:4F2F  CD A5 6C            		call	menos_uno_dos
    2220   00:4F32  CD 8D 5C            		call	get_bloque_en_X_Y
    2221   00:4F35  3E 71               		ld		a,113
    2222   00:4F37  77                  		ld		[hl],a
    2223   00:4F38                      								
    2224   00:4F38  CD A5 6C            		call	menos_uno_dos
    2225   00:4F3B  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2226   00:4F3E                      		
    2227   00:4F3E  3E 71               		ld		a,113
    2228   00:4F40  CD B1 6C            		call	pinta_en_pantalla
    2229   00:4F43                      		
    2230   00:4F43  C9                  		ret
    2231   00:4F44                      		
    2232   00:4F44                      recoloca_puerta_amarilla_izquierda:
    2233   00:4F44                      		
    2234   00:4F44  3A 1D C0            		ld		a,(dir_prota)
    2235   00:4F47  FE 01               		cp		1
    2236   00:4F49  C0                  		ret		nz
    2237   00:4F4A                      		
    2238   00:4F4A  3E 01               		ld		a,1
    2239   00:4F4C  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    2240   00:4F4F                      		
    2241   00:4F4F  CD 73 6C            		call	dieciseis_quince
    2242   00:4F52  CD 8D 5C            		call	get_bloque_en_X_Y
    2243   00:4F55  3E 72               		ld		a,114
    2244   00:4F57  77                  		ld		[hl],a
    2245   00:4F58                      								
    2246   00:4F58  CD 73 6C            		call	dieciseis_quince
    2247   00:4F5B  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2248   00:4F5E                      		
    2249   00:4F5E  3E 72               		ld		a,114
    2250   00:4F60  CD B1 6C            		call	pinta_en_pantalla
    2251   00:4F63                      		
    2252   00:4F63  CD 80 6C            		call	dieciseis_dos
    2253   00:4F66  CD 8D 5C            		call	get_bloque_en_X_Y
    2254   00:4F69  3E 72               		ld		a,114
    2255   00:4F6B  77                  		ld		[hl],a
    2256   00:4F6C                      								
    2257   00:4F6C  CD 80 6C            		call	dieciseis_dos
    2258   00:4F6F  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2259   00:4F72                      		
    2260   00:4F72  3E 72               		ld		a,114
    2261   00:4F74  CD B1 6C            		call	pinta_en_pantalla
    2262   00:4F77                      		
    2263   00:4F77  C9                  		ret
    2264   00:4F78                      		
    2265   00:4F78                      recoloca_puerta_azul_derecha:
    2266   00:4F78                      		
    2267   00:4F78                      		
    2268   00:4F78  3A 1D C0            		ld		a,(dir_prota)
    2269   00:4F7B  FE 00               		cp		0
    2270   00:4F7D  C0                  		ret		nz
    2271   00:4F7E                      		
    2272   00:4F7E  3E 01               		ld		a,1
    2273   00:4F80  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    2274   00:4F83                      		
    2275   00:4F83  CD 99 6C            		call	menos_uno_quince
    2276   00:4F86  CD 8D 5C            		call	get_bloque_en_X_Y
    2277   00:4F89  3E 74               		ld		a,116
    2278   00:4F8B  77                  		ld		[hl],a
    2279   00:4F8C                      								
    2280   00:4F8C  CD 99 6C            		call	menos_uno_quince
    2281   00:4F8F  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2282   00:4F92                      		
    2283   00:4F92  3E 74               		ld		a,116
    2284   00:4F94  CD B1 6C            		call	pinta_en_pantalla
    2285   00:4F97                      		
    2286   00:4F97  CD A5 6C            		call	menos_uno_dos
    2287   00:4F9A  CD 8D 5C            		call	get_bloque_en_X_Y
    2288   00:4F9D  3E 74               		ld		a,116
    2289   00:4F9F  77                  		ld		[hl],a
    2290   00:4FA0                      								
    2291   00:4FA0  CD A5 6C            		call	menos_uno_dos
    2292   00:4FA3  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2293   00:4FA6                      		
    2294   00:4FA6  3E 74               		ld		a,116
    2295   00:4FA8  CD B1 6C            		call	pinta_en_pantalla
    2296   00:4FAB                      		
    2297   00:4FAB  C9                  		ret
    2298   00:4FAC                      		
    2299   00:4FAC                      recoloca_puerta_azul_izquierda:
    2300   00:4FAC                      		
    2301   00:4FAC  3A 1D C0            		ld		a,(dir_prota)
    2302   00:4FAF  FE 01               		cp		1
    2303   00:4FB1  C0                  		ret		nz
    2304   00:4FB2                      		
    2305   00:4FB2  3E 01               		ld		a,1
    2306   00:4FB4  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    2307   00:4FB7                      		
    2308   00:4FB7  CD 73 6C            		call	dieciseis_quince
    2309   00:4FBA  CD 8D 5C            		call	get_bloque_en_X_Y
    2310   00:4FBD  3E 73               		ld		a,115
    2311   00:4FBF  77                  		ld		[hl],a
    2312   00:4FC0                      								
    2313   00:4FC0  CD 73 6C            		call	dieciseis_quince
    2314   00:4FC3  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2315   00:4FC6                      		
    2316   00:4FC6  3E 73               		ld		a,115
    2317   00:4FC8  CD B1 6C            		call	pinta_en_pantalla
    2318   00:4FCB                      		
    2319   00:4FCB  CD 80 6C            		call	dieciseis_dos
    2320   00:4FCE  CD 8D 5C            		call	get_bloque_en_X_Y
    2321   00:4FD1  3E 73               		ld		a,115
    2322   00:4FD3  77                  		ld		[hl],a
    2323   00:4FD4                      								
    2324   00:4FD4  CD 80 6C            		call	dieciseis_dos
    2325   00:4FD7  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2326   00:4FDA                      		
    2327   00:4FDA  3E 73               		ld		a,115
    2328   00:4FDC  CD B1 6C            		call	pinta_en_pantalla
    2329   00:4FDF                      		
    2330   00:4FDF  C9                  		ret
    2331   00:4FE0                      		
    2332   00:4FE0                      		
    2333   00:4FE0                      grifo_bombero:
    2334   00:4FE0                      
    2335   00:4FE0  FD 21 85 C3         		ld		iy,bombero_control
    2336   00:4FE4                      		
    2337   00:4FE4  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene donde está					
    2338   00:4FE7  57                  		ld		d,a
    2339   00:4FE8  FD 7E 01            		ld		a,(iy+1)
    2340   00:4FEB  C6 0A               		add		10
    2341   00:4FED  5F                  		ld		e,a
    2342   00:4FEE  CD 8D 5C            		call	get_bloque_en_X_Y
    2343   00:4FF1                      		
    2344   00:4FF1  FE 77               		cp		119														;si el grifo ya está abierto, sigue la gran rutina
    2345   00:4FF3  C0                  		ret		nz
    2346   00:4FF4                      		
    2347   00:4FF4  FD 7E 00            		ld		a,(iy)													;para buffer y vram moviendo 0,10						
    2348   00:4FF7  57                  		ld		d,a
    2349   00:4FF8  FD 7E 01            		ld		a,(iy+1)
    2350   00:4FFB  C6 0A               		add		10
    2351   00:4FFD  5F                  		ld		e,a
    2352   00:4FFE  CD 8D 5C            		call	get_bloque_en_X_Y
    2353   00:5001  3E 57               		ld		a,87
    2354   00:5003  77                  		ld		[hl],a
    2355   00:5004                      								
    2356   00:5004  FD 7E 00            		ld		a,(iy)													;para buffer y vram moviendo 0,10						
    2357   00:5007  57                  		ld		d,a
    2358   00:5008  FD 7E 01            		ld		a,(iy+1)
    2359   00:500B  C6 0A               		add		10
    2360   00:500D  5F                  		ld		e,a
    2361   00:500E  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    2362   00:5011  3E 57               		ld		a,87
    2363   00:5013  77                  		ld		[hl],a
    2364   00:5014                      		
    2365   00:5014                      		
    2366   00:5014  3E 57               		ld		a,87
    2367   00:5016  CD B1 6C            		call	pinta_en_pantalla
    2368   00:5019                      		
    2369   00:5019  3E 0A               		ld		a,10													;efecto sonoro de abrir grifo
    2370   00:501B  CD C4 6C            		call	efecto_sonido
    2371   00:501E                      		
    2372   00:501E  3E 01               		ld		a,1														; da valor a la variable para dar por hecho que el grifo está abierto
    2373   00:5020  32 80 C3            		ld		(grifo_estado),a
    2374   00:5023                      		
    2375   00:5023  C9                  		ret
    2376   00:5024                      		
    2377   00:5024                      revisa_bombero:
    2378   00:5024                      
    2379   00:5024  3A 84 C3            		ld		a,(bombero_1)											;si no está activo, vuelve a la gran rutina
    2380   00:5027  FE 00               		cp		0
    2381   00:5029  C8                  		ret		z
    2382   00:502A                      						
    2383   00:502A  FD 21 85 C3         		ld	    iy,bombero_control										;si no tiene orden de aparecer, reduce el tiempo y vuelve a la gran rutina
    2384   00:502E  FD 7E 08            		ld		a,(iy+8)
    2385   00:5031  FE 00               		cp		0
    2386   00:5033  28 05               		jr.		z,se_activa_el_bombero
    2387   00:5035                      		
    2388   00:5035  3D                  		dec		a
    2389   00:5036  FD 77 08            		ld		(iy+8),a
    2390   00:5039                      		
    2391   00:5039  C9                  		ret		
    2392   00:503A                      		
    2393   00:503A                      se_activa_el_bombero:
    2394   00:503A                      
    2395   00:503A  FD 7E 09            		ld		a,(iy+9)												;vuelve a darle un poco de retardo al personaje (esto es uno de los puntos que marca la velocidad del bombero)
    2396   00:503D  FD 77 08            		ld		(iy+8),a
    2397   00:5040                      		
    2398   00:5040  FD 7E 0B            		ld		a,(iy+11)												;si no está a cero, no puede ni subir ni bajar escaleras.
    2399   00:5043  FE 00               		cp		0
    2400   00:5045  20 27               		jr.		nz,resta_y_camina
    2401   00:5047                      		
    2402   00:5047  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene donde está					
    2403   00:504A  57                  		ld		d,a
    2404   00:504B  FD 7E 01            		ld		a,(iy+1)
    2405   00:504E  C6 02               		add		2
    2406   00:5050  5F                  		ld		e,a
    2407   00:5051  CD 8D 5C            		call	get_bloque_en_X_Y
    2408   00:5054                      		
    2409   00:5054  FE 29               		cp		41														;si es escalera 1, va a decidir si sube o baja
    2410   00:5056  CC 42 52            		call	z,estamos_en_escalera
    2411   00:5059                      
    2412   00:5059  FE 2A               		cp		42														;si es escalera 2, va a decidir si sube o baja
    2413   00:505B  CC 42 52            		call	z,estamos_en_escalera
    2414   00:505E                      		
    2415   00:505E  FD 7E 07            		ld		a,(iy+7)												;mira en qué estado está para ir a la rutina adecuada
    2416   00:5061  FE 00               		cp		0
    2417   00:5063  CA 23 51            		jr.		z,revisa_caida_bombero
    2418   00:5066                      		
    2419   00:5066  FE 01               		cp		1
    2420   00:5068  28 0B               		jr.		z,revisa_subida_bombero
    2421   00:506A  FE 02               		cp		2
    2422   00:506C  28 3E               		jr.		z,revisa_bajada_bombero
    2423   00:506E                      
    2424   00:506E                      resta_y_camina:
    2425   00:506E                      
    2426   00:506E  3D                  		dec		a
    2427   00:506F  FD 77 0B            		ld		(iy+11),a
    2428   00:5072  C3 23 51            		jr.		revisa_caida_bombero
    2429   00:5075                      		
    2430   00:5075                      revisa_subida_bombero:
    2431   00:5075                      				
    2432   00:5075  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene encima					
    2433   00:5078  57                  		ld		d,a
    2434   00:5079  FD 7E 01            		ld		a,(iy+1)
    2435   00:507C  D6 02               		sub		2
    2436   00:507E  5F                  		ld		e,a
    2437   00:507F  CD 8D 5C            		call	get_bloque_en_X_Y
    2438   00:5082                      
    2439   00:5082  FE 2A               		cp		42
    2440   00:5084  28 04               		jr.		z,continua_rvb
    2441   00:5086  FE 29               		cp		41
    2442   00:5088  20 6A               		jr.		nz,sigue_andando
    2443   00:508A                      
    2444   00:508A                      continua_rvb:
    2445   00:508A                      		
    2446   00:508A  FD 7E 00            		ld		a,(iy)													;comprobamos si está centrado					
    2447   00:508D  3D                  		dec		a
    2448   00:508E  57                  		ld		d,a
    2449   00:508F  FD 7E 01            		ld		a,(iy+1)
    2450   00:5092  D6 02               		sub		2
    2451   00:5094  5F                  		ld		e,a
    2452   00:5095  CD 8D 5C            		call	get_bloque_en_X_Y
    2453   00:5098  FE 29               		cp		41
    2454   00:509A  CC EB 50            		call	z,corrige_en_escalera_bombero
    2455   00:509D  FE 2A               		cp		42
    2456   00:509F  CC EB 50            		call	z,corrige_en_escalera_bombero
    2457   00:50A2                      		
    2458   00:50A2  FD 7E 01            		ld		a,(iy+1)												;sube por la coordenada y
    2459   00:50A5  D6 02               		sub		2
    2460   00:50A7  FD 77 01            		ld		(iy+1),a
    2461   00:50AA                      		
    2462   00:50AA  18 53               		jr.		decide_paso_en_escalera
    2463   00:50AC                      	
    2464   00:50AC                      revisa_bajada_bombero:
    2465   00:50AC                      				
    2466   00:50AC  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene debajo de los pies					
    2467   00:50AF  57                  		ld		d,a
    2468   00:50B0  FD 7E 01            		ld		a,(iy+1)
    2469   00:50B3  C6 11               		add		17
    2470   00:50B5  5F                  		ld		e,a
    2471   00:50B6  CD 8D 5C            		call	get_bloque_en_X_Y
    2472   00:50B9                      
    2473   00:50B9  FE 2A               		cp		42
    2474   00:50BB  28 0C               		jr.		z,continua_rbb
    2475   00:50BD  FE 49               		cp		73
    2476   00:50BF  28 08               		jr.		z,continua_rbb
    2477   00:50C1  FE 4A               		cp		74
    2478   00:50C3  28 04               		jr.		z,continua_rbb
    2479   00:50C5  FE 29               		cp		41
    2480   00:50C7  20 2B               		jr.		nz,sigue_andando
    2481   00:50C9                      
    2482   00:50C9                      continua_rbb:
    2483   00:50C9                      		
    2484   00:50C9  FD 7E 00            		ld		a,(iy)													;comprobamos si está centrado					
    2485   00:50CC  3D                  		dec		a
    2486   00:50CD  57                  		ld		d,a
    2487   00:50CE  FD 7E 01            		ld		a,(iy+1)
    2488   00:50D1  D6 02               		sub		2
    2489   00:50D3  5F                  		ld		e,a
    2490   00:50D4  CD 8D 5C            		call	get_bloque_en_X_Y
    2491   00:50D7                      		
    2492   00:50D7  FE 29               		cp		41														;si no está centrado va a centrarse
    2493   00:50D9  CC EB 50            		call	z,corrige_en_escalera_bombero
    2494   00:50DC                      		
    2495   00:50DC  FE 2A               		cp		42														;si no está centrado va a centrarse
    2496   00:50DE  CC EB 50            		call	z,corrige_en_escalera_bombero
    2497   00:50E1                      		
    2498   00:50E1  FD 7E 01            		ld		a,(iy+1)												;baja por la variable y
    2499   00:50E4  C6 02               		add		2
    2500   00:50E6  FD 77 01            		ld		(iy+1),a
    2501   00:50E9                      		
    2502   00:50E9  18 14               		jr.		decide_paso_en_escalera
    2503   00:50EB                      
    2504   00:50EB                      corrige_en_escalera_bombero:
    2505   00:50EB                      
    2506   00:50EB  FD 7E 00            		ld		a,(iy)													;lo pone hacia la izquierda hasta que se centra
    2507   00:50EE  D6 02               		sub		2
    2508   00:50F0  FD 77 00            		ld		(iy),a
    2509   00:50F3                      		
    2510   00:50F3  C9                  		ret
    2511   00:50F4                      		
    2512   00:50F4                      sigue_andando:
    2513   00:50F4                      
    2514   00:50F4  AF                  		xor		a														;da a la variable adecuada el valor de andando
    2515   00:50F5  FD 77 07            		ld		(iy+7),a
    2516   00:50F8  3E 0F               		ld		a,15
    2517   00:50FA  FD 77 0B            		ld		(iy+11),a		
    2518   00:50FD  18 24               		jr.		revisa_caida_bombero
    2519   00:50FF                      
    2520   00:50FF                      decide_paso_en_escalera:
    2521   00:50FF                      
    2522   00:50FF  FD 7E 05            		ld		a,(iy+5)												;decide el paso en el que está si no pasa por avanzar
    2523   00:5102                      		
    2524   00:5102  FE 00               		cp		0
    2525   00:5104  28 04               		jr.		z,paso_uno_escaleras
    2526   00:5106                      		
    2527   00:5106  FE 01               		cp		1
    2528   00:5108  28 0D               		jr.		z,paso_dos_escaleras
    2529   00:510A                      
    2530   00:510A                      paso_uno_escaleras:
    2531   00:510A                      
    2532   00:510A  3E 01               		ld		a,1														;cambia el paso para la siguiente									
    2533   00:510C  FD 77 05            		ld		(iy+5),a
    2534   00:510F                      		
    2535   00:510F  3E DC               		ld		a,55*4													;define los sprites adecuados
    2536   00:5111  47                  		ld		b,a
    2537   00:5112  3E C4               		ld		a,49*4
    2538   00:5114  C3 49 52            		jr.		ultimas_variables_bombero
    2539   00:5117                      		
    2540   00:5117                      paso_dos_escaleras:
    2541   00:5117                      
    2542   00:5117  AF                  		xor		a														;cambia el paso para la siguiente
    2543   00:5118  FD 77 05            		ld		(iy+5),a
    2544   00:511B                      		
    2545   00:511B  3E E8               		ld		a,58*4													;define los sprites adecuados
    2546   00:511D  47                  		ld		b,a
    2547   00:511E  3E E0               		ld		a,56*4
    2548   00:5120  C3 49 52            		jr.		ultimas_variables_bombero
    2549   00:5123                      						
    2550   00:5123                      revisa_caida_bombero:
    2551   00:5123                      		
    2552   00:5123  CD 19 52            		call	hacia_donde_quiero_ir									;decide la variable para seguir al prota en las escaleras
    2553   00:5126                      			
    2554   00:5126  FD 7E 00            		ld		a,(iy)													;comprobamos lo que tiene debajo de los pies	
    2555   00:5129  C6 02               		add		2											
    2556   00:512B  57                  		ld		d,a
    2557   00:512C  FD 7E 01            		ld		a,(iy+1)
    2558   00:512F  C6 11               		add		17
    2559   00:5131  5F                  		ld		e,a
    2560   00:5132  CD 8D 5C            		call	get_bloque_en_X_Y
    2561   00:5135                      
    2562   00:5135  FE 29               		cp		41														;si es escalera irá a mirar la dirección ppara seguir como si nada
    2563   00:5137  28 39               		jr.		z,define_direccion_bombero
    2564   00:5139  FE 2A               		cp		42
    2565   00:513B  28 35               		jr.		z,define_direccion_bombero
    2566   00:513D                      
    2567   00:513D  FE 20               		cp		32
    2568   00:513F  38 31               		jr.		c,define_direccion_bombero								;si hay muro vamos a ver la direccion para seguir como si nada
    2569   00:5141                      
    2570   00:5141  FD 7E 00            		ld		a,(iy)
    2571   00:5144  C6 0E               		add		14														;comprobamos lo que tiene debajo de los pies en la parte derecha					
    2572   00:5146  57                  		ld		d,a
    2573   00:5147  FD 7E 01            		ld		a,(iy+1)
    2574   00:514A  C6 11               		add		17
    2575   00:514C  5F                  		ld		e,a
    2576   00:514D  CD 8D 5C            		call	get_bloque_en_X_Y
    2577   00:5150                      		
    2578   00:5150  FE 29               		cp		41														;si es escalera irá a mirar la dirección ppara seguir como si nada
    2579   00:5152  28 1E               		jr.		z,define_direccion_bombero
    2580   00:5154  FE 2A               		cp		42
    2581   00:5156  28 1A               		jr.		z,define_direccion_bombero
    2582   00:5158                      		
    2583   00:5158  FE 20               		cp		32
    2584   00:515A  38 16               		jr.		c,define_direccion_bombero								;si hay muro vamos a ver la direccion para seguir como si nada
    2585   00:515C                      
    2586   00:515C  FD 7E 01            		ld		a,(iy+1)												;cae dos pixeles
    2587   00:515F  C6 02               		add		2
    2588   00:5161  FD 77 01            		ld		(iy+1),a
    2589   00:5164                      		
    2590   00:5164  DD 21 20 C0         		ld		ix,atributos_sprite_general
    2591   00:5168                      		
    2592   00:5168  DD 7E 1A            		ld		a,(ix+26)												;define los sprites
    2593   00:516B  47                  		ld		b,a
    2594   00:516C  DD 7E 12            		ld		a,(ix+18)
    2595   00:516F                      		
    2596   00:516F  C3 49 52            		jr.		ultimas_variables_bombero
    2597   00:5172                      		
    2598   00:5172                      define_direccion_bombero:
    2599   00:5172                      		
    2600   00:5172  AF                  		xor		a														;estado andando
    2601   00:5173  FD 77 07            		ld		(iy+7),a
    2602   00:5176                      		
    2603   00:5176  FD 7E 06            		ld		a,(iy+6)
    2604   00:5179  FE 00               		cp		0
    2605   00:517B  28 46               		jr.		z,va_hacia_la_derecha
    2606   00:517D                      
    2607   00:517D                      va_hacia_la_izquierda:
    2608   00:517D                      
    2609   00:517D  FD 7E 00            		ld		a,(iy)													;comprobamos la que tiene a su izquierda
    2610   00:5180  C6 02               		add		2											
    2611   00:5182  57                  		ld		d,a
    2612   00:5183  FD 7E 01            		ld		a,(iy+1)
    2613   00:5186  C6 0B               		add		11
    2614   00:5188  5F                  		ld		e,a
    2615   00:5189  CD 8D 5C            		call	get_bloque_en_X_Y
    2616   00:518C                      		
    2617   00:518C  FE 20               		cp		32														;si hay pared cambia la direccion
    2618   00:518E  38 77               		jr.		c,cambia_la_direccion_bombero
    2619   00:5190  FE 71               		cp		113														;si hay muros de pinchos tambien
    2620   00:5192  28 73               		jr.		z,cambia_la_direccion_bombero
    2621   00:5194  FE 73               		cp		115														
    2622   00:5196  28 6F               		jr.		z,cambia_la_direccion_bombero
    2623   00:5198                      		
    2624   00:5198  FD 7E 02            		ld		a,(iy+2)												;va hacia la izquierda lo adecuado
    2625   00:519B  47                  		ld		b,a
    2626   00:519C  FD 7E 00            		ld		a,(iy)
    2627   00:519F  90                  		sub		a,b
    2628   00:51A0                      		
    2629   00:51A0  FD 77 00            		ld		(iy),a
    2630   00:51A3                      		
    2631   00:51A3  FD 7E 05            		ld		a,(iy+5)												;decide el paso que le toca
    2632   00:51A6  FE 00               		cp		0
    2633   00:51A8  28 0C               		jr.		z,paso_quieto_izquierda									
    2634   00:51AA                      
    2635   00:51AA                      paso_movido_izquierda:
    2636   00:51AA                      		
    2637   00:51AA  AF                  		xor		a														;cambia el paso para la siguiente
    2638   00:51AB  FD 77 05            		ld		(iy+5),a
    2639   00:51AE                      			
    2640   00:51AE  3E B4               		ld		a,45*4													;da los sprites adecuados
    2641   00:51B0  47                  		ld		b,a
    2642   00:51B1  3E 7C               		ld		a,31*4
    2643   00:51B3  C3 49 52            		jr.		ultimas_variables_bombero
    2644   00:51B6                      		
    2645   00:51B6                      paso_quieto_izquierda:
    2646   00:51B6                      		
    2647   00:51B6  3E 01               		ld		a,1														;cambia el paso para la siguiente
    2648   00:51B8  FD 77 05            		ld		(iy+5),a	
    2649   00:51BB                      	
    2650   00:51BB  3E C0               		ld		a,48*4													;da los sprites adecuados
    2651   00:51BD  47                  		ld		b,a
    2652   00:51BE  3E B8               		ld		a,46*4
    2653   00:51C0  C3 49 52            		jr.		ultimas_variables_bombero
    2654   00:51C3                      
    2655   00:51C3                      va_hacia_la_derecha:
    2656   00:51C3                      
    2657   00:51C3  FD 7E 00            		ld		a,(iy)													;comprobamos la que tiene a su derecha
    2658   00:51C6  C6 0D               		add		13											
    2659   00:51C8  57                  		ld		d,a
    2660   00:51C9  FD 7E 01            		ld		a,(iy+1)
    2661   00:51CC  C6 0B               		add		11
    2662   00:51CE  5F                  		ld		e,a
    2663   00:51CF  CD 8D 5C            		call	get_bloque_en_X_Y
    2664   00:51D2                      		
    2665   00:51D2  FE 20               		cp		32														;si hay pared cambia de dirección
    2666   00:51D4  38 31               		jr.		c,cambia_la_direccion_bombero
    2667   00:51D6  FE 72               		cp		114														;si hay muros de pinchos tambien
    2668   00:51D8  28 2D               		jr.		z,cambia_la_direccion_bombero
    2669   00:51DA  FE 74               		cp		116														
    2670   00:51DC  28 29               		jr.		z,cambia_la_direccion_bombero
    2671   00:51DE  FD 7E 02            		ld		a,(iy+2)												;suma a x lo adecuado
    2672   00:51E1  47                  		ld		b,a
    2673   00:51E2  FD 7E 00            		ld		a,(iy)
    2674   00:51E5  80                  		add		a,b
    2675   00:51E6                      		
    2676   00:51E6  FD 77 00            		ld		(iy),a
    2677   00:51E9                      		
    2678   00:51E9  FD 7E 05            		ld		a,(iy+5)												;mira el paso que le toca
    2679   00:51EC  FE 00               		cp		0
    2680   00:51EE  28 0B               		jr.		z,paso_quieto_derecha
    2681   00:51F0                      
    2682   00:51F0                      paso_movido_derecha:
    2683   00:51F0                      
    2684   00:51F0  AF                  		xor		a														;cambia el paso para la siguiente
    2685   00:51F1  FD 77 05            		ld		(iy+5),a
    2686   00:51F4                      		
    2687   00:51F4  3E 78               		ld		a,30*4													;define los sprites adecuados
    2688   00:51F6  47                  		ld		b,a
    2689   00:51F7  3E 70               		ld		a,28*4
    2690   00:51F9  18 4E               		jr.		ultimas_variables_bombero
    2691   00:51FB                      		
    2692   00:51FB                      paso_quieto_derecha:
    2693   00:51FB                      
    2694   00:51FB  3E 01               		ld		a,1														;cambia el paso para la siguiente
    2695   00:51FD  FD 77 05            		ld		(iy+5),a
    2696   00:5200                      
    2697   00:5200  3E 6C               		ld		a,27*4													;define los sprites adecuados
    2698   00:5202  47                  		ld		b,a
    2699   00:5203  3E 64               		ld		a,25*4
    2700   00:5205  18 42               		jr.		ultimas_variables_bombero
    2701   00:5207                      
    2702   00:5207                      cambia_la_direccion_bombero:		
    2703   00:5207                      
    2704   00:5207  FD 7E 06            		ld		a,(iy+6)												;mira cual es la direccion actual para cambiarla
    2705   00:520A  FE 00               		cp		0
    2706   00:520C  28 05               		jr.		z,cambia_a_izquierda
    2707   00:520E                      
    2708   00:520E                      cambia_a_derecha:
    2709   00:520E                      
    2710   00:520E  AF                  		xor		a														;cambia a derecha
    2711   00:520F  FD 77 06            		ld		(iy+6),a
    2712   00:5212                      		
    2713   00:5212  C9                  		ret
    2714   00:5213                      		
    2715   00:5213                      cambia_a_izquierda:
    2716   00:5213                      
    2717   00:5213  3E 01               		ld		a,1														;cambia a izquierda
    2718   00:5215  FD 77 06            		ld		(iy+6),a
    2719   00:5218                      		
    2720   00:5218  C9                  		ret
    2721   00:5219                      
    2722   00:5219                      hacia_donde_quiero_ir:
    2723   00:5219                      
    2724   00:5219  3A 12 C0            		ld		a,(py)													;si prota está por encima querrá subir y si está por debajo querrá bajar
    2725   00:521C  D6 03               		sub		3
    2726   00:521E  47                  		ld		b,a
    2727   00:521F  FD 7E 01            		ld		a,(iy+1)
    2728   00:5222  B8                  		cp		b
    2729   00:5223                      		
    2730   00:5223  38 11               		jr.		c,damos_valor_bajada_bombero
    2731   00:5225                      		
    2732   00:5225  3A 12 C0            		ld		a,(py)													;si prota está por encima querrá subir y si está por debajo querrá bajar
    2733   00:5228  C6 03               		add		3
    2734   00:522A  47                  		ld		b,a
    2735   00:522B  FD 7E 01            		ld		a,(iy+1)
    2736   00:522E  B8                  		cp		b
    2737   00:522F                      		
    2738   00:522F  30 0B               		jr.		nc,damos_valor_subida_bombero
    2739   00:5231                      		
    2740   00:5231  AF                  		xor		a
    2741   00:5232  FD 77 0A            		ld		(iy+10),a
    2742   00:5235  C9                  		ret
    2743   00:5236                      		
    2744   00:5236                      damos_valor_bajada_bombero:
    2745   00:5236                      				
    2746   00:5236  3E 02               		ld		a,2														; le damos valor a la variable adecuada de bajada
    2747   00:5238  FD 77 0A            		ld		(iy+10),a
    2748   00:523B                      		
    2749   00:523B  C9                  		ret
    2750   00:523C                      
    2751   00:523C                      damos_valor_subida_bombero:
    2752   00:523C                      
    2753   00:523C  3E 01               		ld		a,1														; le damos valor a la variable adecuada de subida
    2754   00:523E  FD 77 0A            		ld		(iy+10),a
    2755   00:5241                      		
    2756   00:5241  C9                  		ret
    2757   00:5242                      
    2758   00:5242                      estamos_en_escalera:
    2759   00:5242                      
    2760   00:5242  FD 7E 0A            		ld		a,(iy+10)
    2761   00:5245  FD 77 07            		ld		(iy+7),a
    2762   00:5248                      		
    2763   00:5248  C9                  		ret
    2764   00:5249                      		
    2765   00:5249                      ultimas_variables_bombero:
    2766   00:5249                      		
    2767   00:5249                      		
    2768   00:5249  DD 21 20 C0         		ld		ix,atributos_sprite_general
    2769   00:524D                      		
    2770   00:524D  DD 77 12            		ld		(ix+18),a												;patrones
    2771   00:5250  C6 04               		add		4
    2772   00:5252  DD 77 16            		ld		(ix+22),a
    2773   00:5255  DD 70 1A            		ld		(ix+26),b
    2774   00:5258                      		
    2775   00:5258  FD 7E 01            		ld		a,(iy+1)												;y
    2776   00:525B  DD 77 10            		ld		(ix+16),a
    2777   00:525E  D6 09               		sub		a,9
    2778   00:5260  DD 77 14            		ld		(ix+20),a
    2779   00:5263  C6 10               		add		a,16
    2780   00:5265  DD 77 18            		ld		(ix+24),a
    2781   00:5268                      		
    2782   00:5268  FD 7E 00            		ld		a,(iy)													;x
    2783   00:526B  DD 77 11            		ld		(ix+17),a
    2784   00:526E  DD 77 15            		ld		(ix+21),a
    2785   00:5271  DD 77 19            		ld		(ix+25),a
    2786   00:5274                      				
    2787   00:5274  3E 01               		ld		a,1														;colores_1
    2788   00:5276  DD 77 13            		ld		(ix+19),a
    2789   00:5279  3E 09               		ld		a,9
    2790   00:527B  DD 77 17            		ld		(ix+23),a
    2791   00:527E  3E 0E               		ld		a,14
    2792   00:5280  DD 77 1B            		ld		(ix+27),a
    2793   00:5283                      		
    2794   00:5283  C9                  		ret
    2795   00:5284                      		
    2796   00:5284                      revisa_escalera:
    2797   00:5284                      
    2798   00:5284  3A 7A C3            		ld		a,(escalera_activada)
    2799   00:5287  FE 00               		cp		0
    2800   00:5289  C8                  		ret		z
    2801   00:528A                      		
    2802   00:528A  3A 7D C3            		ld		a,(contador_escalera)
    2803   00:528D  3D                  		dec		a
    2804   00:528E  32 7D C3            		ld		(contador_escalera),a
    2805   00:5291  3A 7D C3            		ld		a,(contador_escalera)
    2806   00:5294  FE 00               		cp		0
    2807   00:5296  C0                  		ret		nz
    2808   00:5297                      		
    2809   00:5297  3E 32               		ld		a,50
    2810   00:5299  32 7D C3            		ld		(contador_escalera),a
    2811   00:529C                      
    2812   00:529C  2A 7B C3            		ld		hl,(posicion_escalera)
    2813   00:529F  11 57 C0            		ld		de,buffer_colisiones
    2814   00:52A2  19                  		add		hl,de													;hl=buffer_colisiones + posicion escalera
    2815   00:52A3  01 20 00            		ld		bc,32
    2816   00:52A6  ED 42               		sbc		hl,bc
    2817   00:52A8  3E 2B               		ld		a,43
    2818   00:52AA  77                  		ld		[hl],a
    2819   00:52AB  23                  		inc		hl
    2820   00:52AC  3E 2C               		ld		a,44
    2821   00:52AE  77                  		ld		[hl],a
    2822   00:52AF  01 1F 00            		ld		bc,31
    2823   00:52B2  ED 4A               		adc		hl,bc		
    2824   00:52B4  3E 29               		ld		a,41
    2825   00:52B6  77                  		ld		[hl],a
    2826   00:52B7  23                  		inc		hl
    2827   00:52B8  3E 2A               		ld		a,42
    2828   00:52BA  77                  		ld		[hl],a
    2829   00:52BB                      		
    2830   00:52BB  2A 7B C3            		ld		hl,(posicion_escalera)
    2831   00:52BE  3E 2B               		ld		a,43
    2832   00:52C0  CD B1 6C            		call	pinta_en_pantalla
    2833   00:52C3                      		
    2834   00:52C3  2A 7B C3            		ld		hl,(posicion_escalera)
    2835   00:52C6  23                  		inc		hl
    2836   00:52C7  3E 2C               		ld		a,44
    2837   00:52C9  CD B1 6C            		call	pinta_en_pantalla
    2838   00:52CC                      		
    2839   00:52CC  2A 7B C3            		ld		hl,(posicion_escalera)
    2840   00:52CF  01 20 00            		ld		bc,32
    2841   00:52D2  ED 4A               		adc		hl,bc
    2842   00:52D4  3E 29               		ld		a,41
    2843   00:52D6  CD B1 6C            		call	pinta_en_pantalla
    2844   00:52D9                      		
    2845   00:52D9  2A 7B C3            		ld		hl,(posicion_escalera)
    2846   00:52DC  01 21 00            		ld		bc,33
    2847   00:52DF  ED 4A               		adc		hl,bc
    2848   00:52E1  3E 2A               		ld		a,42
    2849   00:52E3  CD B1 6C            		call	pinta_en_pantalla
    2850   00:52E6                      		
    2851   00:52E6  3E 0C               		ld		a,12													;efecto de escalera_activada
    2852   00:52E8  CD C4 6C            		call	efecto_sonido	
    2853   00:52EB                      		
    2854   00:52EB  3A 7B C3            		ld		a,(posicion_escalera)
    2855   00:52EE  47                  		ld		b,a
    2856   00:52EF  3A 7E C3            		ld		a,(limite_escalera)
    2857   00:52F2  B8                  		cp		b
    2858   00:52F3  28 09               		jr.		z,(se_acabo_la_escalera)
    2859   00:52F5                      		
    2860   00:52F5  3A 7B C3            		ld		a,(posicion_escalera)
    2861   00:52F8  D6 20               		sub		32
    2862   00:52FA  32 7B C3            		ld		(posicion_escalera),a
    2863   00:52FD                      		
    2864   00:52FD  C9                  		ret
    2865   00:52FE                      
    2866   00:52FE                      se_acabo_la_escalera:
    2867   00:52FE                      
    2868   00:52FE  AF                  		xor		a
    2869   00:52FF  32 7A C3            		ld		(escalera_activada),a
    2870   00:5302  C9                  		ret
    2871   00:5303                      		
    2872   00:5303                      pulsa_una_tecla:
    2873   00:5303                      		
    2874   00:5303  3E 06               		ld		a,6
    2875   00:5305  CD 41 01            		call	SNSMAT
    2876   00:5308  CB 6F               		bit		5,a
    2877   00:530A  28 58               		jr.		z,pausa_el_juego
    2878   00:530C  CB 77               		bit		6,a
    2879   00:530E  28 29               		jr.		z,musica_off_on
    2880   00:5310  CB 7F               		bit		7,a														;PARA HACER TRAMPA
    2881   00:5312  28 0A               		jr.		z,pasa_fase_con_trampa									;PARA HACER TRAMPA
    2882   00:5314                      		
    2883   00:5314  3E 07               		ld		a,7
    2884   00:5316  CD 41 01            		call	SNSMAT
    2885   00:5319  CB 4F               		bit		1,a
    2886   00:531B  28 0A               		jr.		z,una_vida_menos
    2887   00:531D                      				
    2888   00:531D  C9                  		ret
    2889   00:531E                      
    2890   00:531E                      pasa_fase_con_trampa:													;PARA HACER TRAMPA
    2891   00:531E                      
    2892   00:531E  CD 1B 4E            		call	activa_mute
    2893   00:5321  3E 01               		ld		a,1														;PARA HACER TRAMPA
    2894   00:5323  32 72 C3            		ld		(pasamos_la_fase),a										;PARA HACER TRAMPA
    2895   00:5326  C9                  		ret
    2896   00:5327                      		
    2897   00:5327                      una_vida_menos:
    2898   00:5327                      		
    2899   00:5327  CD 1B 4E            		call	activa_mute
    2900   00:532A                      		
    2901   00:532A  3E 08               		ld		a,8														;efecto muerte
    2902   00:532C  CD C4 6C            		call	efecto_sonido
    2903   00:532F                      
    2904   00:532F  3A 14 C0            		ld		a,(vidas_prota)
    2905   00:5332  3D                  		dec		a
    2906   00:5333  32 14 C0            		ld		(vidas_prota),a
    2907   00:5336                      		
    2908   00:5336  C3 C2 53            		jr.		repite_fase
    2909   00:5339                      
    2910   00:5339                      musica_off_on:
    2911   00:5339                      		
    2912   00:5339  3A 81 C3            		ld		a,(ESTADO_MUSICA)
    2913   00:533C  FE 00               		CP		0
    2914   00:533E  28 1A               		jr.		z,reconectamos_musica
    2915   00:5340                      		
    2916   00:5340  AF                  		xor		a
    2917   00:5341  32 81 C3            		ld		(ESTADO_MUSICA),a
    2918   00:5344                      		
    2919   00:5344  CD 1B 4E            		call	activa_mute
    2920   00:5347                      
    2921   00:5347                      rutina_de_espera_tras_la_musica:
    2922   00:5347                      		
    2923   00:5347  3E 64               		ld		a,100
    2924   00:5349  F5                  		push	af
    2925   00:534A                      		
    2926   00:534A                      valor_anadido_2:
    2927   00:534A                      		
    2928   00:534A  3E FF               		ld		a,255
    2929   00:534C                      		
    2930   00:534C                      retardo_rutina_de_pausa_2:
    2931   00:534C                      		
    2932   00:534C  3D                  		dec		a
    2933   00:534D  FE 00               		cp		0
    2934   00:534F  20 FB               		jr.		nz,retardo_rutina_de_pausa_2
    2935   00:5351  F1                  		pop		af
    2936   00:5352  3D                  		dec		a
    2937   00:5353  F5                  		push	af
    2938   00:5354  FE 00               		cp		0
    2939   00:5356  20 F2               		jr.		nz,valor_anadido_2
    2940   00:5358  F1                  		pop		af
    2941   00:5359  C9                  		ret
    2942   00:535A                      		
    2943   00:535A                      reconectamos_musica:
    2944   00:535A                      
    2945   00:535A  3E 01               		ld		a,1
    2946   00:535C  32 81 C3            		ld		(ESTADO_MUSICA),a
    2947   00:535F                      		
    2948   00:535F  CD 26 4E            		call	activa_musica_fases					;inicia el reproductor de PT3
    2949   00:5362                      				
    2950   00:5362  18 E3               		jr.		rutina_de_espera_tras_la_musica
    2951   00:5364                      				
    2952   00:5364                      pausa_el_juego:
    2953   00:5364                      
    2954   00:5364  CD 1B 4E            		call	activa_mute
    2955   00:5367                      
    2956   00:5367  21 DD B9            		ld		hl,pause					;anunciamos pausa
    2957   00:536A  11 E2 1A            		ld		de,#1ae2
    2958   00:536D  01 05 00            		ld		bc,5
    2959   00:5370  CD 5C 00            		call	GRABAVRAM
    2960   00:5373                      		
    2961   00:5373  3E 09               		ld		a,9						;efecto de pausa
    2962   00:5375  CD C4 6C            		call	efecto_sonido	
    2963   00:5378                      		
    2964   00:5378  3E 64               		ld		a,100
    2965   00:537A  F5                  		push	af
    2966   00:537B                      		
    2967   00:537B                      valor_anadido:
    2968   00:537B                      		
    2969   00:537B  3E FF               		ld		a,255
    2970   00:537D                      		
    2971   00:537D                      retardo_rutina_de_pausa:
    2972   00:537D                      		
    2973   00:537D  3D                  		dec		a
    2974   00:537E  FE 00               		cp		0
    2975   00:5380  20 FB               		jr.		nz,retardo_rutina_de_pausa
    2976   00:5382  F1                  		pop		af
    2977   00:5383  3D                  		dec		a
    2978   00:5384  F5                  		push	af
    2979   00:5385  FE 00               		cp		0
    2980   00:5387  20 F2               		jr.		nz,valor_anadido
    2981   00:5389  F1                  		pop		af
    2982   00:538A                      		
    2983   00:538A                      rutina_de_pausa:
    2984   00:538A                      	
    2985   00:538A  3E 06               		ld		a,6
    2986   00:538C  CD 41 01            		call	SNSMAT
    2987   00:538F  CB 6F               		bit		5,a
    2988   00:5391  28 02               		jr.		Z,reconectamos
    2989   00:5393  18 F5               		jr. 	rutina_de_pausa
    2990   00:5395                      
    2991   00:5395                      reconectamos:
    2992   00:5395                      		
    2993   00:5395  21 E2 B9            		ld		hl,ladrillos			;recupera los ladrillos borrados
    2994   00:5398  11 E2 1A            		ld		de,#1ae2
    2995   00:539B  01 05 00            		ld		bc,5
    2996   00:539E  CD 5C 00            		call	GRABAVRAM
    2997   00:53A1                      		
    2998   00:53A1  3E 09               		ld		a,9														;efecto de pausa
    2999   00:53A3  CD C4 6C            		call	efecto_sonido
    3000   00:53A6                      		
    3001   00:53A6  3E 64               		ld		a,100
    3002   00:53A8  F5                  		push	af
    3003   00:53A9                      		
    3004   00:53A9                      valor_anadido_1:
    3005   00:53A9                      		
    3006   00:53A9  3E FF               		ld		a,255
    3007   00:53AB                      		
    3008   00:53AB                      retardo_rutina_de_pausa_1:
    3009   00:53AB                      		
    3010   00:53AB  3D                  		dec		a
    3011   00:53AC  FE 00               		cp		0
    3012   00:53AE  20 FB               		jr.		nz,retardo_rutina_de_pausa_1
    3013   00:53B0  F1                  		pop		af
    3014   00:53B1  3D                  		dec		a
    3015   00:53B2  F5                  		push	af
    3016   00:53B3  FE 00               		cp		0
    3017   00:53B5  20 F2               		jr.		nz,valor_anadido_1
    3018   00:53B7  F1                  		pop		af
    3019   00:53B8                      		
    3020   00:53B8  3A 81 C3            		ld		a,(ESTADO_MUSICA)
    3021   00:53BB  FE 01               		cp		1
    3022   00:53BD  C0                  		ret		nz
    3023   00:53BE                      		
    3024   00:53BE  CD 26 4E            		call	activa_musica_fases										;conectamos las interrupciones
    3025   00:53C1                      		
    3026   00:53C1  C9                  		ret
    3027   00:53C2                      		
    3028   00:53C2                      repite_fase:
    3029   00:53C2                      		
    3030   00:53C2  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3031   00:53C6                      				
    3032   00:53C6  CD 1F 45            		call	limpia_sprites
    3033   00:53C9                      		
    3034   00:53C9  CD 45 4E            		call	activa_musica_muerto
    3035   00:53CC  CD 04 66            		call	puntuacion_vidas_fase
    3036   00:53CF  CD 47 4D            		call	SPRITES_UNO
    3037   00:53D2                      		
    3038   00:53D2  3A 14 C0            		ld		a,(vidas_prota)
    3039   00:53D5  FE 00               		cp		0
    3040   00:53D7  28 3D               		jr.		z,termina_partida_mal
    3041   00:53D9                      		
    3042   00:53D9  3A 18 C0            		ld		a,(fase_en_la_que_esta)
    3043   00:53DC  FE 01               		cp		1
    3044   00:53DE  CA CE 45            		jr.		z,bloque_sanctuary_1
    3045   00:53E1                      		
    3046   00:53E1  FE 02               		cp		2
    3047   00:53E3  CA 4F 46            		jr.		z,bloque_sanctuary_2
    3048   00:53E6                      		
    3049   00:53E6  FE 03               		cp		3
    3050   00:53E8  CA F8 46            		jr.		z,bloque_sanctuary_3
    3051   00:53EB                      		
    3052   00:53EB  FE 04               		cp		4
    3053   00:53ED  CA 73 47            		jr.		z,bloque_sanctuary_4
    3054   00:53F0                      		
    3055   00:53F0  FE 05               		cp		5
    3056   00:53F2  CA 18 48            		jr.		z,bloque_sanctuary_5
    3057   00:53F5                      		
    3058   00:53F5  FE 06               		cp		6
    3059   00:53F7  CA A5 48            		jr.		z,bloque_sanctuary_6
    3060   00:53FA                      		
    3061   00:53FA  FE 07               		cp		7
    3062   00:53FC  CA 8E 49            		jr.		z,bloque_sanctuary_7
    3063   00:53FF                      		
    3064   00:53FF  FE 08               		cp		8
    3065   00:5401  CA 27 4A            		jr.		z,bloque_sanctuary_8
    3066   00:5404                      		
    3067   00:5404  FE 09               		cp		9
    3068   00:5406  CA C0 4A            		jr.		z,bloque_sanctuary_9
    3069   00:5409                      		
    3070   00:5409  FE 0A               		cp		10
    3071   00:540B  CA 4E 4B            		jr.		z,bloque_sanctuary_10
    3072   00:540E                      				
    3073   00:540E  FE 0B               		cp		11
    3074   00:5410  CA FC 4B            		jr.		z,FINAL_TEMPLO
    3075   00:5413                      		
    3076   00:5413  C3 C8 40            		jr.		INICIA_MUSICA
    3077   00:5416                      
    3078   00:5416                      termina_partida_mal:
    3079   00:5416                      
    3080   00:5416  CD 41 00            		call	DISSCR	
    3081   00:5419  21 04 B0            		ld		hl,blanco												;tiles de base de pantalla
    3082   00:541C  11 20 18            		ld		de,#1820
    3083   00:541F  CD C9 6C            		call	depack_VRAM
    3084   00:5422                      		
    3085   00:5422  3A 00 C0            		LD		a,(idioma)
    3086   00:5425  FE 00               		cp		0
    3087   00:5427  28 0E               		jr.		z,termina_en_castellano
    3088   00:5429                      
    3089   00:5429                      termina_en_ingles:
    3090   00:5429                      		
    3091   00:5429  21 C9 B9            		ld		hl,game_over											;anunciamos final malo
    3092   00:542C  11 8B 19            		ld		de,#198b
    3093   00:542F  01 0A 00            		ld		bc,10
    3094   00:5432  CD 5C 00            		call	GRABAVRAM
    3095   00:5435  18 0C               		jr.		termina_partida_mal_continua
    3096   00:5437                      		
    3097   00:5437                      termina_en_castellano:
    3098   00:5437                      		
    3099   00:5437  21 D3 B9            		ld		hl,se__acabo											;anunciamos final malo
    3100   00:543A  11 8B 19            		ld		de,#198b
    3101   00:543D  01 0A 00            		ld		bc,10
    3102   00:5440  CD 5C 00            		call	GRABAVRAM
    3103   00:5443                      
    3104   00:5443                      termina_partida_mal_continua:
    3105   00:5443                      		
    3106   00:5443  CD 44 00            		call	ENASCR
    3107   00:5446  CD 73 54            		call 	musica_sin_bucle
    3108   00:5449                      		
    3109   00:5449  21 5F CA            		ld		hl,GAME_OVER-99									;hl ahora vale la direccion donde se encuentra la cancion
    3110   00:544C  CD 7C 6E            		call	PT3_INIT												;inicia el reproductor de PT3
    3111   00:544F                      		
    3112   00:544F  21 EE 02            		ld		hl,750
    3113   00:5452  22 0F C0            		ld		(clock),hl
    3114   00:5455                      		
    3115   00:5455                      string_para_reiniciar_programa:
    3116   00:5455                      
    3117   00:5455  76                  		halt
    3118   00:5456  2A 0F C0            		ld		hl,(clock)
    3119   00:5459  01 01 00            		ld		bc,1		
    3120   00:545C  ED 42               		sbc		hl,bc
    3121   00:545E  22 0F C0            		ld		(clock),hl
    3122   00:5461  28 0A               		jr.		z,inicio
    3123   00:5463                      		
    3124   00:5463  3A 0E C0            		ld		a,(stick_a_usar)
    3125   00:5466  CD D8 00            		CALL	ONSTRIG
    3126   00:5469  FE 00               		cp		0
    3127   00:546B  28 E8               		jr.		z,string_para_reiniciar_programa
    3128   00:546D                      
    3129   00:546D                      inicio:
    3130   00:546D                      		
    3131   00:546D  CD 3A 4E            		call	activa_musica_menu
    3132   00:5470  C3 8D 41            		jr.		MENU
    3133   00:5473                      
    3134   00:5473                      musica_sin_bucle:
    3135   00:5473                      
    3136   00:5473  3A 00 F0            		ld		a,[PT3_SETUP]											;musica sin bucle
    3137   00:5476  F6 01               		or		00000001b
    3138   00:5478  32 00 F0            		ld		[PT3_SETUP],a
    3139   00:547B                      		
    3140   00:547B  C9                  		ret
    3141   00:547C                      
    3142   00:547C                      musica_con_bucle:
    3143   00:547C                      
    3144   00:547C  3A 00 F0            		ld		a,[PT3_SETUP]											;musica CON bucle
    3145   00:547F  E6 FE               		and		11111110b
    3146   00:5481  32 00 F0            		ld		[PT3_SETUP],a
    3147   00:5484                      		
    3148   00:5484  C9                  		ret
    3149   00:5485                      		
    3150   00:5485                      colision_bombero_prota:
    3151   00:5485                      		
    3152   00:5485  3A 84 C3            		ld		a,(bombero_1)											;si no está activo, no hay colision
    3153   00:5488  FE 00               		cp		0
    3154   00:548A  C8                  		ret		z
    3155   00:548B                      		
    3156   00:548B  FD 21 85 C3         		ld	    iy,bombero_control										
    3157   00:548F                      
    3158   00:548F  FD 7E 08            		ld		a,(iy+8)												;si no está a vista, no hay colision
    3159   00:5492  FE 00               		cp		0
    3160   00:5494  C0                  		ret		nz
    3161   00:5495                      
    3162   00:5495                      		
    3163   00:5495  CD 96 56            		call	coteja_colision_prota_bombero
    3164   00:5498  3A 83 C3            		ld		a,(colision_bombero_prota_real)
    3165   00:549B  FE 00               		cp		0
    3166   00:549D  C8                  		ret		z
    3167   00:549E                      		
    3168   00:549E  AF                  		xor		a
    3169   00:549F  32 83 C3            		ld		(colision_bombero_prota_real),a		
    3170   00:54A2                      		
    3171   00:54A2  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3172   00:54A6                      					
    3173   00:54A6  FD 7E 01            		ld		a,(iy+1)												;posiciones y
    3174   00:54A9  3D                  		dec		a
    3175   00:54AA  DD 77 00            		ld		(ix),a
    3176   00:54AD  DD 77 04            		ld		(ix+4),a
    3177   00:54B0  3C                  		inc		a
    3178   00:54B1  DD 77 10            		ld		(ix+16),a
    3179   00:54B4  D6 09               		sub		9
    3180   00:54B6  DD 77 08            		ld		(ix+8),a
    3181   00:54B9  C6 10               		add		16
    3182   00:54BB  DD 77 14            		ld		(ix+20),a
    3183   00:54BE                      		
    3184   00:54BE  FD 7E 00            		ld		a,(iy)													;patrones x
    3185   00:54C1  D6 08               		sub		8
    3186   00:54C3  DD 77 01            		ld		(ix+1),a
    3187   00:54C6  DD 77 05            		ld		(ix+5),a
    3188   00:54C9  C6 0D               		add		13
    3189   00:54CB  DD 77 11            		ld		(ix+17),a
    3190   00:54CE  DD 77 09            		ld		(ix+9),a
    3191   00:54D1  DD 77 15            		ld		(ix+21),a
    3192   00:54D4                      				
    3193   00:54D4  3E EC               		ld		a,59*4													;patrones
    3194   00:54D6  DD 77 02            		ld		(ix+2),a
    3195   00:54D9  3E F0               		ld		a,60*4
    3196   00:54DB  DD 77 06            		ld		(ix+6),a
    3197   00:54DE  3E 7C               		ld		a,31*4
    3198   00:54E0  DD 77 12            		ld		(ix+18),a
    3199   00:54E3  3E 80               		ld		a,32*4
    3200   00:54E5  DD 77 0A            		ld		(ix+10),a
    3201   00:54E8  3E B4               		ld		a,45*4
    3202   00:54EA  DD 77 16            		ld		(ix+22),a
    3203   00:54ED                      		
    3204   00:54ED  3E 09               		ld		a,9														;colores
    3205   00:54EF  DD 77 03            		ld		(ix+3),a												;cara prota
    3206   00:54F2  DD 77 0B            		ld		(ix+11),a												;cara bombero
    3207   00:54F5  3E 01               		ld		a,1
    3208   00:54F7  DD 77 13            		ld		(ix+19),a												;contorno bombero
    3209   00:54FA  3E 0F               		ld		a,15
    3210   00:54FC  DD 77 07            		ld		(ix+7),a												;agua
    3211   00:54FF  3E 0D               		ld		a,13
    3212   00:5501  DD 77 17            		ld		(ix+23),a												;ropa bombero
    3213   00:5504                      				
    3214   00:5504  18 4E               		jr.		espera_por_muerte
    3215   00:5506                      		
    3216   00:5506                      colisiones_serpientes_prota_1:
    3217   00:5506                      
    3218   00:5506  3A 6D C3            		ld		a,(serp1)												;¿está activa la sepriente 1?
    3219   00:5509  FE 01               		cp		1
    3220   00:550B  20 60               		jr.		nz,colisiones_serpientes_prota_2
    3221   00:550D                      		
    3222   00:550D  FD 21 48 C3         		ld		iy,variables_serpiente_1
    3223   00:5511                      		
    3224   00:5511  CD 5D 56            		call	coteja_colision_prota_serpiente
    3225   00:5514  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3226   00:5517  FE 00               		cp		0
    3227   00:5519  28 52               		jr.		z,colisiones_serpientes_prota_2
    3228   00:551B                      		
    3229   00:551B  AF                  		xor		a
    3230   00:551C  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3231   00:551F                      		
    3232   00:551F  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3233   00:5523                      					
    3234   00:5523  FD 7E 01            		ld		a,(iy+1)
    3235   00:5526  DD 77 00            		ld		(ix),a
    3236   00:5529  DD 77 04            		ld		(ix+4),a
    3237   00:552C  DD 77 08            		ld		(ix+8),a
    3238   00:552F                      		
    3239   00:552F  FD 7E 00            		ld		a,(iy)
    3240   00:5532  DD 77 01            		ld		(ix+1),a
    3241   00:5535  DD 77 05            		ld		(ix+5),a
    3242   00:5538  DD 77 09            		ld		(ix+9),a
    3243   00:553B                      		
    3244   00:553B  3E BC               		ld		a,47*4
    3245   00:553D  DD 77 02            		ld		(ix+2),a
    3246   00:5540  3E C0               		ld		a,48*4
    3247   00:5542  DD 77 06            		ld		(ix+6),a
    3248   00:5545  3E C4               		ld		a,49*4
    3249   00:5547  DD 77 12            		ld		(ix+18),a
    3250   00:554A  3E C8               		ld		a,50*4
    3251   00:554C  DD 77 0A            		ld		(ix+10),a
    3252   00:554F  3E 60               		ld		a,24*4
    3253   00:5551  DD 77 16            		ld		(ix+22),a
    3254   00:5554                      				
    3255   00:5554                      espera_por_muerte:
    3256   00:5554                      		
    3257   00:5554  CD D4 57            		call	atributos_sprites
    3258   00:5557                      	
    3259   00:5557  CD 1B 4E            		call	activa_mute
    3260   00:555A                      	
    3261   00:555A  3E 08               		ld		a,8						;efecto sonoro de muerte de prota
    3262   00:555C  CD C4 6C            		call	efecto_sonido		
    3263   00:555F                      		
    3264   00:555F  AF                  		xor		a
    3265   00:5560  32 17 C0            		ld		(muerto),a
    3266   00:5563                      
    3267   00:5563                      on_string_de_muerte:
    3268   00:5563                      		
    3269   00:5563  21 96 00            		ld		hl,150
    3270   00:5566  22 0F C0            		ld		(clock),hl						
    3271   00:5569  CD 5B 4E            		call	rutina_de_esperar_un_rato
    3272   00:556C                      		
    3273   00:556C  C9                  		ret		
    3274   00:556D                      
    3275   00:556D                      colisiones_serpientes_prota_2:
    3276   00:556D                      
    3277   00:556D  3A 6E C3            		ld		a,(serp2)						;¿está activa la sepriente 2?
    3278   00:5570  FE 01               		cp		1
    3279   00:5572  20 49               		jr.		nz,colisiones_serpientes_prota_3
    3280   00:5574                      		
    3281   00:5574  FD 21 51 C3         		ld		iy,variables_serpiente_2
    3282   00:5578                      		
    3283   00:5578  CD 5D 56            		call	coteja_colision_prota_serpiente
    3284   00:557B  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3285   00:557E  FE 00               		cp		0
    3286   00:5580  28 3B               		jr.		z,colisiones_serpientes_prota_3
    3287   00:5582                      		
    3288   00:5582  AF                  		xor		a
    3289   00:5583  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3290   00:5586                      		
    3291   00:5586  DD 21 20 C0         		ld		ix,atributos_sprite_general		
    3292   00:558A                      				
    3293   00:558A  FD 7E 01            		ld		a,(iy+1)
    3294   00:558D  DD 77 00            		ld		(ix),a
    3295   00:5590  DD 77 04            		ld		(ix+4),a
    3296   00:5593  DD 77 08            		ld		(ix+8),a
    3297   00:5596                      		
    3298   00:5596  FD 7E 00            		ld		a,(iy)
    3299   00:5599  DD 77 01            		ld		(ix+1),a
    3300   00:559C  DD 77 05            		ld		(ix+5),a
    3301   00:559F  DD 77 09            		ld		(ix+9),a
    3302   00:55A2                      		
    3303   00:55A2  3E BC               		ld		a,47*4
    3304   00:55A4  DD 77 02            		ld		(ix+2),a
    3305   00:55A7  3E C0               		ld		a,48*4
    3306   00:55A9  DD 77 06            		ld		(ix+6),a
    3307   00:55AC  3E C4               		ld		a,49*4
    3308   00:55AE  DD 77 1A            		ld		(ix+26),a
    3309   00:55B1  3E C8               		ld		a,50*4
    3310   00:55B3  DD 77 0A            		ld		(ix+10),a
    3311   00:55B6  3E 60               		ld		a,24*4
    3312   00:55B8  DD 77 1E            		ld		(ix+30),a
    3313   00:55BB                      						
    3314   00:55BB  18 97               		jr.		espera_por_muerte
    3315   00:55BD                      
    3316   00:55BD                      colisiones_serpientes_prota_3:
    3317   00:55BD                      
    3318   00:55BD  3A 6F C3            		ld		a,(serp3)						;¿está activa la sepriente 3?
    3319   00:55C0  FE 01               		cp		1
    3320   00:55C2  20 4A               		jr.		nz,colisiones_serpientes_prota_4
    3321   00:55C4                      
    3322   00:55C4  FD 21 5A C3         		ld		iy,variables_serpiente_3
    3323   00:55C8                      	
    3324   00:55C8  CD 5D 56            		call	coteja_colision_prota_serpiente
    3325   00:55CB  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3326   00:55CE  FE 00               		cp		0
    3327   00:55D0  28 3C               		jr.		z,colisiones_serpientes_prota_4
    3328   00:55D2                      		
    3329   00:55D2  AF                  		xor		a
    3330   00:55D3  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3331   00:55D6                      		
    3332   00:55D6  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3333   00:55DA                      				
    3334   00:55DA  FD 7E 01            		ld		a,(iy+1)
    3335   00:55DD  DD 77 00            		ld		(ix),a
    3336   00:55E0  DD 77 04            		ld		(ix+4),a
    3337   00:55E3  DD 77 08            		ld		(ix+8),a
    3338   00:55E6                      		
    3339   00:55E6  FD 7E 00            		ld		a,(iy)
    3340   00:55E9  DD 77 01            		ld		(ix+1),a
    3341   00:55EC  DD 77 05            		ld		(ix+5),a
    3342   00:55EF  DD 77 09            		ld		(ix+9),a
    3343   00:55F2                      		
    3344   00:55F2  3E BC               		ld		a,47*4
    3345   00:55F4  DD 77 02            		ld		(ix+2),a
    3346   00:55F7  3E C0               		ld		a,48*4
    3347   00:55F9  DD 77 06            		ld		(ix+6),a
    3348   00:55FC  3E C4               		ld		a,49*4
    3349   00:55FE  DD 77 22            		ld		(ix+34),a
    3350   00:5601  3E C8               		ld		a,50*4
    3351   00:5603  DD 77 0A            		ld		(ix+10),a
    3352   00:5606  3E 60               		ld		a,24*4
    3353   00:5608  DD 77 26            		ld		(ix+38),a
    3354   00:560B                      		
    3355   00:560B  C3 54 55            		jr.		espera_por_muerte	
    3356   00:560E                      		
    3357   00:560E                      colisiones_serpientes_prota_4:
    3358   00:560E                      
    3359   00:560E  3A 70 C3            		ld		a,(serp4)						;¿está activa la sepriente 4?
    3360   00:5611  FE 01               		cp		1
    3361   00:5613  C0                  		ret		nz
    3362   00:5614                      
    3363   00:5614  FD 21 63 C3         		ld		iy,variables_serpiente_4
    3364   00:5618                      		
    3365   00:5618  CD 5D 56            		call	coteja_colision_prota_serpiente
    3366   00:561B  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3367   00:561E  FE 00               		cp		0
    3368   00:5620  C8                  		ret		z
    3369   00:5621                      		
    3370   00:5621  AF                  		xor		a
    3371   00:5622  32 6C C3            		ld		(colision_cuchillo_serp_real),a		
    3372   00:5625                      		
    3373   00:5625  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3374   00:5629                      						
    3375   00:5629  FD 7E 01            		ld		a,(iy+1)
    3376   00:562C  DD 77 00            		ld		(ix),a
    3377   00:562F  DD 77 04            		ld		(ix+4),a
    3378   00:5632  DD 77 08            		ld		(ix+8),a
    3379   00:5635                      		
    3380   00:5635  FD 7E 00            		ld		a,(iy)
    3381   00:5638  DD 77 01            		ld		(ix+1),a
    3382   00:563B  DD 77 05            		ld		(ix+5),a
    3383   00:563E  DD 77 09            		ld		(ix+9),a
    3384   00:5641                      		
    3385   00:5641  3E BC               		ld		a,47*4
    3386   00:5643  DD 77 02            		ld		(ix+2),a
    3387   00:5646  3E C0               		ld		a,48*4
    3388   00:5648  DD 77 06            		ld		(ix+6),a
    3389   00:564B  3E C4               		ld		a,49*4
    3390   00:564D  DD 77 2A            		ld		(ix+42),a
    3391   00:5650  3E C8               		ld		a,50*4
    3392   00:5652  DD 77 0A            		ld		(ix+10),a
    3393   00:5655  3E 60               		ld		a,24*4
    3394   00:5657  DD 77 2E            		ld		(ix+46),a
    3395   00:565A                      		
    3396   00:565A  C3 54 55            		jr.		espera_por_muerte
    3397   00:565D                      
    3398   00:565D                      coteja_colision_prota_serpiente:
    3399   00:565D                      
    3400   00:565D  3A 11 C0            		ld		a,(px)
    3401   00:5660  D6 07               		sub		a,7					;coordenadas coincidentes
    3402   00:5662  47                  		ld		b,a
    3403   00:5663  FD 7E 00            		ld		a,(iy)
    3404   00:5666  B8                  		cp		b
    3405   00:5667  D8                  		ret		c
    3406   00:5668                      		
    3407   00:5668  3A 11 C0            		ld		a,(px)
    3408   00:566B  C6 0A               		add		a,10
    3409   00:566D  47                  		ld		b,a
    3410   00:566E  FD 7E 00            		ld		a,(iy)
    3411   00:5671  B8                  		cp		b
    3412   00:5672  D0                  		ret		nc
    3413   00:5673                      		
    3414   00:5673  3A 12 C0            		ld		a,(py)
    3415   00:5676  D6 0E               		sub		a,14
    3416   00:5678  47                  		ld		b,a
    3417   00:5679  FD 7E 01            		ld		a,(iy+1)
    3418   00:567C  B8                  		cp		b
    3419   00:567D  D8                  		ret		c
    3420   00:567E                      		
    3421   00:567E  3A 12 C0            		ld		a,(py)
    3422   00:5681  C6 0E               		add		14
    3423   00:5683  47                  		ld		b,a
    3424   00:5684  FD 7E 01            		ld		a,(iy+1)
    3425   00:5687  B8                  		cp		b
    3426   00:5688  D0                  		ret		nc
    3427   00:5689                      		
    3428   00:5689  3A 14 C0            		ld		a,(vidas_prota)
    3429   00:568C  3D                  		dec		a
    3430   00:568D  32 14 C0            		ld		(vidas_prota),a
    3431   00:5690                      		
    3432   00:5690  3E 01               		ld		a,1
    3433   00:5692  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3434   00:5695                      		
    3435   00:5695  C9                  		ret
    3436   00:5696                      
    3437   00:5696                      coteja_colision_prota_bombero:
    3438   00:5696                      
    3439   00:5696  3A 11 C0            		ld		a,(px)
    3440   00:5699  D6 07               		sub		a,7					;coordenadas coincidentes
    3441   00:569B  47                  		ld		b,a
    3442   00:569C  FD 7E 00            		ld		a,(iy)
    3443   00:569F  B8                  		cp		b
    3444   00:56A0  D8                  		ret		c
    3445   00:56A1                      		
    3446   00:56A1  3A 11 C0            		ld		a,(px)
    3447   00:56A4  C6 0A               		add		a,10
    3448   00:56A6  47                  		ld		b,a
    3449   00:56A7  FD 7E 00            		ld		a,(iy)
    3450   00:56AA  B8                  		cp		b
    3451   00:56AB  D0                  		ret		nc
    3452   00:56AC                      		
    3453   00:56AC  3A 12 C0            		ld		a,(py)
    3454   00:56AF  D6 0E               		sub		a,14
    3455   00:56B1  47                  		ld		b,a
    3456   00:56B2  FD 7E 01            		ld		a,(iy+1)
    3457   00:56B5  B8                  		cp		b
    3458   00:56B6  D8                  		ret		c
    3459   00:56B7                      		
    3460   00:56B7  3A 12 C0            		ld		a,(py)
    3461   00:56BA  C6 0E               		add		14
    3462   00:56BC  47                  		ld		b,a
    3463   00:56BD  FD 7E 01            		ld		a,(iy+1)
    3464   00:56C0  B8                  		cp		b
    3465   00:56C1  D0                  		ret		nc
    3466   00:56C2                      		
    3467   00:56C2  3A 14 C0            		ld		a,(vidas_prota)
    3468   00:56C5  3D                  		dec		a
    3469   00:56C6  32 14 C0            		ld		(vidas_prota),a
    3470   00:56C9                      		
    3471   00:56C9  3E 01               		ld		a,1
    3472   00:56CB  32 83 C3            		ld		(colision_bombero_prota_real),a
    3473   00:56CE                      		
    3474   00:56CE  C9                  		ret
    3475   00:56CF                      				
    3476   00:56CF                      colisiones_serpientes_cuchillos:
    3477   00:56CF                      
    3478   00:56CF  3A 73 C3            		ld		a,(momento_lanzamiento)			;mira si es posible que el cuchillo este volando
    3479   00:56D2  FE 02               		cp		2
    3480   00:56D4  D8                  		ret		c
    3481   00:56D5                      				
    3482   00:56D5  3A 6D C3            		ld		a,(serp1)						;¿está activa la sepriente 1?
    3483   00:56D8  FE 01               		cp		1
    3484   00:56DA  20 23               		jr.		nz,colision_cuchillo_serp_2
    3485   00:56DC                      		
    3486   00:56DC                      colision_cuchillo_serp_1:
    3487   00:56DC                      		
    3488   00:56DC  FD 21 48 C3         		ld		iy,variables_serpiente_1
    3489   00:56E0                      		
    3490   00:56E0                      		
    3491   00:56E0  CD 7C 57            		call	colision_cuchillo_serpiente
    3492   00:56E3  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3493   00:56E6  FE 00               		cp		0
    3494   00:56E8  28 15               		jr.		z,colision_cuchillo_serp_2
    3495   00:56EA                      		
    3496   00:56EA  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3497   00:56EE                      					
    3498   00:56EE  AF                  		xor		a
    3499   00:56EF  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3500   00:56F2  32 6D C3            		ld		(serp1),a
    3501   00:56F5  3E B4               		ld		a,180
    3502   00:56F7  DD 77 12            		ld		(ix+18),a
    3503   00:56FA  3E B8               		ld		a,184
    3504   00:56FC  DD 77 16            		ld		(ix+22),a
    3505   00:56FF                      						
    3506   00:56FF                      colision_cuchillo_serp_2:
    3507   00:56FF                      
    3508   00:56FF  3A 6E C3            		ld		a,(serp2)						;¿está activa la sepriente 1?
    3509   00:5702  FE 01               		cp		1
    3510   00:5704  20 23               		jr.		nz,colision_cuchillo_serp_3
    3511   00:5706                      		
    3512   00:5706  FD 21 51 C3         		ld		iy,variables_serpiente_2
    3513   00:570A                      		
    3514   00:570A  CD 7C 57            		call	colision_cuchillo_serpiente
    3515   00:570D  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3516   00:5710  FE 00               		cp		0
    3517   00:5712  28 15               		jr.		z,colision_cuchillo_serp_3
    3518   00:5714                      		
    3519   00:5714  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3520   00:5718                      				
    3521   00:5718  AF                  		xor		a
    3522   00:5719  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3523   00:571C  32 6E C3            		ld		(serp2),a
    3524   00:571F  3E B4               		ld		a,180
    3525   00:5721  DD 77 1A            		ld		(ix+26),a
    3526   00:5724  3E B8               		ld		a,184
    3527   00:5726  DD 77 1E            		ld		(ix+30),a
    3528   00:5729                      								
    3529   00:5729                      colision_cuchillo_serp_3:
    3530   00:5729                      
    3531   00:5729  3A 6F C3            		ld		a,(serp3)						;¿está activa la sepriente 1?
    3532   00:572C  FE 01               		cp		1
    3533   00:572E  20 23               		jr.		nz,colision_cuchillo_serp_4
    3534   00:5730                      		
    3535   00:5730  FD 21 5A C3         		ld		iy,variables_serpiente_3
    3536   00:5734                      		
    3537   00:5734  CD 7C 57            		call	colision_cuchillo_serpiente
    3538   00:5737  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3539   00:573A  FE 00               		cp		0
    3540   00:573C  28 15               		jr.		z,colision_cuchillo_serp_4
    3541   00:573E                      		
    3542   00:573E  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3543   00:5742                      			
    3544   00:5742  AF                  		xor		a
    3545   00:5743  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3546   00:5746  32 6F C3            		ld		(serp3),a
    3547   00:5749  3E B4               		ld		a,180
    3548   00:574B  DD 77 22            		ld		(ix+34),a
    3549   00:574E  3E B8               		ld		a,184
    3550   00:5750  DD 77 26            		ld		(ix+38),a
    3551   00:5753                      				
    3552   00:5753                      colision_cuchillo_serp_4:
    3553   00:5753                      
    3554   00:5753  3A 70 C3            		ld		a,(serp4)						;¿está activa la sepriente 1?
    3555   00:5756  FE 01               		cp		1
    3556   00:5758  C0                  		ret		nz
    3557   00:5759                      		
    3558   00:5759  FD 21 63 C3         		ld		iy,variables_serpiente_4
    3559   00:575D                      		
    3560   00:575D  CD 7C 57            		call	colision_cuchillo_serpiente
    3561   00:5760  3A 6C C3            		ld		a,(colision_cuchillo_serp_real)
    3562   00:5763  FE 00               		cp		0
    3563   00:5765  C8                  		ret		z
    3564   00:5766                      		
    3565   00:5766  DD 21 20 C0         		ld		ix,atributos_sprite_general
    3566   00:576A                      		
    3567   00:576A  AF                  		xor		a
    3568   00:576B  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3569   00:576E  32 70 C3            		ld		(serp4),a
    3570   00:5771  3E B4               		ld		a,180
    3571   00:5773  DD 77 2A            		ld		(ix+42),a
    3572   00:5776  3E B8               		ld		a,184
    3573   00:5778  DD 77 2E            		ld		(ix+46),a
    3574   00:577B                      		
    3575   00:577B  C9                  		ret
    3576   00:577C                      
    3577   00:577C                      colision_cuchillo_serpiente:
    3578   00:577C                      
    3579   00:577C  3A 78 C3            		ld		a,(cx)							;coordenadas coincidentes
    3580   00:577F  47                  		ld		b,a
    3581   00:5780  FD 7E 00            		ld		a,(iy)
    3582   00:5783  B8                  		cp		b
    3583   00:5784  D0                  		ret		nc
    3584   00:5785                      		
    3585   00:5785  C6 10               		add		a,16
    3586   00:5787  B8                  		cp		b
    3587   00:5788  D8                  		ret		c
    3588   00:5789                      	
    3589   00:5789  3A 79 C3            		ld		a,(cy)
    3590   00:578C  47                  		ld		b,a
    3591   00:578D  FD 7E 01            		ld		a,(iy+1)
    3592   00:5790  D6 04               		sub		4
    3593   00:5792  B8                  		cp		b
    3594   00:5793  D0                  		ret		nc
    3595   00:5794                      				
    3596   00:5794  C6 14               		add		a,20
    3597   00:5796  B8                  		cp		b
    3598   00:5797  D8                  		ret		c
    3599   00:5798                      						
    3600   00:5798  AF                  		xor		a
    3601   00:5799  32 73 C3            		ld		(momento_lanzamiento),a
    3602   00:579C                      				
    3603   00:579C  3A 78 C3            		ld		a,[cx]						;recupera lo que habia en el tile anteriormente					
    3604   00:579F  57                  		ld		d,a
    3605   00:57A0  3A 79 C3            		ld		a,[cy]
    3606   00:57A3  5F                  		ld		e,a
    3607   00:57A4  CD 8D 5C            		call	get_bloque_en_X_Y
    3608   00:57A7                      		
    3609   00:57A7  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    3610   00:57AA  77                  		ld		[hl],a
    3611   00:57AB                      				
    3612   00:57AB  3E 07               		ld		a,7						;efecto sonoro de muerte
    3613   00:57AD  CD C4 6C            		call	efecto_sonido	
    3614   00:57B0                      		
    3615   00:57B0  3A 78 C3            		ld		a,[cx]						;recupera tambien en vram
    3616   00:57B3  57                  		ld		d,a
    3617   00:57B4  3A 79 C3            		ld		a,[cy]
    3618   00:57B7  5F                  		ld		e,a
    3619   00:57B8  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    3620   00:57BB                      		
    3621   00:57BB  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    3622   00:57BE  CD B1 6C            		call	pinta_en_pantalla
    3623   00:57C1                      		
    3624   00:57C1  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger mechero
    3625   00:57C4  C6 19               		add		a,25
    3626   00:57C6  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    3627   00:57C9  3E 01               		ld		a,1
    3628   00:57CB  32 46 C3            		ld		(cuenta_puntos_o_no),a
    3629   00:57CE                      		
    3630   00:57CE  3E 01               		ld		a,1
    3631   00:57D0  32 6C C3            		ld		(colision_cuchillo_serp_real),a
    3632   00:57D3                      				
    3633   00:57D3  C9                  		ret
    3634   00:57D4                      		
    3635   00:57D4                      atributos_sprites:
    3636   00:57D4                      
    3637   00:57D4  21 20 C0            		ld		hl,atributos_sprite_general
    3638   00:57D7  11 00 1B            		ld		de,#1B00
    3639   00:57DA  01 30 00            		ld		bc,48
    3640   00:57DD  CD 5C 00            		call	GRABAVRAM		
    3641   00:57E0  C9                  		ret
    3642   00:57E1                      		
    3643   00:57E1                      estado_en_que_se_encuentra:
    3644   00:57E1  CD 91 6B            		call	cero_cero
    3645   00:57E4  CD 8D 5C            		call	get_bloque_en_X_Y
    3646   00:57E7  FE 21               		cp		33					;si esta en la salida revisamos si sale
    3647   00:57E9  CA 75 5D            		jr.		z,fase_superada
    3648   00:57EC                      		
    3649   00:57EC  3A 37 C3            		ld		a,(estado_de_salto)		;no salta? vamos a comprovar si hace algo
    3650   00:57EF  FE 00               		cp		0						
    3651   00:57F1  28 1E               		jr.		z,continua_estado
    3652   00:57F3                      
    3653   00:57F3  FE 03               		cp		3						;diferentes estados de salto
    3654   00:57F5  DA 13 67            		jr.		c,salta_sube
    3655   00:57F8  FE 13               		cp		19
    3656   00:57FA  DA 7C 67            		jr.		c,salta_sigue
    3657   00:57FD  FE 15               		cp		21
    3658   00:57FF  DA A3 67            		jr.		c,salta_baja
    3659   00:5802  FE 21               		cp		33
    3660   00:5804  DA 51 67            		jr.		c,salta_sube_izquierda
    3661   00:5807  FE 31               		cp		49
    3662   00:5809  DA 90 67            		jr.		c,salta_sigue_izquierda
    3663   00:580C  FE 33               		cp		51
    3664   00:580E  DA D3 67            		jr.		c,salta_baja_izquierda
    3665   00:5811                      		
    3666   00:5811                      continua_estado:		
    3667   00:5811                      		
    3668   00:5811  3A 19 C0            		ld		a,(estado_prota)
    3669   00:5814  FE 04               		cp		4
    3670   00:5816  C8                  		ret		z
    3671   00:5817                      				
    3672   00:5817  CD 5A 6C            		call	ocho_dieciocho
    3673   00:581A  CD 8D 5C            		call	get_bloque_en_X_Y
    3674   00:581D                      		
    3675   00:581D  FE 29               		cp		41				;no cae si hay escalera
    3676   00:581F  28 2B               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3677   00:5821  FE 2A               		cp		42
    3678   00:5823  28 27               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3679   00:5825  FE 49               		cp		73
    3680   00:5827  28 23               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3681   00:5829  FE 4A               		cp		74
    3682   00:582B  28 1F               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3683   00:582D                      		
    3684   00:582D                      		
    3685   00:582D                      		
    3686   00:582D  3A 11 C0            		ld		a,[px]
    3687   00:5830  C6 0A               		add		10
    3688   00:5832  57                  		ld		d,a
    3689   00:5833  3A 12 C0            		ld		a,[py]
    3690   00:5836  C6 11               		add		17
    3691   00:5838  5F                  		ld		e,a
    3692   00:5839  CD 8D 5C            		call	get_bloque_en_X_Y
    3693   00:583C  FE 65               		cp		101
    3694   00:583E  28 0C               		jr.		z,cambio_estado_a_subiendo_para_la_caida
    3695   00:5840                      		
    3696   00:5840  CD 9A 6B            		call	siete_diecisiete
    3697   00:5843  CD 8D 5C            		call	get_bloque_en_X_Y
    3698   00:5846                      		
    3699   00:5846  FE 1F               		cp		31					;controla el bloque de ladrillos
    3700   00:5848  30 08               		jr.		nc,segunda_comprovacion_caida
    3701   00:584A                      		
    3702   00:584A  18 19               		jr.		final_rutina_sin_caida
    3703   00:584C                      
    3704   00:584C                      cambio_estado_a_subiendo_para_la_caida:
    3705   00:584C                      
    3706   00:584C  3E 04               		ld		a,4
    3707   00:584E  32 19 C0            		ld		(estado_prota),a
    3708   00:5851  C9                  		ret		
    3709   00:5852                      		
    3710   00:5852                      segunda_comprovacion_caida:
    3711   00:5852                      			
    3712   00:5852  3A 11 C0            		ld		a,[px]
    3713   00:5855  C6 0B               		add		11
    3714   00:5857  57                  		ld		d,a
    3715   00:5858  3A 12 C0            		ld		a,[py]
    3716   00:585B  C6 11               		add		17
    3717   00:585D  5F                  		ld		e,a
    3718   00:585E  CD 8D 5C            		call	get_bloque_en_X_Y
    3719   00:5861  FE 1F               		cp		31
    3720   00:5863  30 06               		jr.		nc,caigo
    3721   00:5865                      
    3722   00:5865                      final_rutina_sin_caida:
    3723   00:5865                      		
    3724   00:5865  3E 00               		ld		a,0
    3725   00:5867  32 19 C0            		ld		(estado_prota),a
    3726   00:586A                      			
    3727   00:586A  C9                  		ret
    3728   00:586B                      
    3729   00:586B                      caigo:
    3730   00:586B                      
    3731   00:586B  3E 03               		ld		a,3
    3732   00:586D  32 19 C0            		ld		(estado_prota),a
    3733   00:5870                      		
    3734   00:5870  3A 12 C0            		ld		a,(py)
    3735   00:5873  C6 02               		add		a,2
    3736   00:5875  32 12 C0            		ld		(py),a
    3737   00:5878                      		
    3738   00:5878  3A 11 C0            		ld		a,[px]						;observa si hay que rectificar la caida
    3739   00:587B  C6 0F               		add		15
    3740   00:587D  57                  		ld		d,a
    3741   00:587E  3A 12 C0            		ld		a,[py]
    3742   00:5881  C6 0F               		add		15
    3743   00:5883  5F                  		ld		e,a
    3744   00:5884  CD 8D 5C            		call	get_bloque_en_X_Y
    3745   00:5887  FE 1F               		cp		31
    3746   00:5889  38 12               		jr.		c,rectifico_caida_a_izquierda
    3747   00:588B                      		
    3748   00:588B  3A 11 C0            		ld		a,[px]
    3749   00:588E  57                  		ld		d,a
    3750   00:588F  3A 12 C0            		ld		a,[py]
    3751   00:5892  C6 0F               		add		15
    3752   00:5894  5F                  		ld		e,a
    3753   00:5895  CD 8D 5C            		call	get_bloque_en_X_Y
    3754   00:5898  FE 1F               		cp		31
    3755   00:589A  38 09               		jr.		c,rectifico_caida_a_derecha
    3756   00:589C                      		
    3757   00:589C  C9                  		ret
    3758   00:589D                      
    3759   00:589D                      rectifico_caida_a_izquierda:
    3760   00:589D                      
    3761   00:589D  3A 11 C0            		ld		a,(px)
    3762   00:58A0  3D                  		dec		a
    3763   00:58A1  32 11 C0            		ld		(px),a
    3764   00:58A4  C9                  		ret
    3765   00:58A5                      
    3766   00:58A5                      rectifico_caida_a_derecha:
    3767   00:58A5                      
    3768   00:58A5  3A 11 C0            		ld		a,(px)
    3769   00:58A8  3C                  		inc		a
    3770   00:58A9  32 11 C0            		ld		(px),a
    3771   00:58AC  C9                  		ret
    3772   00:58AD                      				
    3773   00:58AD                      mueve_prota:
    3774   00:58AD                      
    3775   00:58AD  3A 19 C0            		ld		a,(estado_prota)										;si esta en callendo no se mueve
    3776   00:58B0  FE 03               		cp		3
    3777   00:58B2  C8                  		ret		z
    3778   00:58B3  3A 37 C3            		ld		a,(estado_de_salto)										;si esta saltando no se mueve
    3779   00:58B6  FE 00               		cp		0
    3780   00:58B8  C0                  		ret		nz
    3781   00:58B9  3A 73 C3            		ld		a,(momento_lanzamiento) 								;si está lanzando no se mueve
    3782   00:58BC  FE 01               		cp		1
    3783   00:58BE  C8                  		ret		z
    3784   00:58BF  FE 02               		cp		2
    3785   00:58C1  C8                  		ret		z
    3786   00:58C2  3A 13 C0            		ld		a,(puede_cambiar_de_direccion)							;si está en una puerta no puede moverse por su cuenta
    3787   00:58C5  FE 00               		cp		0
    3788   00:58C7  C8                  		ret		z
    3789   00:58C8                      		
    3790   00:58C8  3A 0E C0            		ld		a,(stick_a_usar)
    3791   00:58CB  CD D5 00            		call	ONSTICK
    3792   00:58CE                      		
    3793   00:58CE  FE 00               		cp		0
    3794   00:58D0  CA CD 5C            		jr.		z,pone_estado_prota_a_0
    3795   00:58D3  FE 01               		cp		1
    3796   00:58D5  28 10               		jr.		z,sube_escaleras
    3797   00:58D7  FE 05               		cp		5
    3798   00:58D9  CA A1 59            		jr.		z,baja_escaleras	
    3799   00:58DC  FE 03               		cp		3
    3800   00:58DE  CA 6D 5B            		jr.		z,mueve_derecha_prota
    3801   00:58E1  FE 07               		cp		7
    3802   00:58E3  CA 55 5A            		jr.		z,mueve_izquierda_prota
    3803   00:58E6                      				
    3804   00:58E6  C9                  		ret
    3805   00:58E7                      		
    3806   00:58E7                      sube_escaleras:
    3807   00:58E7                      
    3808   00:58E7  F5                  		push	af
    3809   00:58E8                      		
    3810   00:58E8                      		
    3811   00:58E8  3A 11 C0            		ld		a,[px]
    3812   00:58EB  C6 06               		add		6
    3813   00:58ED  57                  		ld		d,a
    3814   00:58EE  3A 12 C0            		ld		a,[py]
    3815   00:58F1  C6 01               		add		1
    3816   00:58F3  5F                  		ld		e,a
    3817   00:58F4  CD 8D 5C            		call	get_bloque_en_X_Y
    3818   00:58F7  FE 29               		cp		41
    3819   00:58F9  28 38               		jr.		z,sube_escaleras_afirmativo
    3820   00:58FB  FE 2A               		cp		42
    3821   00:58FD  28 34               		jr.		z,sube_escaleras_afirmativo
    3822   00:58FF  FE 49               		cp		73
    3823   00:5901  28 30               		jr.		z,sube_escaleras_afirmativo
    3824   00:5903  FE 4A               		cp		74
    3825   00:5905  28 2C               		jr.		z,sube_escaleras_afirmativo
    3826   00:5907  FE 67               		cp		103
    3827   00:5909  28 28               		jr.		z,sube_escaleras_afirmativo
    3828   00:590B  FE 69               		cp		105
    3829   00:590D  28 24               		jr.		z,sube_escaleras_afirmativo
    3830   00:590F  FE 6A               		cp		106
    3831   00:5911  28 20               		jr.		z,sube_escaleras_afirmativo
    3832   00:5913                      		
    3833   00:5913  CD 5D 6B            		call	seis_diez
    3834   00:5916  CD 8D 5C            		call	get_bloque_en_X_Y
    3835   00:5919  FE 65               		cp		101
    3836   00:591B  28 16               		jr.		z,sube_escaleras_afirmativo
    3837   00:591D                      		
    3838   00:591D                      		
    3839   00:591D  3A 11 C0            		ld		a,[px]
    3840   00:5920  C6 0A               		add		10
    3841   00:5922  57                  		ld		d,a
    3842   00:5923  3A 12 C0            		ld		a,[py]
    3843   00:5926  C6 01               		add		1
    3844   00:5928  5F                  		ld		e,a
    3845   00:5929  CD 8D 5C            		call	get_bloque_en_X_Y
    3846   00:592C  FE 65               		cp		101
    3847   00:592E  28 03               		jr.		z,sube_escaleras_afirmativo
    3848   00:5930                      		
    3849   00:5930  C3 87 5C            		jr.		set_parado
    3850   00:5933                      		
    3851   00:5933                      sube_escaleras_afirmativo:
    3852   00:5933                      
    3853   00:5933  CD 91 6B            		call	cero_cero
    3854   00:5936  CD 8D 5C            		call	get_bloque_en_X_Y
    3855   00:5939  FE 29               		cp		41
    3856   00:593B  28 1A               		jr.		z,a_mover_a_la_izquierda
    3857   00:593D  FE 2A               		cp		42
    3858   00:593F  28 16               		jr.		z,a_mover_a_la_izquierda
    3859   00:5941  FE 49               		cp		73
    3860   00:5943  28 12               		jr.		z,a_mover_a_la_izquierda
    3861   00:5945  FE 4A               		cp		74
    3862   00:5947  28 0E               		jr.		z,a_mover_a_la_izquierda
    3863   00:5949  FE 67               		cp		103
    3864   00:594B  28 0A               		jr.		z,a_mover_a_la_izquierda
    3865   00:594D  FE 65               		cp		101
    3866   00:594F  28 06               		jr.		z,a_mover_a_la_izquierda
    3867   00:5951  FE 69               		cp		105
    3868   00:5953  28 02               		jr.		z,a_mover_a_la_izquierda
    3869   00:5955                      		
    3870   00:5955  18 09               		jr.		comprueba_derecha
    3871   00:5957                      
    3872   00:5957                      a_mover_a_la_izquierda:
    3873   00:5957                      		
    3874   00:5957  3A 11 C0            		ld		a,[px]
    3875   00:595A  3D                  		dec		a
    3876   00:595B  32 11 C0            		ld		[px],a
    3877   00:595E  18 32               		jr.		a_subir
    3878   00:5960                      		
    3879   00:5960                      comprueba_derecha:
    3880   00:5960                      
    3881   00:5960  3A 11 C0            		ld		a,[px]
    3882   00:5963  C6 10               		add		16
    3883   00:5965  57                  		ld		d,a
    3884   00:5966  3A 12 C0            		ld		a,[py]
    3885   00:5969  5F                  		ld		e,a
    3886   00:596A  CD 8D 5C            		call	get_bloque_en_X_Y
    3887   00:596D  FE 29               		cp		41
    3888   00:596F  28 1A               		jr.		z,a_mover_a_la_derecha
    3889   00:5971  FE 2A               		cp		42
    3890   00:5973  28 16               		jr.		z,a_mover_a_la_derecha
    3891   00:5975  FE 49               		cp		73
    3892   00:5977  28 12               		jr.		z,a_mover_a_la_derecha
    3893   00:5979  FE 4A               		cp		74
    3894   00:597B  28 0E               		jr.		z,a_mover_a_la_derecha
    3895   00:597D  FE 65               		cp		101
    3896   00:597F  28 0A               		jr.		z,a_mover_a_la_derecha
    3897   00:5981  FE 67               		cp		103
    3898   00:5983  28 06               		jr.		z,a_mover_a_la_derecha
    3899   00:5985  FE 69               		cp		105
    3900   00:5987  28 02               		jr.		z,a_mover_a_la_derecha
    3901   00:5989  18 07               		jr.		a_subir
    3902   00:598B                      
    3903   00:598B                      a_mover_a_la_derecha:
    3904   00:598B                      		
    3905   00:598B  3A 11 C0            		ld		a,[px]
    3906   00:598E  3C                  		inc		a
    3907   00:598F  32 11 C0            		ld		[px],a
    3908   00:5992                      				
    3909   00:5992                      a_subir:
    3910   00:5992                      
    3911   00:5992  3E 04               		ld		a,4					;le da el valor 4 a la variable estado prota
    3912   00:5994  32 19 C0            		ld		(estado_prota),a
    3913   00:5997                      		
    3914   00:5997  3A 12 C0            		ld		a,(py)
    3915   00:599A  3D                  		dec		a
    3916   00:599B  32 12 C0            		ld		(py),a
    3917   00:599E  C3 97 5A            		jr.		actualiza_el_paso_subiendo
    3918   00:59A1                      
    3919   00:59A1                      baja_escaleras:
    3920   00:59A1                      
    3921   00:59A1  F5                  		push	af
    3922   00:59A2                      		
    3923   00:59A2                      		
    3924   00:59A2  3A 11 C0            		ld		a,[px]
    3925   00:59A5  C6 06               		add		6
    3926   00:59A7  57                  		ld		d,a
    3927   00:59A8  3A 12 C0            		ld		a,[py]
    3928   00:59AB  C6 10               		add		16
    3929   00:59AD  5F                  		ld		e,a
    3930   00:59AE  CD 8D 5C            		call	get_bloque_en_X_Y
    3931   00:59B1  FE 29               		cp		41
    3932   00:59B3  28 36               		jr.		z,baja_escaleras_afirmativo
    3933   00:59B5  FE 2A               		cp		42
    3934   00:59B7  28 32               		jr.		z,baja_escaleras_afirmativo
    3935   00:59B9  FE 2B               		cp		43
    3936   00:59BB  28 2E               		jr.		z,baja_escaleras_afirmativo
    3937   00:59BD  FE 2C               		cp		44
    3938   00:59BF  28 2A               		jr.		z,baja_escaleras_afirmativo
    3939   00:59C1  FE 49               		cp		73
    3940   00:59C3  28 26               		jr.		z,baja_escaleras_afirmativo
    3941   00:59C5  FE 4A               		cp		74
    3942   00:59C7  28 22               		jr.		z,baja_escaleras_afirmativo
    3943   00:59C9  FE 67               		cp		103
    3944   00:59CB  28 1E               		jr.		z,baja_escaleras_afirmativo
    3945   00:59CD  FE 6A               		cp		106
    3946   00:59CF  28 1A               		jr.		z,baja_escaleras_afirmativo
    3947   00:59D1  FE 69               		cp		105
    3948   00:59D3  28 16               		jr.		z,baja_escaleras_afirmativo
    3949   00:59D5  3A 11 C0            		ld		a,[px]
    3950   00:59D8  C6 0A               		add		10
    3951   00:59DA  57                  		ld		d,a
    3952   00:59DB  3A 12 C0            		ld		a,[py]
    3953   00:59DE  C6 10               		add		16
    3954   00:59E0  5F                  		ld		e,a
    3955   00:59E1  CD 8D 5C            		call	get_bloque_en_X_Y
    3956   00:59E4  FE 65               		cp		101
    3957   00:59E6  28 03               		jr.		z,baja_escaleras_afirmativo
    3958   00:59E8                      		
    3959   00:59E8  C3 87 5C            		jr.		set_parado
    3960   00:59EB                      		
    3961   00:59EB                      baja_escaleras_afirmativo:
    3962   00:59EB                      
    3963   00:59EB  CD A7 6B            		call	menos_uno_dieciseis
    3964   00:59EE  CD 8D 5C            		call	get_bloque_en_X_Y
    3965   00:59F1  FE 29               		cp		41
    3966   00:59F3  28 1A               		jr.		z,a_mover_a_la_izquierda_bajando
    3967   00:59F5  FE 2A               		cp		42
    3968   00:59F7  28 16               		jr.		z,a_mover_a_la_izquierda_bajando
    3969   00:59F9  FE 49               		cp		73
    3970   00:59FB  28 12               		jr.		z,a_mover_a_la_izquierda_bajando
    3971   00:59FD  FE 4A               		cp		74
    3972   00:59FF  28 0E               		jr.		z,a_mover_a_la_izquierda_bajando
    3973   00:5A01  FE 67               		cp		103
    3974   00:5A03  28 0A               		jr.		z,a_mover_a_la_izquierda_bajando
    3975   00:5A05  FE 6A               		cp		106
    3976   00:5A07  28 06               		jr.		z,a_mover_a_la_izquierda_bajando
    3977   00:5A09  FE 69               		cp		105
    3978   00:5A0B  28 02               		jr.		z,a_mover_a_la_izquierda_bajando
    3979   00:5A0D                      		
    3980   00:5A0D  18 09               		jr.		comprueba_derecha_bajando
    3981   00:5A0F                      
    3982   00:5A0F                      a_mover_a_la_izquierda_bajando:
    3983   00:5A0F                      		
    3984   00:5A0F  3A 11 C0            		ld		a,[px]
    3985   00:5A12  3D                  		dec		a
    3986   00:5A13  32 11 C0            		ld		[px],a
    3987   00:5A16  18 2F               		jr.		a_bajar
    3988   00:5A18                      		
    3989   00:5A18                      comprueba_derecha_bajando:
    3990   00:5A18                      
    3991   00:5A18  CD B3 6B            		call	dieciseis_dieciseis
    3992   00:5A1B  CD 8D 5C            		call	get_bloque_en_X_Y
    3993   00:5A1E  FE 29               		cp		41
    3994   00:5A20  28 1E               		jr.		z,a_mover_a_la_derecha_bajando
    3995   00:5A22  FE 2A               		cp		42
    3996   00:5A24  28 1A               		jr.		z,a_mover_a_la_derecha_bajando
    3997   00:5A26  FE 49               		cp		73
    3998   00:5A28  28 16               		jr.		z,a_mover_a_la_derecha_bajando
    3999   00:5A2A  FE 4A               		cp		74
    4000   00:5A2C  28 12               		jr.		z,a_mover_a_la_derecha_bajando
    4001   00:5A2E  FE 65               		cp		101
    4002   00:5A30  28 0E               		jr.		z,a_mover_a_la_derecha_bajando
    4003   00:5A32  FE 67               		cp		103
    4004   00:5A34  28 0A               		jr.		z,a_mover_a_la_derecha_bajando
    4005   00:5A36  FE 6A               		cp		106
    4006   00:5A38  28 06               		jr.		z,a_mover_a_la_derecha_bajando
    4007   00:5A3A  FE 69               		cp		105
    4008   00:5A3C  28 02               		jr.		z,a_mover_a_la_derecha_bajando
    4009   00:5A3E                      		
    4010   00:5A3E  18 07               		jr.		a_bajar
    4011   00:5A40                      
    4012   00:5A40                      a_mover_a_la_derecha_bajando:
    4013   00:5A40                      		
    4014   00:5A40  3A 11 C0            		ld		a,[px]
    4015   00:5A43  3C                  		inc		a
    4016   00:5A44  32 11 C0            		ld		[px],a
    4017   00:5A47                      				
    4018   00:5A47                      a_bajar:
    4019   00:5A47                      
    4020   00:5A47  3E 04               		ld		a,4														;le da el valor 4 a la variable estado prota
    4021   00:5A49  32 19 C0            		ld		(estado_prota),a
    4022   00:5A4C                      		
    4023   00:5A4C  3A 12 C0            		ld		a,(py)
    4024   00:5A4F  3C                  		inc		a
    4025   00:5A50  32 12 C0            		ld		(py),a
    4026   00:5A53  18 42               		jr.		actualiza_el_paso_subiendo
    4027   00:5A55                      				
    4028   00:5A55                      mueve_izquierda_prota:
    4029   00:5A55                      
    4030   00:5A55  F5                  		push	af
    4031   00:5A56                      		
    4032   00:5A56                      		;colision lateral con solido
    4033   00:5A56                      				
    4034   00:5A56  3A 11 C0            		ld		a,[px]
    4035   00:5A59  C6 05               		add		5
    4036   00:5A5B  57                  		ld		d,a
    4037   00:5A5C  3A 12 C0            		ld		a,[py]
    4038   00:5A5F  C6 0F               		add		15
    4039   00:5A61  5F                  		ld		e,a
    4040   00:5A62  CD 8D 5C            		call	get_bloque_en_X_Y
    4041   00:5A65  FE 20               		cp		32														;hasta el 31 son solidos
    4042   00:5A67  DA 87 5C            		jr.		c,set_parado											;si es inferior, no hay acarreo 
    4043   00:5A6A  FE 71               		cp		113														;se para ante las puertas de pinchos
    4044   00:5A6C  CA 87 5C            		jr.		z,set_parado
    4045   00:5A6F  FE 73               		cp		115
    4046   00:5A71  CA 87 5C            		jr.		z,set_parado
    4047   00:5A74                      		
    4048   00:5A74  CD 35 6C            		call	tres_quince
    4049   00:5A77  CD 8D 5C            		call	get_bloque_en_X_Y
    4050   00:5A7A  FE 72               		cp		114														;gira las puertas
    4051   00:5A7C  28 65               		jr.		z,gira_puerta_izquierda_amarilla
    4052   00:5A7E  FE 74               		cp		116
    4053   00:5A80  CA 3F 5B            		jr.		z,gira_puerta_izquierda_azul
    4054   00:5A83                      		
    4055   00:5A83  3E 01               		ld		a,1														;le da el valor 1 a la variable de estado prota
    4056   00:5A85  32 19 C0            		ld		(estado_prota),a
    4057   00:5A88                      				
    4058   00:5A88  3A 11 C0            		ld		a,(px)
    4059   00:5A8B  3D                  		dec		a
    4060   00:5A8C  32 11 C0            		ld		(px),a
    4061   00:5A8F  3E 01               		ld		a,1
    4062   00:5A91  32 1D C0            		ld		(dir_prota),a
    4063   00:5A94  C3 AD 5B            		jr.		actualiza_el_paso
    4064   00:5A97                      
    4065   00:5A97                      actualiza_el_paso_subiendo:
    4066   00:5A97                      
    4067   00:5A97  3A 1F C0            		ld		a,(retard_anim)
    4068   00:5A9A  3C                  		inc		a
    4069   00:5A9B  FE 08               		cp		8
    4070   00:5A9D  28 06               		jr		z,reset_retardo_y_cambia_paso_subiendo
    4071   00:5A9F  32 1F C0            		ld		(retard_anim),a
    4072   00:5AA2  C3 81 5C            		jr.		end
    4073   00:5AA5                      
    4074   00:5AA5                      reset_retardo_y_cambia_paso_subiendo:
    4075   00:5AA5                      
    4076   00:5AA5  AF                  		xor		a
    4077   00:5AA6  32 1F C0            		ld		(retard_anim),a
    4078   00:5AA9  3A 1E C0            		ld		a,(paso)
    4079   00:5AAC  2F                  		cpl								;le da la vuelta a todos los bits
    4080   00:5AAD  E6 03               		and		00000011b				;pone 1 en los dos primero, con lo que lo convierte en un 3 (01=1 10=2 11=3)
    4081   00:5AAF  32 1E C0            		ld		(paso),a
    4082   00:5AB2  C3 81 5C            		jr.		end
    4083   00:5AB5                      		
    4084   00:5AB5                      gira_puerta_derecha_amarilla:
    4085   00:5AB5                      		
    4086   00:5AB5  AF                  		xor		a
    4087   00:5AB6  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    4088   00:5AB9                      		
    4089   00:5AB9  CD DA 6B            		call	catorce_dos
    4090   00:5ABC  CD 8D 5C            		call	get_bloque_en_X_Y
    4091   00:5ABF  3E 75               		ld		a,117
    4092   00:5AC1  77                  		ld		[hl],a
    4093   00:5AC2                      								
    4094   00:5AC2  CD DA 6B            		call	catorce_dos
    4095   00:5AC5  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4096   00:5AC8                      		
    4097   00:5AC8  3E 75               		ld		a,117
    4098   00:5ACA  CD B1 6C            		call	pinta_en_pantalla
    4099   00:5ACD                      		
    4100   00:5ACD  CD CD 6B            		call	catorce_diez
    4101   00:5AD0  CD 8D 5C            		call	get_bloque_en_X_Y
    4102   00:5AD3  3E 75               		ld		a,117
    4103   00:5AD5  77                  		ld		[hl],a
    4104   00:5AD6                      								
    4105   00:5AD6  CD CD 6B            		call	catorce_diez
    4106   00:5AD9  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4107   00:5ADC                      		
    4108   00:5ADC  3E 75               		ld		a,117
    4109   00:5ADE  CD B1 6C            		call	pinta_en_pantalla
    4110   00:5AE1                      		
    4111   00:5AE1                      		
    4112   00:5AE1  F1                  		pop		af
    4113   00:5AE2                      		
    4114   00:5AE2  C9                  		ret
    4115   00:5AE3                      		
    4116   00:5AE3                      gira_puerta_izquierda_amarilla:
    4117   00:5AE3                      
    4118   00:5AE3  AF                  		xor		a
    4119   00:5AE4  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    4120   00:5AE7                      		
    4121   00:5AE7  CD 42 6C            		call	tres_dos
    4122   00:5AEA  CD 8D 5C            		call	get_bloque_en_X_Y
    4123   00:5AED                      		
    4124   00:5AED  3E 75               		ld		a,117
    4125   00:5AEF  77                  		ld		[hl],a
    4126   00:5AF0                      								
    4127   00:5AF0  CD 42 6C            		call	tres_dos
    4128   00:5AF3  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4129   00:5AF6                      		
    4130   00:5AF6  3E 75               		ld		a,117
    4131   00:5AF8  CD B1 6C            		call	pinta_en_pantalla
    4132   00:5AFB                      		
    4133   00:5AFB  CD 35 6C            		call	tres_quince
    4134   00:5AFE  CD 8D 5C            		call	get_bloque_en_X_Y
    4135   00:5B01                      		
    4136   00:5B01  3E 75               		ld		a,117
    4137   00:5B03  77                  		ld		[hl],a
    4138   00:5B04                      								
    4139   00:5B04  CD 35 6C            		call	tres_quince
    4140   00:5B07  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4141   00:5B0A                      		
    4142   00:5B0A  3E 75               		ld		a,117
    4143   00:5B0C  CD B1 6C            		call	pinta_en_pantalla
    4144   00:5B0F                      		
    4145   00:5B0F  F1                  		pop		af
    4146   00:5B10                      		
    4147   00:5B10  C9                  		ret
    4148   00:5B11                      		
    4149   00:5B11                      gira_puerta_derecha_azul:
    4150   00:5B11                      
    4151   00:5B11  AF                  		xor		a
    4152   00:5B12  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    4153   00:5B15                      		
    4154   00:5B15  CD DA 6B            		call	catorce_dos
    4155   00:5B18  CD 8D 5C            		call	get_bloque_en_X_Y
    4156   00:5B1B                      		
    4157   00:5B1B  3E 76               		ld		a,118
    4158   00:5B1D  77                  		ld		[hl],a
    4159   00:5B1E                      								
    4160   00:5B1E  CD DA 6B            		call	catorce_dos
    4161   00:5B21  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4162   00:5B24                      		
    4163   00:5B24  3E 76               		ld		a,118
    4164   00:5B26  CD B1 6C            		call	pinta_en_pantalla
    4165   00:5B29                      		
    4166   00:5B29  CD CD 6B            		call	catorce_diez
    4167   00:5B2C  CD 8D 5C            		call	get_bloque_en_X_Y
    4168   00:5B2F                      				
    4169   00:5B2F  3E 76               		ld		a,118
    4170   00:5B31  77                  		ld		[hl],a
    4171   00:5B32                      								
    4172   00:5B32  CD CD 6B            		call	catorce_diez
    4173   00:5B35  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4174   00:5B38                      		
    4175   00:5B38  3E 76               		ld		a,118
    4176   00:5B3A  CD B1 6C            		call	pinta_en_pantalla
    4177   00:5B3D                      		
    4178   00:5B3D                      		
    4179   00:5B3D  F1                  		pop		af
    4180   00:5B3E                      		
    4181   00:5B3E  C9                  		ret
    4182   00:5B3F                      		
    4183   00:5B3F                      gira_puerta_izquierda_azul:	
    4184   00:5B3F                      
    4185   00:5B3F  AF                  		xor		a
    4186   00:5B40  32 13 C0            		ld		(puede_cambiar_de_direccion),a
    4187   00:5B43                      		
    4188   00:5B43  CD 42 6C            		call	tres_dos
    4189   00:5B46  CD 8D 5C            		call	get_bloque_en_X_Y
    4190   00:5B49                      		
    4191   00:5B49  3E 76               		ld		a,118
    4192   00:5B4B  77                  		ld		[hl],a
    4193   00:5B4C                      								
    4194   00:5B4C  CD 42 6C            		call	tres_dos
    4195   00:5B4F  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4196   00:5B52                      		
    4197   00:5B52  3E 76               		ld		a,118
    4198   00:5B54  CD B1 6C            		call	pinta_en_pantalla
    4199   00:5B57                      		
    4200   00:5B57  CD 35 6C            		call	tres_quince
    4201   00:5B5A  CD 8D 5C            		call	get_bloque_en_X_Y
    4202   00:5B5D                      		
    4203   00:5B5D  3E 76               		ld		a,118
    4204   00:5B5F  77                  		ld		[hl],a
    4205   00:5B60                      								
    4206   00:5B60  CD 35 6C            		call	tres_quince
    4207   00:5B63  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4208   00:5B66                      		
    4209   00:5B66  3E 76               		ld		a,118
    4210   00:5B68  CD B1 6C            		call	pinta_en_pantalla
    4211   00:5B6B                      			
    4212   00:5B6B  F1                  		pop		af
    4213   00:5B6C                      		
    4214   00:5B6C  C9                  		ret
    4215   00:5B6D                      		
    4216   00:5B6D                      mueve_derecha_prota:
    4217   00:5B6D                      
    4218   00:5B6D  F5                  		push	af
    4219   00:5B6E                      		
    4220   00:5B6E                      		;colision lateral con solido
    4221   00:5B6E                      						
    4222   00:5B6E  3A 11 C0            		ld		a,[px]
    4223   00:5B71  C6 0C               		add		12
    4224   00:5B73  57                  		ld		d,a
    4225   00:5B74  3A 12 C0            		ld		a,[py]
    4226   00:5B77  C6 0F               		add		15
    4227   00:5B79  5F                  		ld		e,a
    4228   00:5B7A  CD 8D 5C            		call	get_bloque_en_X_Y
    4229   00:5B7D  FE 20               		cp		32														;hasta el 31 son solidos
    4230   00:5B7F  DA 87 5C            		jr.		c,set_parado											;si es inferior, no hay acarreo 
    4231   00:5B82  FE 72               		cp		114														;se para ante las puertas de pinchos
    4232   00:5B84  CA 87 5C            		jr.		z,set_parado
    4233   00:5B87  FE 74               		cp		116
    4234   00:5B89  CA 87 5C            		jr.		z,set_parado
    4235   00:5B8C                      				
    4236   00:5B8C  CD CD 6B            		call	catorce_diez
    4237   00:5B8F  CD 8D 5C            		call	get_bloque_en_X_Y
    4238   00:5B92  FE 71               		cp		113														;gira las puertas
    4239   00:5B94  CA B5 5A            		jr.		z,gira_puerta_derecha_amarilla
    4240   00:5B97  FE 73               		cp		115
    4241   00:5B99  CA 11 5B            		jr.		z,gira_puerta_derecha_azul
    4242   00:5B9C                      		
    4243   00:5B9C  3E 01               		ld		a,1														;le da el valor 1 a la variable de estado prota
    4244   00:5B9E  32 19 C0            		ld		(estado_prota),a
    4245   00:5BA1                      				
    4246   00:5BA1  3A 11 C0            		ld		a,(px)
    4247   00:5BA4  3C                  		inc		a
    4248   00:5BA5  32 11 C0            		ld		(px),a
    4249   00:5BA8  3E 00               		ld		a,0
    4250   00:5BAA  32 1D C0            		ld		(dir_prota),a
    4251   00:5BAD                      
    4252   00:5BAD                      actualiza_el_paso:
    4253   00:5BAD                      
    4254   00:5BAD  3A 1F C0            		ld		a,(retard_anim)
    4255   00:5BB0  3C                  		inc		a
    4256   00:5BB1  FE 08               		cp		8
    4257   00:5BB3  28 06               		jr		z,reset_retardo_y_cambia_paso
    4258   00:5BB5  32 1F C0            		ld		(retard_anim),a
    4259   00:5BB8  C3 81 5C            		jr.		end
    4260   00:5BBB                      
    4261   00:5BBB                      reset_retardo_y_cambia_paso:
    4262   00:5BBB                      
    4263   00:5BBB  AF                  		xor		a
    4264   00:5BBC  32 1F C0            		ld		(retard_anim),a
    4265   00:5BBF  3A 1E C0            		ld		a,(paso)
    4266   00:5BC2  2F                  		cpl																;le da la vuelta a todos los bits
    4267   00:5BC3  E6 03               		and		00000011b												;pone 1 en los dos primero, con lo que lo convierte en un 3 (01=1 10=2 11=3)
    4268   00:5BC5  32 1E C0            		ld		(paso),a
    4269   00:5BC8  C3 81 5C            		jr.		end
    4270   00:5BCB                      		
    4271   00:5BCB                      
    4272   00:5BCB                      
    4273   00:5BCB                      actualiza_atributos_sprite:
    4274   00:5BCB                      		
    4275   00:5BCB  DD 21 20 C0         		ld		ix,atributos_sprite_general
    4276   00:5BCF                      		
    4277   00:5BCF  3A 12 C0            		ld		a,(py)													;valor y**
    4278   00:5BD2  DD 77 00            		ld		(ix),a
    4279   00:5BD5  C6 07               		add		a,7
    4280   00:5BD7  DD 77 04            		ld		(ix+4),a
    4281   00:5BDA  D6 10               		sub		a,16
    4282   00:5BDC  DD 77 08            		ld		(ix+8),a
    4283   00:5BDF                      		
    4284   00:5BDF  3A 11 C0            		ld		a,(px)													;valor x**
    4285   00:5BE2  DD 77 01            		ld		(ix+1),a
    4286   00:5BE5  DD 77 05            		ld		(ix+5),a
    4287   00:5BE8  DD 77 09            		ld		(ix+9),a
    4288   00:5BEB                      			
    4289   00:5BEB  3A 19 C0            		ld		a,(estado_prota)
    4290   00:5BEE  FE 04               		cp		4
    4291   00:5BF0  CA 7D 5C            		jr.		z,esta_subiendo_o_bajando_para_el_patron
    4292   00:5BF3                      		
    4293   00:5BF3  CD 67 6C            		call	ocho_uno
    4294   00:5BF6  CD 8D 5C            		call	get_bloque_en_X_Y
    4295   00:5BF9  FE 29               		cp		41
    4296   00:5BFB  CA 7D 5C            		jr.		z,esta_subiendo_o_bajando_para_el_patron
    4297   00:5BFE                      		
    4298   00:5BFE  FE 03               		cp		3
    4299   00:5C00  28 76               		jr.		z,esta_cayendo_para_el_patron
    4300   00:5C02                      		
    4301   00:5C02  3A 1D C0            		ld		a,(dir_prota)											;valor de la direccion
    4302   00:5C05  FE 00               		cp		0
    4303   00:5C07  20 17               		jr		nz,mirando_izquierda
    4304   00:5C09                      		
    4305   00:5C09  3A 73 C3            		ld		a,(momento_lanzamiento)									;mira si está lanzando
    4306   00:5C0C  FE 01               		cp		1
    4307   00:5C0E  28 08               		jr.		z,lanza_derecha_1
    4308   00:5C10  FE 02               		cp		2
    4309   00:5C12  28 08               		jr.		z,lanza_derecha_2
    4310   00:5C14                      		
    4311   00:5C14  06 00               		ld		b,0*4													;mirando derecha
    4312   00:5C16  18 1F               		jr		mirar_paso
    4313   00:5C18                      
    4314   00:5C18                      lanza_derecha_1:
    4315   00:5C18                      		
    4316   00:5C18  3E 84               		ld		a,33*4													;mirando derecha pose 1 de lanzamiento
    4317   00:5C1A  18 33               		jr.		ultimos_valores
    4318   00:5C1C                      		
    4319   00:5C1C                      lanza_derecha_2:
    4320   00:5C1C                      		
    4321   00:5C1C  3E 90               		ld		a,36*4													;mirando derecha pose 2 de lanzamiento
    4322   00:5C1E  18 2F               		jr.		ultimos_valores
    4323   00:5C20                      		
    4324   00:5C20                      mirando_izquierda:
    4325   00:5C20                      
    4326   00:5C20  3A 73 C3            		ld		a,(momento_lanzamiento)
    4327   00:5C23  FE 01               		cp		1
    4328   00:5C25  28 08               		jr.		z,lanza_izquierda_1
    4329   00:5C27  FE 02               		cp		2
    4330   00:5C29  28 08               		jr.		z,lanza_izquierda_2
    4331   00:5C2B                      		
    4332   00:5C2B  06 18               		ld		b,6*4													;mirando izquierda
    4333   00:5C2D  18 08               		jr.		mirar_paso
    4334   00:5C2F                      		
    4335   00:5C2F                      lanza_izquierda_1:
    4336   00:5C2F                      
    4337   00:5C2F  3E 9C               		ld		a,39*4													;mirando izquierda pose 1 de lanzamiento
    4338   00:5C31  18 1C               		jr.		ultimos_valores
    4339   00:5C33                      		
    4340   00:5C33                      lanza_izquierda_2:
    4341   00:5C33                      
    4342   00:5C33  3E A8               		ld		a,42*4													;mirando izquierda pose 2 de lanzamiento
    4343   00:5C35  18 18               		jr.		ultimos_valores
    4344   00:5C37                      		
    4345   00:5C37                      mirar_paso:
    4346   00:5C37                      		
    4347   00:5C37  3A 37 C3            		ld		a,(estado_de_salto)										;paso abierto si esta saltando
    4348   00:5C3A  FE 00               		cp		0
    4349   00:5C3C  28 09               		jr.		z,todo_va_bien
    4350   00:5C3E                      		
    4351   00:5C3E  3E 03               		ld		a,3
    4352   00:5C40  CB 27 CB 27         [2]		sla		a
    4353   00:5C44  80                  		add		a,b
    4354   00:5C45                      		
    4355   00:5C45  18 08               		jr.		ultimos_valores
    4356   00:5C47                      		
    4357   00:5C47                      todo_va_bien:		
    4358   00:5C47  3A 1E C0            		ld		a,(paso)
    4359   00:5C4A  CB 27 CB 27         [2]		sla		a				;multiplica x2 2 veces
    4360   00:5C4E  80                  		add		a,b				;le damos el patron definitivo
    4361   00:5C4F                      
    4362   00:5C4F                      ultimos_valores:
    4363   00:5C4F                      		
    4364   00:5C4F  DD 21 20 C0         		ld		ix,atributos_sprite_general
    4365   00:5C53                      		
    4366   00:5C53  DD 77 02            		ld		(ix+2),a		;valor patron**
    4367   00:5C56  DD 7E 02            		ld		a,(ix+2)
    4368   00:5C59  C6 04               		add		a,4
    4369   00:5C5B  DD 77 06            		ld		(ix+6),a
    4370   00:5C5E  DD 7E 02            		ld		a,(ix+2)
    4371   00:5C61  C6 08               		add		a,8
    4372   00:5C63  DD 77 0A            		ld		(ix+10),a
    4373   00:5C66                      		
    4374   00:5C66  3A 16 C0            		ld		a,(color_lineas_prota)				;valor color**
    4375   00:5C69  DD 77 03            		ld		(ix+3),a
    4376   00:5C6C  3A 15 C0            		ld		a,(color_prota)
    4377   00:5C6F  DD 77 07            		ld		(ix+7),a
    4378   00:5C72  3E 09               		ld		a,9
    4379   00:5C74  DD 77 0B            		ld		(ix+11),a
    4380   00:5C77                      		
    4381   00:5C77  C9                  		ret
    4382   00:5C78                      
    4383   00:5C78                      esta_cayendo_para_el_patron:
    4384   00:5C78                      
    4385   00:5C78  06 48               		ld		b,18*4
    4386   00:5C7A  78                  		ld		a,b
    4387   00:5C7B  18 D2               		jr.		ultimos_valores
    4388   00:5C7D                      		
    4389   00:5C7D                      esta_subiendo_o_bajando_para_el_patron:	
    4390   00:5C7D                      
    4391   00:5C7D  06 30               		ld		b,12*4
    4392   00:5C7F  18 B6               		jr.		mirar_paso
    4393   00:5C81                      		
    4394   00:5C81                      end:
    4395   00:5C81                      
    4396   00:5C81  AF                  		xor		a
    4397   00:5C82  32 1A C0            		ld		[prev_dir_prota],a
    4398   00:5C85                      		
    4399   00:5C85  F1                  		pop		af
    4400   00:5C86  C9                  		ret
    4401   00:5C87                      		
    4402   00:5C87                      set_parado:
    4403   00:5C87                      
    4404   00:5C87  AF                  		xor		a
    4405   00:5C88  32 19 C0            		ld		[estado_prota],a
    4406   00:5C8B  18 F4               		jr.		end
    4407   00:5C8D                      
    4408   00:5C8D                      get_bloque_en_X_Y:
    4409   00:5C8D                      
    4410   00:5C8D                      		;(y/8)*32+(x/8)
    4411   00:5C8D  7B                  		ld		a,e				;a=y
    4412   00:5C8E  CB 3F CB 3F CB 3F   [3]		srl		a				;a=y/8
    4413   00:5C94  26 00               		ld		h,0
    4414   00:5C96  6F                  		ld		l,a				;hl=y/8
    4415   00:5C97  29 29 29 29 29      [5]		add		hl,hl			;*32			a=(y/8)*32
    4416   00:5C9C                      		
    4417   00:5C9C  7A                  		ld		a,d				;a=x
    4418   00:5C9D  CB 3F CB 3F CB 3F   [3]		srl		a				;a=x/8
    4419   00:5CA3  16 00               		ld		d,0
    4420   00:5CA5  5F                  		ld		e,a				;de=x/8
    4421   00:5CA6  19                  		add		hl,de			;hl=(y/8)*32+(x/8)
    4422   00:5CA7                      		
    4423   00:5CA7  11 57 C0            		ld		de,buffer_colisiones
    4424   00:5CAA  19                  		add		hl,de			;hl=buffer_colisiones + (y/8)*32+(x/8)
    4425   00:5CAB  01 20 00            		ld		bc,32
    4426   00:5CAE  ED 42               		sbc		hl,bc		
    4427   00:5CB0  7E                  		ld		a,[hl]
    4428   00:5CB1  C9                  		ret
    4429   00:5CB2                      
    4430   00:5CB2                      get_bloque_en_X_Y_paravram:
    4431   00:5CB2                      
    4432   00:5CB2  7B                  		ld		a,e				;a=y
    4433   00:5CB3  CB 3F CB 3F CB 3F   [3]		srl		a				;a=y/8
    4434   00:5CB9  26 00               		ld		h,0
    4435   00:5CBB  6F                  		ld		l,a				;hl=y/8
    4436   00:5CBC  29 29 29 29 29      [5]		add		hl,hl			;*32			a=(y/8)*32
    4437   00:5CC1                      		
    4438   00:5CC1  7A                  		ld		a,d				;a=x
    4439   00:5CC2  CB 3F CB 3F CB 3F   [3]		srl		a				;a=x/8
    4440   00:5CC8  16 00               		ld		d,0
    4441   00:5CCA  5F                  		ld		e,a				;de=x/8
    4442   00:5CCB  19                  		add		hl,de			;hl=(y/8)*32+(x/8)
    4443   00:5CCC                      		
    4444   00:5CCC  C9                  		ret
    4445   00:5CCD                      		
    4446   00:5CCD                      pone_estado_prota_a_0:
    4447   00:5CCD                      
    4448   00:5CCD  AF                  		xor		a
    4449   00:5CCE  32 19 C0            		ld		(estado_prota),a
    4450   00:5CD1                      		
    4451   00:5CD1                      pose_si_esta_parado:
    4452   00:5CD1  CD 91 6B            		call	cero_cero
    4453   00:5CD4  CD 8D 5C            		call	get_bloque_en_X_Y
    4454   00:5CD7  FE 29               		cp		41
    4455   00:5CD9  28 0B               		jr.		z,esta_en_escalera
    4456   00:5CDB                      		
    4457   00:5CDB  3A 19 C0            		ld		a,(estado_prota)
    4458   00:5CDE  FE 00               		cp		0
    4459   00:5CE0  C0                  		ret		nz
    4460   00:5CE1                      		
    4461   00:5CE1  AF                  		xor		a
    4462   00:5CE2  32 1E C0            		ld		(paso),a
    4463   00:5CE5                      
    4464   00:5CE5  C9                  		ret
    4465   00:5CE6                      esta_en_escalera:
    4466   00:5CE6                      		
    4467   00:5CE6  3E 04               		ld		a,4
    4468   00:5CE8  32 19 C0            		ld		(estado_prota),a
    4469   00:5CEB  C9                  		ret
    4470   00:5CEC                      			
    4471   00:5CEC                      usa_objeto_o_salta:
    4472   00:5CEC                      		
    4473   00:5CEC  3A 71 C3            		ld		a,(cont_no_salta_dos_seguidas)							;evita que se pulse el salto durante el salto
    4474   00:5CEF  FE 00               		cp		0
    4475   00:5CF1  20 47               		jr.		nz,(reduce_el_contador_de_salto)
    4476   00:5CF3                      		
    4477   00:5CF3  3A 13 C0            		ld		a,(puede_cambiar_de_direccion)							;evita que salte si está en una puerta
    4478   00:5CF6  FE 00               		cp		0
    4479   00:5CF8  C8                  		ret		z
    4480   00:5CF9                      		
    4481   00:5CF9  3A 37 C3            		ld		a,(estado_de_salto)										;evita el string si ya está saltando
    4482   00:5CFC  FE 00               		cp		0
    4483   00:5CFE  C0                  		ret		nz
    4484   00:5CFF                      		
    4485   00:5CFF  3A 55 C0            		ld		a,(estado_de_explosion)									;evita el string si hay una explosion
    4486   00:5D02  FE 00               		cp		0
    4487   00:5D04  C0                  		ret		nz
    4488   00:5D05                      		
    4489   00:5D05  3A 73 C3            		ld		a,(momento_lanzamiento)									;evita el string si está lanzando
    4490   00:5D08  FE 01               		cp		1
    4491   00:5D0A  C8                  		ret		z
    4492   00:5D0B  FE 02               		cp		2
    4493   00:5D0D  C8                  		ret		z
    4494   00:5D0E                      		
    4495   00:5D0E                      		
    4496   00:5D0E  3A 19 C0            		ld		a,(estado_prota)										;Evita string si está en escaleras
    4497   00:5D11  FE 04               		cp		4
    4498   00:5D13  C8                  		ret		z
    4499   00:5D14                      		
    4500   00:5D14  CD 6A 6B            		call	dos_diez
    4501   00:5D17  CD 8D 5C            		call	get_bloque_en_X_Y
    4502   00:5D1A  FE 29               		cp		41
    4503   00:5D1C  C8                  		ret		z
    4504   00:5D1D  FE 2A               		cp		42
    4505   00:5D1F  C8                  		ret		z
    4506   00:5D20  FE 29               		cp		41
    4507   00:5D22  C8                  		ret		z
    4508   00:5D23  FE 69               		cp		105
    4509   00:5D25  C8                  		ret		z
    4510   00:5D26  FE 6A               		cp		106
    4511   00:5D28  C8                  		ret		z
    4512   00:5D29  FE 65               		cp		101
    4513   00:5D2B  C8                  		ret		z
    4514   00:5D2C  FE 67               		cp		103
    4515   00:5D2E  C8                  		ret		z
    4516   00:5D2F                      				
    4517   00:5D2F  3A 0E C0            		ld		a,(stick_a_usar)
    4518   00:5D32  CD D8 00            		call	ONSTRIG
    4519   00:5D35  FE FF               		cp		#FF
    4520   00:5D37  28 06               		jr.		z,decide_si_usa_o_salta
    4521   00:5D39                      				
    4522   00:5D39  C9                  		ret
    4523   00:5D3A                      
    4524   00:5D3A                      reduce_el_contador_de_salto:
    4525   00:5D3A                      
    4526   00:5D3A  3D                  		dec		a
    4527   00:5D3B  32 71 C3            		ld		(cont_no_salta_dos_seguidas),a
    4528   00:5D3E  C9                  		ret
    4529   00:5D3F                      		
    4530   00:5D3F                      decide_si_usa_o_salta:
    4531   00:5D3F                      
    4532   00:5D3F  3A 50 C0            		ld		a,(tiene_objeto)
    4533   00:5D42  FE 01               		cp		1
    4534   00:5D44  CA A3 61            		jr.		z,usa_bomba
    4535   00:5D47  FE 02               		cp		2
    4536   00:5D49  CA E0 62            		jr.		z,usa_cuchillo
    4537   00:5D4C                      		
    4538   00:5D4C  3A 11 C0            		ld		a,[px]				;no salta si tiene techo (para evitar volar)
    4539   00:5D4F  57                  		ld		d,a
    4540   00:5D50  3A 12 C0            		ld		a,[py]
    4541   00:5D53  D6 02               		sub		a,2
    4542   00:5D55  5F                  		ld		e,a
    4543   00:5D56  CD 8D 5C            		call	get_bloque_en_X_Y
    4544   00:5D59  FE 1F               		cp		31
    4545   00:5D5B  D8                  		ret		c
    4546   00:5D5C                      		
    4547   00:5D5C  CD 91 6B            		call	cero_cero
    4548   00:5D5F  CD 8D 5C            		call	get_bloque_en_X_Y
    4549   00:5D62  FE 21               		cp		33					;si esta en la salida revisamos si sale
    4550   00:5D64  28 0F               		jr.		z,fase_superada
    4551   00:5D66                      		
    4552   00:5D66  3A 19 C0            		ld		a,(estado_prota)		;si esta callendo, no salta
    4553   00:5D69  FE 03               		cp		3
    4554   00:5D6B  C8                  		ret		z
    4555   00:5D6C                      		
    4556   00:5D6C  3E 04               		ld		a,4						;efecto de saltar
    4557   00:5D6E  CD C4 6C            		call	efecto_sonido
    4558   00:5D71                      		
    4559   00:5D71  C3 FC 66            		jr.		ha_saltado
    4560   00:5D74                      		
    4561   00:5D74  C9                  		ret
    4562   00:5D75                      
    4563   00:5D75                      fase_superada:
    4564   00:5D75                      
    4565   00:5D75  3A 38 C3            		ld		a,(mechero)
    4566   00:5D78  FE 00               		cp		0
    4567   00:5D7A  C8                  		ret		z
    4568   00:5D7B                      		
    4569   00:5D7B  3A 39 C3            		ld		a,(gasolina)
    4570   00:5D7E  FE 00               		cp		0
    4571   00:5D80  C8                  		ret		z
    4572   00:5D81                      		
    4573   00:5D81  3A 15 C0            		ld		a,(color_prota)
    4574   00:5D84  FE 07               		cp		7
    4575   00:5D86  C8                  		ret		z
    4576   00:5D87                      		
    4577   00:5D87  3E 01               		ld		a,1
    4578   00:5D89  32 72 C3            		ld		(pasamos_la_fase),a
    4579   00:5D8C  C9                  		ret
    4580   00:5D8D                      
    4581   00:5D8D                      apaga_los_chorros:
    4582   00:5D8D                      	
    4583   00:5D8D  CD 77 6B            		call 	menos_dos_diez
    4584   00:5D90  CD 8D 5C            		call	get_bloque_en_X_Y
    4585   00:5D93                      		
    4586   00:5D93  FE 59               		cp		89
    4587   00:5D95  28 6F               		jr.		z,quita_a_tu_izquierda
    4588   00:5D97  FE 79               		cp		121
    4589   00:5D99  28 6B               		jr.		z,quita_a_tu_izquierda
    4590   00:5D9B                      		
    4591   00:5D9B  CD C0 6B            		call	menos_dos_dieciocho
    4592   00:5D9E  CD 8D 5C            		call	get_bloque_en_X_Y	
    4593   00:5DA1                      		
    4594   00:5DA1  FE 59               		cp		89
    4595   00:5DA3  CA 92 5E            		jr.		z,quita_a_tu_izquierda_2
    4596   00:5DA6  FE 79               		cp		121
    4597   00:5DA8  CA 92 5E            		jr.		z,quita_a_tu_izquierda_2
    4598   00:5DAB                      			
    4599   00:5DAB  CD CD 6B            		call	catorce_diez
    4600   00:5DAE  CD 8D 5C            		call	get_bloque_en_X_Y
    4601   00:5DB1                      		
    4602   00:5DB1  FE 59               		cp		89
    4603   00:5DB3  28 14               		jr.		z,quita_a_tu_derecha
    4604   00:5DB5  FE 79               		cp		121
    4605   00:5DB7  28 10               		jr.		z,quita_a_tu_derecha
    4606   00:5DB9                      		
    4607   00:5DB9  CD E7 6B            		call	catorce_dieciocho
    4608   00:5DBC  CD 8D 5C            		call	get_bloque_en_X_Y
    4609   00:5DBF                      		
    4610   00:5DBF  FE 59               		cp		89
    4611   00:5DC1  CA 43 5E            		jr.		z,quita_a_tu_derecha_2
    4612   00:5DC4  FE 79               		cp		121
    4613   00:5DC6  28 7B               		jr.		z,quita_a_tu_derecha_2
    4614   00:5DC8                      		
    4615   00:5DC8  C9                  		ret
    4616   00:5DC9                      			
    4617   00:5DC9                      quita_a_tu_derecha:
    4618   00:5DC9                      
    4619   00:5DC9  CD 5D 6B            		call	seis_diez
    4620   00:5DCC  CD 8D 5C            		call	get_bloque_en_X_Y
    4621   00:5DCF  3E 20               		ld		a,32
    4622   00:5DD1  77                  		ld		[hl],a
    4623   00:5DD2                      		
    4624   00:5DD2  CD CD 6B            		call	catorce_diez
    4625   00:5DD5  CD 8D 5C            		call	get_bloque_en_X_Y
    4626   00:5DD8  3E 56               		ld		a,86
    4627   00:5DDA  77                  		ld		[hl],a
    4628   00:5DDB                      		
    4629   00:5DDB  CD 01 6C            		call	veintidos_diez
    4630   00:5DDE  CD 8D 5C            		call	get_bloque_en_X_Y
    4631   00:5DE1  3E 20               		ld		a,32
    4632   00:5DE3  77                  		ld		[hl],a
    4633   00:5DE4                      								
    4634   00:5DE4  CD 5D 6B            		call	seis_diez
    4635   00:5DE7  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4636   00:5DEA                      		
    4637   00:5DEA  3E 20               		ld		a,32
    4638   00:5DEC  CD B1 6C            		call	pinta_en_pantalla
    4639   00:5DEF                      		
    4640   00:5DEF  CD CD 6B            		call	catorce_diez
    4641   00:5DF2  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4642   00:5DF5                      		
    4643   00:5DF5  3E 56               		ld		a,86
    4644   00:5DF7  CD B1 6C            		call	pinta_en_pantalla
    4645   00:5DFA                      		
    4646   00:5DFA  CD 01 6C            		call	veintidos_diez
    4647   00:5DFD  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4648   00:5E00                      		
    4649   00:5E00  3E 20               		ld		a,32
    4650   00:5E02  CD B1 6C            		call	pinta_en_pantalla
    4651   00:5E05                      		
    4652   00:5E05  C9                  		ret
    4653   00:5E06                      
    4654   00:5E06                      quita_a_tu_izquierda:
    4655   00:5E06                      		
    4656   00:5E06  CD 5D 6B            		call	seis_diez
    4657   00:5E09  CD 8D 5C            		call	get_bloque_en_X_Y
    4658   00:5E0C  3E 20               		ld		a,32
    4659   00:5E0E  77                  		ld		[hl],a
    4660   00:5E0F                      		
    4661   00:5E0F  CD 77 6B            		call	menos_dos_diez
    4662   00:5E12  CD 8D 5C            		call	get_bloque_en_X_Y
    4663   00:5E15  3E 56               		ld		a,86
    4664   00:5E17  77                  		ld		[hl],a
    4665   00:5E18                      		
    4666   00:5E18  CD 0E 6C            		call	menos_diez_diez
    4667   00:5E1B  CD 8D 5C            		call	get_bloque_en_X_Y
    4668   00:5E1E  3E 20               		ld		a,32
    4669   00:5E20  77                  		ld		[hl],a
    4670   00:5E21                      								
    4671   00:5E21  CD 5D 6B            		call	seis_diez
    4672   00:5E24  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4673   00:5E27                      		
    4674   00:5E27  3E 20               		ld		a,32
    4675   00:5E29  CD B1 6C            		call	pinta_en_pantalla
    4676   00:5E2C                      		
    4677   00:5E2C  CD 77 6B            		call	menos_dos_diez
    4678   00:5E2F  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4679   00:5E32                      		
    4680   00:5E32  3E 56               		ld		a,86
    4681   00:5E34  CD B1 6C            		call	pinta_en_pantalla
    4682   00:5E37                      		
    4683   00:5E37  CD 0E 6C            		call	menos_diez_diez
    4684   00:5E3A  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4685   00:5E3D                      		
    4686   00:5E3D  3E 20               		ld		a,32
    4687   00:5E3F  CD B1 6C            		call	pinta_en_pantalla
    4688   00:5E42                      		
    4689   00:5E42  C9                  		ret
    4690   00:5E43                      
    4691   00:5E43                      
    4692   00:5E43                      quita_a_tu_derecha_2:
    4693   00:5E43                      
    4694   00:5E43  CD 1B 6C            		call	seis_dieciocho
    4695   00:5E46  CD 8D 5C            		call	get_bloque_en_X_Y
    4696   00:5E49  3E 20               		ld		a,32
    4697   00:5E4B  77                  		ld		[hl],a
    4698   00:5E4C                      		
    4699   00:5E4C  CD E7 6B            		call	catorce_dieciocho
    4700   00:5E4F  CD 8D 5C            		call	get_bloque_en_X_Y
    4701   00:5E52  3E 56               		ld		a,86
    4702   00:5E54  77                  		ld		[hl],a
    4703   00:5E55                      		
    4704   00:5E55  3A 11 C0            		ld		a,[px]					;borra en buffer_colisiones el chorro						
    4705   00:5E58  C6 14               		add		20
    4706   00:5E5A  57                  		ld		d,a
    4707   00:5E5B  3A 12 C0            		ld		a,[py]
    4708   00:5E5E  C6 12               		add		18
    4709   00:5E60  5F                  		ld		e,a
    4710   00:5E61  CD 8D 5C            		call	get_bloque_en_X_Y
    4711   00:5E64  3E 20               		ld		a,32
    4712   00:5E66  77                  		ld		[hl],a
    4713   00:5E67                      								
    4714   00:5E67  CD 1B 6C            		call	seis_dieciocho
    4715   00:5E6A  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4716   00:5E6D                      		
    4717   00:5E6D  3E 20               		ld		a,32
    4718   00:5E6F  CD B1 6C            		call	pinta_en_pantalla
    4719   00:5E72                      		
    4720   00:5E72  CD E7 6B            		call	catorce_dieciocho
    4721   00:5E75  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4722   00:5E78                      		
    4723   00:5E78  3E 56               		ld		a,86
    4724   00:5E7A  CD B1 6C            		call	pinta_en_pantalla
    4725   00:5E7D                      		
    4726   00:5E7D  3A 11 C0            		ld		a,[px]
    4727   00:5E80  C6 16               		add		22
    4728   00:5E82  57                  		ld		d,a
    4729   00:5E83  3A 12 C0            		ld		a,[py]
    4730   00:5E86  C6 12               		add		18
    4731   00:5E88  5F                  		ld		e,a
    4732   00:5E89  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4733   00:5E8C                      		
    4734   00:5E8C  3E 20               		ld		a,32
    4735   00:5E8E  CD B1 6C            		call	pinta_en_pantalla
    4736   00:5E91                      		
    4737   00:5E91  C9                  		ret
    4738   00:5E92                      
    4739   00:5E92                      quita_a_tu_izquierda_2:
    4740   00:5E92                      		
    4741   00:5E92  CD 1B 6C            		call	seis_dieciocho
    4742   00:5E95  CD 8D 5C            		call	get_bloque_en_X_Y
    4743   00:5E98  3E 20               		ld		a,32
    4744   00:5E9A  77                  		ld		[hl],a
    4745   00:5E9B                      		
    4746   00:5E9B  CD C0 6B            		call	menos_dos_dieciocho
    4747   00:5E9E  CD 8D 5C            		call	get_bloque_en_X_Y
    4748   00:5EA1  3E 56               		ld		a,86
    4749   00:5EA3  77                  		ld		[hl],a
    4750   00:5EA4                      		
    4751   00:5EA4  CD 28 6C            		call	menos_diez_dieciocho
    4752   00:5EA7  CD 8D 5C            		call	get_bloque_en_X_Y
    4753   00:5EAA  3E 20               		ld		a,32
    4754   00:5EAC  77                  		ld		[hl],a
    4755   00:5EAD                      								
    4756   00:5EAD  CD 1B 6C            		call	seis_dieciocho
    4757   00:5EB0  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4758   00:5EB3                      		
    4759   00:5EB3  3E 20               		ld		a,32
    4760   00:5EB5  CD B1 6C            		call	pinta_en_pantalla
    4761   00:5EB8                      		
    4762   00:5EB8  CD C0 6B            		call	menos_dos_dieciocho
    4763   00:5EBB  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4764   00:5EBE                      		
    4765   00:5EBE  3E 56               		ld		a,86
    4766   00:5EC0  CD B1 6C            		call	pinta_en_pantalla
    4767   00:5EC3                      		
    4768   00:5EC3  CD 28 6C            		call	menos_diez_dieciocho
    4769   00:5EC6  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4770   00:5EC9                      		
    4771   00:5EC9  3E 20               		ld		a,32
    4772   00:5ECB  CD B1 6C            		call	pinta_en_pantalla
    4773   00:5ECE                      		
    4774   00:5ECE  C9                  		ret
    4775   00:5ECF                      		
    4776   00:5ECF                      coge_algun_objeto:
    4777   00:5ECF                      		
    4778   00:5ECF  CD 84 6B            		call	seis_dos
    4779   00:5ED2  CD 8D 5C            		call	get_bloque_en_X_Y
    4780   00:5ED5                      		
    4781   00:5ED5  FE 5D               		cp		93
    4782   00:5ED7  CA C3 60            		jr.		z,damos_la_luz
    4783   00:5EDA                      		
    4784   00:5EDA  3A 82 C3            		ld		a,(vision_estado)
    4785   00:5EDD  FE 00               		cp		0
    4786   00:5EDF  C8                  		ret		z
    4787   00:5EE0                      		
    4788   00:5EE0  CD 5D 6B            		call	seis_diez
    4789   00:5EE3  CD 8D 5C            		call	get_bloque_en_X_Y
    4790   00:5EE6                      		
    4791   00:5EE6  FE 62               		cp		98
    4792   00:5EE8  CA 86 60            		jr.		z,coge_mechero
    4793   00:5EEB                      		
    4794   00:5EEB  FE 61               		cp		97
    4795   00:5EED  CA E7 60            		jr.		z,coge_gasolina
    4796   00:5EF0                      
    4797   00:5EF0  FE 57               		cp		87
    4798   00:5EF2  CA 5B 60            		jr.		z,cierra_grifo
    4799   00:5EF5                      		
    4800   00:5EF5  FE 6B               		cp		107
    4801   00:5EF7  CA 2A 60            		jr.		z,coge_toalla
    4802   00:5EFA                      						
    4803   00:5EFA  FE 56               		cp		86
    4804   00:5EFC  28 4E               		jr.		z,activa_chorro_1
    4805   00:5EFE                      		
    4806   00:5EFE  FE 79               		cp		121	
    4807   00:5F00  28 4A               		jr.		z,activa_chorro_1
    4808   00:5F02                      		
    4809   00:5F02  FE 59               		cp		89
    4810   00:5F04  CA E7 5F            		jr.		z,activa_chorro_2
    4811   00:5F07                      		
    4812   00:5F07  FE 50               		cp		80
    4813   00:5F09  28 22               		jr.		z,activa_escalera_extra
    4814   00:5F0B                      					
    4815   00:5F0B  CD 1B 6C            		call	seis_dieciocho
    4816   00:5F0E  CD 8D 5C            		call	get_bloque_en_X_Y
    4817   00:5F11                      		
    4818   00:5F11  FE 56               		cp		86
    4819   00:5F13  CA 95 5F            		jr.		z,activa_chorro_3
    4820   00:5F16                      				
    4821   00:5F16  3A 50 C0            		ld		a,(tiene_objeto)
    4822   00:5F19  FE 00               		cp		0
    4823   00:5F1B  C0                  		ret		nz
    4824   00:5F1C                      		
    4825   00:5F1C  CD 5D 6B            		call	seis_diez
    4826   00:5F1F  CD 8D 5C            		call	get_bloque_en_X_Y
    4827   00:5F22                      		
    4828   00:5F22  FE 63               		cp		99
    4829   00:5F24  CA 24 61            		jp.		z,coge_la_bomba
    4830   00:5F27                      		
    4831   00:5F27  FE 60               		cp		96
    4832   00:5F29  CA 64 61            		jp.		z,coge_cuchillo
    4833   00:5F2C                      		
    4834   00:5F2C  C9                  		ret
    4835   00:5F2D                      	
    4836   00:5F2D                      activa_escalera_extra:
    4837   00:5F2D                      
    4838   00:5F2D  3E 01               		ld		a,1
    4839   00:5F2F  32 7A C3            		ld		(escalera_activada),a
    4840   00:5F32                      		
    4841   00:5F32  CD 5D 6B            		call	seis_diez
    4842   00:5F35  CD 8D 5C            		call	get_bloque_en_X_Y
    4843   00:5F38  3E 70               		ld		a,112
    4844   00:5F3A  77                  		ld		[hl],a
    4845   00:5F3B  CD 5D 6B            		call	seis_diez
    4846   00:5F3E  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4847   00:5F41                      		
    4848   00:5F41  3E 70               		ld		a,112
    4849   00:5F43  CD B1 6C            		call	pinta_en_pantalla
    4850   00:5F46                      		
    4851   00:5F46  3E 0A               		ld		a,10						;efecto sonoro de activar
    4852   00:5F48  CD C4 6C            		call	efecto_sonido
    4853   00:5F4B                      		
    4854   00:5F4B  C9                  		ret
    4855   00:5F4C                      		
    4856   00:5F4C                      activa_chorro_1:
    4857   00:5F4C                      
    4858   00:5F4C  3A 80 C3            		ld		a,(grifo_estado)
    4859   00:5F4F  FE 00               		cp		0
    4860   00:5F51  C8                  		ret		z
    4861   00:5F52                      		
    4862   00:5F52  CD 77 6B            		call	menos_dos_diez
    4863   00:5F55  CD 8D 5C            		call	get_bloque_en_X_Y
    4864   00:5F58                      		
    4865   00:5F58  3E 58               		ld		a,88
    4866   00:5F5A  77                  		ld		[hl],a
    4867   00:5F5B                      								
    4868   00:5F5B  CD 77 6B            		call	menos_dos_diez
    4869   00:5F5E  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4870   00:5F61                      		
    4871   00:5F61  3E 58               		ld		a,88
    4872   00:5F63  CD B1 6C            		call	pinta_en_pantalla
    4873   00:5F66                      		
    4874   00:5F66  CD 5D 6B            		call	seis_diez
    4875   00:5F69  CD 8D 5C            		call	get_bloque_en_X_Y
    4876   00:5F6C  3E 59               		ld		a,89
    4877   00:5F6E  77                  		ld		[hl],a
    4878   00:5F6F                      								
    4879   00:5F6F  CD 5D 6B            		call	seis_diez
    4880   00:5F72  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4881   00:5F75                      		
    4882   00:5F75  3E 59               		ld		a,89
    4883   00:5F77  CD B1 6C            		call	pinta_en_pantalla
    4884   00:5F7A                      		
    4885   00:5F7A  CD CD 6B            		call	catorce_diez
    4886   00:5F7D  CD 8D 5C            		call	get_bloque_en_X_Y
    4887   00:5F80  3E 5A               		ld		a,90
    4888   00:5F82  77                  		ld		[hl],a
    4889   00:5F83                      								
    4890   00:5F83  CD CD 6B            		call	catorce_diez
    4891   00:5F86  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4892   00:5F89                      		
    4893   00:5F89  3E 5A               		ld		a,90
    4894   00:5F8B  CD B1 6C            		call	pinta_en_pantalla
    4895   00:5F8E                      		
    4896   00:5F8E  3E 0B               		ld		a,11						;efecto sonoro agua (arreglar)
    4897   00:5F90  CD C4 6C            		call	efecto_sonido
    4898   00:5F93                      
    4899   00:5F93  18 47               		jr.		moja_prota
    4900   00:5F95                      		
    4901   00:5F95                      activa_chorro_3:
    4902   00:5F95                      
    4903   00:5F95  3A 80 C3            		ld		a,(grifo_estado)
    4904   00:5F98  FE 00               		cp		0
    4905   00:5F9A  C8                  		ret		z
    4906   00:5F9B                      		
    4907   00:5F9B  CD C0 6B            		call	menos_dos_dieciocho
    4908   00:5F9E  CD 8D 5C            		call	get_bloque_en_X_Y
    4909   00:5FA1                      		
    4910   00:5FA1  3E 58               		ld		a,88
    4911   00:5FA3  77                  		ld		[hl],a
    4912   00:5FA4                      								
    4913   00:5FA4  CD C0 6B            		call	menos_dos_dieciocho
    4914   00:5FA7  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4915   00:5FAA                      		
    4916   00:5FAA  3E 58               		ld		a,88
    4917   00:5FAC  CD B1 6C            		call	pinta_en_pantalla
    4918   00:5FAF                      		
    4919   00:5FAF  CD 1B 6C            		call	seis_dieciocho
    4920   00:5FB2  CD 8D 5C            		call	get_bloque_en_X_Y
    4921   00:5FB5  3E 59               		ld		a,89
    4922   00:5FB7  77                  		ld		[hl],a
    4923   00:5FB8                      								
    4924   00:5FB8  CD 1B 6C            		call	seis_dieciocho
    4925   00:5FBB  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4926   00:5FBE                      		
    4927   00:5FBE  3E 59               		ld		a,89
    4928   00:5FC0  CD B1 6C            		call	pinta_en_pantalla
    4929   00:5FC3                      		
    4930   00:5FC3  CD E7 6B            		call	catorce_dieciocho
    4931   00:5FC6  CD 8D 5C            		call	get_bloque_en_X_Y
    4932   00:5FC9  3E 5A               		ld		a,90
    4933   00:5FCB  77                  		ld		[hl],a
    4934   00:5FCC                      								
    4935   00:5FCC  CD E7 6B            		call	catorce_dieciocho
    4936   00:5FCF  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4937   00:5FD2                      		
    4938   00:5FD2  3E 5A               		ld		a,90
    4939   00:5FD4  CD B1 6C            		call	pinta_en_pantalla
    4940   00:5FD7                      		
    4941   00:5FD7  3E 0B               		ld		a,11						;efecto sonoro agua (arreglar)
    4942   00:5FD9  CD C4 6C            		call	efecto_sonido
    4943   00:5FDC                      						
    4944   00:5FDC                      moja_prota:
    4945   00:5FDC                      
    4946   00:5FDC  3E 07               		ld		a,7
    4947   00:5FDE  32 15 C0            		ld		(color_prota),a
    4948   00:5FE1  3E 0E               		ld		a,14
    4949   00:5FE3  32 16 C0            		ld		(color_lineas_prota),a
    4950   00:5FE6                      		
    4951   00:5FE6  C9                  		ret
    4952   00:5FE7                      
    4953   00:5FE7                      activa_chorro_2:
    4954   00:5FE7                      
    4955   00:5FE7  3A 80 C3            		ld		a,(grifo_estado)
    4956   00:5FEA  FE 00               		cp		0
    4957   00:5FEC  C8                  		ret		z
    4958   00:5FED                      		
    4959   00:5FED  CD 77 6B            		call	menos_dos_diez
    4960   00:5FF0  CD 8D 5C            		call	get_bloque_en_X_Y
    4961   00:5FF3  3E 78               		ld		a,120
    4962   00:5FF5  77                  		ld		[hl],a
    4963   00:5FF6                      								
    4964   00:5FF6  CD 77 6B            		call	menos_dos_diez
    4965   00:5FF9  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4966   00:5FFC                      		
    4967   00:5FFC  3E 78               		ld		a,120
    4968   00:5FFE  CD B1 6C            		call	pinta_en_pantalla
    4969   00:6001                      		
    4970   00:6001  CD 5D 6B            		call	seis_diez
    4971   00:6004  CD 8D 5C            		call	get_bloque_en_X_Y
    4972   00:6007  3E 79               		ld		a,121
    4973   00:6009  77                  		ld		[hl],a
    4974   00:600A                      								
    4975   00:600A  CD 5D 6B            		call	seis_diez
    4976   00:600D  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4977   00:6010                      		
    4978   00:6010  3E 79               		ld		a,121
    4979   00:6012  CD B1 6C            		call	pinta_en_pantalla
    4980   00:6015                      		
    4981   00:6015  CD CD 6B            		call	catorce_diez
    4982   00:6018  CD 8D 5C            		call	get_bloque_en_X_Y
    4983   00:601B  3E 7A               		ld		a,122
    4984   00:601D  77                  		ld		[hl],a
    4985   00:601E                      								
    4986   00:601E  CD CD 6B            		call	catorce_diez
    4987   00:6021  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    4988   00:6024                      		
    4989   00:6024  3E 7A               		ld		a,122
    4990   00:6026  CD B1 6C            		call	pinta_en_pantalla
    4991   00:6029                      		
    4992   00:6029  C9                  		ret
    4993   00:602A                      				
    4994   00:602A                      coge_toalla:
    4995   00:602A                      
    4996   00:602A  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger toalla
    4997   00:602D  C6 06               		add		a,6
    4998   00:602F  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    4999   00:6032  3E 01               		ld		a,1
    5000   00:6034  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5001   00:6037                      		
    5002   00:6037  CD 5D 6B            		call	seis_diez
    5003   00:603A  CD 8D 5C            		call	get_bloque_en_X_Y
    5004   00:603D  3E 6C               		ld		a,108
    5005   00:603F  77                  		ld		[hl],a
    5006   00:6040                      								
    5007   00:6040  CD 5D 6B            		call	seis_diez
    5008   00:6043  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5009   00:6046                      		
    5010   00:6046  3E 6C               		ld		a,108
    5011   00:6048  CD B1 6C            		call	pinta_en_pantalla
    5012   00:604B                      		
    5013   00:604B  3E 02               		ld		a,2						;efecto sonoro de toalla cogida
    5014   00:604D  CD C4 6C            		call	efecto_sonido
    5015   00:6050                      		
    5016   00:6050  3E 08               		ld		a,8						; da valor a la variable para secar al prota
    5017   00:6052  32 15 C0            		ld		(color_prota),a
    5018   00:6055  3E 01               		ld		a,1
    5019   00:6057  32 16 C0            		ld		(color_lineas_prota),a
    5020   00:605A                      		
    5021   00:605A  C9                  		ret
    5022   00:605B                      
    5023   00:605B                      cierra_grifo:
    5024   00:605B                      
    5025   00:605B  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)								;puntos ganados por coger mechero
    5026   00:605E  C6 0A               		add		a,10
    5027   00:6060  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5028   00:6063  3E 01               		ld		a,1
    5029   00:6065  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5030   00:6068                      		
    5031   00:6068  CD 5D 6B            		call	seis_diez
    5032   00:606B  CD 8D 5C            		call	get_bloque_en_X_Y
    5033   00:606E  3E 77               		ld		a,119
    5034   00:6070  77                  		ld		[hl],a
    5035   00:6071                      								
    5036   00:6071  CD 5D 6B            		call	seis_diez
    5037   00:6074  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5038   00:6077                      		
    5039   00:6077  3E 77               		ld		a,119
    5040   00:6079  CD B1 6C            		call	pinta_en_pantalla
    5041   00:607C                      		
    5042   00:607C  3E 0A               		ld		a,10													;efecto sonoro de cerrar grifo
    5043   00:607E  CD C4 6C            		call	efecto_sonido
    5044   00:6081                      		
    5045   00:6081  AF                  		xor		a														; da valor a la variable para dar por hecho que el grifo está cerrado
    5046   00:6082  32 80 C3            		ld		(grifo_estado),a
    5047   00:6085                      		
    5048   00:6085  C9                  		ret
    5049   00:6086                      		
    5050   00:6086                      coge_mechero:
    5051   00:6086                      		
    5052   00:6086  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)								;puntos ganados por coger mechero
    5053   00:6089  C6 32               		add		a,50
    5054   00:608B  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5055   00:608E  3E 01               		ld		a,1
    5056   00:6090  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5057   00:6093                      		
    5058   00:6093  CD 5D 6B            		call	seis_diez
    5059   00:6096  CD 8D 5C            		call	get_bloque_en_X_Y
    5060   00:6099  3E 20               		ld		a,32
    5061   00:609B  77                  		ld		[hl],a
    5062   00:609C                      								
    5063   00:609C  CD 5D 6B            		call	seis_diez
    5064   00:609F  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5065   00:60A2                      		
    5066   00:60A2  3E 20               		ld		a,32
    5067   00:60A4  CD B1 6C            		call	pinta_en_pantalla
    5068   00:60A7                      		
    5069   00:60A7  3E CB               		ld		a,203
    5070   00:60A9  32 EE EE            		ld		[#eeee],a
    5071   00:60AC  21 EE EE            		ld		hl,#eeee												;pinta el mechero  a color
    5072   00:60AF  11 1C 18            		ld		de,#181c
    5073   00:60B2  01 01 00            		ld		bc,1
    5074   00:60B5  CD 5C 00            		call	GRABAVRAM
    5075   00:60B8                      		
    5076   00:60B8  3E 02               		ld		a,2						;efecto sonoro de coger
    5077   00:60BA  CD C4 6C            		call	efecto_sonido
    5078   00:60BD                      		
    5079   00:60BD  3E 01               		ld		a,1						; da valor a la variable para adeptar que la tienes
    5080   00:60BF  32 38 C3            		ld		(mechero),a
    5081   00:60C2                      		
    5082   00:60C2  C9                  		ret
    5083   00:60C3                      
    5084   00:60C3                      damos_la_luz:
    5085   00:60C3                      		
    5086   00:60C3  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)								;puntos ganados por dar la luz
    5087   00:60C6  C6 4B               		add		a,75
    5088   00:60C8  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5089   00:60CB  3E 01               		ld		a,1
    5090   00:60CD  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5091   00:60D0                      		
    5092   00:60D0  CD 84 6B            		call	seis_dos
    5093   00:60D3  CD 8D 5C            		call	get_bloque_en_X_Y
    5094   00:60D6  3E 7D               		ld		a,125
    5095   00:60D8  77                  		ld		[hl],a
    5096   00:60D9                      								
    5097   00:60D9  CD C4 4C            		call	copiamos_en_pantalla_lo_de_memoria
    5098   00:60DC                      		
    5099   00:60DC  3E 02               		ld		a,2														;efecto sonoro de coger
    5100   00:60DE  CD C4 6C            		call	efecto_sonido
    5101   00:60E1                      		
    5102   00:60E1  3E 01               		ld		a,1
    5103   00:60E3  32 82 C3            		ld		(vision_estado),a										;damos acceso a los objetos que ya se ven
    5104   00:60E6                      				
    5105   00:60E6  C9                  		ret
    5106   00:60E7                      
    5107   00:60E7                      coge_gasolina:
    5108   00:60E7                      		
    5109   00:60E7  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger gasolina
    5110   00:60EA  C6 32               		add		a,50
    5111   00:60EC  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5112   00:60EF  3E 01               		ld		a,1
    5113   00:60F1  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5114   00:60F4                      		
    5115   00:60F4  CD 5D 6B            		call	seis_diez
    5116   00:60F7  CD 8D 5C            		call	get_bloque_en_X_Y
    5117   00:60FA  3E 20               		ld		a,32
    5118   00:60FC  77                  		ld		[hl],a
    5119   00:60FD                      				
    5120   00:60FD  CD 5D 6B            		call	seis_diez
    5121   00:6100  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5122   00:6103                      		
    5123   00:6103  3E 20               		ld		a,32
    5124   00:6105  CD B1 6C            		call	pinta_en_pantalla
    5125   00:6108                      		
    5126   00:6108  3E CA               		ld		a,202
    5127   00:610A  32 EE EE            		ld		[#eeee],a
    5128   00:610D  21 EE EE            		ld		hl,#eeee				;pinta la gasolina  a color
    5129   00:6110  11 1A 18            		ld		de,#181a
    5130   00:6113  01 01 00            		ld		bc,1
    5131   00:6116  CD 5C 00            		call	GRABAVRAM
    5132   00:6119                      		
    5133   00:6119  3E 02               		ld		a,2						;efecto sonoro de coger
    5134   00:611B  CD C4 6C            		call	efecto_sonido
    5135   00:611E                      		
    5136   00:611E  3E 01               		ld		a,1						;da valor a la variable para adeptar que la tienes
    5137   00:6120  32 39 C3            		ld		(gasolina),a			
    5138   00:6123                      		
    5139   00:6123  C9                  		ret
    5140   00:6124                      					
    5141   00:6124                      coge_la_bomba:
    5142   00:6124                      		
    5143   00:6124  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger la bomba
    5144   00:6127  C6 05               		add		a,5
    5145   00:6129  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5146   00:612C  3E 01               		ld		a,1
    5147   00:612E  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5148   00:6131                      		
    5149   00:6131  CD 7C 4D            		call	SPRITES_BOMBA
    5150   00:6134                      		
    5151   00:6134  CD 5D 6B            		call	seis_diez
    5152   00:6137  CD 8D 5C            		call	get_bloque_en_X_Y
    5153   00:613A  3E 20               		ld		a,32
    5154   00:613C  77                  		ld		[hl],a
    5155   00:613D                      		
    5156   00:613D  7E                  		ld		a,[hl]					;borra de pantalla la bomba cogida												
    5157   00:613E  CD 5D 6B            		call	seis_diez
    5158   00:6141  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5159   00:6144                      		
    5160   00:6144  3E 20               		ld		a,32
    5161   00:6146  CD B1 6C            		call	pinta_en_pantalla
    5162   00:6149                      		
    5163   00:6149  3E CC               		ld		a,204
    5164   00:614B  32 EE EE            		ld		[#eeee],a
    5165   00:614E  21 EE EE            		ld		hl,#eeee				;pinta la bomba a color
    5166   00:6151  11 1E 18            		ld		de,#181e
    5167   00:6154  01 01 00            		ld		bc,1
    5168   00:6157  CD 5C 00            		call	GRABAVRAM
    5169   00:615A                      		
    5170   00:615A  AF                  		xor		a						;efecto sonoro de coger
    5171   00:615B  CD C4 6C            		call	efecto_sonido
    5172   00:615E                      		
    5173   00:615E  3E 01               		ld		a,1						; da el valor interno a tiene_objeto
    5174   00:6160  32 50 C0            		ld		(tiene_objeto),a
    5175   00:6163                      		
    5176   00:6163  C9                  		ret
    5177   00:6164                      
    5178   00:6164                      coge_cuchillo:
    5179   00:6164                      		
    5180   00:6164  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por coger cuchillo
    5181   00:6167  C6 01               		add		a,1
    5182   00:6169  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5183   00:616C  3E 01               		ld		a,1
    5184   00:616E  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5185   00:6171                      		
    5186   00:6171  CD AD 4D            		call	SPRITES_CUCHILLO
    5187   00:6174                      		
    5188   00:6174  CD 5D 6B            		call	seis_diez
    5189   00:6177  CD 8D 5C            		call	get_bloque_en_X_Y
    5190   00:617A  3E 20               		ld		a,32
    5191   00:617C  77                  		ld		[hl],a
    5192   00:617D                      		
    5193   00:617D  CD 5D 6B            		call	seis_diez
    5194   00:6180  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5195   00:6183                      		
    5196   00:6183  3E 20               		ld		a,32
    5197   00:6185  CD B1 6C            		call	pinta_en_pantalla
    5198   00:6188                      		
    5199   00:6188  3E D1               		ld		a,209
    5200   00:618A  32 EE EE            		ld		[#eeee],a
    5201   00:618D  21 EE EE            		ld		hl,#eeee				;pinta la espada a color
    5202   00:6190  11 18 18            		ld		de,#1818
    5203   00:6193  01 01 00            		ld		bc,1
    5204   00:6196  CD 5C 00            		call	GRABAVRAM
    5205   00:6199                      		
    5206   00:6199  AF                  		xor		a						;efecto sonoro de coger
    5207   00:619A  CD C4 6C            		call	efecto_sonido
    5208   00:619D                      		
    5209   00:619D  3E 02               		ld		a,2						; da el valor interno a tiene_objeto
    5210   00:619F  32 50 C0            		ld		(tiene_objeto),a
    5211   00:61A2                      		
    5212   00:61A2  C9                  		ret
    5213   00:61A3                      		
    5214   00:61A3                      usa_bomba:
    5215   00:61A3                      		
    5216   00:61A3  CD 4F 6C            		call	cero_dieciocho
    5217   00:61A6  CD 8D 5C            		call	get_bloque_en_X_Y
    5218   00:61A9  FE 14               		cp		20
    5219   00:61AB  38 11               		jr.		c,continuamos
    5220   00:61AD  FE 15               		cp		21
    5221   00:61AF  28 0D               		jr.		z,continuamos
    5222   00:61B1  FE 16               		cp		22
    5223   00:61B3  28 09               		jr.		z,continuamos
    5224   00:61B5  FE 17               		cp		23
    5225   00:61B7  28 05               		jr.		z,continuamos		
    5226   00:61B9  FE 18               		cp		24
    5227   00:61BB  28 01               		jr.		z,continuamos
    5228   00:61BD                      
    5229   00:61BD  C9                  		ret
    5230   00:61BE                      		
    5231   00:61BE                      continuamos:
    5232   00:61BE                      
    5233   00:61BE  CD DE 4D            		call	SPRITES_PROTA_NORMAL		
    5234   00:61C1                      		
    5235   00:61C1  3A 11 C0            		ld		a,(px)					;situamos la explosion
    5236   00:61C4  D6 04               		sub		a,4
    5237   00:61C6  32 53 C0            		ld		(x_explosion),a
    5238   00:61C9  3A 12 C0            		ld		a,(py)
    5239   00:61CC  C6 0A               		add		a,10
    5240   00:61CE  32 54 C0            		ld		(y_explosion),a
    5241   00:61D1                      		
    5242   00:61D1  3E CF               		ld		a,207
    5243   00:61D3  32 EE EE            		ld		[#eeee],a
    5244   00:61D6  21 EE EE            		ld		hl,#eeee				;pinta la bomba a blanco y negro
    5245   00:61D9  11 1E 18            		ld		de,#181e
    5246   00:61DC  01 01 00            		ld		bc,1
    5247   00:61DF  CD 5C 00            		call	GRABAVRAM
    5248   00:61E2                      	
    5249   00:61E2  3E 00               		ld		a,0						;le quitamos el objeto
    5250   00:61E4  32 50 C0            		ld		(tiene_objeto),a
    5251   00:61E7                      		
    5252   00:61E7  3E 01               		ld		a,1
    5253   00:61E9  32 55 C0            		ld		(estado_de_explosion),a	;activamos los sprites de explosion
    5254   00:61EC                      		
    5255   00:61EC  3E 03               		ld		a,3						;efecto sonoro de bomba
    5256   00:61EE  CD C4 6C            		call	efecto_sonido	
    5257   00:61F1                      		
    5258   00:61F1  CD 4F 6C            		call	cero_dieciocho
    5259   00:61F4  CD 8D 5C            		call	get_bloque_en_X_Y
    5260   00:61F7  FE 14               		cp		20
    5261   00:61F9  38 30               		jr.		c,hace_agujero_1
    5262   00:61FB  FE 15               		cp		21
    5263   00:61FD  28 64               		jr.		z,hace_agujero_2
    5264   00:61FF  FE 16               		cp		22
    5265   00:6201  28 60               		jr.		z,hace_agujero_2
    5266   00:6203  FE 17               		cp		23
    5267   00:6205  CA 9C 62            		jr.		z,hace_agujero_3		
    5268   00:6208  FE 18               		cp		24
    5269   00:620A  CA 9C 62            		jr.		z,hace_agujero_3
    5270   00:620D  C9                  		ret
    5271   00:620E                      
    5272   00:620E                      segunda_comprovacion_de_agujeros:
    5273   00:620E                      
    5274   00:620E  CD 5A 6C            		call	ocho_dieciocho
    5275   00:6211  CD 8D 5C            		call	get_bloque_en_X_Y
    5276   00:6214  FE 14               		cp		20
    5277   00:6216  38 36               		jr.		c,hace_agujero_1_2
    5278   00:6218  FE 15               		cp		21
    5279   00:621A  28 6B               		jr.		z,hace_agujero_2_2
    5280   00:621C  FE 16               		cp		22
    5281   00:621E  28 67               		jr.		z,hace_agujero_2_2
    5282   00:6220  FE 17               		cp		23
    5283   00:6222  CA CB 62            		jr.		z,hace_agujero_3_2		
    5284   00:6225  FE 18               		cp		24
    5285   00:6227  CA CB 62            		jr.		z,hace_agujero_3_2
    5286   00:622A  C9                  		ret
    5287   00:622B                      hace_agujero_1:
    5288   00:622B                      		
    5289   00:622B  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por perforar suelo
    5290   00:622E  C6 05               		add		a,5
    5291   00:6230  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5292   00:6233  3E 01               		ld		a,1
    5293   00:6235  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5294   00:6238                      		
    5295   00:6238                      													
    5296   00:6238  CD 4F 6C            		call	cero_dieciocho
    5297   00:623B  CD 8D 5C            		call	get_bloque_en_X_Y
    5298   00:623E  3E 15               		ld		a,21
    5299   00:6240  77                  		ld		[hl],a
    5300   00:6241                      				
    5301   00:6241  CD 4F 6C            		call	cero_dieciocho
    5302   00:6244  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5303   00:6247                      		
    5304   00:6247  3E 15               		ld		a,21
    5305   00:6249  CD B1 6C            		call	pinta_en_pantalla		
    5306   00:624C                      		
    5307   00:624C  18 C0               		jr.		segunda_comprovacion_de_agujeros
    5308   00:624E                      
    5309   00:624E                      hace_agujero_1_2:
    5310   00:624E                      
    5311   00:624E  CD 5A 6C            		call	ocho_dieciocho
    5312   00:6251  CD 8D 5C            		call	get_bloque_en_X_Y
    5313   00:6254  3E 16               		ld		a,22
    5314   00:6256  77                  		ld		[hl],a
    5315   00:6257                      		
    5316   00:6257  CD 5A 6C            		call	ocho_dieciocho
    5317   00:625A  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5318   00:625D                      		
    5319   00:625D  3E 16               		ld		a,22
    5320   00:625F  CD B1 6C            		call	pinta_en_pantalla
    5321   00:6262                      		
    5322   00:6262  C9                  		ret
    5323   00:6263                      hace_agujero_2:
    5324   00:6263                      
    5325   00:6263  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por perforar suelo
    5326   00:6266  C6 0A               		add		a,10
    5327   00:6268  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5328   00:626B  3E 01               		ld		a,1
    5329   00:626D  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5330   00:6270                      		
    5331   00:6270  7E                  		ld		a,[hl]					;pone en buffer_colisiones el suelo 3										
    5332   00:6271  CD 4F 6C            		call	cero_dieciocho
    5333   00:6274  CD 8D 5C            		call	get_bloque_en_X_Y
    5334   00:6277  3E 17               		ld		a,23
    5335   00:6279  77                  		ld		[hl],a
    5336   00:627A                      				
    5337   00:627A  CD 4F 6C            		call	cero_dieciocho
    5338   00:627D  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5339   00:6280                      		
    5340   00:6280  3E 17               		ld		a,23
    5341   00:6282  CD B1 6C            		call	pinta_en_pantalla
    5342   00:6285                      		
    5343   00:6285  18 87               		jr. 	segunda_comprovacion_de_agujeros
    5344   00:6287                      		
    5345   00:6287                      hace_agujero_2_2:
    5346   00:6287                      		
    5347   00:6287  CD 5A 6C            		call	ocho_dieciocho
    5348   00:628A  CD 8D 5C            		call	get_bloque_en_X_Y
    5349   00:628D  3E 18               		ld		a,24
    5350   00:628F  77                  		ld		[hl],a
    5351   00:6290                      		
    5352   00:6290  CD 5A 6C            		call	ocho_dieciocho
    5353   00:6293  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5354   00:6296                      		
    5355   00:6296  3E 18               		ld		a,24
    5356   00:6298  CD B1 6C            		call	pinta_en_pantalla
    5357   00:629B                      		
    5358   00:629B  C9                  		ret
    5359   00:629C                      
    5360   00:629C                      hace_agujero_3:
    5361   00:629C                      		
    5362   00:629C  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)				;puntos ganados por perforar suelo
    5363   00:629F  C6 0F               		add		a,15
    5364   00:62A1  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5365   00:62A4  3E 01               		ld		a,1
    5366   00:62A6  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5367   00:62A9                      		
    5368   00:62A9  CD 4F 6C            		call	cero_dieciocho
    5369   00:62AC  CD 8D 5C            		call	get_bloque_en_X_Y
    5370   00:62AF  3E 20               		ld		a,32
    5371   00:62B1  77                  		ld		[hl],a
    5372   00:62B2                      		
    5373   00:62B2  CD 4F 6C            		call	cero_dieciocho
    5374   00:62B5  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5375   00:62B8                      		
    5376   00:62B8  3E 20               		ld		a,32
    5377   00:62BA  CD B1 6C            		call	pinta_en_pantalla
    5378   00:62BD                      		
    5379   00:62BD  CD 5A 6C            		call	ocho_dieciocho
    5380   00:62C0  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5381   00:62C3                      		
    5382   00:62C3  3E 20               		ld		a,32
    5383   00:62C5  CD B1 6C            		call	pinta_en_pantalla
    5384   00:62C8                      		
    5385   00:62C8  C3 0E 62            		jr.		segunda_comprovacion_de_agujeros
    5386   00:62CB                      		
    5387   00:62CB                      hace_agujero_3_2:
    5388   00:62CB                      
    5389   00:62CB  CD 5A 6C            		call	ocho_dieciocho
    5390   00:62CE  CD 8D 5C            		call	get_bloque_en_X_Y
    5391   00:62D1  3E 20               		ld		a,32
    5392   00:62D3  77                  		ld		[hl],a
    5393   00:62D4                      
    5394   00:62D4  CD 5A 6C            		call	ocho_dieciocho
    5395   00:62D7  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5396   00:62DA                      		
    5397   00:62DA  3E 20               		ld		a,32
    5398   00:62DC  CD B1 6C            		call	pinta_en_pantalla
    5399   00:62DF  C9                  		ret
    5400   00:62E0                      			
    5401   00:62E0                      usa_cuchillo:
    5402   00:62E0                      
    5403   00:62E0  3A 73 C3            		ld		a,(momento_lanzamiento)
    5404   00:62E3  FE 00               		cp		0
    5405   00:62E5  C0                  		ret		nz
    5406   00:62E6                      		
    5407   00:62E6  3E D0               		ld		a,208
    5408   00:62E8  32 EE EE            		ld		[#eeee],a
    5409   00:62EB  21 EE EE            		ld		hl,#eeee												;pinta el cuchillo a blanco y negro
    5410   00:62EE  11 18 18            		ld		de,#1818
    5411   00:62F1  01 01 00            		ld		bc,1
    5412   00:62F4  CD 5C 00            		call	GRABAVRAM
    5413   00:62F7                      	
    5414   00:62F7  AF                  		xor		a														;le quita el cuchillo
    5415   00:62F8  32 50 C0            		ld		(tiene_objeto),a
    5416   00:62FB                      		
    5417   00:62FB  CD DE 4D            		call	SPRITES_PROTA_NORMAL	
    5418   00:62FE                      				
    5419   00:62FE  3E 01               		ld		a,1														;activa las poses de lanzamiento
    5420   00:6300  32 73 C3            		ld		(momento_lanzamiento),a
    5421   00:6303                      		
    5422   00:6303  C9                  		ret
    5423   00:6304                      		
    5424   00:6304                      rutina_cuchillo_volador:
    5425   00:6304                      		
    5426   00:6304  3A 73 C3            		ld		a,(momento_lanzamiento)
    5427   00:6307  FE 00               		cp		0						
    5428   00:6309  C8                  		ret		z
    5429   00:630A  FE 03               		cp		3						
    5430   00:630C  28 19               		jr.		z,comprueba_lugar_cuchillo
    5431   00:630E  D2 B1 63            		jr.		nc,avanza_cuchillo
    5432   00:6311  47                  		ld		b,a
    5433   00:6312  3A 74 C3            		ld		a,(contador_poses_lanzar)
    5434   00:6315  3D                  		dec		a
    5435   00:6316  32 74 C3            		ld		(contador_poses_lanzar),a
    5436   00:6319  FE 00               		cp		0
    5437   00:631B  C0                  		ret		nz
    5438   00:631C  3E 05               		ld		a,5
    5439   00:631E  32 74 C3            		ld		(contador_poses_lanzar),a
    5440   00:6321  78                  		ld		a,b
    5441   00:6322                      		
    5442   00:6322  3C                  		inc		a
    5443   00:6323  32 73 C3            		ld		(momento_lanzamiento),a
    5444   00:6326                      		
    5445   00:6326  C9                  		ret
    5446   00:6327                      
    5447   00:6327                      comprueba_lugar_cuchillo:
    5448   00:6327                      
    5449   00:6327  3E 06               		ld		a,6						;efecto sonoro de lanzar
    5450   00:6329  CD C4 6C            		call	efecto_sonido	
    5451   00:632C                      		
    5452   00:632C  3A 1D C0            		ld		a,(dir_prota)				;vemos direccion en la que lanza
    5453   00:632F  FE 01               		cp		1
    5454   00:6331  28 3B               		jr.		z,lanzamos_a_la_izquierda
    5455   00:6333                      
    5456   00:6333                      lanzamos_a_la_derecha:
    5457   00:6333                      
    5458   00:6333  32 77 C3            		ld		(dir_cuchillo),a		;guardamos la dirección para poder seguirla con el cuchillo
    5459   00:6336                      
    5460   00:6336  3A 11 C0            		ld		a,[px]					
    5461   00:6339  C6 08               		add		8
    5462   00:633B  57                  		ld		d,a
    5463   00:633C  3A 12 C0            		ld		a,[py]
    5464   00:633F  3C                  		inc		a
    5465   00:6340  5F                  		ld		e,a
    5466   00:6341  CD 8D 5C            		call	get_bloque_en_X_Y
    5467   00:6344  7E                  		ld		a,[hl]
    5468   00:6345  FE 20               		cp		32
    5469   00:6347  38 5E               		jr.		c,intento_fallido
    5470   00:6349                      		
    5471   00:6349  32 75 C3            		ld		(recordar_lo_que_habia),a
    5472   00:634C  3E 64               		ld		a,100
    5473   00:634E  77                  		ld		[hl],a
    5474   00:634F                      				
    5475   00:634F  3A 11 C0            		ld		a,[px]					;a vram
    5476   00:6352  C6 08               		add		8
    5477   00:6354  32 78 C3            		ld		[cx],a
    5478   00:6357  57                  		ld		d,a
    5479   00:6358  3A 12 C0            		ld		a,[py]
    5480   00:635B  3C                  		inc		a
    5481   00:635C  32 79 C3            		ld		[cy],a
    5482   00:635F  5F                  		ld		e,a
    5483   00:6360  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5484   00:6363                      		
    5485   00:6363  3E 64               		ld		a,100
    5486   00:6365  CD B1 6C            		call	pinta_en_pantalla
    5487   00:6368                      		
    5488   00:6368  3E 04               		ld		a,4						;pasamos el estado a movimiento
    5489   00:636A  32 73 C3            		ld		(momento_lanzamiento),a
    5490   00:636D                      		
    5491   00:636D  C9                  		ret
    5492   00:636E                      
    5493   00:636E                      lanzamos_a_la_izquierda:
    5494   00:636E                      
    5495   00:636E  32 77 C3            		ld		(dir_cuchillo),a		;guardamos la dirección para poder seguirla con el cuchillo
    5496   00:6371                      
    5497   00:6371  3A 11 C0            		ld		a,[px]					
    5498   00:6374  3C                  		inc		a
    5499   00:6375  57                  		ld		d,a
    5500   00:6376  3A 12 C0            		ld		a,[py]
    5501   00:6379  3C                  		inc		a
    5502   00:637A  5F                  		ld		e,a
    5503   00:637B  CD 8D 5C            		call	get_bloque_en_X_Y
    5504   00:637E  7E                  		ld		a,[hl]
    5505   00:637F  FE 20               		cp		32
    5506   00:6381  38 24               		jr.		c,intento_fallido
    5507   00:6383                      		
    5508   00:6383  32 75 C3            		ld		(recordar_lo_que_habia),a
    5509   00:6386  3E 66               		ld		a,102
    5510   00:6388  77                  		ld		[hl],a
    5511   00:6389                      				
    5512   00:6389  3A 11 C0            		ld		a,[px]					;a vram
    5513   00:638C  3C                  		inc		a
    5514   00:638D  32 78 C3            		ld		[cx],a
    5515   00:6390  57                  		ld		d,a
    5516   00:6391  3A 12 C0            		ld		a,[py]
    5517   00:6394  3C                  		inc		a
    5518   00:6395  32 79 C3            		ld		[cy],a
    5519   00:6398  5F                  		ld		e,a
    5520   00:6399  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5521   00:639C                      		
    5522   00:639C  3E 66               		ld		a,102
    5523   00:639E  CD B1 6C            		call	pinta_en_pantalla
    5524   00:63A1                      		
    5525   00:63A1  3E 04               		ld		a,4						;pasamos el estado a movimiento
    5526   00:63A3  32 73 C3            		ld		(momento_lanzamiento),a
    5527   00:63A6                      		
    5528   00:63A6  C9                  		ret
    5529   00:63A7                      
    5530   00:63A7                      intento_fallido:
    5531   00:63A7                      
    5532   00:63A7  3E 03               		ld		a,3						;efecto sonoro de fallo
    5533   00:63A9  CD C4 6C            		call	efecto_sonido	
    5534   00:63AC                      		
    5535   00:63AC  AF                  		xor		a
    5536   00:63AD  32 73 C3            		ld		(momento_lanzamiento),a
    5537   00:63B0                      		
    5538   00:63B0  C9                  		ret
    5539   00:63B1                      		
    5540   00:63B1                      avanza_cuchillo:
    5541   00:63B1  3A 77 C3            		ld		a,(dir_cuchillo)
    5542   00:63B4  FE 01               		cp		1
    5543   00:63B6  CA 6E 64            		jr.		z,avanza_hacia_la_izquierda
    5544   00:63B9                      
    5545   00:63B9                      avanza_hacia_la_derecha:
    5546   00:63B9                      
    5547   00:63B9  3A 78 C3            		ld		a,[cx]						;si en el siguiente tile hay ladrillo, va a clavar
    5548   00:63BC  C6 04               		add		4
    5549   00:63BE  57                  		ld		d,a
    5550   00:63BF  3A 79 C3            		ld		a,[cy]
    5551   00:63C2  5F                  		ld		e,a
    5552   00:63C3  CD 8D 5C            		call	get_bloque_en_X_Y
    5553   00:63C6  7E                  		ld		a,[hl]
    5554   00:63C7  FE 20               		cp		32
    5555   00:63C9  38 4E               		jr.		c,(clava_a_la_derecha)
    5556   00:63CB                      	
    5557   00:63CB  3A 78 C3            		ld		a,[cx]						;recupera lo que habia en el tile anteriormente					
    5558   00:63CE  57                  		ld		d,a
    5559   00:63CF  3A 79 C3            		ld		a,[cy]
    5560   00:63D2  5F                  		ld		e,a
    5561   00:63D3  CD 8D 5C            		call	get_bloque_en_X_Y
    5562   00:63D6                      		
    5563   00:63D6  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5564   00:63D9  77                  		ld		[hl],a
    5565   00:63DA                      	
    5566   00:63DA  3A 78 C3            		ld		a,[cx]						;recupera tambien en vram
    5567   00:63DD  57                  		ld		d,a
    5568   00:63DE  3A 79 C3            		ld		a,[cy]
    5569   00:63E1  5F                  		ld		e,a
    5570   00:63E2  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5571   00:63E5                      		
    5572   00:63E5  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5573   00:63E8  CD B1 6C            		call	pinta_en_pantalla
    5574   00:63EB                      		
    5575   00:63EB  3A 78 C3            		ld		a,[cx]						;salva lo que hay en el tile destino
    5576   00:63EE  C6 04               		add		4
    5577   00:63F0  57                  		ld		d,a
    5578   00:63F1  3A 79 C3            		ld		a,[cy]
    5579   00:63F4  5F                  		ld		e,a
    5580   00:63F5  CD 8D 5C            		call	get_bloque_en_X_Y
    5581   00:63F8  7E                  		ld		a,[hl]
    5582   00:63F9  32 75 C3            		ld		(recordar_lo_que_habia),a
    5583   00:63FC                      		
    5584   00:63FC  36 64               		ld		[hl],100					;pone el cuchillo en el nuevo tile
    5585   00:63FE                      		
    5586   00:63FE  3A 78 C3            		ld		a,[cx]
    5587   00:6401  C6 04               		add		4							;tambien en vram
    5588   00:6403  57                  		ld		d,a
    5589   00:6404  3A 79 C3            		ld		a,[cy]
    5590   00:6407  5F                  		ld		e,a
    5591   00:6408  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5592   00:640B                      		
    5593   00:640B  3E 64               		ld		a,100
    5594   00:640D  CD B1 6C            		call	pinta_en_pantalla
    5595   00:6410                      							
    5596   00:6410  3A 78 C3            		ld		a,[cx]						;nuevo valor para las coordenadas x e y
    5597   00:6413  C6 04               		add		4
    5598   00:6415  32 78 C3            		ld		[cx],a
    5599   00:6418                      		
    5600   00:6418  C9                  		ret		
    5601   00:6419                      
    5602   00:6419                      clava_a_la_derecha:
    5603   00:6419                      
    5604   00:6419  3A 75 C3            		ld		a,(recordar_lo_que_habia)		;si está en escalera, tile especial
    5605   00:641C  FE 2A               		cp		42
    5606   00:641E  20 27               		jr.		nz,(continua_clava_derecha_normal)
    5607   00:6420                      		
    5608   00:6420  3E 05               		ld		a,5						;efecto sonoro de clavar
    5609   00:6422  CD C4 6C            		call	efecto_sonido	
    5610   00:6425                      		
    5611   00:6425  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5612   00:6428  57                  		ld		d,a
    5613   00:6429  3A 79 C3            		ld		a,[cy]
    5614   00:642C  5F                  		ld		e,a
    5615   00:642D  CD 8D 5C            		call	get_bloque_en_X_Y
    5616   00:6430  36 6A               		ld		[hl],106
    5617   00:6432                      		
    5618   00:6432  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5619   00:6435  57                  		ld		d,a
    5620   00:6436  3A 79 C3            		ld		a,[cy]
    5621   00:6439  5F                  		ld		e,a
    5622   00:643A  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5623   00:643D                      				
    5624   00:643D  3E 6A               		ld		a,106
    5625   00:643F  CD B1 6C            		call	pinta_en_pantalla
    5626   00:6442                      		
    5627   00:6442  AF                  		xor		a
    5628   00:6443  32 73 C3            		ld		(momento_lanzamiento),a
    5629   00:6446                      		
    5630   00:6446  C9                  		ret
    5631   00:6447                      		
    5632   00:6447                      continua_clava_derecha_normal:
    5633   00:6447                      
    5634   00:6447  3E 05               		ld		a,5						;efecto sonoro de clavar
    5635   00:6449  CD C4 6C            		call	efecto_sonido	
    5636   00:644C                      		
    5637   00:644C  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5638   00:644F  57                  		ld		d,a
    5639   00:6450  3A 79 C3            		ld		a,[cy]
    5640   00:6453  5F                  		ld		e,a
    5641   00:6454  CD 8D 5C            		call	get_bloque_en_X_Y
    5642   00:6457  36 65               		ld		[hl],101
    5643   00:6459                      		
    5644   00:6459  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5645   00:645C  57                  		ld		d,a
    5646   00:645D  3A 79 C3            		ld		a,[cy]
    5647   00:6460  5F                  		ld		e,a
    5648   00:6461  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5649   00:6464                      		
    5650   00:6464  3E 65               		ld		a,101
    5651   00:6466  CD B1 6C            		call	pinta_en_pantalla
    5652   00:6469                      		
    5653   00:6469  AF                  		xor		a
    5654   00:646A  32 73 C3            		ld		(momento_lanzamiento),a
    5655   00:646D                      		
    5656   00:646D  C9                  		ret
    5657   00:646E                      
    5658   00:646E                      avanza_hacia_la_izquierda:
    5659   00:646E                      
    5660   00:646E  3A 78 C3            		ld		a,[cx]						;si en el siguiente tile hay ladrillo, va a clavar
    5661   00:6471  D6 04               		sub		a,4
    5662   00:6473  57                  		ld		d,a
    5663   00:6474  3A 79 C3            		ld		a,[cy]
    5664   00:6477  5F                  		ld		e,a
    5665   00:6478  CD 8D 5C            		call	get_bloque_en_X_Y
    5666   00:647B  7E                  		ld		a,[hl]
    5667   00:647C  FE 20               		cp		32
    5668   00:647E  38 4E               		jr.		c,(clava_a_la_izquierda)
    5669   00:6480                      	
    5670   00:6480  3A 78 C3            		ld		a,[cx]						;recupera lo que habia en el tile anteriormente					
    5671   00:6483  57                  		ld		d,a
    5672   00:6484  3A 79 C3            		ld		a,[cy]
    5673   00:6487  5F                  		ld		e,a
    5674   00:6488  CD 8D 5C            		call	get_bloque_en_X_Y
    5675   00:648B                      		
    5676   00:648B  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5677   00:648E  77                  		ld		[hl],a
    5678   00:648F                      	
    5679   00:648F  3A 78 C3            		ld		a,[cx]						;recupera tambien en vram
    5680   00:6492  57                  		ld		d,a
    5681   00:6493  3A 79 C3            		ld		a,[cy]
    5682   00:6496  5F                  		ld		e,a
    5683   00:6497  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5684   00:649A                      		
    5685   00:649A  3A 75 C3            		ld		a,(recordar_lo_que_habia)
    5686   00:649D  CD B1 6C            		call	pinta_en_pantalla
    5687   00:64A0                      		
    5688   00:64A0  3A 78 C3            		ld		a,[cx]						;salva lo que hay en el tile destino
    5689   00:64A3  D6 04               		sub		a,4
    5690   00:64A5  57                  		ld		d,a
    5691   00:64A6  3A 79 C3            		ld		a,[cy]
    5692   00:64A9  5F                  		ld		e,a
    5693   00:64AA  CD 8D 5C            		call	get_bloque_en_X_Y
    5694   00:64AD  7E                  		ld		a,[hl]
    5695   00:64AE  32 75 C3            		ld		(recordar_lo_que_habia),a
    5696   00:64B1                      		
    5697   00:64B1  36 66               		ld		[hl],102					;pone el cuchillo en el nuevo tile
    5698   00:64B3                      		
    5699   00:64B3  3A 78 C3            		ld		a,[cx]
    5700   00:64B6  D6 04               		sub		a,4							;tambien en vram
    5701   00:64B8  57                  		ld		d,a
    5702   00:64B9  3A 79 C3            		ld		a,[cy]
    5703   00:64BC  5F                  		ld		e,a
    5704   00:64BD  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5705   00:64C0                      		
    5706   00:64C0  3E 66               		ld		a,102
    5707   00:64C2  CD B1 6C            		call	pinta_en_pantalla
    5708   00:64C5                      							
    5709   00:64C5  3A 78 C3            		ld		a,[cx]						;nuevo valor para las coordenadas x e y
    5710   00:64C8  D6 04               		sub		a,4
    5711   00:64CA  32 78 C3            		ld		[cx],a
    5712   00:64CD                      		
    5713   00:64CD  C9                  		ret
    5714   00:64CE                      		
    5715   00:64CE                      clava_a_la_izquierda:
    5716   00:64CE                      		
    5717   00:64CE  3A 75 C3            		ld		a,(recordar_lo_que_habia)		;si está en escalera, tile especial
    5718   00:64D1  FE 29               		cp		41
    5719   00:64D3  20 27               		jr.		nz,(continua_clava_izquierda_normal)
    5720   00:64D5                      		
    5721   00:64D5  3E 05               		ld		a,5						;efecto sonoro de clavar
    5722   00:64D7  CD C4 6C            		call	efecto_sonido	
    5723   00:64DA                      		
    5724   00:64DA  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5725   00:64DD  57                  		ld		d,a
    5726   00:64DE  3A 79 C3            		ld		a,[cy]
    5727   00:64E1  5F                  		ld		e,a
    5728   00:64E2  CD 8D 5C            		call	get_bloque_en_X_Y
    5729   00:64E5  36 6A               		ld		[hl],106
    5730   00:64E7                      		
    5731   00:64E7  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5732   00:64EA  57                  		ld		d,a
    5733   00:64EB  3A 79 C3            		ld		a,[cy]
    5734   00:64EE  5F                  		ld		e,a
    5735   00:64EF  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5736   00:64F2                      				
    5737   00:64F2  3E 69               		ld		a,105
    5738   00:64F4  CD B1 6C            		call	pinta_en_pantalla
    5739   00:64F7                      		
    5740   00:64F7  AF                  		xor		a
    5741   00:64F8  32 73 C3            		ld		(momento_lanzamiento),a
    5742   00:64FB                      		
    5743   00:64FB  C9                  		ret
    5744   00:64FC                      		
    5745   00:64FC                      continua_clava_izquierda_normal:
    5746   00:64FC                      
    5747   00:64FC  3E 05               		ld		a,5						;efecto sonoro de clavar
    5748   00:64FE  CD C4 6C            		call	efecto_sonido
    5749   00:6501                      		
    5750   00:6501  3A 78 C3            		ld		a,[cx]						;graba el cuchillo clavado					
    5751   00:6504  57                  		ld		d,a
    5752   00:6505  3A 79 C3            		ld		a,[cy]
    5753   00:6508  5F                  		ld		e,a
    5754   00:6509  CD 8D 5C            		call	get_bloque_en_X_Y
    5755   00:650C  36 67               		ld		[hl],103
    5756   00:650E                      		
    5757   00:650E  3A 78 C3            		ld		a,[cx]						;tambien en vram
    5758   00:6511  57                  		ld		d,a
    5759   00:6512  3A 79 C3            		ld		a,[cy]
    5760   00:6515  5F                  		ld		e,a
    5761   00:6516  CD B2 5C            		call	get_bloque_en_X_Y_paravram
    5762   00:6519                      		
    5763   00:6519  3E 67               		ld		a,103
    5764   00:651B  CD B1 6C            		call	pinta_en_pantalla
    5765   00:651E                      		
    5766   00:651E  AF                  		xor		a
    5767   00:651F  32 73 C3            		ld		(momento_lanzamiento),a
    5768   00:6522                      		
    5769   00:6522  C9                  		ret
    5770   00:6523                      		
    5771   00:6523                      actualiza_la_puerta:
    5772   00:6523                      		
    5773   00:6523  3A 3C C3            		ld		a,(ya_ha_cambiado_puerta)
    5774   00:6526  FE 00               		cp		0
    5775   00:6528  C0                  		ret		nz
    5776   00:6529                      		
    5777   00:6529  3A 38 C3            		ld		a,(mechero)
    5778   00:652C  FE 00               		cp		0
    5779   00:652E  C8                  		ret		z
    5780   00:652F  3A 39 C3            		ld		a,(gasolina)
    5781   00:6532  FE 00               		cp		0
    5782   00:6534  C8                  		ret		z
    5783   00:6535                      		
    5784   00:6535                      							
    5785   00:6535  2A 3A C3            		ld		hl,(posicion_puerta)
    5786   00:6538  3E 2D               		ld		a,45
    5787   00:653A  CD B1 6C            		call	pinta_en_pantalla
    5788   00:653D                      		
    5789   00:653D  3A 3A C3            		ld		a,(posicion_puerta)
    5790   00:6540  C6 01               		add		1
    5791   00:6542  32 3A C3            		ld		(posicion_puerta),a
    5792   00:6545  2A 3A C3            		ld		hl,(posicion_puerta)
    5793   00:6548                      		
    5794   00:6548  3E 2E               		ld		a,46
    5795   00:654A  CD B1 6C            		call	pinta_en_pantalla
    5796   00:654D                      		
    5797   00:654D  3A 3A C3            		ld		a,(posicion_puerta)
    5798   00:6550  C6 1F               		add		31
    5799   00:6552  32 3A C3            		ld		(posicion_puerta),a
    5800   00:6555  2A 3A C3            		ld		hl,(posicion_puerta)
    5801   00:6558                      		
    5802   00:6558  3E 30               		ld		a,48
    5803   00:655A  CD B1 6C            		call	pinta_en_pantalla
    5804   00:655D                      		
    5805   00:655D  3A 3A C3            		ld		a,(posicion_puerta)
    5806   00:6560  C6 01               		add		1
    5807   00:6562  32 3A C3            		ld		(posicion_puerta),a
    5808   00:6565  2A 3A C3            		ld		hl,(posicion_puerta)
    5809   00:6568                      		
    5810   00:6568  3E 2F               		ld		a,47
    5811   00:656A  CD B1 6C            		call	pinta_en_pantalla
    5812   00:656D                      		
    5813   00:656D  3E FF               		ld		a,255
    5814   00:656F                      		
    5815   00:656F                      alegria_de_color:
    5816   00:656F                      
    5817   00:656F  F5                  		push	af
    5818   00:6570                      				
    5819   00:6570  3E 00               		ld		a,0
    5820   00:6572  32 E9 F3            		ld		[COLLETRA],a											;aunque sólo quieras cambiar uno de los colores, tienes que volver a definir los otros dos para que te acepte un cambio
    5821   00:6575  3E 00               		ld		a,0
    5822   00:6577  32 EA F3            		ld		[COLFONDO],a
    5823   00:657A  3E 04               		ld		a,4
    5824   00:657C  32 EB F3            		ld		[COLBORDE],a
    5825   00:657F  CD 62 00            		call	COLOR
    5826   00:6582  3E 07               		ld		a,7
    5827   00:6584  32 EB F3            		ld		[COLBORDE],a
    5828   00:6587  CD 62 00            		call	COLOR
    5829   00:658A  3E 0F               		ld		a,15
    5830   00:658C  32 EB F3            		ld		[COLBORDE],a
    5831   00:658F  CD 62 00            		call	COLOR
    5832   00:6592  3E 09               		ld		a,9
    5833   00:6594  32 EB F3            		ld		[COLBORDE],a
    5834   00:6597  CD 62 00            		call	COLOR
    5835   00:659A                      		
    5836   00:659A  F1                  		pop		af
    5837   00:659B  3D                  		dec		a
    5838   00:659C  FE 00               		cp		0
    5839   00:659E  20 CF               		jr.		nz,alegria_de_color
    5840   00:65A0                      		
    5841   00:65A0  3E 01               		ld		a,1
    5842   00:65A2  32 EB F3            		ld		[COLBORDE],a
    5843   00:65A5  CD 62 00            		call	COLOR
    5844   00:65A8                      		
    5845   00:65A8  3E 01               		ld		a,1
    5846   00:65AA  32 3C C3            		ld		(ya_ha_cambiado_puerta),a
    5847   00:65AD                      		
    5848   00:65AD  C9                  		ret
    5849   00:65AE                      
    5850   00:65AE                      comprueba_estado_de_explosion:
    5851   00:65AE                      
    5852   00:65AE  3A 55 C0            		ld		a,(estado_de_explosion)
    5853   00:65B1  FE 00               		cp		0
    5854   00:65B3  C8                  		ret		z
    5855   00:65B4                      				
    5856   00:65B4  DD 21 20 C0         		ld		ix,atributos_sprite_general
    5857   00:65B8                      		
    5858   00:65B8  3A 54 C0            		ld		a,(y_explosion)			;valor y**
    5859   00:65BB  DD 77 0C            		ld		(ix+12),a
    5860   00:65BE                      			
    5861   00:65BE  3A 53 C0            		ld		a,(x_explosion)			;valor x**
    5862   00:65C1  DD 77 0D            		ld		(ix+13),a
    5863   00:65C4                      		
    5864   00:65C4  3A 55 C0            		ld		a,(estado_de_explosion)	;SPRITE
    5865   00:65C7  C6 14               		add		a,20
    5866   00:65C9  87 87               [2]		add		a,a
    5867   00:65CB  DD 77 0E            		ld		(ix+14),a
    5868   00:65CE                      		
    5869   00:65CE  3E 0F               		ld		a,15					;COLOR EXPLOSION
    5870   00:65D0  DD 77 0F            		ld		(ix+15),a
    5871   00:65D3                      		
    5872   00:65D3  3A 56 C0            		ld		a,(contador_retardo_explosion)
    5873   00:65D6  3C                  		inc		a
    5874   00:65D7  32 56 C0            		ld		(contador_retardo_explosion),a
    5875   00:65DA  FE 05               		cp		5
    5876   00:65DC  C0                  		ret		nz
    5877   00:65DD  AF                  		xor		a
    5878   00:65DE  32 56 C0            		ld		(contador_retardo_explosion),a
    5879   00:65E1  3A 55 C0            		ld		a,(estado_de_explosion)
    5880   00:65E4  3C                  		inc		a
    5881   00:65E5  32 55 C0            		ld		(estado_de_explosion),a
    5882   00:65E8  FE 04               		cp		4
    5883   00:65EA  28 01               		jr.		z,finalizamos_la_explosion
    5884   00:65EC                      		
    5885   00:65EC  C9                  		ret
    5886   00:65ED                      		
    5887   00:65ED                      finalizamos_la_explosion:
    5888   00:65ED                      		
    5889   00:65ED  DD 21 20 C0         		ld		ix,atributos_sprite_general
    5890   00:65F1                      		
    5891   00:65F1  AF                  		xor		a
    5892   00:65F2  32 55 C0            		ld		(estado_de_explosion),a
    5893   00:65F5  DD 77 0C            		ld		(ix+12),a
    5894   00:65F8  DD 77 0D            		ld		(ix+13),a
    5895   00:65FB  DD 77 0F            		ld		(ix+15),a
    5896   00:65FE  3E 60               		ld		a,24*4
    5897   00:6600  DD 77 0E            		ld		(ix+14),a
    5898   00:6603                      
    5899   00:6603  C9                  		ret
    5900   00:6604                      
    5901   00:6604                      puntuacion_vidas_fase:
    5902   00:6604                      		
    5903   00:6604  3A 14 C0            		ld		a,(vidas_prota)						;pinta vidas
    5904   00:6607                      		
    5905   00:6607  C6 C0               		add		a,192
    5906   00:6609  32 EE EE            		ld		[#eeee],a
    5907   00:660C  21 EE EE            		ld		hl,#eeee
    5908   00:660F  11 03 18            		ld		de,#1803
    5909   00:6612  01 01 00            		ld		bc,1
    5910   00:6615  CD 5C 00            		call	GRABAVRAM
    5911   00:6618                      		
    5912   00:6618  3A 18 C0            		ld		a,(fase_en_la_que_esta)				;pinta fase
    5913   00:661B  FE 0A               		cp		10
    5914   00:661D  D4 55 66            		call	nc,fase_superior_a_diez
    5915   00:6620                      		
    5916   00:6620  C6 C0               		add		a,192
    5917   00:6622  32 EE EE            		ld		[#eeee],a
    5918   00:6625  21 EE EE            		ld		hl,#eeee
    5919   00:6628  11 16 18            		ld		de,#1816
    5920   00:662B  01 01 00            		ld		bc,1
    5921   00:662E  CD 5C 00            		call	GRABAVRAM
    5922   00:6631                      								
    5923   00:6631  3A 46 C3            		ld		a,(cuenta_puntos_o_no)				;decide si pasa a poner puntos
    5924   00:6634  FE 00               		cp		0
    5925   00:6636  C8                  		ret		z
    5926   00:6637                      				
    5927   00:6637  3A 47 C3            		ld		a,(cuanto_sumamos_a_score)
    5928   00:663A  47                  		ld		b,a
    5929   00:663B  3A 3E C3            		ld		a,(score)
    5930   00:663E  80                  		add		a,b
    5931   00:663F  32 3E C3            		ld		(score),a
    5932   00:6642  AF                  		xor		a
    5933   00:6643  32 47 C3            		ld		(cuanto_sumamos_a_score),a
    5934   00:6646  3A 3E C3            		ld		a,(score)
    5935   00:6649  47                  		ld		b,a
    5936   00:664A  3A 40 C3            		ld		a,(contador_para_puntuacion)
    5937   00:664D  B8                  		cp		b
    5938   00:664E  20 1B               		jr.		nz,rutina_de_puntos
    5939   00:6650  AF                  		xor		a
    5940   00:6651  32 46 C3            		ld		(cuenta_puntos_o_no),a
    5941   00:6654  C9                  		ret
    5942   00:6655                      
    5943   00:6655                      fase_superior_a_diez:
    5944   00:6655                      
    5945   00:6655  D6 0A               		sub		10
    5946   00:6657                      		
    5947   00:6657  F5                  		push	af
    5948   00:6658                      		
    5949   00:6658  3E C1               		ld		a,193
    5950   00:665A  32 EE EE            		ld		[#eeee],a
    5951   00:665D  21 EE EE            		ld		hl,#eeee
    5952   00:6660  11 15 18            		ld		de,#1815
    5953   00:6663  01 01 00            		ld		bc,1
    5954   00:6666  CD 5C 00            		call	GRABAVRAM
    5955   00:6669                      		
    5956   00:6669  F1                  		pop		af
    5957   00:666A                      		
    5958   00:666A  C9                  		ret
    5959   00:666B                      		
    5960   00:666B                      rutina_de_puntos:
    5961   00:666B                      
    5962   00:666B  3A 40 C3            		ld		a,(contador_para_puntuacion)
    5963   00:666E  3C                  		inc		a
    5964   00:666F  32 40 C3            		ld		(contador_para_puntuacion),a
    5965   00:6672                      				
    5966   00:6672  3A 42 C3            		ld		a,(posicion_del_punto_unidades)
    5967   00:6675  3C                  		inc		a
    5968   00:6676  32 42 C3            		ld		(posicion_del_punto_unidades),a
    5969   00:6679  FE CA               		cp		202
    5970   00:667B  CC 80 66            		call	z,resetea_los_numeros
    5971   00:667E                      			
    5972   00:667E  18 33               		jr.		termina_de_contar_puntuacion
    5973   00:6680                      		
    5974   00:6680                      resetea_los_numeros:
    5975   00:6680                      		
    5976   00:6680  3E C0               		ld		a,192								;limpia unidades
    5977   00:6682  32 42 C3            		ld		(posicion_del_punto_unidades),a
    5978   00:6685                      		
    5979   00:6685  3A 43 C3            		ld		a,(posicion_del_punto_decenas)		;aumenta decenas
    5980   00:6688  3C                  		inc		a
    5981   00:6689  32 43 C3            		ld		(posicion_del_punto_decenas),a		
    5982   00:668C  FE CA               		cp		202									;comprueba decenas
    5983   00:668E  C0                  		ret		nz
    5984   00:668F                      
    5985   00:668F  3E C0               		ld		a,192								;limpia decenas
    5986   00:6691  32 43 C3            		ld		(posicion_del_punto_decenas),a
    5987   00:6694                      		
    5988   00:6694  3A 44 C3            		ld		a,(posicion_del_punto_centenas)		;aumenta centenas
    5989   00:6697  3C                  		inc		a
    5990   00:6698  32 44 C3            		ld		(posicion_del_punto_centenas),a
    5991   00:669B  FE CA               		cp		202									;comprueba centenas
    5992   00:669D  C0                  		ret		nz
    5993   00:669E                      
    5994   00:669E  3E C0               		ld		a,192								;limpia centenas
    5995   00:66A0  32 44 C3            		ld		(posicion_del_punto_centenas),a
    5996   00:66A3                      		
    5997   00:66A3  3A 45 C3            		ld		a,(posicion_del_punto_millares)		;aumenta millares
    5998   00:66A6  3C                  		inc		a
    5999   00:66A7  32 45 C3            		ld		(posicion_del_punto_millares),a
    6000   00:66AA  FE CA               		cp		202									;comprueba millares
    6001   00:66AC  C0                  		ret		nz			
    6002   00:66AD                      		
    6003   00:66AD  3E C0               		ld		a,192								;limpia millares
    6004   00:66AF  32 45 C3            		ld		(posicion_del_punto_millares),a
    6005   00:66B2                      		
    6006   00:66B2  C9                  		ret
    6007   00:66B3                      		
    6008   00:66B3                      termina_de_contar_puntuacion:
    6009   00:66B3                      
    6010   00:66B3  3A 45 C3            		ld		a,(posicion_del_punto_millares)
    6011   00:66B6  32 EE EE            		ld		[#eeee],a
    6012   00:66B9  21 EE EE            		ld		hl,#eeee
    6013   00:66BC  11 0B 18            		ld		de,#180b
    6014   00:66BF  01 01 00            		ld		bc,1
    6015   00:66C2  CD 5C 00            		call	GRABAVRAM
    6016   00:66C5                      		
    6017   00:66C5  3A 44 C3            		ld		a,(posicion_del_punto_centenas)
    6018   00:66C8  32 EE EE            		ld		[#eeee],a
    6019   00:66CB  21 EE EE            		ld		hl,#eeee
    6020   00:66CE  11 0C 18            		ld		de,#180c
    6021   00:66D1  01 01 00            		ld		bc,1
    6022   00:66D4  CD 5C 00            		call	GRABAVRAM
    6023   00:66D7                      		
    6024   00:66D7  3A 43 C3            		ld		a,(posicion_del_punto_decenas)
    6025   00:66DA  32 EE EE            		ld		[#eeee],a
    6026   00:66DD  21 EE EE            		ld		hl,#eeee
    6027   00:66E0  11 0D 18            		ld		de,#180d
    6028   00:66E3  01 01 00            		ld		bc,1
    6029   00:66E6  CD 5C 00            		call	GRABAVRAM
    6030   00:66E9                      		
    6031   00:66E9  3A 42 C3            		ld		a,(posicion_del_punto_unidades)
    6032   00:66EC  32 EE EE            		ld		[#eeee],a
    6033   00:66EF  21 EE EE            		ld		hl,#eeee
    6034   00:66F2  11 0E 18            		ld		de,#180e
    6035   00:66F5  01 01 00            		ld		bc,1
    6036   00:66F8  CD 5C 00            		call	GRABAVRAM
    6037   00:66FB                      				
    6038   00:66FB  C9                  		ret
    6039   00:66FC                      
    6040   00:66FC                      ha_saltado:
    6041   00:66FC                      
    6042   00:66FC  3A 1D C0            		ld		a,(dir_prota)
    6043   00:66FF  FE 00               		cp		0
    6044   00:6701  28 04               		jr.		z,salta_hacia_la_derecha
    6045   00:6703  FE 01               		cp		1
    6046   00:6705  28 06               		jr.		z,salta_hacia_la_izquierda
    6047   00:6707                      		
    6048   00:6707                      salta_hacia_la_derecha:
    6049   00:6707                      
    6050   00:6707  3E 01               		ld		a,1
    6051   00:6709  32 37 C3            		ld		(estado_de_salto),a
    6052   00:670C  C9                  		ret
    6053   00:670D                      
    6054   00:670D                      salta_hacia_la_izquierda:
    6055   00:670D                      
    6056   00:670D  3E 1F               		ld		a,31
    6057   00:670F  32 37 C3            		ld		(estado_de_salto),a
    6058   00:6712  C9                  		ret
    6059   00:6713                      
    6060   00:6713                      salta_sube:
    6061   00:6713                      		
    6062   00:6713  CD 73 6C            		call	dieciseis_quince
    6063   00:6716  CD 8D 5C            		call	get_bloque_en_X_Y
    6064   00:6719                      		
    6065   00:6719  FE 1F               		cp		31
    6066   00:671B  38 12               		jr.		c,la_y_a_la_derecha
    6067   00:671D                      		
    6068   00:671D                      		
    6069   00:671D  CD 8D 6C            		call	uno_menos_cuatro
    6070   00:6720  CD 8D 5C            		call	get_bloque_en_X_Y
    6071   00:6723                      		
    6072   00:6723  FE 1F               		cp		31
    6073   00:6725  38 20               		jr.		c,resetea_el_salto
    6074   00:6727                      		
    6075   00:6727  3A 11 C0            		ld		a,[px]
    6076   00:672A  C6 01               		add		1
    6077   00:672C  32 11 C0            		ld		[px],a
    6078   00:672F                      
    6079   00:672F                      la_y_a_la_derecha:
    6080   00:672F                      
    6081   00:672F  3A 12 C0            		ld		a,[py]
    6082   00:6732  D6 04               		sub		a,4
    6083   00:6734  32 12 C0            		ld		[py],a
    6084   00:6737                      		
    6085   00:6737                      salta_resolucion:
    6086   00:6737                      
    6087   00:6737  3A 37 C3            		ld		a,(estado_de_salto)
    6088   00:673A  3C                  		inc		a
    6089   00:673B  32 37 C3            		ld		(estado_de_salto),a
    6090   00:673E  FE 15               		cp		21
    6091   00:6740  28 05               		jr.		z,resetea_el_salto
    6092   00:6742  FE 33               		cp		51
    6093   00:6744  28 01               		jr.		z,resetea_el_salto
    6094   00:6746  C9                  		ret
    6095   00:6747                      
    6096   00:6747                      resetea_el_salto:
    6097   00:6747                      
    6098   00:6747  AF                  		xor		a
    6099   00:6748  32 37 C3            		ld		(estado_de_salto),a
    6100   00:674B  3E 05               		ld		a,5
    6101   00:674D  32 71 C3            		ld		(cont_no_salta_dos_seguidas),a
    6102   00:6750  C9                  		ret
    6103   00:6751                      		
    6104   00:6751                      salta_sube_izquierda:		
    6105   00:6751                      		
    6106   00:6751  CD 99 6C            		call	menos_uno_quince
    6107   00:6754  CD 8D 5C            		call	get_bloque_en_X_Y
    6108   00:6757                      		
    6109   00:6757  FE 1F               		cp		31
    6110   00:6759  38 19               		jr.		c,la_y_a_la_izquierda
    6111   00:675B                      		
    6112   00:675B  3A 11 C0            		ld		a,[px]					;mira si tiene techo
    6113   00:675E  3D                  		dec		a														
    6114   00:675F  57                  		ld		d,a
    6115   00:6760  3A 12 C0            		ld		a,[py]
    6116   00:6763  D6 04               		sub		4
    6117   00:6765  5F                  		ld		e,a
    6118   00:6766  CD 8D 5C            		call	get_bloque_en_X_Y
    6119   00:6769                      		
    6120   00:6769  FE 1F               		cp		31
    6121   00:676B  38 DA               		jr.		c,resetea_el_salto
    6122   00:676D                      		
    6123   00:676D  3A 11 C0            		ld		a,[px]
    6124   00:6770  3D                  		dec		a
    6125   00:6771  32 11 C0            		ld		[px],a
    6126   00:6774                      
    6127   00:6774                      la_y_a_la_izquierda:
    6128   00:6774                      		
    6129   00:6774  3A 12 C0            		ld		a,[py]
    6130   00:6777  D6 04               		sub		a,4
    6131   00:6779  32 12 C0            		ld		[py],a
    6132   00:677C                      		
    6133   00:677C                      salta_sigue:
    6134   00:677C                      		
    6135   00:677C  CD 73 6C            		call	dieciseis_quince
    6136   00:677F  CD 8D 5C            		call	get_bloque_en_X_Y
    6137   00:6782                      		
    6138   00:6782  FE 1F               		cp		31
    6139   00:6784  38 C1               		jr.		c,resetea_el_salto
    6140   00:6786                      		
    6141   00:6786  3A 11 C0            		ld		a,[px]
    6142   00:6789  C6 01               		add		1
    6143   00:678B  32 11 C0            		ld		[px],a
    6144   00:678E                      		
    6145   00:678E  18 A7               		jr.		salta_resolucion
    6146   00:6790                      
    6147   00:6790                      salta_sigue_izquierda:
    6148   00:6790                      
    6149   00:6790  CD 99 6C            		call	menos_uno_quince
    6150   00:6793  CD 8D 5C            		call	get_bloque_en_X_Y
    6151   00:6796                      		
    6152   00:6796  FE 1F               		cp		31
    6153   00:6798  38 AD               		jr.		c,resetea_el_salto
    6154   00:679A                      		
    6155   00:679A  3A 11 C0            		ld		a,[px]
    6156   00:679D  3D                  		dec		a
    6157   00:679E  32 11 C0            		ld		[px],a
    6158   00:67A1                      		
    6159   00:67A1  18 94               		jr.		salta_resolucion
    6160   00:67A3                      
    6161   00:67A3                      salta_baja:
    6162   00:67A3                      
    6163   00:67A3  CD B3 6B            		call	dieciseis_dieciseis
    6164   00:67A6  CD 8D 5C            		call	get_bloque_en_X_Y
    6165   00:67A9                      		
    6166   00:67A9  FE 1F               		cp		31
    6167   00:67AB  38 9A               		jr.		c,resetea_el_salto
    6168   00:67AD                      				
    6169   00:67AD  3A 11 C0            		ld		a,[px]					;mira si tiene suelo
    6170   00:67B0  C6 10               		add		16														
    6171   00:67B2  57                  		ld		d,a
    6172   00:67B3  3A 12 C0            		ld		a,[py]
    6173   00:67B6  C6 13               		add		19
    6174   00:67B8  5F                  		ld		e,a
    6175   00:67B9  CD 8D 5C            		call	get_bloque_en_X_Y
    6176   00:67BC                      		
    6177   00:67BC  FE 1F               		cp		31
    6178   00:67BE  38 87               		jr.		c,resetea_el_salto
    6179   00:67C0                      		
    6180   00:67C0  3A 11 C0            		ld		a,[px]
    6181   00:67C3  C6 01               		add		1
    6182   00:67C5  32 11 C0            		ld		[px],a
    6183   00:67C8                      		
    6184   00:67C8  3A 12 C0            		ld		a,[py]
    6185   00:67CB  C6 04               		add		4
    6186   00:67CD  32 12 C0            		ld		[py],a
    6187   00:67D0                      		
    6188   00:67D0  C3 37 67            		jr.		salta_resolucion
    6189   00:67D3                      		
    6190   00:67D3                      salta_baja_izquierda:
    6191   00:67D3                      
    6192   00:67D3  CD A7 6B            		call	menos_uno_dieciseis
    6193   00:67D6  CD 8D 5C            		call	get_bloque_en_X_Y
    6194   00:67D9                      		
    6195   00:67D9  FE 1F               		cp		31
    6196   00:67DB  DA 47 67            		jr.		c,resetea_el_salto
    6197   00:67DE                      		
    6198   00:67DE  3A 11 C0            		ld		a,[px]					;mira si tiene suelo
    6199   00:67E1  3D                  		dec		a														
    6200   00:67E2  57                  		ld		d,a
    6201   00:67E3  3A 12 C0            		ld		a,[py]
    6202   00:67E6  C6 13               		add		19
    6203   00:67E8  5F                  		ld		e,a
    6204   00:67E9  CD 8D 5C            		call	get_bloque_en_X_Y
    6205   00:67EC                      		
    6206   00:67EC  FE 1F               		cp		31
    6207   00:67EE  DA 47 67            		jr.		c,resetea_el_salto
    6208   00:67F1                      		
    6209   00:67F1  3A 11 C0            		ld		a,[px]
    6210   00:67F4  3D                  		dec		a
    6211   00:67F5  32 11 C0            		ld		[px],a
    6212   00:67F8                      		
    6213   00:67F8  3A 12 C0            		ld		a,[py]
    6214   00:67FB  C6 04               		add		4
    6215   00:67FD  32 12 C0            		ld		[py],a
    6216   00:6800                      		
    6217   00:6800  C3 37 67            		jr.		salta_resolucion
    6218   00:6803                      
    6219   00:6803                      animacion_entre_fases:
    6220   00:6803                      
    6221   00:6803  CD 1F 45            		call limpia_sprites
    6222   00:6806                      		
    6223   00:6806  3E FF               		ld		a,255
    6224   00:6808                      					
    6225   00:6808                      quemando_al_prota:
    6226   00:6808                      		
    6227   00:6808  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6228   00:680C                      		
    6229   00:680C  F5                  		push	af
    6230   00:680D  3A 12 C0            		ld		a,(py)
    6231   00:6810  DD 77 00            		ld		(ix),a
    6232   00:6813  DD 77 04            		ld		(ix+4),a
    6233   00:6816  3E CC               		ld		a,51*4
    6234   00:6818  DD 77 02            		ld		(ix+2),a
    6235   00:681B  3E D0               		ld		a,52*4
    6236   00:681D  DD 77 06            		ld		(ix+6),a
    6237   00:6820                      				
    6238   00:6820  CD D4 57            		call	atributos_sprites
    6239   00:6823  3E FF               		ld		a,255
    6240   00:6825                      		
    6241   00:6825                      rutina_espera_quemando_1:
    6242   00:6825                      				
    6243   00:6825  3D                  		dec		a
    6244   00:6826  FE 00               		cp		0
    6245   00:6828  20 FB               		jr.		nz,rutina_espera_quemando_1	
    6246   00:682A                      		
    6247   00:682A  3E 0B               		ld		a,11													;efecto sonoro de quemar
    6248   00:682C  CD C4 6C            		call	efecto_sonido
    6249   00:682F                      		
    6250   00:682F  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6251   00:6833                      		
    6252   00:6833  3E D4               		ld		a,53*4
    6253   00:6835  DD 77 02            		ld		(ix+2),a
    6254   00:6838  3E D8               		ld		a,54*4
    6255   00:683A  DD 77 06            		ld		(ix+6),a
    6256   00:683D                      				
    6257   00:683D  CD D4 57            		call	atributos_sprites		
    6258   00:6840  3E FF               		ld		a,255
    6259   00:6842                      		
    6260   00:6842                      rutina_espera_quemando_2:
    6261   00:6842                      			
    6262   00:6842  3D                  		dec		a
    6263   00:6843  FE 00               		cp		0
    6264   00:6845  20 FB               		jr.		nz,rutina_espera_quemando_2	
    6265   00:6847                      		
    6266   00:6847  F1                  		pop		af
    6267   00:6848  3D                  		dec		a
    6268   00:6849  FE 00               		cp		0
    6269   00:684B  20 BB               		jr.		nz,quemando_al_prota
    6270   00:684D                      		
    6271   00:684D  CD 1F 45            		call	limpia_sprites
    6272   00:6850                      		
    6273   00:6850  3A 18 C0            		ld		a,(fase_en_la_que_esta)
    6274   00:6853  3C                  		inc		a
    6275   00:6854  32 18 C0            		ld		(fase_en_la_que_esta),a
    6276   00:6857                      		
    6277   00:6857  CD 04 66            		call	puntuacion_vidas_fase
    6278   00:685A                      		
    6279   00:685A  3E 80               		ld		a,128
    6280   00:685C  32 12 C0            		ld		(py),a
    6281   00:685F  3E 18               		ld		a,24
    6282   00:6861  32 11 C0            		ld		(px),a
    6283   00:6864                      		
    6284   00:6864  CD 41 00            		call	DISSCR		
    6285   00:6867  21 2A B0            		ld		hl,entre_fases											;las dos puertas entre fases
    6286   00:686A  11 20 18            		ld		de,#1820
    6287   00:686D  CD C9 6C            		call	depack_VRAM
    6288   00:6870                      		
    6289   00:6870  3A 00 C0            		ld		a,(idioma)
    6290   00:6873  FE 00               		cp		0
    6291   00:6875  20 0C               		jr.		nz,rutina_pone_consejo
    6292   00:6877                      		
    6293   00:6877  21 E8 AF            		ld		hl,camino_a
    6294   00:687A  11 E2 18            		ld		de,#18e2
    6295   00:687D  01 1C 00            		ld		bc,28
    6296   00:6880  CD 5C 00            		call	GRABAVRAM
    6297   00:6883                      		
    6298   00:6883                      rutina_pone_consejo:		
    6299   00:6883                      		
    6300   00:6883  3A 18 C0            		ld		a,(fase_en_la_que_esta)
    6301   00:6886  FE 02               		cp		2
    6302   00:6888  28 14               		jr.		z,consejos_fase_2
    6303   00:688A  FE 03               		cp		3
    6304   00:688C  28 35               		jr.		z,consejos_fase_3
    6305   00:688E  FE 05               		cp		5
    6306   00:6890  28 54               		jr.		z,consejos_fase_5
    6307   00:6892  FE 07               		cp		7
    6308   00:6894  28 73               		jr.		z,consejos_fase_7
    6309   00:6896  FE 0A               		cp		10
    6310   00:6898  CA 2C 69            		jr.		z,consejos_fase_10
    6311   00:689B                      		
    6312   00:689B  C3 4F 69            		jr.		rutina_espera_quemando_2_cont
    6313   00:689E                      
    6314   00:689E                      consejos_fase_2:
    6315   00:689E                      		
    6316   00:689E  3A 00 C0            		ld		a,(idioma)
    6317   00:68A1  FE 00               		cp		0
    6318   00:68A3  28 0F               		jr.		z,consejo_esp_fase_2
    6319   00:68A5                      
    6320   00:68A5                      consejo_ing_fase_2:
    6321   00:68A5                      
    6322   00:68A5  21 E1 AE            		ld		hl,advice_2
    6323   00:68A8  11 A7 1A            		ld		de,#1aa7
    6324   00:68AB  01 12 00            		ld		bc,18
    6325   00:68AE  CD 5C 00            		call	GRABAVRAM
    6326   00:68B1                      		
    6327   00:68B1  C3 4F 69            		jr.		rutina_espera_quemando_2_cont
    6328   00:68B4                      
    6329   00:68B4                      consejo_esp_fase_2:
    6330   00:68B4                      				
    6331   00:68B4  21 13 AE            		ld		hl,consejo_2
    6332   00:68B7  11 A7 1A            		ld		de,#1aa7
    6333   00:68BA  01 12 00            		ld		bc,18
    6334   00:68BD  CD 5C 00            		call	GRABAVRAM
    6335   00:68C0                      		
    6336   00:68C0  C3 4F 69            		jr.		rutina_espera_quemando_2_cont
    6337   00:68C3                      
    6338   00:68C3                      consejos_fase_3:
    6339   00:68C3                      		
    6340   00:68C3  3A 00 C0            		ld		a,(idioma)
    6341   00:68C6  FE 00               		cp		0
    6342   00:68C8  28 0E               		jr.		z,consejo_esp_fase_3
    6343   00:68CA                      
    6344   00:68CA                      consejo_ing_fase_3:
    6345   00:68CA                      
    6346   00:68CA  21 F3 AE            		ld		hl,advice_3
    6347   00:68CD  11 A1 1A            		ld		de,#1aa1
    6348   00:68D0  01 5F 00            		ld		bc,95
    6349   00:68D3  CD 5C 00            		call	GRABAVRAM
    6350   00:68D6                      		
    6351   00:68D6  18 77               		jr.		rutina_espera_quemando_2_cont
    6352   00:68D8                      
    6353   00:68D8                      consejo_esp_fase_3:
    6354   00:68D8                      				
    6355   00:68D8  21 25 AE            		ld		hl,consejo_3
    6356   00:68DB  11 A1 1A            		ld		de,#1aa1
    6357   00:68DE  01 5F 00            		ld		bc,95
    6358   00:68E1  CD 5C 00            		call	GRABAVRAM
    6359   00:68E4                      		
    6360   00:68E4  18 69               		jr.		rutina_espera_quemando_2_cont
    6361   00:68E6                      		
    6362   00:68E6                      consejos_fase_5:
    6363   00:68E6                      		
    6364   00:68E6  3A 00 C0            		ld		a,(idioma)
    6365   00:68E9  FE 00               		cp		0
    6366   00:68EB  28 0E               		jr.		z,consejo_esp_fase_5
    6367   00:68ED                      
    6368   00:68ED                      consejo_ing_fase_5:
    6369   00:68ED                      
    6370   00:68ED  21 51 AF            		ld		hl,advice_5
    6371   00:68F0  11 A1 1A            		ld		de,#1aa1
    6372   00:68F3  01 1E 00            		ld		bc,30
    6373   00:68F6  CD 5C 00            		call	GRABAVRAM
    6374   00:68F9                      		
    6375   00:68F9  18 54               		jr.		rutina_espera_quemando_2_cont
    6376   00:68FB                      
    6377   00:68FB                      consejo_esp_fase_5:
    6378   00:68FB                      				
    6379   00:68FB  21 84 AE            		ld		hl,consejo_5
    6380   00:68FE  11 A1 1A            		ld		de,#1aa1
    6381   00:6901  01 1E 00            		ld		bc,30
    6382   00:6904  CD 5C 00            		call	GRABAVRAM
    6383   00:6907                      		
    6384   00:6907  18 46               		jr.		rutina_espera_quemando_2_cont
    6385   00:6909                      						
    6386   00:6909                      consejos_fase_7:
    6387   00:6909                      		
    6388   00:6909  3A 00 C0            		ld		a,(idioma)
    6389   00:690C  FE 00               		cp		0
    6390   00:690E  28 0E               		jr.		z,consejo_esp_fase_7
    6391   00:6910                      
    6392   00:6910                      consejo_ing_fase_7:
    6393   00:6910                      
    6394   00:6910  21 6F AF            		ld		hl,advice_7
    6395   00:6913  11 A1 1A            		ld		de,#1aa1
    6396   00:6916  01 1E 00            		ld		bc,30
    6397   00:6919  CD 5C 00            		call	GRABAVRAM
    6398   00:691C                      		
    6399   00:691C  18 31               		jr.		rutina_espera_quemando_2_cont
    6400   00:691E                      
    6401   00:691E                      consejo_esp_fase_7:
    6402   00:691E                      				
    6403   00:691E  21 A5 AE            		ld		hl,consejo_7
    6404   00:6921  11 A1 1A            		ld		de,#1aa1
    6405   00:6924  01 1E 00            		ld		bc,30
    6406   00:6927  CD 5C 00            		call	GRABAVRAM
    6407   00:692A                      		
    6408   00:692A  18 23               		jr.		rutina_espera_quemando_2_cont
    6409   00:692C                      
    6410   00:692C                      consejos_fase_10:
    6411   00:692C                      		
    6412   00:692C  3A 00 C0            		ld		a,(idioma)
    6413   00:692F  FE 00               		cp		0
    6414   00:6931  28 0E               		jr.		z,consejo_esp_fase_10
    6415   00:6933                      
    6416   00:6933                      consejo_ing_fase_10:
    6417   00:6933                      
    6418   00:6933  21 8D AF            		ld		hl,advice_10
    6419   00:6936  11 A1 1A            		ld		de,#1aa1
    6420   00:6939  01 1E 00            		ld		bc,30
    6421   00:693C  CD 5C 00            		call	GRABAVRAM
    6422   00:693F                      		
    6423   00:693F  18 0E               		jr.		rutina_espera_quemando_2_cont
    6424   00:6941                      
    6425   00:6941                      consejo_esp_fase_10:
    6426   00:6941                      				
    6427   00:6941  21 C3 AE            		ld		hl,consejo_10
    6428   00:6944  11 A1 1A            		ld		de,#1aa1
    6429   00:6947  01 1E 00            		ld		bc,30
    6430   00:694A  CD 5C 00            		call	GRABAVRAM
    6431   00:694D                      		
    6432   00:694D  18 00               		jr.		rutina_espera_quemando_2_cont
    6433   00:694F                      								
    6434   00:694F                      rutina_espera_quemando_2_cont:
    6435   00:694F                      
    6436   00:694F  CD 44 00            		call	ENASCR
    6437   00:6952                      		
    6438   00:6952  CD 50 4E            		call	activa_musica_entre_fases
    6439   00:6955                      				
    6440   00:6955  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6441   00:6959                      				
    6442   00:6959                      paseito_entre_fases:		
    6443   00:6959                      		
    6444   00:6959  76 76               [2]		halt
    6445   00:695B                      		
    6446   00:695B  3E 08               		ld		a,8
    6447   00:695D  DD 77 07            		ld		(ix+7),a
    6448   00:6960  3E 01               		ld		a,1
    6449   00:6962  DD 77 03            		ld		(ix+3),a
    6450   00:6965  3E 09               		ld		a,9
    6451   00:6967  DD 77 0B            		ld		(ix+11),a
    6452   00:696A                      		
    6453   00:696A  3A 12 C0            		ld		a,(py)
    6454   00:696D  DD 77 00            		ld		(ix),a
    6455   00:6970  C6 07               		add		a,7
    6456   00:6972  DD 77 04            		ld		(ix+4),a
    6457   00:6975  D6 10               		sub		a,16
    6458   00:6977  DD 77 08            		ld		(ix+8),a
    6459   00:697A  AF                  		xor		a
    6460   00:697B  DD 77 02            		ld		(ix+2),a
    6461   00:697E  C6 04               		add		a,4
    6462   00:6980  DD 77 06            		ld		(ix+6),a
    6463   00:6983  C6 04               		add		a,4
    6464   00:6985  DD 77 0A            		ld		(ix+10),a
    6465   00:6988  3A 11 C0            		ld		a,(px)
    6466   00:698B  C6 02               		add		a,2
    6467   00:698D  DD 77 01            		ld		(ix+1),a
    6468   00:6990  DD 77 05            		ld		(ix+5),a
    6469   00:6993  DD 77 09            		ld		(ix+9),a
    6470   00:6996  32 11 C0            		ld		(px),a
    6471   00:6999                      		
    6472   00:6999  CD D4 57            		call	atributos_sprites
    6473   00:699C                      		
    6474   00:699C  76 76               [2]		halt
    6475   00:699E                      		
    6476   00:699E  3E 0C               		ld		a,12
    6477   00:69A0  DD 77 02            		ld		(ix+2),a
    6478   00:69A3  C6 04               		add		a,4
    6479   00:69A5  DD 77 06            		ld		(ix+6),a
    6480   00:69A8  C6 04               		add		a,4
    6481   00:69AA  DD 77 0A            		ld		(ix+10),a
    6482   00:69AD  3A 11 C0            		ld		a,(px)
    6483   00:69B0  C6 02               		add		a,2
    6484   00:69B2  32 11 C0            		ld		(px),a
    6485   00:69B5  DD 77 01            		ld		(ix+1),a
    6486   00:69B8  DD 77 05            		ld		(ix+5),a
    6487   00:69BB  DD 77 09            		ld		(ix+9),a
    6488   00:69BE                      		
    6489   00:69BE  CD D4 57            		call	atributos_sprites
    6490   00:69C1                      		
    6491   00:69C1  3A 11 C0            		ld		a,(px)
    6492   00:69C4  FE DE               		cp		222
    6493   00:69C6  38 91               		jr.		c,paseito_entre_fases
    6494   00:69C8                      				
    6495   00:69C8  CD 1F 45            		call	limpia_sprites
    6496   00:69CB                      				
    6497   00:69CB  C9                  		ret	
    6498   00:69CC                      
    6499   00:69CC                      movimiento_serpientes:
    6500   00:69CC                      		
    6501   00:69CC  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6502   00:69D0                      		
    6503   00:69D0                      analiza_serpiente_1:
    6504   00:69D0                      		
    6505   00:69D0  3A 6D C3            		ld		a,(serp1)
    6506   00:69D3  FE 00               		cp		0
    6507   00:69D5  28 2E               		jp.		z,analiza_serpiente_2
    6508   00:69D7                      		
    6509   00:69D7  FD 21 48 C3         		ld		iy,variables_serpiente_1
    6510   00:69DB                      		
    6511   00:69DB  CD A4 6A            		call	rutina_de_movimiento_serpientes
    6512   00:69DE                      			
    6513   00:69DE                      detalla_atributos_serp_1:
    6514   00:69DE                      
    6515   00:69DE  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6516   00:69E2                      
    6517   00:69E2  DD 77 12            		ld		(ix+18),a
    6518   00:69E5  DD 70 16            		ld		(ix+22),b
    6519   00:69E8  FD 7E 00            		ld		a,(iy)
    6520   00:69EB  DD 77 11            		ld		(ix+17),a
    6521   00:69EE  DD 77 15            		ld		(ix+21),a
    6522   00:69F1  FD 7E 01            		ld		a,(iy+1)
    6523   00:69F4  DD 77 10            		ld		(ix+16),a
    6524   00:69F7  DD 77 14            		ld		(ix+20),a
    6525   00:69FA  FD 7E 04            		ld		a,(iy+4)
    6526   00:69FD  DD 77 13            		ld		(ix+19),a
    6527   00:6A00  3E 01               		ld		a,1
    6528   00:6A02  DD 77 17            		ld		(ix+23),a
    6529   00:6A05                      		
    6530   00:6A05                      analiza_serpiente_2:
    6531   00:6A05                      
    6532   00:6A05                      		
    6533   00:6A05  3A 6E C3            		ld		a,(serp2)
    6534   00:6A08  FE 00               		cp		0
    6535   00:6A0A  28 2E               		jp.		z,analiza_serpiente_3
    6536   00:6A0C                      		
    6537   00:6A0C  FD 21 51 C3         		ld		iy,variables_serpiente_2
    6538   00:6A10                      
    6539   00:6A10  CD A4 6A            		call	rutina_de_movimiento_serpientes
    6540   00:6A13                      			
    6541   00:6A13                      detalla_atributos_serp_2:
    6542   00:6A13                      
    6543   00:6A13  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6544   00:6A17                      		
    6545   00:6A17  DD 77 1A            		ld		(ix+26),a
    6546   00:6A1A  DD 70 1E            		ld		(ix+30),b
    6547   00:6A1D  FD 7E 00            		ld		a,(iy)
    6548   00:6A20  DD 77 19            		ld		(ix+25),a
    6549   00:6A23  DD 77 1D            		ld		(ix+29),a
    6550   00:6A26  FD 7E 01            		ld		a,(iy+1)
    6551   00:6A29  DD 77 18            		ld		(ix+24),a
    6552   00:6A2C  DD 77 1C            		ld		(ix+28),a
    6553   00:6A2F  FD 7E 04            		ld		a,(iy+4)
    6554   00:6A32  DD 77 1B            		ld		(ix+27),a
    6555   00:6A35  3E 01               		ld		a,1
    6556   00:6A37  DD 77 1F            		ld		(ix+31),a
    6557   00:6A3A                      		
    6558   00:6A3A                      analiza_serpiente_3:		
    6559   00:6A3A                      		
    6560   00:6A3A  3A 6F C3            		ld		a,(serp3)
    6561   00:6A3D  FE 00               		cp		0
    6562   00:6A3F  28 2E               		jp.		z,analiza_serpiente_4
    6563   00:6A41                      		
    6564   00:6A41  FD 21 5A C3         		ld		iy,variables_serpiente_3
    6565   00:6A45                      		
    6566   00:6A45  CD A4 6A            		call	rutina_de_movimiento_serpientes
    6567   00:6A48                      			
    6568   00:6A48                      detalla_atributos_serp_3:
    6569   00:6A48                      
    6570   00:6A48  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6571   00:6A4C                      		
    6572   00:6A4C  DD 77 22            		ld		(ix+34),a
    6573   00:6A4F  DD 70 26            		ld		(ix+38),b
    6574   00:6A52  FD 7E 00            		ld		a,(iy)
    6575   00:6A55  DD 77 21            		ld		(ix+33),a
    6576   00:6A58  DD 77 25            		ld		(ix+37),a
    6577   00:6A5B  FD 7E 01            		ld		a,(iy+1)
    6578   00:6A5E  DD 77 20            		ld		(ix+32),a
    6579   00:6A61  DD 77 24            		ld		(ix+36),a
    6580   00:6A64  FD 7E 04            		ld		a,(iy+4)
    6581   00:6A67  DD 77 23            		ld		(ix+35),a
    6582   00:6A6A  3E 01               		ld		a,1
    6583   00:6A6C  DD 77 27            		ld		(ix+39),a
    6584   00:6A6F                      		
    6585   00:6A6F                      analiza_serpiente_4:
    6586   00:6A6F                      	
    6587   00:6A6F  3A 70 C3            		ld		a,(serp4)
    6588   00:6A72  FE 00               		cp		0
    6589   00:6A74  C8                  		ret		z
    6590   00:6A75                      		
    6591   00:6A75  FD 21 63 C3         		ld		iy,variables_serpiente_4
    6592   00:6A79                      		
    6593   00:6A79  CD A4 6A            		call	rutina_de_movimiento_serpientes
    6594   00:6A7C                      			
    6595   00:6A7C                      detalla_atributos_serp_4:
    6596   00:6A7C                      
    6597   00:6A7C  DD 21 20 C0         		ld		ix,atributos_sprite_general
    6598   00:6A80                      		
    6599   00:6A80  DD 77 2A            		ld		(ix+42),a
    6600   00:6A83  DD 70 2E            		ld		(ix+46),b
    6601   00:6A86  FD 7E 00            		ld		a,(iy)
    6602   00:6A89  DD 77 29            		ld		(ix+41),a
    6603   00:6A8C  DD 77 2D            		ld		(ix+45),a
    6604   00:6A8F  FD 7E 01            		ld		a,(iy+1)
    6605   00:6A92  DD 77 28            		ld		(ix+40),a
    6606   00:6A95  DD 77 2C            		ld		(ix+44),a
    6607   00:6A98  FD 7E 04            		ld		a,(iy+4)
    6608   00:6A9B  DD 77 2B            		ld		(ix+43),a
    6609   00:6A9E  3E 01               		ld		a,1
    6610   00:6AA0  DD 77 2F            		ld		(ix+47),a
    6611   00:6AA3                      		
    6612   00:6AA3  C9                  		ret
    6613   00:6AA4                      		
    6614   00:6AA4                      rutina_de_movimiento_serpientes:
    6615   00:6AA4                      		
    6616   00:6AA4  FD 7E 02            		ld		a,(iy+2)
    6617   00:6AA7  FE 00               		cp		0
    6618   00:6AA9  20 2C               		jr.		nz,suma_x_serpiente
    6619   00:6AAB                      
    6620   00:6AAB                      resta_x_serpiente:
    6621   00:6AAB                      
    6622   00:6AAB  FD 7E 08            		ld		a,(iy+8)
    6623   00:6AAE  3D                  		dec		a
    6624   00:6AAF  FD 77 08            		ld		(iy+8),a
    6625   00:6AB2  FE 00               		cp		0
    6626   00:6AB4  20 5B               		jr.		nz,pose_serp
    6627   00:6AB6                      		
    6628   00:6AB6  FD 7E 07            		ld		a,(iy+7)
    6629   00:6AB9  FD 77 08            		ld		(iy+8),a
    6630   00:6ABC                      		
    6631   00:6ABC  FD 7E 00            		ld		a,[iy]
    6632   00:6ABF  3D                  		dec		a														
    6633   00:6AC0  57                  		ld		d,a
    6634   00:6AC1  FD 7E 01            		ld		a,[iy+1]
    6635   00:6AC4  C6 0F               		add		15
    6636   00:6AC6  5F                  		ld		e,a
    6637   00:6AC7  CD 8D 5C            		call	get_bloque_en_X_Y
    6638   00:6ACA                      		
    6639   00:6ACA  FE 1F               		cp		31
    6640   00:6ACC  38 36               		jr.		c,serp_cambia_paso_a_derecha
    6641   00:6ACE                      		
    6642   00:6ACE  FD 7E 00            		ld		a,(iy)
    6643   00:6AD1  3D                  		dec		a
    6644   00:6AD2  FD 77 00            		ld		(iy),a
    6645   00:6AD5  18 3A               		jr.		pose_serp
    6646   00:6AD7                      		
    6647   00:6AD7                      suma_x_serpiente:
    6648   00:6AD7                      
    6649   00:6AD7  FD 7E 08            		ld		a,(iy+8)
    6650   00:6ADA  3D                  		dec		a
    6651   00:6ADB  FD 77 08            		ld		(iy+8),a
    6652   00:6ADE  FE 00               		cp		0
    6653   00:6AE0  20 2F               		jr.		nz,pose_serp
    6654   00:6AE2                      		
    6655   00:6AE2  FD 7E 07            		ld		a,(iy+7)
    6656   00:6AE5  FD 77 08            		ld		(iy+8),a
    6657   00:6AE8                      		
    6658   00:6AE8  FD 7E 00            		ld		a,[iy]
    6659   00:6AEB  C6 10               		add		16														
    6660   00:6AED  57                  		ld		d,a
    6661   00:6AEE  FD 7E 01            		ld		a,[iy+1]
    6662   00:6AF1  C6 0F               		add		15
    6663   00:6AF3  5F                  		ld		e,a
    6664   00:6AF4  CD 8D 5C            		call	get_bloque_en_X_Y
    6665   00:6AF7                      		
    6666   00:6AF7  FE 1F               		cp		31
    6667   00:6AF9  38 10               		jr.		c,serp_cambia_paso_a_izquierda
    6668   00:6AFB                      		
    6669   00:6AFB  FD 7E 00            		ld		a,(iy)
    6670   00:6AFE  3C                  		inc		a
    6671   00:6AFF  FD 77 00            		ld		(iy),a
    6672   00:6B02  18 0D               		jr.		pose_serp
    6673   00:6B04                      		
    6674   00:6B04                      serp_cambia_paso_a_derecha:
    6675   00:6B04                      
    6676   00:6B04  3E 01               		ld		a,1
    6677   00:6B06  FD 77 02            		ld		(iy+2),a
    6678   00:6B09  18 06               		jr.		pose_serp
    6679   00:6B0B                      		
    6680   00:6B0B                      serp_cambia_paso_a_izquierda:
    6681   00:6B0B                      
    6682   00:6B0B  AF                  		xor		a
    6683   00:6B0C  FD 77 02            		ld		(iy+2),a
    6684   00:6B0F  18 00               		jr.		pose_serp
    6685   00:6B11                      
    6686   00:6B11                      pose_serp:
    6687   00:6B11                      
    6688   00:6B11  FD 7E 06            		ld		a,(iy+6)
    6689   00:6B14  3D                  		dec		a
    6690   00:6B15  FD 77 06            		ld		(iy+6),a
    6691   00:6B18  FE 00               		cp		0
    6692   00:6B1A  20 18               		jr.		nz,elegir_sprite_serp
    6693   00:6B1C                      
    6694   00:6B1C  FD 7E 05            		ld		a,(iy+5)
    6695   00:6B1F  FD 77 06            		ld		(iy+6),a
    6696   00:6B22                      		
    6697   00:6B22  FD 7E 03            		ld		a,(iy+3)
    6698   00:6B25  FE 00               		cp		0
    6699   00:6B27  20 07               		jr.		nz,paso_2_serp
    6700   00:6B29                      		
    6701   00:6B29                      paso_1_serp:
    6702   00:6B29                      
    6703   00:6B29  3E 01               		ld		a,1
    6704   00:6B2B  FD 77 03            		ld		(iy+3),a
    6705   00:6B2E                      		
    6706   00:6B2E  18 04               		jr.		elegir_sprite_serp
    6707   00:6B30                      		
    6708   00:6B30                      paso_2_serp:
    6709   00:6B30                      
    6710   00:6B30  AF                  		xor		a
    6711   00:6B31  FD 77 03            		ld		(iy+3),a
    6712   00:6B34                      		
    6713   00:6B34                      elegir_sprite_serp:
    6714   00:6B34                      
    6715   00:6B34  FD 7E 02            		ld		a,(iy+2)
    6716   00:6B37  FE 00               		cp		0
    6717   00:6B39  20 11               		jr.		nz,suma_direccion_1_serp
    6718   00:6B3B                      		
    6719   00:6B3B                      suma_direccion_0_serp:
    6720   00:6B3B                      
    6721   00:6B3B  FD 7E 03            		ld		a,(iy+3)
    6722   00:6B3E  FE 00               		cp		0
    6723   00:6B40  20 05               		jr.		nz,suma_paso_01_serp
    6724   00:6B42                      		
    6725   00:6B42                      suma_paso_00_serp:
    6726   00:6B42                      
    6727   00:6B42  3E 64               		ld		a,25*4
    6728   00:6B44  06 74               		ld		b,29*4
    6729   00:6B46  C9                  		ret
    6730   00:6B47                      
    6731   00:6B47                      suma_paso_01_serp:
    6732   00:6B47                      		
    6733   00:6B47  3E 68               		ld		a,26*4
    6734   00:6B49  06 78               		ld		b,30*4
    6735   00:6B4B  C9                  		ret
    6736   00:6B4C                      		
    6737   00:6B4C                      suma_direccion_1_serp:
    6738   00:6B4C                      
    6739   00:6B4C  FD 7E 03            		ld		a,(iy+3)
    6740   00:6B4F  FE 00               		cp		0
    6741   00:6B51  20 05               		jr.		nz,suma_paso_11_serp
    6742   00:6B53                      
    6743   00:6B53                      suma_paso_10_serp:
    6744   00:6B53                      
    6745   00:6B53  3E 6C               		ld		a,27*4
    6746   00:6B55  06 7C               		ld		b,31*4
    6747   00:6B57  C9                  		ret
    6748   00:6B58                      
    6749   00:6B58                      suma_paso_11_serp:
    6750   00:6B58                      
    6751   00:6B58  3E 70               		ld		a,28*4
    6752   00:6B5A  06 80               		ld		b,32*4
    6753   00:6B5C  C9                  		ret	
    6754   00:6B5D                      
    6755   00:6B5D                      seis_diez:
    6756   00:6B5D                      
    6757   00:6B5D  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6758   00:6B60  C6 06               		add		6
    6759   00:6B62  57                  		ld		d,a
    6760   00:6B63  3A 12 C0            		ld		a,[py]
    6761   00:6B66  C6 0A               		add		10
    6762   00:6B68  5F                  		ld		e,a
    6763   00:6B69                      		
    6764   00:6B69  C9                  		ret	
    6765   00:6B6A                      		
    6766   00:6B6A                      dos_diez:
    6767   00:6B6A                      
    6768   00:6B6A  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6769   00:6B6D  C6 02               		add		2
    6770   00:6B6F  57                  		ld		d,a
    6771   00:6B70  3A 12 C0            		ld		a,[py]
    6772   00:6B73  C6 0A               		add		10
    6773   00:6B75  5F                  		ld		e,a
    6774   00:6B76                      		
    6775   00:6B76  C9                  		ret		
    6776   00:6B77                      
    6777   00:6B77                      menos_dos_diez:
    6778   00:6B77                      
    6779   00:6B77  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6780   00:6B7A  D6 02               		sub		2
    6781   00:6B7C  57                  		ld		d,a
    6782   00:6B7D  3A 12 C0            		ld		a,[py]
    6783   00:6B80  C6 0A               		add		10
    6784   00:6B82  5F                  		ld		e,a
    6785   00:6B83                      		
    6786   00:6B83  C9                  		ret		
    6787   00:6B84                      
    6788   00:6B84                      seis_dos:
    6789   00:6B84                      
    6790   00:6B84  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6791   00:6B87  C6 06               		add		6
    6792   00:6B89  57                  		ld		d,a
    6793   00:6B8A  3A 12 C0            		ld		a,[py]
    6794   00:6B8D  C6 02               		add		2
    6795   00:6B8F  5F                  		ld		e,a
    6796   00:6B90                      		
    6797   00:6B90  C9                  		ret
    6798   00:6B91                      
    6799   00:6B91                      cero_cero:
    6800   00:6B91                      		
    6801   00:6B91  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6802   00:6B94  57                  		ld		d,a
    6803   00:6B95  3A 12 C0            		ld		a,[py]
    6804   00:6B98  5F                  		ld		e,a
    6805   00:6B99                      		
    6806   00:6B99  C9                  		ret
    6807   00:6B9A                      
    6808   00:6B9A                      siete_diecisiete:
    6809   00:6B9A                      		
    6810   00:6B9A  3A 11 C0            		ld		a,[px]
    6811   00:6B9D  C6 07               		add		7					;para buffer y vram moviendo 6 y 10						
    6812   00:6B9F  57                  		ld		d,a
    6813   00:6BA0  3A 12 C0            		ld		a,[py]
    6814   00:6BA3  C6 11               		add		17
    6815   00:6BA5  5F                  		ld		e,a
    6816   00:6BA6                      		
    6817   00:6BA6  C9                  		ret
    6818   00:6BA7                      menos_uno_dieciseis:
    6819   00:6BA7                      		
    6820   00:6BA7  3A 11 C0            		ld		a,[px]
    6821   00:6BAA  3D                  		dec		a					;para buffer y vram moviendo 6 y 10						
    6822   00:6BAB  57                  		ld		d,a
    6823   00:6BAC  3A 12 C0            		ld		a,[py]
    6824   00:6BAF  C6 10               		add		16
    6825   00:6BB1  5F                  		ld		e,a
    6826   00:6BB2                      		
    6827   00:6BB2  C9                  		ret
    6828   00:6BB3                      		
    6829   00:6BB3                      dieciseis_dieciseis:
    6830   00:6BB3                      		
    6831   00:6BB3  3A 11 C0            		ld		a,[px]
    6832   00:6BB6  C6 10               		add		16					;para buffer y vram moviendo 6 y 10						
    6833   00:6BB8  57                  		ld		d,a
    6834   00:6BB9  3A 12 C0            		ld		a,[py]
    6835   00:6BBC  C6 10               		add		16
    6836   00:6BBE  5F                  		ld		e,a
    6837   00:6BBF                      		
    6838   00:6BBF  C9                  		ret
    6839   00:6BC0                      		
    6840   00:6BC0                      menos_dos_dieciocho:
    6841   00:6BC0                      		
    6842   00:6BC0  3A 11 C0            		ld		a,[px]
    6843   00:6BC3  D6 02               		sub		2					;para buffer y vram moviendo -2 y 18						
    6844   00:6BC5  57                  		ld		d,a
    6845   00:6BC6  3A 12 C0            		ld		a,[py]
    6846   00:6BC9  C6 12               		add		18
    6847   00:6BCB  5F                  		ld		e,a
    6848   00:6BCC                      		
    6849   00:6BCC  C9                  		ret
    6850   00:6BCD                      				
    6851   00:6BCD                      catorce_diez:
    6852   00:6BCD                      		
    6853   00:6BCD  3A 11 C0            		ld		a,[px]
    6854   00:6BD0  C6 0E               		add		14					;para buffer y vram moviendo 14 y 10						
    6855   00:6BD2  57                  		ld		d,a
    6856   00:6BD3  3A 12 C0            		ld		a,[py]
    6857   00:6BD6  C6 0A               		add		10
    6858   00:6BD8  5F                  		ld		e,a
    6859   00:6BD9                      		
    6860   00:6BD9  C9                  		ret
    6861   00:6BDA                      
    6862   00:6BDA                      catorce_dos:
    6863   00:6BDA                      		
    6864   00:6BDA  3A 11 C0            		ld		a,[px]
    6865   00:6BDD  C6 0E               		add		14					;para buffer y vram moviendo 14 y 22						
    6866   00:6BDF  57                  		ld		d,a
    6867   00:6BE0  3A 12 C0            		ld		a,[py]
    6868   00:6BE3  C6 02               		add		2
    6869   00:6BE5  5F                  		ld		e,a
    6870   00:6BE6                      		
    6871   00:6BE6  C9                  		ret
    6872   00:6BE7                      				
    6873   00:6BE7                      catorce_dieciocho:
    6874   00:6BE7                      		
    6875   00:6BE7  3A 11 C0            		ld		a,[px]
    6876   00:6BEA  C6 0E               		add		14					;para buffer y vram moviendo 14 y 18						
    6877   00:6BEC  57                  		ld		d,a
    6878   00:6BED  3A 12 C0            		ld		a,[py]
    6879   00:6BF0  C6 12               		add		18
    6880   00:6BF2  5F                  		ld		e,a
    6881   00:6BF3                      		
    6882   00:6BF3  C9                  		ret
    6883   00:6BF4                      		
    6884   00:6BF4                      veinte_diez:
    6885   00:6BF4                      		
    6886   00:6BF4  3A 11 C0            		ld		a,[px]
    6887   00:6BF7  C6 14               		add		20					;para buffer y vram moviendo 6 y 10						
    6888   00:6BF9  57                  		ld		d,a
    6889   00:6BFA  3A 12 C0            		ld		a,[py]
    6890   00:6BFD  C6 0A               		add		10
    6891   00:6BFF  5F                  		ld		e,a
    6892   00:6C00                      		
    6893   00:6C00  C9                  		ret
    6894   00:6C01                      
    6895   00:6C01                      veintidos_diez:
    6896   00:6C01                      		
    6897   00:6C01  3A 11 C0            		ld		a,[px]
    6898   00:6C04  C6 16               		add		22					;para buffer y vram moviendo 6 y 10						
    6899   00:6C06  57                  		ld		d,a
    6900   00:6C07  3A 12 C0            		ld		a,[py]
    6901   00:6C0A  C6 0A               		add		10
    6902   00:6C0C  5F                  		ld		e,a
    6903   00:6C0D                      		
    6904   00:6C0D  C9                  		ret
    6905   00:6C0E                      				
    6906   00:6C0E                      menos_diez_diez:
    6907   00:6C0E                      		
    6908   00:6C0E  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6909   00:6C11  D6 0A               		sub		10
    6910   00:6C13  57                  		ld		d,a
    6911   00:6C14  3A 12 C0            		ld		a,[py]
    6912   00:6C17  C6 0A               		add		10
    6913   00:6C19  5F                  		ld		e,a
    6914   00:6C1A                      		
    6915   00:6C1A  C9                  		ret
    6916   00:6C1B                      		
    6917   00:6C1B                      seis_dieciocho:
    6918   00:6C1B                      		
    6919   00:6C1B  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6920   00:6C1E  C6 06               		add		6
    6921   00:6C20  57                  		ld		d,a
    6922   00:6C21  3A 12 C0            		ld		a,[py]
    6923   00:6C24  C6 12               		add		18
    6924   00:6C26  5F                  		ld		e,a
    6925   00:6C27                      		
    6926   00:6C27  C9                  		ret
    6927   00:6C28                      
    6928   00:6C28                      menos_diez_dieciocho:
    6929   00:6C28                      		
    6930   00:6C28  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6931   00:6C2B  D6 0A               		sub		10
    6932   00:6C2D  57                  		ld		d,a
    6933   00:6C2E  3A 12 C0            		ld		a,[py]
    6934   00:6C31  C6 12               		add		18
    6935   00:6C33  5F                  		ld		e,a
    6936   00:6C34                      		
    6937   00:6C34  C9                  		ret
    6938   00:6C35                      
    6939   00:6C35                      tres_quince:
    6940   00:6C35                      		
    6941   00:6C35  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 3 y 15	
    6942   00:6C38  C6 03               		add		3
    6943   00:6C3A  57                  		ld		d,a
    6944   00:6C3B  3A 12 C0            		ld		a,[py]
    6945   00:6C3E  C6 0F               		add		15
    6946   00:6C40  5F                  		ld		e,a
    6947   00:6C41                      		
    6948   00:6C41  C9                  		ret
    6949   00:6C42                      
    6950   00:6C42                      tres_dos:
    6951   00:6C42  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 3 y 2
    6952   00:6C45  C6 03               		add		3
    6953   00:6C47  57                  		ld		d,a
    6954   00:6C48  3A 12 C0            		ld		a,[py]
    6955   00:6C4B  C6 02               		add		2
    6956   00:6C4D  5F                  		ld		e,a
    6957   00:6C4E                      		
    6958   00:6C4E  C9                  		ret
    6959   00:6C4F                      				
    6960   00:6C4F                      cero_dieciocho:
    6961   00:6C4F                      		
    6962   00:6C4F  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6963   00:6C52  57                  		ld		d,a
    6964   00:6C53  3A 12 C0            		ld		a,[py]
    6965   00:6C56  C6 12               		add		18
    6966   00:6C58  5F                  		ld		e,a
    6967   00:6C59                      		
    6968   00:6C59  C9                  		ret
    6969   00:6C5A                      		
    6970   00:6C5A                      ocho_dieciocho:
    6971   00:6C5A  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6972   00:6C5D  C6 08               		add		8
    6973   00:6C5F  57                  		ld		d,a
    6974   00:6C60  3A 12 C0            		ld		a,[py]
    6975   00:6C63  C6 12               		add		18
    6976   00:6C65  5F                  		ld		e,a
    6977   00:6C66                      		
    6978   00:6C66  C9                  		ret
    6979   00:6C67                      		
    6980   00:6C67                      ocho_uno:
    6981   00:6C67                      
    6982   00:6C67  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    6983   00:6C6A  C6 08               		add		8
    6984   00:6C6C  57                  		ld		d,a
    6985   00:6C6D  3A 12 C0            		ld		a,[py]
    6986   00:6C70  3C                  		inc		a
    6987   00:6C71  5F                  		ld		e,a
    6988   00:6C72                      		
    6989   00:6C72  C9                  		ret
    6990   00:6C73                      				
    6991   00:6C73                      dieciseis_quince:
    6992   00:6C73                      
    6993   00:6C73  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 16 y 15						
    6994   00:6C76  C6 10               		add		16
    6995   00:6C78  57                  		ld		d,a
    6996   00:6C79  3A 12 C0            		ld		a,[py]
    6997   00:6C7C  C6 0F               		add		15
    6998   00:6C7E  5F                  		ld		e,a
    6999   00:6C7F                      		
    7000   00:6C7F  C9                  		ret
    7001   00:6C80                      
    7002   00:6C80                      dieciseis_dos:
    7003   00:6C80                      
    7004   00:6C80  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 16 y 2						
    7005   00:6C83  C6 10               		add		16
    7006   00:6C85  57                  		ld		d,a
    7007   00:6C86  3A 12 C0            		ld		a,[py]
    7008   00:6C89  C6 02               		add		2
    7009   00:6C8B  5F                  		ld		e,a
    7010   00:6C8C                      		
    7011   00:6C8C  C9                  		ret
    7012   00:6C8D                      				
    7013   00:6C8D                      uno_menos_cuatro:
    7014   00:6C8D                      
    7015   00:6C8D  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    7016   00:6C90  3C                  		inc		a
    7017   00:6C91  57                  		ld		d,a
    7018   00:6C92  3A 12 C0            		ld		a,[py]
    7019   00:6C95  D6 04               		sub		4
    7020   00:6C97  5F                  		ld		e,a
    7021   00:6C98                      		
    7022   00:6C98  C9                  		ret
    7023   00:6C99                      		
    7024   00:6C99                      menos_uno_quince:
    7025   00:6C99                      
    7026   00:6C99  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo 6 y 10						
    7027   00:6C9C  3D                  		dec		a
    7028   00:6C9D  57                  		ld		d,a
    7029   00:6C9E  3A 12 C0            		ld		a,[py]
    7030   00:6CA1  C6 0F               		add		15
    7031   00:6CA3  5F                  		ld		e,a
    7032   00:6CA4                      		
    7033   00:6CA4  C9                  		ret
    7034   00:6CA5                      
    7035   00:6CA5                      menos_uno_dos:
    7036   00:6CA5                      
    7037   00:6CA5  3A 11 C0            		ld		a,[px]					;para buffer y vram moviendo -1 y 2						
    7038   00:6CA8  3D                  		dec		a
    7039   00:6CA9  57                  		ld		d,a
    7040   00:6CAA  3A 12 C0            		ld		a,[py]
    7041   00:6CAD  C6 02               		add		2
    7042   00:6CAF  5F                  		ld		e,a
    7043   00:6CB0                      		
    7044   00:6CB0  C9                  		ret
    7045   00:6CB1                      
    7046   00:6CB1                      pinta_en_pantalla:
    7047   00:6CB1                      
    7048   00:6CB1  11 00 18            		ld		de,#1800				;borra de pantalla el cuchillo cogido
    7049   00:6CB4  19                  		add		hl,de
    7050   00:6CB5  E5                  		push	hl
    7051   00:6CB6  32 EE EE            		ld		[#eeee],a
    7052   00:6CB9  21 EE EE            		ld		hl,#eeee
    7053   00:6CBC  D1                  		pop		de
    7054   00:6CBD  01 01 00            		ld		bc,1
    7055   00:6CC0  CD 5C 00            		call	GRABAVRAM
    7056   00:6CC3                      		
    7057   00:6CC3  C9                  		ret
    7058   00:6CC4                      				
    7059   00:6CC4                      efecto_sonido:
    7060   00:6CC4                      		
    7061   00:6CC4  4F                  		ld		c,a
    7062   00:6CC5  CD 7D 74            		call	ayFX_INIT
    7063   00:6CC8  C9                  		ret
    7064   00:6CC9                      		
    7065   00:6CC9                      		;DESCOMPRESORES
    7066   00:6CC9                      
    7067   00:6CC9                      depack_VRAM:		
    7068   00:6CC9                      
    7069   00:6CC9                      		include "PL_VRAM_Depack_SJASM.asm"						; hl=ram/rom fuente de=vram destino
       1.  00:6CC9                      ;-----------------------------------------------------------
       2.  00:6CC9                      ; Pletter v0.5b VRAM Depacker v1.1 - 16Kb version
       3.  00:6CC9                      ; HL = RAM/ROM source ; DE = VRAM destination
       4.  00:6CC9                      ;-----------------------------------------------------------
       5.  00:6CC9  F3                  	di
       6.  00:6CCA                      
       7.  00:6CCA                      ; VRAM address setup
       8.  00:6CCA  7B                  	ld	a,e
       9.  00:6CCB  D3 99               	out	[099h],a
      10.  00:6CCD  7A                  	ld	a,d
      11.  00:6CCE  F6 40               	or	040h
      12.  00:6CD0  D3 99               	out	[099h],a
      13.  00:6CD2                      
      14.  00:6CD2                      ; Initialization
      15.  00:6CD2  7E                  	ld	a,[hl]
      16.  00:6CD3  23                  	inc	hl
      17.  00:6CD4  D9                  	exx
      18.  00:6CD5  11 00 00            	ld	de,0
      19.  00:6CD8  87                  	add	a,a
      20.  00:6CD9  3C                  	inc	a
      21.  00:6CDA  CB 13               	rl	e
      22.  00:6CDC  87                  	add	a,a
      23.  00:6CDD  CB 13               	rl	e
      24.  00:6CDF  87                  	add	a,a
      25.  00:6CE0  CB 13               	rl	e
      26.  00:6CE2  CB 13               	rl	e
      27.  00:6CE4  21 9B 6D            	ld	hl,modes
      28.  00:6CE7  19                  	add	hl,de
      29.  00:6CE8  5E                  	ld	e,[hl]
      30.  00:6CE9  DD 6B               	ld	ixl,e
      31.  00:6CEB  23                  	inc	hl
      32.  00:6CEC  5E                  	ld	e,[hl]
      33.  00:6CED  DD 63               	ld	ixh,e
      34.  00:6CEF  1E 01               	ld	e,1
      35.  00:6CF1  D9                  	exx
      36.  00:6CF2  FD 21 FB 6C         	ld	iy,loop
      37.  00:6CF6                      
      38.  00:6CF6                      ; Main depack loop
      39.  00:6CF6  0E 98               literal:ld	c,098h
      40.  00:6CF8  ED A3               	outi
      41.  00:6CFA  13                  	inc	de
      42.  00:6CFB  87                  loop:	add	a,a
      43.  00:6CFC  CC 8F 6D              	call	z,getbit
      44.  00:6CFF  30 F5               	jr	nc,literal
      45.  00:6D01                      
      46.  00:6D01                      ; Compressed data
      47.  00:6D01  D9                  	exx
      48.  00:6D02  62                  	ld	h,d
      49.  00:6D03  6B                  	ld	l,e
      50.  00:6D04  87                  getlen: add	a,a
      51.  00:6D05  CC 93 6D            	call	z,getbitexx
      52.  00:6D08  30 1D               	jr	nc,lenok
      53.  00:6D0A  87                  lus:	add	a,a
      54.  00:6D0B  CC 93 6D            	call	z,getbitexx
      55.  00:6D0E  ED 6A               	adc	hl,hl
      56.  00:6D10  D8                  	ret	c
      57.  00:6D11  87                  	add	a,a
      58.  00:6D12  CC 93 6D            	call	z,getbitexx
      59.  00:6D15  30 10               	jr	nc,lenok
      60.  00:6D17  87                  	add	a,a
      61.  00:6D18  CC 93 6D            	call	z,getbitexx
      62.  00:6D1B  ED 6A               	adc	hl,hl
      63.  00:6D1D  DA 99 6D            	jp	c,Depack_out
      64.  00:6D20  87                  	add	a,a
      65.  00:6D21  CC 93 6D            	call	z,getbitexx
      66.  00:6D24  DA 0A 6D            	jp	c,lus
      67.  00:6D27  23                  lenok:  inc	hl
      68.  00:6D28  D9                  	exx
      69.  00:6D29  4E                  	ld	c,[hl]
      70.  00:6D2A  23                  	inc	hl
      71.  00:6D2B  06 00               	ld	b,0
      72.  00:6D2D  CB 79               	bit	7,c
      73.  00:6D2F  CA 62 6D            	jp	z,offsok
      74.  00:6D32  DD E9               	jp	ix
      75.  00:6D34                      
      76.  00:6D34  87                  mode7:  add	a,a
      77.  00:6D35  CC 8F 6D              	call	z,getbit
      78.  00:6D38  CB 10               	rl	b
      79.  00:6D3A  87                  mode6:	add	a,a
      80.  00:6D3B  CC 8F 6D              	call	z,getbit
      81.  00:6D3E  CB 10               	rl	b
      82.  00:6D40  87                  mode5:  add	a,a
      83.  00:6D41  CC 8F 6D              	call	z,getbit
      84.  00:6D44  CB 10               	rl	b
      85.  00:6D46  87                  mode4:  add	a,a
      86.  00:6D47  CC 8F 6D              	call	z,getbit
      87.  00:6D4A  CB 10               	rl	b
      88.  00:6D4C  87                  mode3:  add	a,a
      89.  00:6D4D  CC 8F 6D              	call	z,getbit
      90.  00:6D50  CB 10               	rl	b
      91.  00:6D52  87                  mode2:	add	a,a
      92.  00:6D53  CC 8F 6D              	call	z,getbit
      93.  00:6D56  CB 10               	rl	b
      94.  00:6D58  87                  	add	a,a
      95.  00:6D59  CC 8F 6D              	call	z,getbit
      96.  00:6D5C  30 04               	jr	nc,offsok
      97.  00:6D5E  B7                  	or	a
      98.  00:6D5F  04                  	inc	b
      99.  00:6D60  CB B9               	res	7,c
     100.  00:6D62  03                  offsok: inc	bc
     101.  00:6D63  E5                  	push	hl
     102.  00:6D64  D9                  	exx
     103.  00:6D65  E5                  	push	hl
     104.  00:6D66  D9                  	exx
     105.  00:6D67  6B                  	ld	l,e
     106.  00:6D68  62                  	ld	h,d
     107.  00:6D69  ED 42               	sbc	hl,bc
     108.  00:6D6B  C1                  	pop	bc
     109.  00:6D6C  F5                  	push	af
     110.  00:6D6D  7D                  .loop:	ld	a,l
     111.  00:6D6E  D3 99               	out	[099h],a
     112.  00:6D70  7C                  	ld	a,h
     113.  00:6D71  00                  	nop                     ; VDP timing
     114.  00:6D72  D3 99               	out	[099h],a
     115.  00:6D74  00                  	nop                     ; VDP timing
     116.  00:6D75  DB 98               	in	a,[098h]
     117.  00:6D77  08                  	ex	af,af'
     118.  00:6D78  7B                  	ld	a,e
     119.  00:6D79  00                  	nop			; VDP timing
     120.  00:6D7A  D3 99               	out	[099h],a
     121.  00:6D7C  7A                  	ld	a,d
     122.  00:6D7D  F6 40               	or	040h
     123.  00:6D7F  D3 99               	out	[099h],a
     124.  00:6D81  08                  	ex	af,af'
     125.  00:6D82  00                  	nop			; VDP timing
     126.  00:6D83  D3 98               	out	[098h],a
     127.  00:6D85  13                  	inc	de
     128.  00:6D86  ED A1               	cpi
     129.  00:6D88  EA 6D 6D            	jp	pe,.loop
     130.  00:6D8B  F1                  	pop	af
     131.  00:6D8C  E1                  	pop	hl
     132.  00:6D8D  FD E9               	jp	iy
     133.  00:6D8F                      
     134.  00:6D8F  7E                  getbit: ld	a,[hl]
     135.  00:6D90  23                  	inc	hl
     136.  00:6D91  17                  	rla
     137.  00:6D92  C9                  	ret
     138.  00:6D93                      
     139.  00:6D93                      getbitexx:
     140.  00:6D93  D9                  	exx
     141.  00:6D94  7E                  	ld	a,[hl]
     142.  00:6D95  23                  	inc	hl
     143.  00:6D96  D9                  	exx
     144.  00:6D97  17                  	rla
     145.  00:6D98  C9                  	ret
     146.  00:6D99                      
     147.  00:6D99                      ; Depacker exit
     148.  00:6D99                      Depack_out:
     149.  00:6D99  FB                  	ei
     150.  00:6D9A  C9                  	ret
     151.  00:6D9B                      
     152.  00:6D9B                      modes:
     153.  00:6D9B  62 6D               	dw	offsok
     154.  00:6D9D  52 6D               	dw	mode2
     155.  00:6D9F  4C 6D               	dw	mode3
     156.  00:6DA1  46 6D               	dw	mode4
     157.  00:6DA3  40 6D               	dw	mode5
     158.  00:6DA5  3A 6D               	dw	mode6
     159.  00:6DA7  34 6D               	dw	mode7
    7070   00:6DA9                      
    7071   00:6DA9                      depack:
    7072   00:6DA9                      
    7073   00:6DA9                      		include	"unpack.asm"									; hl=ram/rom fuente de=ram destino
       1.  00:6DA9                      ; pletter v0.5c msx unpacker
       2.  00:6DA9                      
       3.  00:6DA9                      ; call unpack with hl pointing to some pletter5 data, and de pointing to the destination.
       4.  00:6DA9                      ; changes all registers
       5.  00:6DA9                      
       6.  00:6DA9                      ; define lengthindata when the original size is written in the pletter data
       7.  00:6DA9                      
       8.  00:6DA9                      ;  define LENGTHINDATA
       9.  00:6DA9                      
      10.  00:6DA9                        module pletter
      11.  00:6DA9                      
      12.  00:6DA9                        macro GETBIT
      13.  00:6DA9                    <   add a,a
      14.  00:6DA9                    <   call z,getbit
      15.  00:6DA9                    <   endmacro
      16.  00:6DA9                      
      17.  00:6DA9                        macro GETBITEXX
      18.  00:6DA9                    <   add a,a
      19.  00:6DA9                    <   call z,getbitexx
      20.  00:6DA9                    <   endmacro
      21.  00:6DA9                      
      22.  00:6DA9                      @unpack
      23.  00:6DA9                      
      24.  00:6DA9                        ifdef LENGTHINDATA
      25.  00:6DA9                    ~   inc hl
      26.  00:6DA9                    ~   inc hl
      27.  00:6DA9                    ~   endif
      28.  00:6DA9                      
      29.  00:6DA9  7E                    ld a,(hl)
      30.  00:6DAA  23                    inc hl
      31.  00:6DAB  D9                    exx
      32.  00:6DAC  11 00 00              ld de,0
      33.  00:6DAF  87                    add a,a
      34.  00:6DB0  3C                    inc a
      35.  00:6DB1  CB 13                 rl e
      36.  00:6DB3  87                    add a,a
      37.  00:6DB4  CB 13                 rl e
      38.  00:6DB6  87                    add a,a
      39.  00:6DB7  CB 13                 rl e
      40.  00:6DB9  CB 13                 rl e
      41.  00:6DBB  21 47 6E              ld hl,modes
      42.  00:6DBE  19                    add hl,de
      43.  00:6DBF  5E                    ld e,(hl)
      44.  00:6DC0  DD 6B                 ld ixl,e
      45.  00:6DC2  23                    inc hl
      46.  00:6DC3  5E                    ld e,(hl)
      47.  00:6DC4  DD 63                 ld ixh,e
      48.  00:6DC6  1E 01                 ld e,1
      49.  00:6DC8  D9                    exx
      50.  00:6DC9  FD 21 CF 6D           ld iy,loop
      51.  00:6DCD                      literal
      52.  00:6DCD  ED A0                 ldi
      53.  00:6DCF                      loop
      54.  00:6DCF                        GETBIT
      54.  00:6DCF  87                >   add a,a
      54.  00:6DD0  CC 3D 6E          >   call z,getbit
      55.  00:6DD3  30 F8                 jr nc,literal
      56.  00:6DD5  D9                    exx
      57.  00:6DD6  62                    ld h,d
      58.  00:6DD7  6B                    ld l,e
      59.  00:6DD8                      getlen
      60.  00:6DD8                        GETBITEXX
      60.  00:6DD8  87                >   add a,a
      60.  00:6DD9  CC 41 6E          >   call z,getbitexx
      61.  00:6DDC  30 1B                 jr nc,.lenok
      62.  00:6DDE                      .lus
      63.  00:6DDE                        GETBITEXX
      63.  00:6DDE  87                >   add a,a
      63.  00:6DDF  CC 41 6E          >   call z,getbitexx
      64.  00:6DE2  ED 6A                 adc hl,hl
      65.  00:6DE4  D8                    ret c
      66.  00:6DE5                        GETBITEXX
      66.  00:6DE5  87                >   add a,a
      66.  00:6DE6  CC 41 6E          >   call z,getbitexx
      67.  00:6DE9  30 0E                 jr nc,.lenok
      68.  00:6DEB                        GETBITEXX
      68.  00:6DEB  87                >   add a,a
      68.  00:6DEC  CC 41 6E          >   call z,getbitexx
      69.  00:6DEF  ED 6A                 adc hl,hl
      70.  00:6DF1  D8                    ret c
      71.  00:6DF2                        GETBITEXX
      71.  00:6DF2  87                >   add a,a
      71.  00:6DF3  CC 41 6E          >   call z,getbitexx
      72.  00:6DF6  DA DE 6D              jp c,.lus
      73.  00:6DF9                      .lenok
      74.  00:6DF9  23                    inc hl
      75.  00:6DFA  D9                    exx
      76.  00:6DFB  4E                    ld c,(hl)
      77.  00:6DFC  23                    inc hl
      78.  00:6DFD  06 00                 ld b,0
      79.  00:6DFF  CB 79                 bit 7,c
      80.  00:6E01  CA 2E 6E              jp z,offsok
      81.  00:6E04  DD E9                 jp ix
      82.  00:6E06                      
      83.  00:6E06                      mode6
      84.  00:6E06                        GETBIT
      84.  00:6E06  87                >   add a,a
      84.  00:6E07  CC 3D 6E          >   call z,getbit
      85.  00:6E0A  CB 10                 rl b
      86.  00:6E0C                      mode5
      87.  00:6E0C                        GETBIT
      87.  00:6E0C  87                >   add a,a
      87.  00:6E0D  CC 3D 6E          >   call z,getbit
      88.  00:6E10  CB 10                 rl b
      89.  00:6E12                      mode4
      90.  00:6E12                        GETBIT
      90.  00:6E12  87                >   add a,a
      90.  00:6E13  CC 3D 6E          >   call z,getbit
      91.  00:6E16  CB 10                 rl b
      92.  00:6E18                      mode3
      93.  00:6E18                        GETBIT
      93.  00:6E18  87                >   add a,a
      93.  00:6E19  CC 3D 6E          >   call z,getbit
      94.  00:6E1C  CB 10                 rl b
      95.  00:6E1E                      mode2
      96.  00:6E1E                        GETBIT
      96.  00:6E1E  87                >   add a,a
      96.  00:6E1F  CC 3D 6E          >   call z,getbit
      97.  00:6E22  CB 10                 rl b
      98.  00:6E24                        GETBIT
      98.  00:6E24  87                >   add a,a
      98.  00:6E25  CC 3D 6E          >   call z,getbit
      99.  00:6E28  30 04                 jr nc,offsok
     100.  00:6E2A  B7                    or a
     101.  00:6E2B  04                    inc b
     102.  00:6E2C  CB B9                 res 7,c
     103.  00:6E2E                      offsok
     104.  00:6E2E  03                    inc bc
     105.  00:6E2F  E5                    push hl
     106.  00:6E30  D9                    exx
     107.  00:6E31  E5                    push hl
     108.  00:6E32  D9                    exx
     109.  00:6E33  6B                    ld l,e
     110.  00:6E34  62                    ld h,d
     111.  00:6E35  ED 42                 sbc hl,bc
     112.  00:6E37  C1                    pop bc
     113.  00:6E38  ED B0                 ldir
     114.  00:6E3A  E1                    pop hl
     115.  00:6E3B  FD E9                 jp iy
     116.  00:6E3D                      
     117.  00:6E3D                      getbit
     118.  00:6E3D  7E                    ld a,(hl)
     119.  00:6E3E  23                    inc hl
     120.  00:6E3F  17                    rla
     121.  00:6E40  C9                    ret
     122.  00:6E41                      
     123.  00:6E41                      getbitexx
     124.  00:6E41  D9                    exx
     125.  00:6E42  7E                    ld a,(hl)
     126.  00:6E43  23                    inc hl
     127.  00:6E44  D9                    exx
     128.  00:6E45  17                    rla
     129.  00:6E46  C9                    ret
     130.  00:6E47                      
     131.  00:6E47                      modes
     132.  00:6E47  2E 6E                 word offsok
     133.  00:6E49  1E 6E                 word mode2
     134.  00:6E4B  18 6E                 word mode3
     135.  00:6E4D  12 6E                 word mode4
     136.  00:6E4F  0C 6E                 word mode5
     137.  00:6E51  06 6E                 word mode6
     138.  00:6E53                      
     139.  00:6E53                        endmodule
     140.  00:6E53                      
     141.  00:6E53                      ;eof
    7074   00:6E53                      
    7075   00:6E53                      		;la instrucción que dejaremos en lugar del gancho
    7076   00:6E53                      		
    7077   00:6E53                      nuestra_isr:
    7078   00:6E53                      
    7079   00:6E53  CD C1 73            		call	PT3_ROUT												;envia los datos a los registros del PSG
    7080   00:6E56  CD C9 72            		call	PT3_PLAY												;calcula el siguiente trozo de música que será enviado la próxima vez
    7081   00:6E59  CD B3 74            		call	ayFX_PLAY												;calcula el siguiente trozo de efecto que será enviado la próxima vez
    7082   00:6E5C  C3 07 C0            		jp		VIEJA_INTERR											;ahora se va a ejecutar la original que había en el gancho
    7083   00:6E5F                      		
    7084   00:6E5F                      		;gancho area salvada
    7085   00:6E5F                      		
    7086   00:6E5F                      		;MUSICA Y EFECTOS
    7087   00:6E5F                      		
    7088   00:6E5F                      		include 	"PT3-ROM_sjasm.asm"									;incluye el codigo del reproductor de PT3 (musica)
       1.  00:6E5F                      		; --- PT3 REPLAYER WORKING ON ROM ---
       2.  00:6E5F                      		; --- Can be assembled with asMSX ---
       3.  00:6E5F                      		; --- ROM version: MSX-KUN        ---
       4.  00:6E5F                      		; --- asMSX version 2: SapphiRe   ---
       5.  00:6E5F                      
       6.  00:6E5F                      ; Based on MSX full version of PT3 by Dioniso
       7.  00:6E5F                      ;
       8.  00:6E5F                      ; This version of the replayer can be used with any note table
       9.  00:6E5F                      ; This version also allows the use of PT3 commands
      10.  00:6E5F                      ; First 99 bytes of each PT3 module should be stripped off
      11.  00:6E5F                      ;
      12.  00:6E5F                      ; PLAY and PSG WRITE routines seperated to allow independent calls
      13.  00:6E5F                      ;
      14.  00:6E5F                      ; ROM LENGTH: 1549 bytes
      15.  00:6E5F                      ; RAM LENGTH:  576 bytes
      16.  00:6E5F                      
      17.  00:6E5F                      
      18.  00:6E5F                      
      19.  00:6E5F                      ;SJASM version by BTV 2016
      20.  00:6E5F                      
      21.  00:6E5F                      
      22.  00:6E5F                      		; --- CONSTANT VALUES DEFINITION ---
      23.  00:6E5F                      
      24.  00:6E5F                      ;ChannelsVars
      25.  00:6E5F                      ;struc	CHNPRM
      26.  00:6E5F                      ;reset group
      27.  00:6E5F  (00:0000)           CHNPRM_PsInOr	equ 0	;RESB 1
      28.  00:6E5F  (00:0001)           CHNPRM_PsInSm	equ 1	;RESB 1
      29.  00:6E5F  (00:0002)           CHNPRM_CrAmSl	equ 2	;RESB 1
      30.  00:6E5F  (00:0003)           CHNPRM_CrNsSl	equ 3	;RESB 1
      31.  00:6E5F  (00:0004)           CHNPRM_CrEnSl	equ 4	;RESB 1
      32.  00:6E5F  (00:0005)           CHNPRM_TSlCnt	equ 5	;RESB 1
      33.  00:6E5F  (00:0006)           CHNPRM_CrTnSl	equ 6	;RESW 1
      34.  00:6E5F  (00:0008)           CHNPRM_TnAcc	equ 8	;RESW 1
      35.  00:6E5F  (00:000A)           CHNPRM_COnOff	equ 10	;RESB 1
      36.  00:6E5F                      ;reset group
      37.  00:6E5F                      
      38.  00:6E5F  (00:000B)           CHNPRM_OnOffD	equ 11	;RESB 1
      39.  00:6E5F                      
      40.  00:6E5F                      ;IX for PTDECOD here [+12]
      41.  00:6E5F  (00:000C)           CHNPRM_OffOnD	equ 12	;RESB 1
      42.  00:6E5F  (00:000D)           CHNPRM_OrnPtr	equ 13	;RESW 1
      43.  00:6E5F  (00:000F)           CHNPRM_SamPtr	equ 15	;RESW 1
      44.  00:6E5F  (00:0011)           CHNPRM_NNtSkp	equ 17	;RESB 1
      45.  00:6E5F  (00:0012)           CHNPRM_Note	equ 18	;RESB 1
      46.  00:6E5F  (00:0013)           CHNPRM_SlToNt	equ 19	;RESB 1
      47.  00:6E5F  (00:0014)           CHNPRM_Env_En	equ 20	;RESB 1
      48.  00:6E5F  (00:0015)           CHNPRM_Flags	equ 21	;RESB 1
      49.  00:6E5F                       ;Enabled - 0,SimpleGliss - 2
      50.  00:6E5F  (00:0016)           CHNPRM_TnSlDl	equ 22	;RESB 1
      51.  00:6E5F  (00:0017)           CHNPRM_TSlStp	equ 23	;RESW 1
      52.  00:6E5F  (00:0019)           CHNPRM_TnDelt	equ 25	;RESW 1
      53.  00:6E5F  (00:001B)           CHNPRM_NtSkCn	equ 27	;RESB 1
      54.  00:6E5F  (00:001C)           CHNPRM_Volume	equ 28	;RESB 1
      55.  00:6E5F  (00:001D)           CHNPRM_Size	equ 29	;RESB 1
      56.  00:6E5F                      ;endstruc
      57.  00:6E5F                      
      58.  00:6E5F                      ;struc	AR
      59.  00:6E5F  (00:0000)           AR_TonA		equ 0	;RESW 1
      60.  00:6E5F  (00:0002)           AR_TonB		equ 2	;RESW 1
      61.  00:6E5F  (00:0004)           AR_TonC		equ 4	;RESW 1
      62.  00:6E5F  (00:0006)           AR_Noise	equ 6	;RESB 1
      63.  00:6E5F  (00:0007)           AR_Mixer	equ 7	;RESB 1
      64.  00:6E5F  (00:0008)           AR_AmplA	equ 8	;RESB 1
      65.  00:6E5F  (00:0009)           AR_AmplB	equ 9	;RESB 1
      66.  00:6E5F  (00:000A)           AR_AmplC	equ 10	;RESB 1
      67.  00:6E5F  (00:000B)           AR_Env		equ 11	;RESW 1
      68.  00:6E5F  (00:000D)           AR_EnvTp	equ 13	;RESB 1
      69.  00:6E5F                      ;endstruc
      70.  00:6E5F                      
      71.  00:6E5F                      		; --- CODE STARTS HERE ---
      72.  00:6E5F                      
      73.  00:6E5F  21 00 F0            CHECKLP:	LD	HL,PT3_SETUP
      74.  00:6E62  CB FE               		SET	7,[HL]
      75.  00:6E64  CB 46               		BIT	0,[HL]
      76.  00:6E66  C8                  		RET	Z
      77.  00:6E67  E1                  		POP	HL
      78.  00:6E68  21 7A F0            		LD	HL,DelyCnt
      79.  00:6E6B  34                  		INC	[HL]
      80.  00:6E6C  21 3E F0            		LD	HL,ChanA+CHNPRM_NtSkCn
      81.  00:6E6F  34                  		INC	[HL]
      82.  00:6E70  AF                  PT3_MUTE:	XOR	A
      83.  00:6E71  67                  		LD	H,A
      84.  00:6E72  6F                  		LD	L,A
      85.  00:6E73  32 48 F1            		LD	[AYREGS+AR_AmplA],A
      86.  00:6E76  22 49 F1            		LD	[AYREGS+AR_AmplB],HL
      87.  00:6E79  C3 C2 73            		JP	ROUT_A0
      88.  00:6E7C                      
      89.  00:6E7C                      PT3_INIT:	;HL - AddressOfModule - 100
      90.  00:6E7C  22 01 F0            		LD [PT3_MODADDR],HL
      91.  00:6E7F  E5                  		PUSH HL
      92.  00:6E80  11 64 00            		LD DE,100
      93.  00:6E83  19                  		ADD HL,DE
      94.  00:6E84  7E                  		LD A,[HL]
      95.  00:6E85  32 1C F0            		LD [PT3_Delay],A
      96.  00:6E88  E5                  		PUSH HL
      97.  00:6E89  DD E1               		POP IX
      98.  00:6E8B  19                  		ADD HL,DE
      99.  00:6E8C  22 03 F0            		LD [PT3_CrPsPtr],HL
     100.  00:6E8F  DD 5E 02            		LD E,[IX+102-100]
     101.  00:6E92  19                  		ADD HL,DE
     102.  00:6E93  23                  		INC HL
     103.  00:6E94  22 18 F0            		LD [PT3_LPosPtr],HL
     104.  00:6E97  D1                  		POP DE
     105.  00:6E98  DD 6E 03            		LD L,[IX+103-100]
     106.  00:6E9B  DD 66 04            		LD H,[IX+104-100]
     107.  00:6E9E  19                  		ADD HL,DE
     108.  00:6E9F  22 1A F0            		LD [PT3_PatsPtr],HL
     109.  00:6EA2  21 A9 00            		LD HL,169
     110.  00:6EA5  19                  		ADD HL,DE
     111.  00:6EA6  22 07 F0            		LD [PT3_OrnPtrs],HL
     112.  00:6EA9  21 69 00            		LD HL,105
     113.  00:6EAC  19                  		ADD HL,DE
     114.  00:6EAD  22 05 F0            		LD [PT3_SAMPTRS],HL
     115.  00:6EB0  21 00 F0            		LD HL,PT3_SETUP
     116.  00:6EB3  CB BE               		RES 7,[HL]
     117.  00:6EB5                      
     118.  00:6EB5                      		; --- note table data depacker ---
     119.  00:6EB5                      		; Depacks first 12 tones of each tone table
     120.  00:6EB5                      
     121.  00:6EB5  11 36 74            		LD DE,T_PACK
     122.  00:6EB8  01 B1 F1            		LD BC,T1_+(2*49)-1
     123.  00:6EBB  1A                  .TP_0:		LD A,[DE]
     124.  00:6EBC  13                  		INC DE
     125.  00:6EBD  FE 1E               		CP 15*2
     126.  00:6EBF  30 06               		JR NC,.TP_1
     127.  00:6EC1  67                  		LD H,A
     128.  00:6EC2  1A                  		LD A,[DE]
     129.  00:6EC3  6F                  		LD L,A
     130.  00:6EC4  13                  		INC DE
     131.  00:6EC5  18 07               		JR .TP_2
     132.  00:6EC7  D5                  .TP_1:		PUSH DE
     133.  00:6EC8  16 00               		LD D,0
     134.  00:6ECA  5F                  		LD E,A
     135.  00:6ECB  19                  		ADD HL,DE
     136.  00:6ECC  19                  		ADD HL,DE
     137.  00:6ECD  D1                  		POP DE
     138.  00:6ECE  7C                  .TP_2:		LD A,H
     139.  00:6ECF  02                  		LD [BC],A
     140.  00:6ED0  0B                  		DEC BC
     141.  00:6ED1  7D                  		LD A,L
     142.  00:6ED2  02                  		LD [BC],A
     143.  00:6ED3  0B                  		DEC BC
     144.  00:6ED4  D6 F0               		SUB $F0
     145.  00:6ED6  20 E3               		JR NZ,.TP_0
     146.  00:6ED8                      
     147.  00:6ED8                      		; --- INITIALIZE PT3 VARIABLES ---
     148.  00:6ED8  21 23 F0            		LD HL,VARS
     149.  00:6EDB  77                  		LD [HL],A
     150.  00:6EDC  11 24 F0            		LD DE,VARS+1
     151.  00:6EDF  01 2C 01            		LD BC,VAR0END-VARS-1
     152.  00:6EE2  ED B0               		LDIR
     153.  00:6EE4                      
     154.  00:6EE4  3C                  		INC A
     155.  00:6EE5  32 7A F0            		LD [DelyCnt],A
     156.  00:6EE8  21 01 F0            		LD HL,$F001 ;H - CHNPRM_Volume, L - CHNPRM_NtSkCn
     157.  00:6EEB  22 3E F0            		LD [ChanA+CHNPRM_NtSkCn],HL
     158.  00:6EEE  22 5B F0            		LD [ChanB+CHNPRM_NtSkCn],HL
     159.  00:6EF1  22 78 F0            		LD [ChanC+CHNPRM_NtSkCn],HL
     160.  00:6EF4                      
     161.  00:6EF4  21 32 74            		LD HL,EMPTYSAMORN
     162.  00:6EF7  22 12 F0            		LD [PT3_AdInPtA],HL ;ptr to zero
     163.  00:6EFA  22 30 F0            		LD [ChanA+CHNPRM_OrnPtr],HL ;ornament 0 is "0,1,0"
     164.  00:6EFD  22 4D F0            		LD [ChanB+CHNPRM_OrnPtr],HL ;in all versions from
     165.  00:6F00  22 6A F0            		LD [ChanC+CHNPRM_OrnPtr],HL ;3.xx to 3.6x and VTII
     166.  00:6F03                      
     167.  00:6F03  22 32 F0            		LD [ChanA+CHNPRM_SamPtr],HL ;S1 There is no default
     168.  00:6F06  22 4F F0            		LD [ChanB+CHNPRM_SamPtr],HL ;S2 sample in PT3, so, you
     169.  00:6F09  22 6C F0            		LD [ChanC+CHNPRM_SamPtr],HL ;S3 can comment S1,2,3; see
     170.  00:6F0C                      					    ;also EMPTYSAMORN comment
     171.  00:6F0C                      
     172.  00:6F0C                      		; --- NOTE TABLE CREATOR (c) Ivan Roshin, adapted by SapphiRe ---
     173.  00:6F0C  DD 7E FF            		LD A,[IX+99-100] ;TONE TABLE NUMBER
     174.  00:6F0F  17                  		RLA
     175.  00:6F10  E6 07               		AND 7
     176.  00:6F12  21 E2 73            		LD HL,NT_DATA
     177.  00:6F15  D5                  		PUSH DE
     178.  00:6F16  50                  		LD D,B		; ld d,0 (bc is 0000 after LDIR)
     179.  00:6F17  87                  		ADD A,A
     180.  00:6F18  5F                  		LD E,A
     181.  00:6F19  19                  		ADD HL,DE	; hl -> init of correct note table data
     182.  00:6F1A  5E                  		LD E,[HL]
     183.  00:6F1B  23                  		INC HL
     184.  00:6F1C  CB 3B               		SRL E
     185.  00:6F1E  9F                  		SBC A,A
     186.  00:6F1F  E6 A7               		AND $A7			;$00 (NOP) or $A7 (AND A)
     187.  00:6F21  32 21 F0            		LD [PT3_NTL3],A		; CORRECT INSTRUCTION, DEPENDS OF SELECTED TABLE
     188.  00:6F24  3E C9               		LD A,$C9		; RET CODE
     189.  00:6F26  32 22 F0            		LD [PT3_NTL3+1],A	; RET PLACED
     190.  00:6F29  EB                  		EX DE,HL
     191.  00:6F2A  C1                  		POP BC ;BC=T1_
     192.  00:6F2B  09                  		ADD HL,BC
     193.  00:6F2C                      
     194.  00:6F2C  1A                  		LD A,[DE]                           
     195.  00:6F2D                      
     196.  00:6F2D  01 F2 73            		LD BC,T_
     197.  00:6F30  81                  		ADD A,C
     198.  00:6F31  4F                  		LD C,A
     199.  00:6F32  88                  		ADC A,B
     200.  00:6F33                      
     201.  00:6F33  91                  		SUB C
     202.  00:6F34  47                  		LD B,A
     203.  00:6F35  C5                  		PUSH BC
     204.  00:6F36  11 80 F0            		LD DE,NT_
     205.  00:6F39  D5                  		PUSH DE
     206.  00:6F3A                      
     207.  00:6F3A  06 0C               		LD B,12
     208.  00:6F3C  C5                  .L1:		PUSH BC
     209.  00:6F3D  4E                  		LD C,[HL]
     210.  00:6F3E  23                  		INC HL
     211.  00:6F3F  E5                  		PUSH HL
     212.  00:6F40  46                  		LD B,[HL]
     213.  00:6F41                      
     214.  00:6F41  D5                  		PUSH DE
     215.  00:6F42  EB                  		EX DE,HL
     216.  00:6F43  11 17 00            		LD DE,23
     217.  00:6F46  DD 26 08            		db $DD,$26,$08	;LD XH,8
     218.  00:6F49                      
     219.  00:6F49  CB 38               .L2:		SRL B
     220.  00:6F4B  CB 19               		RR C
     221.  00:6F4D  CD 21 F0            .L3:		CALL PT3_NTL3	;AND A or NOP
     222.  00:6F50  79                  		LD A,C
     223.  00:6F51  8A                  		ADC A,D	;=ADC 0
     224.  00:6F52  77                  		LD [HL],A
     225.  00:6F53  23                  		INC HL
     226.  00:6F54  78                  		LD A,B
     227.  00:6F55  8A                  		ADC A,D
     228.  00:6F56  77                  		LD [HL],A
     229.  00:6F57  19                  		ADD HL,DE
     230.  00:6F58  DD 25               		db $DD,$25	;DEC XH
     231.  00:6F5A  20 ED               		JR NZ,.L2
     232.  00:6F5C                      
     233.  00:6F5C  D1                  		POP DE
     234.  00:6F5D  13                  		INC DE
     235.  00:6F5E  13                  		INC DE
     236.  00:6F5F  E1                  		POP HL
     237.  00:6F60  23                  		INC HL
     238.  00:6F61  C1                  		POP BC
     239.  00:6F62  10 D8               		DJNZ .L1
     240.  00:6F64                      
     241.  00:6F64  E1                  		POP HL
     242.  00:6F65  D1                  		POP DE
     243.  00:6F66                      
     244.  00:6F66  7B                  		LD A,E
     245.  00:6F67  D5                  		PUSH DE
     246.  00:6F68  11 FE 73            		LD DE,TCOLD_1
     247.  00:6F6B  BB                  		CP E
     248.  00:6F6C  D1                  		POP DE
     249.  00:6F6D  20 05               		JR NZ,.CORR_1
     250.  00:6F6F  3E FD               		LD A,$FD
     251.  00:6F71  32 AE F0            		LD [NT_+$2E],A
     252.  00:6F74                      
     253.  00:6F74  1A                  .CORR_1:	LD A,[DE]
     254.  00:6F75  A7                  		AND A
     255.  00:6F76  28 11               		JR Z,.TC_EXIT
     256.  00:6F78  1F                  		RRA
     257.  00:6F79  F5                  		PUSH AF
     258.  00:6F7A  87                  		ADD A,A
     259.  00:6F7B  4F                  		LD C,A
     260.  00:6F7C  09                  		ADD HL,BC
     261.  00:6F7D  F1                  		POP AF
     262.  00:6F7E  30 02               		JR NC,.CORR_2
     263.  00:6F80  35                  		DEC [HL]
     264.  00:6F81  35                  		DEC [HL]
     265.  00:6F82  34                  .CORR_2:	INC [HL]
     266.  00:6F83  A7                  		AND A
     267.  00:6F84  ED 42               		SBC HL,BC
     268.  00:6F86  13                  		INC DE
     269.  00:6F87  18 EB               		JR .CORR_1
     270.  00:6F89                      
     271.  00:6F89                      .TC_EXIT:	;POP AF
     272.  00:6F89                      
     273.  00:6F89                      		; --- CREATE PT3 VOLUME TABLE (c) Ivan Roshin, adapted by SapphiRe ---
     274.  00:6F89  21 11 00            		ld	hl,$11
     275.  00:6F8C  54                  		ld	d,h
     276.  00:6F8D  5C                  		ld	e,h
     277.  00:6F8E  DD 21 50 F1         		ld	IX,VT_+16
     278.  00:6F92  06 0F               		ld	b,15
     279.  00:6F94  E5                  .INITV1:	push	hl
     280.  00:6F95  19                  		add	hl,de
     281.  00:6F96  EB                  		ex	de,hl
     282.  00:6F97  ED 62               		sbc	hl,hl
     283.  00:6F99  48                  		ld	c,b
     284.  00:6F9A  06 10               		ld	b,16
     285.  00:6F9C  7D                  .INITV2:	ld	a,l
     286.  00:6F9D  17                  		rla
     287.  00:6F9E  7C                  		ld	a,h
     288.  00:6F9F  CE 00               		adc	a,0
     289.  00:6FA1  DD 77 00            		ld	[ix],a
     290.  00:6FA4  DD 23               		inc	ix
     291.  00:6FA6  19                  		add	hl,de
     292.  00:6FA7  10 F3               		djnz	.INITV2
     293.  00:6FA9  E1                  		pop	hl
     294.  00:6FAA  7B                  		ld	a,e
     295.  00:6FAB  FE 77               		cp	$77
     296.  00:6FAD  20 01               		jr	nz,.INITV3
     297.  00:6FAF  1C                  		inc	e
     298.  00:6FB0  41                  .INITV3:	ld	b,c
     299.  00:6FB1  10 E1               		djnz	.INITV1
     300.  00:6FB3                      
     301.  00:6FB3  C9                  		RET
     302.  00:6FB4                      
     303.  00:6FB4                      		;pattern decoder
     304.  00:6FB4  DD 36 08 00         PD_OrSm:	LD [IX+(CHNPRM_Env_En-12)],0
     305.  00:6FB8  CD 3E 71            		CALL SETORN
     306.  00:6FBB  0A                  		LD A,[BC]
     307.  00:6FBC  03                  		INC BC
     308.  00:6FBD  0F                  		RRCA
     309.  00:6FBE                      
     310.  00:6FBE  87                  PD_SAM:		ADD A,A
     311.  00:6FBF  5F                  PD_SAM_:	LD E,A
     312.  00:6FC0  16 00               		LD D,0
     313.  00:6FC2  2A 05 F0            		LD HL,[PT3_SAMPTRS]
     314.  00:6FC5  19                  		ADD HL,DE
     315.  00:6FC6  5E                  		LD E,[HL]
     316.  00:6FC7  23                  		INC HL
     317.  00:6FC8  56                  		LD D,[HL]
     318.  00:6FC9  2A 01 F0            		LD HL,[PT3_MODADDR]
     319.  00:6FCC  19                  		ADD HL,DE
     320.  00:6FCD  DD 75 03            		LD [IX+(CHNPRM_SamPtr-12)],L
     321.  00:6FD0  DD 74 04            		LD [IX+(CHNPRM_SamPtr+1-12)],H
     322.  00:6FD3  18 41               		JR PD_LOOP
     323.  00:6FD5                      
     324.  00:6FD5  07                  PD_VOL:		RLCA
     325.  00:6FD6  07                  		RLCA
     326.  00:6FD7  07                  		RLCA
     327.  00:6FD8  07                  		RLCA
     328.  00:6FD9  DD 77 10            		LD [IX+(CHNPRM_Volume-12)],A
     329.  00:6FDC  18 3B               		JR PD_LP2
     330.  00:6FDE                      	
     331.  00:6FDE  DD 77 08            PD_EOff:	LD [IX+(CHNPRM_Env_En-12)],A
     332.  00:6FE1  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     333.  00:6FE4  18 33               		JR PD_LP2
     334.  00:6FE6                      
     335.  00:6FE6  3D                  PD_SorE:	DEC A
     336.  00:6FE7  20 07               		JR NZ,PD_ENV
     337.  00:6FE9  0A                  		LD A,[BC]
     338.  00:6FEA  03                  		INC BC
     339.  00:6FEB  DD 77 05            		LD [IX+(CHNPRM_NNtSkp-12)],A
     340.  00:6FEE  18 29               		JR PD_LP2
     341.  00:6FF0                      
     342.  00:6FF0  CD 22 71            PD_ENV:		CALL SETENV
     343.  00:6FF3  18 24               		JR PD_LP2
     344.  00:6FF5                      
     345.  00:6FF5  CD 3E 71            PD_ORN:		CALL SETORN
     346.  00:6FF8  18 1C               		JR PD_LOOP
     347.  00:6FFA                             
     348.  00:6FFA  DD 77 08            PD_ESAM:	LD [IX+(CHNPRM_Env_En-12)],A
     349.  00:6FFD  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     350.  00:7000  C4 22 71            		CALL NZ,SETENV
     351.  00:7003  0A                  		LD A,[BC]
     352.  00:7004  03                  		INC BC
     353.  00:7005  18 B8               		JR PD_SAM_
     354.  00:7007                      
     355.  00:7007  DD 7E 06            PTDECOD:	LD A,[IX+(CHNPRM_Note-12)]
     356.  00:700A  32 0F F0            		LD [PT3_PrNote],A
     357.  00:700D  DD 6E FA            		LD L,[IX+(CHNPRM_CrTnSl-12)]
     358.  00:7010  DD 66 FB            		LD H,[IX+(CHNPRM_CrTnSl+1-12)]
     359.  00:7013  22 10 F0            		LD [PT3_PrSlide],HL
     360.  00:7016                      
     361.  00:7016  11 10 20            PD_LOOP:	LD DE,$2010
     362.  00:7019  0A                  PD_LP2:		LD A,[BC]
     363.  00:701A  03                  		INC BC
     364.  00:701B  83                  		ADD A,E
     365.  00:701C  38 96               		JR C,PD_OrSm
     366.  00:701E  82                  		ADD A,D
     367.  00:701F  28 4A               		JR Z,PD_FIN
     368.  00:7021  38 9B               		JR C,PD_SAM
     369.  00:7023  83                  		ADD A,E
     370.  00:7024  28 25               		JR Z,PD_REL
     371.  00:7026  38 AD               		JR C,PD_VOL
     372.  00:7028  83                  		ADD A,E
     373.  00:7029  28 B3               		JR Z,PD_EOff
     374.  00:702B  38 B9               		JR C,PD_SorE
     375.  00:702D  C6 60               		ADD A,96
     376.  00:702F  38 20               		JR C,PD_NOTE
     377.  00:7031  83                  		ADD A,E
     378.  00:7032  38 C1               		JR C,PD_ORN
     379.  00:7034  82                  		ADD A,D
     380.  00:7035  38 0F               		JR C,PD_NOIS
     381.  00:7037  83                  		ADD A,E
     382.  00:7038  38 C0               		JR C,PD_ESAM
     383.  00:703A  87                  		ADD A,A
     384.  00:703B  5F                  		LD E,A
     385.  00:703C  21 77 50            		LD HL,(SPCCOMS+$DF20) % 65536	; Adapted from original Speccy version (saves 6 bytes)
     386.  00:703F  19                  		ADD HL,DE
     387.  00:7040  5E                  		LD E,[HL]
     388.  00:7041  23                  		INC HL
     389.  00:7042  56                  		LD D,[HL]
     390.  00:7043  D5                  		PUSH DE
     391.  00:7044  18 D0               		JR PD_LOOP
     392.  00:7046                      
     393.  00:7046  32 7E F0            PD_NOIS:	LD [Ns_Base],A
     394.  00:7049  18 CE               		JR PD_LP2
     395.  00:704B                      
     396.  00:704B  DD CB 09 86         PD_REL:		RES 0,[IX+(CHNPRM_Flags-12)]
     397.  00:704F  18 08               		JR PD_RES
     398.  00:7051                      	
     399.  00:7051  DD 77 06            PD_NOTE:	LD [IX+(CHNPRM_Note-12)],A
     400.  00:7054  DD CB 09 C6         		SET 0,[IX+(CHNPRM_Flags-12)]
     401.  00:7058  AF                  		XOR A
     402.  00:7059                      
     403.  00:7059  ED 73 09 F0         PD_RES:		LD [PT3_PDSP],SP
     404.  00:705D  DD F9               		LD SP,IX
     405.  00:705F  67                  		LD H,A
     406.  00:7060  6F                  		LD L,A
     407.  00:7061  E5                  		PUSH HL
     408.  00:7062  E5                  		PUSH HL
     409.  00:7063  E5                  		PUSH HL
     410.  00:7064  E5                  		PUSH HL
     411.  00:7065  E5                  		PUSH HL
     412.  00:7066  E5                  		PUSH HL
     413.  00:7067  ED 7B 09 F0         		LD SP,[PT3_PDSP]
     414.  00:706B                      
     415.  00:706B  DD 7E 05            PD_FIN:		LD A,[IX+(CHNPRM_NNtSkp-12)]
     416.  00:706E  DD 77 0F            		LD [IX+(CHNPRM_NtSkCn-12)],A
     417.  00:7071  C9                  		RET
     418.  00:7072                      
     419.  00:7072  DD CB 09 96         C_PORTM:	RES 2,[IX+(CHNPRM_Flags-12)]
     420.  00:7076  0A                  		LD A,[BC]
     421.  00:7077  03                  		INC BC
     422.  00:7078                      		;SKIP PRECALCULATED TONE DELTA [BECAUSE
     423.  00:7078                      		;CANNOT BE RIGHT AFTER PT3 COMPILATION]
     424.  00:7078  03                  		INC BC
     425.  00:7079  03                  		INC BC
     426.  00:707A  DD 77 0A            		LD [IX+(CHNPRM_TnSlDl-12)],A
     427.  00:707D  DD 77 F9            		LD [IX+(CHNPRM_TSlCnt-12)],A
     428.  00:7080  11 80 F0            		LD DE,NT_
     429.  00:7083  DD 7E 06            		LD A,[IX+(CHNPRM_Note-12)]
     430.  00:7086  DD 77 07            		LD [IX+(CHNPRM_SlToNt-12)],A
     431.  00:7089  87                  		ADD A,A
     432.  00:708A  6F                  		LD L,A
     433.  00:708B  26 00               		LD H,0
     434.  00:708D  19                  		ADD HL,DE
     435.  00:708E  7E                  		LD A,[HL]
     436.  00:708F  23                  		INC HL
     437.  00:7090  66                  		LD H,[HL]
     438.  00:7091  6F                  		LD L,A
     439.  00:7092  E5                  		PUSH HL
     440.  00:7093  3A 0F F0            		LD A,[PT3_PrNote]
     441.  00:7096  DD 77 06            		LD [IX+(CHNPRM_Note-12)],A
     442.  00:7099  87                  		ADD A,A
     443.  00:709A  6F                  		LD L,A
     444.  00:709B  26 00               		LD H,0
     445.  00:709D  19                  		ADD HL,DE
     446.  00:709E  5E                  		LD E,[HL]
     447.  00:709F  23                  		INC HL
     448.  00:70A0  56                  		LD D,[HL]
     449.  00:70A1  E1                  		POP HL
     450.  00:70A2  ED 52               		SBC HL,DE
     451.  00:70A4  DD 75 0D            		LD [IX+(CHNPRM_TnDelt-12)],L
     452.  00:70A7  DD 74 0E            		LD [IX+(CHNPRM_TnDelt+1-12)],H
     453.  00:70AA  ED 5B 10 F0         		LD DE,[PT3_PrSlide]
     454.  00:70AE  DD 73 FA            		LD [IX+(CHNPRM_CrTnSl-12)],E
     455.  00:70B1  DD 72 FB            		LD [IX+(CHNPRM_CrTnSl+1-12)],D
     456.  00:70B4  0A                  		LD A,[BC] ;SIGNED TONE STEP
     457.  00:70B5  03                  		INC BC
     458.  00:70B6  08                  		EX AF,AF'
     459.  00:70B7  0A                  		LD A,[BC]
     460.  00:70B8  03                  		INC BC
     461.  00:70B9  A7                  		AND A
     462.  00:70BA  28 01               		JR Z,.NOSIG
     463.  00:70BC  EB                  		EX DE,HL
     464.  00:70BD  ED 52               .NOSIG:	SBC HL,DE
     465.  00:70BF  F2 C7 70            		JP P,SET_STP
     466.  00:70C2  2F                  		CPL
     467.  00:70C3  08                  		EX AF,AF'
     468.  00:70C4  ED 44               		NEG
     469.  00:70C6  08                  		EX AF,AF'
     470.  00:70C7  DD 77 0C            SET_STP:	LD [IX+(CHNPRM_TSlStp+1-12)],A
     471.  00:70CA  08                  		EX AF,AF'
     472.  00:70CB  DD 77 0B            		LD [IX+(CHNPRM_TSlStp-12)],A
     473.  00:70CE  DD 36 FE 00         		LD [IX+(CHNPRM_COnOff-12)],0
     474.  00:70D2  C9                  		RET
     475.  00:70D3                      
     476.  00:70D3  DD CB 09 D6         C_GLISS:	SET 2,[IX+(CHNPRM_Flags-12)]
     477.  00:70D7  0A                  		LD A,[BC]
     478.  00:70D8  03                  		INC BC
     479.  00:70D9  DD 77 0A            		LD [IX+(CHNPRM_TnSlDl-12)],A
     480.  00:70DC  DD 77 F9            		LD [IX+(CHNPRM_TSlCnt-12)],A
     481.  00:70DF  0A                  		LD A,[BC]
     482.  00:70E0  03                  		INC BC
     483.  00:70E1  08                  		EX AF,AF'
     484.  00:70E2  0A                  		LD A,[BC]
     485.  00:70E3  03                  		INC BC
     486.  00:70E4  18 E1               		JR SET_STP
     487.  00:70E6                      
     488.  00:70E6  0A                  C_SMPOS:	LD A,[BC]
     489.  00:70E7  03                  		INC BC
     490.  00:70E8  DD 77 F5            		LD [IX+(CHNPRM_PsInSm-12)],A
     491.  00:70EB  C9                  		RET
     492.  00:70EC                      
     493.  00:70EC  0A                  C_ORPOS:	LD A,[BC]
     494.  00:70ED  03                  		INC BC
     495.  00:70EE  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     496.  00:70F1  C9                  		RET
     497.  00:70F2                      
     498.  00:70F2  0A                  C_VIBRT:	LD A,[BC]
     499.  00:70F3  03                  		INC BC
     500.  00:70F4  DD 77 FF            		LD [IX+(CHNPRM_OnOffD-12)],A
     501.  00:70F7  DD 77 FE            		LD [IX+(CHNPRM_COnOff-12)],A
     502.  00:70FA  0A                  		LD A,[BC]
     503.  00:70FB  03                  		INC BC
     504.  00:70FC  DD 77 00            		LD [IX+(CHNPRM_OffOnD-12)],A
     505.  00:70FF  AF                  		XOR A
     506.  00:7100  DD 77 F9            		LD [IX+(CHNPRM_TSlCnt-12)],A
     507.  00:7103  DD 77 FA            		LD [IX+(CHNPRM_CrTnSl-12)],A
     508.  00:7106  DD 77 FB            		LD [IX+(CHNPRM_CrTnSl+1-12)],A
     509.  00:7109  C9                  		RET
     510.  00:710A                      
     511.  00:710A  0A                  C_ENGLS:	LD A,[BC]
     512.  00:710B  03                  		INC BC
     513.  00:710C  32 1E F0            		LD [PT3_Env_Del],A
     514.  00:710F  32 7D F0            		LD [CurEDel],A
     515.  00:7112  0A                  		LD A,[BC]
     516.  00:7113  03                  		INC BC
     517.  00:7114  6F                  		LD L,A
     518.  00:7115  0A                  		LD A,[BC]
     519.  00:7116  03                  		INC BC
     520.  00:7117  67                  		LD H,A
     521.  00:7118  22 1F F0            		LD [PT3_ESldAdd],HL
     522.  00:711B  C9                  		RET
     523.  00:711C                      
     524.  00:711C  0A                  C_DELAY:	LD A,[BC]
     525.  00:711D  03                  		INC BC
     526.  00:711E  32 1C F0            		LD [PT3_Delay],A
     527.  00:7121  C9                  		RET
     528.  00:7122                      	
     529.  00:7122  DD 73 08            SETENV:		LD [IX+(CHNPRM_Env_En-12)],E
     530.  00:7125  32 4D F1            		LD [AYREGS+AR_EnvTp],A
     531.  00:7128  0A                  		LD A,[BC]
     532.  00:7129  03                  		INC BC
     533.  00:712A  67                  		LD H,A
     534.  00:712B  0A                  		LD A,[BC]
     535.  00:712C  03                  		INC BC
     536.  00:712D  6F                  		LD L,A
     537.  00:712E  22 4E F1            		LD [EnvBase],HL
     538.  00:7131  AF                  		XOR A
     539.  00:7132  DD 77 F4            		LD [IX+(CHNPRM_PsInOr-12)],A
     540.  00:7135  32 7D F0            		LD [CurEDel],A
     541.  00:7138  67                  		LD H,A
     542.  00:7139  6F                  		LD L,A
     543.  00:713A  22 7B F0            		LD [CurESld],HL
     544.  00:713D  C9                  C_NOP:		RET
     545.  00:713E                      
     546.  00:713E  87                  SETORN:		ADD A,A
     547.  00:713F  5F                  		LD E,A
     548.  00:7140  16 00               		LD D,0
     549.  00:7142  DD 72 F4            		LD [IX+(CHNPRM_PsInOr-12)],D
     550.  00:7145  2A 07 F0            		LD HL,[PT3_OrnPtrs]
     551.  00:7148  19                  		ADD HL,DE
     552.  00:7149  5E                  		LD E,[HL]
     553.  00:714A  23                  		INC HL
     554.  00:714B  56                  		LD D,[HL]
     555.  00:714C  2A 01 F0            		LD HL,[PT3_MODADDR]
     556.  00:714F  19                  		ADD HL,DE
     557.  00:7150  DD 75 01            		LD [IX+(CHNPRM_OrnPtr-12)],L
     558.  00:7153  DD 74 02            		LD [IX+(CHNPRM_OrnPtr+1-12)],H
     559.  00:7156  C9                  		RET
     560.  00:7157                      
     561.  00:7157                      		;ALL 16 ADDRESSES TO PROTECT FROM BROKEN PT3 MODULES
     562.  00:7157  3D 71               SPCCOMS:	dw C_NOP
     563.  00:7159  D3 70               		dw C_GLISS
     564.  00:715B  72 70               		dw C_PORTM
     565.  00:715D  E6 70               		dw C_SMPOS
     566.  00:715F  EC 70               		dw C_ORPOS
     567.  00:7161  F2 70               		dw C_VIBRT
     568.  00:7163  3D 71               		dw C_NOP
     569.  00:7165  3D 71               		dw C_NOP
     570.  00:7167  0A 71               		dw C_ENGLS
     571.  00:7169  1C 71               		dw C_DELAY
     572.  00:716B  3D 71               		dw C_NOP
     573.  00:716D  3D 71               		dw C_NOP
     574.  00:716F  3D 71               		dw C_NOP
     575.  00:7171  3D 71               		dw C_NOP
     576.  00:7173  3D 71               		dw C_NOP
     577.  00:7175  3D 71               		dw C_NOP
     578.  00:7177                      
     579.  00:7177  AF                  CHREGS:		XOR A
     580.  00:7178  32 4A F1            		LD [AYREGS+AR_AmplC],A
     581.  00:717B  DD CB 15 46         		BIT 0,[IX+CHNPRM_Flags]
     582.  00:717F  E5                  		PUSH HL
     583.  00:7180  CA A6 72            		JP Z,.CH_EXIT
     584.  00:7183  ED 73 0B F0         		LD [PT3_CSP],SP
     585.  00:7187  DD 6E 0D            		LD L,[IX+CHNPRM_OrnPtr]
     586.  00:718A  DD 66 0E            		LD H,[IX+CHNPRM_OrnPtr+1]
     587.  00:718D  F9                  		LD SP,HL
     588.  00:718E  D1                  		POP DE
     589.  00:718F  67                  		LD H,A
     590.  00:7190  DD 7E 00            		LD A,[IX+CHNPRM_PsInOr]
     591.  00:7193  6F                  		LD L,A
     592.  00:7194  39                  		ADD HL,SP
     593.  00:7195  3C                  		INC A
     594.  00:7196  BA                  		CP D
     595.  00:7197  38 01               		JR C,.CH_ORPS
     596.  00:7199  7B                  		LD A,E
     597.  00:719A  DD 77 00            .CH_ORPS:	LD [IX+CHNPRM_PsInOr],A
     598.  00:719D  DD 7E 12            		LD A,[IX+CHNPRM_Note]
     599.  00:71A0  86                  		ADD A,[HL]
     600.  00:71A1  F2 A5 71            		JP P,.CH_NTP
     601.  00:71A4  AF                  		XOR A
     602.  00:71A5  FE 60               .CH_NTP:	CP 96
     603.  00:71A7  38 02               		JR C,.CH_NOK
     604.  00:71A9  3E 5F               		LD A,95
     605.  00:71AB  87                  .CH_NOK:	ADD A,A
     606.  00:71AC  08                  		EX AF,AF'
     607.  00:71AD  DD 6E 0F            		LD L,[IX+CHNPRM_SamPtr]
     608.  00:71B0  DD 66 10            		LD H,[IX+CHNPRM_SamPtr+1]
     609.  00:71B3  F9                  		LD SP,HL
     610.  00:71B4  D1                  		POP DE
     611.  00:71B5  26 00               		LD H,0
     612.  00:71B7  DD 7E 01            		LD A,[IX+CHNPRM_PsInSm]
     613.  00:71BA  47                  		LD B,A
     614.  00:71BB  87                  		ADD A,A
     615.  00:71BC  87                  		ADD A,A
     616.  00:71BD  6F                  		LD L,A
     617.  00:71BE  39                  		ADD HL,SP
     618.  00:71BF  F9                  		LD SP,HL
     619.  00:71C0  78                  		LD A,B
     620.  00:71C1  3C                  		INC A
     621.  00:71C2  BA                  		CP D
     622.  00:71C3  38 01               		JR C,.CH_SMPS
     623.  00:71C5  7B                  		LD A,E
     624.  00:71C6  DD 77 01            .CH_SMPS:	LD [IX+CHNPRM_PsInSm],A
     625.  00:71C9  C1                  		POP BC
     626.  00:71CA  E1                  		POP HL
     627.  00:71CB  DD 5E 08            		LD E,[IX+CHNPRM_TnAcc]
     628.  00:71CE  DD 56 09            		LD D,[IX+CHNPRM_TnAcc+1]
     629.  00:71D1  19                  		ADD HL,DE
     630.  00:71D2  CB 70               		BIT 6,B
     631.  00:71D4  28 06               		JR Z,.CH_NOAC
     632.  00:71D6  DD 75 08            		LD [IX+CHNPRM_TnAcc],L
     633.  00:71D9  DD 74 09            		LD [IX+CHNPRM_TnAcc+1],H
     634.  00:71DC  EB                  .CH_NOAC:	EX DE,HL
     635.  00:71DD  08                  		EX AF,AF'
     636.  00:71DE  6F                  		LD L,A
     637.  00:71DF  26 00               		LD H,0
     638.  00:71E1  31 80 F0            		LD SP,NT_
     639.  00:71E4  39                  		ADD HL,SP
     640.  00:71E5  F9                  		LD SP,HL
     641.  00:71E6  E1                  		POP HL
     642.  00:71E7  19                  		ADD HL,DE
     643.  00:71E8  DD 5E 06            		LD E,[IX+CHNPRM_CrTnSl]
     644.  00:71EB  DD 56 07            		LD D,[IX+CHNPRM_CrTnSl+1]
     645.  00:71EE  19                  		ADD HL,DE
     646.  00:71EF  ED 7B 0B F0         		LD SP,[PT3_CSP]
     647.  00:71F3  E3                  		EX [SP],HL
     648.  00:71F4  AF                  		XOR A
     649.  00:71F5  DD B6 05            		OR [IX+CHNPRM_TSlCnt]
     650.  00:71F8  28 3E               		JR Z,.CH_AMP
     651.  00:71FA  DD 35 05            		DEC [IX+CHNPRM_TSlCnt]
     652.  00:71FD  20 39               		JR NZ,.CH_AMP
     653.  00:71FF  DD 7E 16            		LD A,[IX+CHNPRM_TnSlDl]
     654.  00:7202  DD 77 05            		LD [IX+CHNPRM_TSlCnt],A
     655.  00:7205  DD 6E 17            		LD L,[IX+CHNPRM_TSlStp]
     656.  00:7208  DD 66 18            		LD H,[IX+CHNPRM_TSlStp+1]
     657.  00:720B  7C                  		LD A,H
     658.  00:720C  19                  		ADD HL,DE
     659.  00:720D  DD 75 06            		LD [IX+CHNPRM_CrTnSl],L
     660.  00:7210  DD 74 07            		LD [IX+CHNPRM_CrTnSl+1],H
     661.  00:7213  DD CB 15 56         		BIT 2,[IX+CHNPRM_Flags]
     662.  00:7217  20 1F               		JR NZ,.CH_AMP
     663.  00:7219  DD 5E 19            		LD E,[IX+CHNPRM_TnDelt]
     664.  00:721C  DD 56 1A            		LD D,[IX+CHNPRM_TnDelt+1]
     665.  00:721F  A7                  		AND A
     666.  00:7220  28 01               		JR Z,.CH_STPP
     667.  00:7222  EB                  		EX DE,HL
     668.  00:7223  ED 52               .CH_STPP:	SBC HL,DE
     669.  00:7225  FA 38 72            		JP M,.CH_AMP
     670.  00:7228  DD 7E 13            		LD A,[IX+CHNPRM_SlToNt]
     671.  00:722B  DD 77 12            		LD [IX+CHNPRM_Note],A
     672.  00:722E  AF                  		XOR A
     673.  00:722F  DD 77 05            		LD [IX+CHNPRM_TSlCnt],A
     674.  00:7232  DD 77 06            		LD [IX+CHNPRM_CrTnSl],A
     675.  00:7235  DD 77 07            		LD [IX+CHNPRM_CrTnSl+1],A
     676.  00:7238  DD 7E 02            .CH_AMP:	LD A,[IX+CHNPRM_CrAmSl]
     677.  00:723B  CB 79               		BIT 7,C
     678.  00:723D  28 13               		JR Z,.CH_NOAM
     679.  00:723F  CB 71               		BIT 6,C
     680.  00:7241  28 07               		JR Z,.CH_AMIN
     681.  00:7243  FE 0F               		CP 15
     682.  00:7245  28 0B               		JR Z,.CH_NOAM
     683.  00:7247  3C                  		INC A
     684.  00:7248  18 05               		JR .CH_SVAM
     685.  00:724A  FE F1               .CH_AMIN:	CP -15
     686.  00:724C  28 04               		JR Z,.CH_NOAM
     687.  00:724E  3D                  		DEC A
     688.  00:724F  DD 77 02            .CH_SVAM:	LD [IX+CHNPRM_CrAmSl],A
     689.  00:7252  6F                  .CH_NOAM:	LD L,A
     690.  00:7253  78                  		LD A,B
     691.  00:7254  E6 0F               		AND 15
     692.  00:7256  85                  		ADD A,L
     693.  00:7257  F2 5B 72            		JP P,.CH_APOS
     694.  00:725A  AF                  		XOR A
     695.  00:725B  FE 10               .CH_APOS:	CP 16
     696.  00:725D  38 02               		JR C,.CH_VOL
     697.  00:725F  3E 0F               		LD A,15
     698.  00:7261  DD B6 1C            .CH_VOL:	OR [IX+CHNPRM_Volume]
     699.  00:7264  6F                  		LD L,A
     700.  00:7265  26 00               		LD H,0
     701.  00:7267  11 40 F1            		LD DE,VT_
     702.  00:726A  19                  		ADD HL,DE
     703.  00:726B  7E                  		LD A,[HL]
     704.  00:726C  CB 41               .CH_ENV:	BIT 0,C
     705.  00:726E  20 03               		JR NZ,.CH_NOEN
     706.  00:7270  DD B6 14            		OR [IX+CHNPRM_Env_En]
     707.  00:7273  32 4A F1            .CH_NOEN:	LD [AYREGS+AR_AmplC],A
     708.  00:7276  CB 78               		BIT 7,B
     709.  00:7278  79                  		LD A,C
     710.  00:7279  28 19               		JR Z,.NO_ENSL
     711.  00:727B  17                  		RLA
     712.  00:727C  17                  		RLA
     713.  00:727D  CB 2F               		SRA A
     714.  00:727F  CB 2F               		SRA A
     715.  00:7281  CB 2F               		SRA A
     716.  00:7283  DD 86 04            		ADD A,[IX+CHNPRM_CrEnSl] ;SEE COMMENT BELOW
     717.  00:7286  CB 68               		BIT 5,B
     718.  00:7288  28 03               		JR Z,.NO_ENAC
     719.  00:728A  DD 77 04            		LD [IX+CHNPRM_CrEnSl],A
     720.  00:728D  21 1D F0            .NO_ENAC:	LD HL,PT3_AddToEn
     721.  00:7290  86                  		ADD A,[HL] ;BUG IN PT3 - NEED WORD HERE.
     722.  00:7291                      			   ;FIX IT IN NEXT VERSION?
     723.  00:7291  77                  		LD [HL],A
     724.  00:7292  18 0E               		JR .CH_MIX
     725.  00:7294  1F                  .NO_ENSL:	RRA
     726.  00:7295  DD 86 03            		ADD A,[IX+CHNPRM_CrNsSl]
     727.  00:7298  32 7F F0            		LD [AddToNs],A
     728.  00:729B  CB 68               		BIT 5,B
     729.  00:729D  28 03               		JR Z,.CH_MIX
     730.  00:729F  DD 77 03            		LD [IX+CHNPRM_CrNsSl],A
     731.  00:72A2  78                  .CH_MIX:	LD A,B
     732.  00:72A3  1F                  		RRA
     733.  00:72A4  E6 48               		AND $48
     734.  00:72A6  21 47 F1            .CH_EXIT:	LD HL,AYREGS+AR_Mixer
     735.  00:72A9  B6                  		OR [HL]
     736.  00:72AA  0F                  		RRCA
     737.  00:72AB  77                  		LD [HL],A
     738.  00:72AC  E1                  		POP HL
     739.  00:72AD  AF                  		XOR A
     740.  00:72AE  DD B6 0A            		OR [IX+CHNPRM_COnOff]
     741.  00:72B1  C8                  		RET Z
     742.  00:72B2  DD 35 0A            		DEC [IX+CHNPRM_COnOff]
     743.  00:72B5  C0                  		RET NZ
     744.  00:72B6  DD AE 15            		XOR [IX+CHNPRM_Flags]
     745.  00:72B9  DD 77 15            		LD [IX+CHNPRM_Flags],A
     746.  00:72BC  1F                  		RRA
     747.  00:72BD  DD 7E 0B            		LD A,[IX+CHNPRM_OnOffD]
     748.  00:72C0  38 03               		JR C,.CH_ONDL
     749.  00:72C2  DD 7E 0C            		LD A,[IX+CHNPRM_OffOnD]
     750.  00:72C5  DD 77 0A            .CH_ONDL:	LD [IX+CHNPRM_COnOff],A
     751.  00:72C8  C9                  		RET
     752.  00:72C9                      
     753.  00:72C9  AF                  PT3_PLAY:	XOR A
     754.  00:72CA  32 1D F0            		LD [PT3_AddToEn],A
     755.  00:72CD  32 47 F1            		LD [AYREGS+AR_Mixer],A
     756.  00:72D0  3D                  		DEC A
     757.  00:72D1  32 4D F1            		LD [AYREGS+AR_EnvTp],A
     758.  00:72D4  21 7A F0            		LD HL,DelyCnt
     759.  00:72D7  35                  		DEC [HL]
     760.  00:72D8  C2 5F 73            		JP NZ,.PL2
     761.  00:72DB  21 3E F0            		LD HL,ChanA+CHNPRM_NtSkCn
     762.  00:72DE  35                  		DEC [HL]
     763.  00:72DF  20 4E               		JR NZ,.PL1B
     764.  00:72E1  ED 4B 12 F0         		LD BC,[PT3_AdInPtA]
     765.  00:72E5  0A                  		LD A,[BC]
     766.  00:72E6  A7                  		AND A
     767.  00:72E7  20 3B               		JR NZ,.PL1A
     768.  00:72E9  57                  		LD D,A
     769.  00:72EA  32 7E F0            		LD [Ns_Base],A
     770.  00:72ED  2A 03 F0            		LD HL,[PT3_CrPsPtr]
     771.  00:72F0  23                  		INC HL
     772.  00:72F1  7E                  		LD A,[HL]
     773.  00:72F2  3C                  		INC A
     774.  00:72F3  20 08               		JR NZ,.PLNLP
     775.  00:72F5  CD 5F 6E            		CALL CHECKLP
     776.  00:72F8  2A 18 F0            		LD HL,[PT3_LPosPtr]
     777.  00:72FB  7E                  		LD A,[HL]
     778.  00:72FC  3C                  		INC A
     779.  00:72FD  22 03 F0            .PLNLP:	LD [PT3_CrPsPtr],HL
     780.  00:7300  3D                  		DEC A
     781.  00:7301  87                  		ADD A,A
     782.  00:7302  5F                  		LD E,A
     783.  00:7303  CB 12               		RL D
     784.  00:7305  2A 1A F0            		LD HL,[PT3_PatsPtr]
     785.  00:7308  19                  		ADD HL,DE
     786.  00:7309  ED 5B 01 F0         		LD DE,[PT3_MODADDR]
     787.  00:730D  ED 73 0D F0         		LD [PT3_PSP],SP
     788.  00:7311  F9                  		LD SP,HL
     789.  00:7312  E1                  		POP HL
     790.  00:7313  19                  		ADD HL,DE
     791.  00:7314  44                  		LD B,H
     792.  00:7315  4D                  		LD C,L
     793.  00:7316  E1                  		POP HL
     794.  00:7317  19                  		ADD HL,DE
     795.  00:7318  22 14 F0            		LD [PT3_AdInPtB],HL
     796.  00:731B  E1                  		POP HL
     797.  00:731C  19                  		ADD HL,DE
     798.  00:731D  22 16 F0            		LD [PT3_AdInPtC],HL
     799.  00:7320  ED 7B 0D F0         		LD SP,[PT3_PSP]
     800.  00:7324                      
     801.  00:7324  DD 21 2F F0         .PL1A:		LD IX,ChanA+12
     802.  00:7328  CD 07 70            		CALL PTDECOD
     803.  00:732B  ED 43 12 F0         		LD [PT3_AdInPtA],BC
     804.  00:732F                      
     805.  00:732F  21 5B F0            .PL1B:		LD HL,ChanB+CHNPRM_NtSkCn
     806.  00:7332  35                  		DEC [HL]
     807.  00:7333  20 0F               		JR NZ,.PL1C
     808.  00:7335  DD 21 4C F0         		LD IX,ChanB+12
     809.  00:7339  ED 4B 14 F0         		LD BC,[PT3_AdInPtB]
     810.  00:733D  CD 07 70            		CALL PTDECOD
     811.  00:7340  ED 43 14 F0         		LD [PT3_AdInPtB],BC
     812.  00:7344                      
     813.  00:7344  21 78 F0            .PL1C:		LD HL,ChanC+CHNPRM_NtSkCn
     814.  00:7347  35                  		DEC [HL]
     815.  00:7348  20 0F               		JR NZ,.PL1D
     816.  00:734A  DD 21 69 F0         		LD IX,ChanC+12
     817.  00:734E  ED 4B 16 F0         		LD BC,[PT3_AdInPtC]
     818.  00:7352  CD 07 70            		CALL PTDECOD
     819.  00:7355  ED 43 16 F0         		LD [PT3_AdInPtC],BC
     820.  00:7359                      
     821.  00:7359  3A 1C F0            .PL1D:		LD A,[PT3_Delay]
     822.  00:735C  32 7A F0            		LD [DelyCnt],A
     823.  00:735F                      
     824.  00:735F  DD 21 23 F0         .PL2:		LD IX,ChanA
     825.  00:7363  2A 40 F1            		LD HL,[AYREGS+AR_TonA]
     826.  00:7366  CD 77 71            		CALL CHREGS
     827.  00:7369  22 40 F1            		LD [AYREGS+AR_TonA],HL
     828.  00:736C  3A 4A F1            		LD A,[AYREGS+AR_AmplC]
     829.  00:736F  32 48 F1            		LD [AYREGS+AR_AmplA],A
     830.  00:7372  DD 21 40 F0         		LD IX,ChanB
     831.  00:7376  2A 42 F1            		LD HL,[AYREGS+AR_TonB]
     832.  00:7379  CD 77 71            		CALL CHREGS
     833.  00:737C  22 42 F1            		LD [AYREGS+AR_TonB],HL
     834.  00:737F  3A 4A F1            		LD A,[AYREGS+AR_AmplC]
     835.  00:7382  32 49 F1            		LD [AYREGS+AR_AmplB],A
     836.  00:7385  DD 21 5D F0         		LD IX,ChanC
     837.  00:7389  2A 44 F1            		LD HL,[AYREGS+AR_TonC]
     838.  00:738C  CD 77 71            		CALL CHREGS
     839.  00:738F  22 44 F1            		LD [AYREGS+AR_TonC],HL
     840.  00:7392                      
     841.  00:7392  2A 7E F0            		LD HL,[Ns_Base_AddToNs]
     842.  00:7395  7C                  		LD A,H
     843.  00:7396  85                  		ADD A,L
     844.  00:7397  32 46 F1            		LD [AYREGS+AR_Noise],A
     845.  00:739A                      
     846.  00:739A  3A 1D F0            		LD A,[PT3_AddToEn]
     847.  00:739D  5F                  		LD E,A
     848.  00:739E  87                  		ADD A,A
     849.  00:739F  9F                  		SBC A,A
     850.  00:73A0  57                  		LD D,A
     851.  00:73A1  2A 4E F1            		LD HL,[EnvBase]
     852.  00:73A4  19                  		ADD HL,DE
     853.  00:73A5  ED 5B 7B F0         		LD DE,[CurESld]
     854.  00:73A9  19                  		ADD HL,DE
     855.  00:73AA  22 4B F1            		LD [AYREGS+AR_Env],HL
     856.  00:73AD                      
     857.  00:73AD  AF                  		XOR A
     858.  00:73AE  21 7D F0            		LD HL,CurEDel
     859.  00:73B1  B6                  		OR [HL]
     860.  00:73B2  C8                  		RET Z
     861.  00:73B3  35                  		DEC [HL]
     862.  00:73B4  C0                  		RET NZ
     863.  00:73B5  3A 1E F0            		LD A,[PT3_Env_Del]
     864.  00:73B8  77                  		LD [HL],A
     865.  00:73B9  2A 1F F0            		LD HL,[PT3_ESldAdd]
     866.  00:73BC  19                  		ADD HL,DE
     867.  00:73BD  22 7B F0            		LD [CurESld],HL
     868.  00:73C0  C9                  		RET
     869.  00:73C1                      
     870.  00:73C1  AF                  PT3_ROUT:	XOR A
     871.  00:73C2                      	
     872.  00:73C2                      ROUT_A0:	; --- FIXES BITS 6 AND 7 OF MIXER ---
     873.  00:73C2  21 47 F1            		LD	HL,AYREGS+AR_Mixer
     874.  00:73C5  CB FE               		set	7,[hl]
     875.  00:73C7  CB B6               		res	6,[hl]
     876.  00:73C9                      
     877.  00:73C9  0E A0               		LD C,$A0
     878.  00:73CB  21 40 F1            		LD HL,AYREGS
     879.  00:73CE  ED 79               .LOUT:		OUT [C],A
     880.  00:73D0  0C                  		INC C
     881.  00:73D1  ED A3               		OUTI 
     882.  00:73D3  0D                  		DEC C
     883.  00:73D4  3C                  		INC A
     884.  00:73D5  FE 0D               		CP 13
     885.  00:73D7  20 F5               		JR NZ,.LOUT
     886.  00:73D9  ED 79               		OUT [C],A
     887.  00:73DB  7E                  		LD A,[HL]
     888.  00:73DC  A7                  		AND A
     889.  00:73DD  F8                  		RET M
     890.  00:73DE  0C                  		INC C
     891.  00:73DF  ED 79               		OUT [C],A
     892.  00:73E1  C9                  		RET
     893.  00:73E2                      
     894.  00:73E2  64                  NT_DATA:	db (T_NEW_0-T1_)*2
     895.  00:73E3  2A                  		db TCNEW_0-T_
     896.  00:73E4  65                  		db (T_OLD_0-T1_)*2+1
     897.  00:73E5  00                  		db TCOLD_0-T_
     898.  00:73E6  01                  		db (T_NEW_1-T1_)*2+1
     899.  00:73E7  0C                  		db TCNEW_1-T_
     900.  00:73E8  01                  		db (T_OLD_1-T1_)*2+1
     901.  00:73E9  0C                  		db TCOLD_1-T_
     902.  00:73EA  94                  		db (T_NEW_2-T1_)*2
     903.  00:73EB  35                  		db TCNEW_2-T_
     904.  00:73EC  30                  		db (T_OLD_2-T1_)*2
     905.  00:73ED  0E                  		db TCOLD_2-T_
     906.  00:73EE  60                  		db (T_NEW_3-T1_)*2
     907.  00:73EF  20                  		db TCNEW_3-T_
     908.  00:73F0  60                  		db (T_OLD_3-T1_)*2
     909.  00:73F1  21                  		db TCOLD_3-T_
     910.  00:73F2                      
     911.  00:73F2                      T_:
     912.  00:73F2                      
     913.  00:73F2                      TCOLD_0:	db $00+1,$04+1,$08+1,$0A+1,$0C+1,$0E+1,$12+1,$14+1
     913.  00:73F2  01 05 09 0B 0D 0F 13 15 
     914.  00:73FA  19 25 3D 00         		db $18+1,$24+1,$3C+1,0
     915.  00:73FE                      TCNEW_1:	
     916.  00:73FE  5D 00               TCOLD_1:	db $5C+1,0
     917.  00:7400                      TCOLD_2:	db $30+1,$36+1,$4C+1,$52+1,$5E+1,$70+1,$82,$8C,$9C
     917.  00:7400  31 37 4D 53 5F 71 82 8C 9C 
     918.  00:7409                      		db $9E,$A0,$A6,$A8,$AA,$AC,$AE,$AE,0
     918.  00:7409  9E A0 A6 A8 AA AC AE AE 00 
     919.  00:7412  57                  TCNEW_3:	db $56+1
     920.  00:7413                      TCOLD_3:	db $1E+1,$22+1,$24+1,$28+1,$2C+1,$2E+1,$32+1,$BE+1,0
     920.  00:7413  1F 23 25 29 2D 2F 33 BF 00 
     921.  00:741C                      TCNEW_0:	db $1C+1,$20+1,$22+1,$26+1,$2A+1,$2C+1,$30+1,$54+1
     921.  00:741C  1D 21 23 27 2B 2D 31 55 
     922.  00:7424  BD BF 00            		db $BC+1,$BE+1,0
     923.  00:7427                      TCNEW_2:	db $1A+1,$20+1,$24+1,$28+1,$2A+1,$3A+1,$4C+1,$5E+1
     923.  00:7427  1B 21 25 29 2B 3B 4D 5F 
     924.  00:742F  BB BD BF            		db $BA+1,$BC+1,$BE+1
     925.  00:7432                      
     926.  00:7432  00 01 00 90         EMPTYSAMORN: 	db 0,1,0,$90 ;delete $90 if you don't need default sample
     927.  00:7436                      
     928.  00:7436                      T_PACK:		; First 12 values of tone tables (packed)
     929.  00:7436  0D                  		db ($06EC*2)/256
     930.  00:7437  D8                  		db #d8
     931.  00:7438  69                  		db $0755-$06EC
     932.  00:7439  70                  		db $07C5-$0755
     933.  00:743A  76                  		db $083B-$07C5
     934.  00:743B  7D                  		db $08B8-$083B
     935.  00:743C  85                  		db $093D-$08B8
     936.  00:743D  8D                  		db $09CA-$093D
     937.  00:743E  95                  		db $0A5F-$09CA
     938.  00:743F  9D                  		db $0AFC-$0A5F
     939.  00:7440  A8                  		db $0BA4-$0AFC
     940.  00:7441  B1                  		db $0C55-$0BA4
     941.  00:7442  BB                  		db $0D10-$0C55
     942.  00:7443  0C                  		db ($066D*2)/256
     943.  00:7444  DA                  		db #da
     944.  00:7445  62                  		db $06CF-$066D
     945.  00:7446  68                  		db $0737-$06CF
     946.  00:7447  6D                  		db $07A4-$0737
     947.  00:7448  75                  		db $0819-$07A4
     948.  00:7449  7B                  		db $0894-$0819
     949.  00:744A  83                  		db $0917-$0894
     950.  00:744B  8A                  		db $09A1-$0917
     951.  00:744C  92                  		db $0A33-$09A1
     952.  00:744D  9C                  		db $0ACF-$0A33
     953.  00:744E  A4                  		db $0B73-$0ACF
     954.  00:744F  AF                  		db $0C22-$0B73
     955.  00:7450  B8                  		db $0CDA-$0C22
     956.  00:7451  0E                  		db ($0704*2)/256
     957.  00:7452  08                  		db #08
     958.  00:7453  6A                  		db $076E-$0704
     959.  00:7454  72                  		db $07E0-$076E
     960.  00:7455  78                  		db $0858-$07E0
     961.  00:7456  7E                  		db $08D6-$0858
     962.  00:7457  86                  		db $095C-$08D6
     963.  00:7458  90                  		db $09EC-$095C
     964.  00:7459  96                  		db $0A82-$09EC
     965.  00:745A  A0                  		db $0B22-$0A82
     966.  00:745B  AA                  		db $0BCC-$0B22
     967.  00:745C  B4                  		db $0C80-$0BCC
     968.  00:745D  BE                  		db $0D3E-$0C80
     969.  00:745E  0F                  		db ($07E0*2)/256
     970.  00:745F  C0                  		db #c0
     971.  00:7460  78                  		db $0858-$07E0
     972.  00:7461  88                  		db $08E0-$0858
     973.  00:7462  80                  		db $0960-$08E0
     974.  00:7463  90                  		db $09F0-$0960
     975.  00:7464  98                  		db $0A88-$09F0
     976.  00:7465  A0                  		db $0B28-$0A88
     977.  00:7466  B0                  		db $0BD8-$0B28
     978.  00:7467  A8                  		db $0C80-$0BD8
     979.  00:7468  E0                  		db $0D60-$0C80
     980.  00:7469  B0                  		db $0E10-$0D60
     981.  00:746A  E8                  		db $0EF8-$0E10
    7089   00:746B                      		include		"ayFX-ROM_sjasm.asm"								;incluye el codigo del reproductor AY (efectos)
       1.  00:746B                      		; --- ayFX REPLAYER v1.31 ---
       2.  00:746B                      
       3.  00:746B                      		; --- v1.31	Fixed bug on previous version, only PSG channel C worked
       4.  00:746B                      		; --- v1.3	Fixed volume and Relative volume versions on the same file, conditional compilation
       5.  00:746B                      		; ---		Support for dynamic or fixed channel allocation
       6.  00:746B                      		; --- v1.2f/r	ayFX bank support
       7.  00:746B                      		; --- v1.11f/r	If a frame volume is zero then no AYREGS update
       8.  00:746B                      		; --- v1.1f/r	Fixed volume for all ayFX streams
       9.  00:746B                      		; --- v1.1	Explicit priority (as suggested by AR)
      10.  00:746B                      		; --- v1.0f	Bug fixed (error when using noise)
      11.  00:746B                      		; --- v1.0	Initial release
      12.  00:746B                      
      13.  00:746B                      		; --- DEFINE AYFXRELATIVE AS 0 FOR FIXED VOLUME VERSION ---
      14.  00:746B                      		; --- DEFINE AYFXRELATIVE AS 1 FOR RELATIVE VOLUME VERSION ---
      15.  00:746B  (00:0000)           AYFXRELATIVE equ 0
      16.  00:746B                      
      17.  00:746B                      ayFX_SETUP:																; ---          ayFX replayer setup          ---
      18.  00:746B                      																		; --- INPUT: HL -> pointer to the ayFX bank ---
      19.  00:746B  22 41 F2            		ld	[ayFX_BANK],hl												; Current ayFX bank
      20.  00:746E  3E 01               		ld	a,1															; a:=0
      21.  00:7470  32 40 F2            		ld	[ayFX_MODE],a												; Initial mode: fixed channel
      22.  00:7473  3C                  		inc	a															; Starting channel (=1)
      23.  00:7474  32 4A F2            		ld	[ayFX_CHANNEL],a											; Updated
      24.  00:7477                      ayFX_END:																; --- End of an ayFX stream ---
      25.  00:7477  3E FF               		ld	a,255														; Lowest ayFX priority
      26.  00:7479  32 43 F2            		ld	[ayFX_PRIORITY],a											; Priority saved (not playing ayFX stream)
      27.  00:747C  C9                  		ret																; Return
      28.  00:747D                      
      29.  00:747D                      ayFX_INIT:	; ---     INIT A NEW ayFX STREAM     ---
      30.  00:747D                      		; --- INPUT: A -> sound to be played ---
      31.  00:747D                      		; ---        C -> sound priority     ---
      32.  00:747D  C5                  		push	bc				; Store bc in stack
      33.  00:747E  D5                  		push	de				; Store de in stack
      34.  00:747F  E5                  		push	hl				; Store hl in stack
      35.  00:7480                      		; --- Check if the index is in the bank ---
      36.  00:7480  47                  		ld	b,a				; b:=a (new ayFX stream index)
      37.  00:7481  2A 41 F2            		ld	hl,[ayFX_BANK]			; Current ayFX BANK
      38.  00:7484  7E                  		ld	a,[hl]				; Number of samples in the bank
      39.  00:7485  B7                  		or	a				; If zero (means 256 samples)...
      40.  00:7486  28 06               		jr	z,.CHECK_PRI			; ...goto .CHECK_PRI
      41.  00:7488                      		; The bank has less than 256 samples
      42.  00:7488  78                  		ld	a,b				; a:=b (new ayFX stream index)
      43.  00:7489  BE                  		cp	[hl]				; If new index is not in the bank...
      44.  00:748A  3E 02               		ld	a,2				; a:=2 (error 2: Sample not in the bank)
      45.  00:748C  30 21               		jr	nc,.INIT_END			; ...we can't init it
      46.  00:748E                      .CHECK_PRI:	; --- Check if the new priority is lower than the current one ---
      47.  00:748E                      		; ---   Remember: 0 = highest priority, 15 = lowest priority  ---
      48.  00:748E  78                  		ld	a,b				; a:=b (new ayFX stream index)
      49.  00:748F  3A 43 F2            		ld	a,[ayFX_PRIORITY]		; a:=Current ayFX stream priority
      50.  00:7492  B9                  		cp	c				; If new ayFX stream priority is lower than current one...
      51.  00:7493  3E 01               		ld	a,1				; a:=1 (error 1: A sample with higher priority is being played)
      52.  00:7495  38 18               		jr	c,.INIT_END			; ...we don't start the new ayFX stream
      53.  00:7497                      		; --- Set new priority ---
      54.  00:7497  79                  		ld	a,c				; a:=New priority
      55.  00:7498  E6 0F               		and	$0F				; We mask the priority
      56.  00:749A  32 43 F2            		ld	[ayFX_PRIORITY],a		; new ayFX stream priority saved in RAM
      57.  00:749D                      
      58.  00:749D                      		IF ( AYFXRELATIVE == 1 )
      59.  00:749D                    ~ 			; --- Volume adjust using PT3 volume table ---
      60.  00:749D                    ~ 			ld	c,a				; c:=New priority (fixed)
      61.  00:749D                    ~ 			ld	a,15				; a:=15
      62.  00:749D                    ~ 			sub	c				; a:=15-New priority = relative volume
      63.  00:749D                    ~ 			jr	z,.INIT_NOSOUND		; If priority is 15 -> no sound output (volume is zero)
      64.  00:749D                    ~ 			add	a,a				; a:=a*2
      65.  00:749D                    ~ 			add	a,a				; a:=a*4
      66.  00:749D                    ~ 			add	a,a				; a:=a*8
      67.  00:749D                    ~ 			add	a,a				; a:=a*16
      68.  00:749D                    ~ 			ld	e,a				; e:=a
      69.  00:749D                    ~ 			ld	d,0				; de:=a
      70.  00:749D                    ~ 			ld	hl,VT_				; hl:=PT3 volume table
      71.  00:749D                    ~ 			add	hl,de				; hl is a pointer to the relative volume table
      72.  00:749D                    ~ 			ld	[ayFX_VT],hl			; Save pointer
      73.  00:749D                    ~ 		ENDIF
      74.  00:749D                      
      75.  00:749D                      		; --- Calculate the pointer to the new ayFX stream ---
      76.  00:749D  ED 5B 41 F2         		ld	de,[ayFX_BANK]			; de:=Current ayFX bank
      77.  00:74A1  13                  		inc	de				; de points to the increments table of the bank
      78.  00:74A2  68                  		ld	l,b				; l:=b (new ayFX stream index)
      79.  00:74A3  26 00               		ld	h,0				; hl:=b (new ayFX stream index)
      80.  00:74A5  29                  		add	hl,hl				; hl:=hl*2
      81.  00:74A6  19                  		add	hl,de				; hl:=hl+de (hl points to the correct increment)
      82.  00:74A7  5E                  		ld	e,[hl]				; e:=lower byte of the increment
      83.  00:74A8  23                  		inc	hl				; hl points to the higher byte of the correct increment
      84.  00:74A9  56                  		ld	d,[hl]				; de:=increment
      85.  00:74AA  19                  		add	hl,de				; hl:=hl+de (hl points to the new ayFX stream)
      86.  00:74AB  22 44 F2            		ld	[ayFX_POINTER],hl		; Pointer saved in RAM
      87.  00:74AE  AF                  		xor	a				; a:=0 (no errors)
      88.  00:74AF  E1                  .INIT_END:	pop	hl				; Retrieve hl from stack
      89.  00:74B0  D1                  		pop	de				; Retrieve de from stack
      90.  00:74B1  C1                  		pop	bc				; Retrieve bc from stack
      91.  00:74B2  C9                  		ret					; Return
      92.  00:74B3                      
      93.  00:74B3                      		IF ( AYFXRELATIVE == 1 )
      94.  00:74B3                    ~ .INIT_NOSOUND:	; --- Init a sample with relative volume zero -> no sound output ---
      95.  00:74B3                    ~ 			ld	a,255				; Lowest ayFX priority
      96.  00:74B3                    ~ 			ld	[ayFX_PRIORITY],a		; Priority saved (not playing ayFX stream)
      97.  00:74B3                    ~ 			jr	.INIT_END			; Jumps to .INIT_END
      98.  00:74B3                    ~ 		ENDIF
      99.  00:74B3                      
     100.  00:74B3                      ayFX_PLAY:	; --- PLAY A FRAME OF AN ayFX STREAM ---
     101.  00:74B3  3A 43 F2            		ld	a,[ayFX_PRIORITY]		; a:=Current ayFX stream priority
     102.  00:74B6  B7                  		or	a				; If priority has bit 7 on...
     103.  00:74B7  F8                  		ret	m				; ...return
     104.  00:74B8                      		; --- Calculate next ayFX channel (if needed) ---
     105.  00:74B8  3A 40 F2            		ld	a,[ayFX_MODE]			; ayFX mode
     106.  00:74BB  E6 01               		and	1				; If bit0=0 (fixed channel)...
     107.  00:74BD  28 08               		jr	z,.TAKECB			; ...skip channel changing
     108.  00:74BF  21 4A F2            		ld	hl,ayFX_CHANNEL			; Old ayFX playing channel
     109.  00:74C2  35                  		dec	[hl]				; New ayFX playing channel
     110.  00:74C3  20 02               		jr	nz,.TAKECB			; If not zero jump to .TAKECB
     111.  00:74C5  36 03               		ld	[hl],3				; If zero -> set channel 3
     112.  00:74C7                      .TAKECB:	; --- Extract control byte from stream ---
     113.  00:74C7  2A 44 F2            		ld	hl,[ayFX_POINTER]		; Pointer to the current ayFX stream
     114.  00:74CA  4E                  		ld	c,[hl]				; c:=Control byte
     115.  00:74CB  23                  		inc	hl				; Increment pointer
     116.  00:74CC                      		; --- Check if there's new tone on stream ---
     117.  00:74CC  CB 69               		bit	5,c				; If bit 5 c is off...
     118.  00:74CE  28 08               		jr	z,.CHECK_NN			; ...jump to .CHECK_NN (no new tone)
     119.  00:74D0                      		; --- Extract new tone from stream ---
     120.  00:74D0  5E                  		ld	e,[hl]				; e:=lower byte of new tone
     121.  00:74D1  23                  		inc	hl				; Increment pointer
     122.  00:74D2  56                  		ld	d,[hl]				; d:=higher byte of new tone
     123.  00:74D3  23                  		inc	hl				; Increment pointer
     124.  00:74D4  ED 53 46 F2         		ld	[ayFX_TONE],de			; ayFX tone updated
     125.  00:74D8                      .CHECK_NN:	; --- Check if there's new noise on stream ---
     126.  00:74D8  CB 71               		bit	6,c				; if bit 6 c is off...
     127.  00:74DA  28 09               		jr	z,.SETPOINTER			; ...jump to .SETPOINTER (no new noise)
     128.  00:74DC                      		; --- Extract new noise from stream ---
     129.  00:74DC  7E                  		ld	a,[hl]				; a:=New noise
     130.  00:74DD  23                  		inc	hl				; Increment pointer
     131.  00:74DE  FE 20               		cp	$20				; If it's an illegal value of noise (used to mark end of stream)...
     132.  00:74E0  28 95               		jr.	z,ayFX_END			; ...jump to ayFX_END
     133.  00:74E2  32 48 F2            		ld	[ayFX_NOISE],a			; ayFX noise updated
     134.  00:74E5                      .SETPOINTER:	; --- Update ayFX pointer ---
     135.  00:74E5  22 44 F2            		ld	[ayFX_POINTER],hl		; Update ayFX stream pointer
     136.  00:74E8                      		; --- Extract volume ---
     137.  00:74E8  79                  		ld	a,c				; a:=Control byte
     138.  00:74E9  E6 0F               		and	$0F				; lower nibble
     139.  00:74EB                      
     140.  00:74EB                      		IF ( AYFXRELATIVE == 1 )
     141.  00:74EB                    ~ 			; --- Fix the volume using PT3 Volume Table ---
     142.  00:74EB                    ~ 			ld	hl,[ayFX_VT]			; hl:=Pointer to relative volume table
     143.  00:74EB                    ~ 			ld	e,a				; e:=a (ayFX volume)
     144.  00:74EB                    ~ 			ld	d,0				; d:=0
     145.  00:74EB                    ~ 			add	hl,de				; hl:=hl+de (hl points to the relative volume of this frame
     146.  00:74EB                    ~ 			ld	a,[hl]				; a:=ayFX relative volume
     147.  00:74EB                    ~ 			or	a				; If relative volume is zero...
     148.  00:74EB                    ~ 		ENDIF
     149.  00:74EB                      
     150.  00:74EB  32 49 F2            		ld	[ayFX_VOLUME],a			; ayFX volume updated
     151.  00:74EE  C8                  		ret	z				; ...return (don't copy ayFX values in to AYREGS)
     152.  00:74EF                      		; -------------------------------------
     153.  00:74EF                      		; --- COPY ayFX VALUES IN TO AYREGS ---
     154.  00:74EF                      		; -------------------------------------
     155.  00:74EF                      		; --- Set noise channel ---
     156.  00:74EF  CB 79               		bit	7,c				; If noise is off...
     157.  00:74F1  20 06               		jr	nz,.SETMASKS			; ...jump to .SETMASKS
     158.  00:74F3  3A 48 F2            		ld	a,[ayFX_NOISE]			; ayFX noise value
     159.  00:74F6  32 46 F1            		ld	[AYREGS+6],a			; copied in to AYREGS (noise channel)
     160.  00:74F9                      .SETMASKS:	; --- Set mixer masks ---
     161.  00:74F9  79                  		ld	a,c				; a:=Control byte
     162.  00:74FA  E6 90               		and	$90				; Only bits 7 and 4 (noise and tone mask for psg reg 7)
     163.  00:74FC  FE 90               		cp	$90				; If no noise and no tone...
     164.  00:74FE  C8                  		ret	z				; ...return (don't copy ayFX values in to AYREGS)
     165.  00:74FF                      		; --- Copy ayFX values in to ARYREGS ---
     166.  00:74FF  0F                  		rrca					; Rotate a to the right (1 TIME)
     167.  00:7500  0F                  		rrca					; Rotate a to the right (2 TIMES) (OR mask)
     168.  00:7501  16 DB               		ld	d,$DB				; d:=Mask for psg mixer (AND mask)
     169.  00:7503                      		; --- Dump to correct channel ---
     170.  00:7503  21 4A F2            		ld	hl,ayFX_CHANNEL			; Next ayFX playing channel
     171.  00:7506  46                  		ld	b,[hl]				; Channel counter
     172.  00:7507                      .CHK1:		; --- Check if playing channel was 1 ---
     173.  00:7507  10 0D               		djnz	.CHK2				; Decrement and jump if channel was not 1
     174.  00:7509                      .PLAY_C:	; --- Play ayFX stream on channel C ---
     175.  00:7509  CD 38 75            		call	.SETMIXER			; Set PSG mixer value (returning a=ayFX volume and hl=ayFX tone)
     176.  00:750C  32 4A F1            		ld	[AYREGS+10],a			; Volume copied in to AYREGS (channel C volume)
     177.  00:750F  CB 51               		bit	2,c				; If tone is off...
     178.  00:7511  C0                  		ret	nz				; ...return
     179.  00:7512  22 44 F1            		ld	[AYREGS+4],hl			; copied in to AYREGS (channel C tone)
     180.  00:7515  C9                  		ret					; Return
     181.  00:7516                      .CHK2:		; --- Check if playing channel was 2 ---
     182.  00:7516  CB 0A               		rrc	d				; Rotate right AND mask
     183.  00:7518  0F                  		rrca					; Rotate right OR mask
     184.  00:7519  10 0D               		djnz	.CHK3				; Decrement and jump if channel was not 2
     185.  00:751B                      .PLAY_B:	; --- Play ayFX stream on channel B ---
     186.  00:751B  CD 38 75            		call	.SETMIXER			; Set PSG mixer value (returning a=ayFX volume and hl=ayFX tone)
     187.  00:751E  32 49 F1            		ld	[AYREGS+9],a			; Volume copied in to AYREGS (channel B volume)
     188.  00:7521  CB 49               		bit	1,c				; If tone is off...
     189.  00:7523  C0                  		ret	nz				; ...return
     190.  00:7524  22 42 F1            		ld	[AYREGS+2],hl			; copied in to AYREGS (channel B tone)
     191.  00:7527  C9                  		ret					; Return
     192.  00:7528                      .CHK3:		; --- Check if playing channel was 3 ---
     193.  00:7528  CB 0A               		rrc	d				; Rotate right AND mask
     194.  00:752A  0F                  		rrca					; Rotate right OR mask
     195.  00:752B                      .PLAY_A:	; --- Play ayFX stream on channel A ---
     196.  00:752B  CD 38 75            		call	.SETMIXER			; Set PSG mixer value (returning a=ayFX volume and hl=ayFX tone)
     197.  00:752E  32 48 F1            		ld	[AYREGS+8],a			; Volume copied in to AYREGS (channel A volume)
     198.  00:7531  CB 41               		bit	0,c				; If tone is off...
     199.  00:7533  C0                  		ret	nz				; ...return
     200.  00:7534  22 40 F1            		ld	[AYREGS+0],hl			; copied in to AYREGS (channel A tone)
     201.  00:7537  C9                  		ret					; Return
     202.  00:7538                      .SETMIXER:	; --- Set PSG mixer value ---
     203.  00:7538  4F                  		ld	c,a				; c:=OR mask
     204.  00:7539  3A 47 F1            		ld	a,[AYREGS+7]			; a:=PSG mixer value
     205.  00:753C  A2                  		and	d				; AND mask
     206.  00:753D  B1                  		or	c				; OR mask
     207.  00:753E  32 47 F1            		ld	[AYREGS+7],a			; PSG mixer value updated
     208.  00:7541  3A 49 F2            		ld	a,[ayFX_VOLUME]			; a:=ayFX volume value
     209.  00:7544  2A 46 F2            		ld	hl,[ayFX_TONE]			; ayFX tone value
     210.  00:7547  C9                  		ret					; Return
     211.  00:7548                      
     212.  00:7548                      		IF ( AYFXRELATIVE == 1 )
     213.  00:7548                    ~ 			; --- UNCOMMENT THIS IF YOU DON'T USE THIS REPLAYER WITH PT3 REPLAYER ---
     214.  00:7548                    ~ 		;VT_:	.INCBIN	"VT.BIN"
     215.  00:7548                    ~ 			; --- UNCOMMENT THIS IF YOU DON'T USE THIS REPLAYER WITH PT3 REPLAYER ---
     216.  00:7548                    ~ 		ENDIF
    7090   00:7548                      
    7091   00:7548                      CANCION:
    7092   00:7548                      
    7093   00:7548  (02E1)              	incbin		"SAXSOLOPLETTER.99"										;incluye la cancion de apertura desde el modo binario
    7094   00:7829                      
    7095   00:7829                      SILENCIO:
    7096   00:7829                      	
    7097   00:7829  (001C)              	incbin		"MUTEPLETTER.99"										;para crear un mute a la música
    7098   00:7845                      	
    7099   00:7845                      MUSICA_GAMEOVER:
    7100   00:7845                      
    7101   00:7845  (013A)              	incbin		"GAMEOVERPLETTER.99"									;música de game over
    7102   00:797F                      	
    7103   00:797F                      ;MUSICA_FASES:
    7104   00:797F                      
    7105   00:797F                      ;	incbin		"FASESPLETTER.99"										;música de fases
    7106   00:797F                      	
    7107   00:797F                      EFECTOS_BANCO:
    7108   00:797F                      
    7109   00:797F  (073A)              	incbin		"efectos.afb"											;incluye el banco de efectos
    7110   00:80B9                      
    7111   00:80B9                      MUSICA_MUERTO:
    7112   00:80B9                      
    7113   00:80B9  (0090)              	incbin		"MUERTOPLETTER.99"										;musica de muere
    7114   00:8149                      	
    7115   00:8149                      MUSICA_ENTRE_FASES:
    7116   00:8149                      
    7117   00:8149  (011E)              	incbin		"ENTRE_FASESPLETTER.99"										;musica de muere
    7118   00:8267                      		
    7119   00:8267                      	;Variables del replayer... las coloco desde aqui.
    7120   00:8267                      	;mirar que hace la directiva MAP del SJASM
    7121   00:8267  (F000)              	map		#f000
    7122   00:8267                      
    7123   00:8267                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;PT3 REPLAYER
    7124   00:8267                      
    7125   00:8267  (00:F000)           PT3_SETUP:			#1	;set bit0 to 1, if you want to play without looping
    7126   00:8267                      					;bit7 is set each time, when loop point is passed
    7127   00:8267  (00:F001)           PT3_MODADDR:		#2
    7128   00:8267  (00:F003)           PT3_CrPsPtr:		#2
    7129   00:8267  (00:F005)           PT3_SAMPTRS:		#2
    7130   00:8267  (00:F007)           PT3_OrnPtrs:		#2
    7131   00:8267  (00:F009)           PT3_PDSP:			#2
    7132   00:8267  (00:F00B)           PT3_CSP:			#2
    7133   00:8267  (00:F00D)           PT3_PSP:			#2
    7134   00:8267  (00:F00F)           PT3_PrNote:			#1
    7135   00:8267  (00:F010)           PT3_PrSlide:		#2
    7136   00:8267  (00:F012)           PT3_AdInPtA:		#2
    7137   00:8267  (00:F014)           PT3_AdInPtB:		#2
    7138   00:8267  (00:F016)           PT3_AdInPtC:		#2
    7139   00:8267  (00:F018)           PT3_LPosPtr:		#2
    7140   00:8267  (00:F01A)           PT3_PatsPtr:		#2
    7141   00:8267  (00:F01C)           PT3_Delay:			#1
    7142   00:8267  (00:F01D)           PT3_AddToEn:		#1
    7143   00:8267  (00:F01E)           PT3_Env_Del:		#1
    7144   00:8267  (00:F01F)           PT3_ESldAdd:		#2
    7145   00:8267  (00:F021)           PT3_NTL3:			#2	; AND A / NOP (note table creator)
    7146   00:8267                      
    7147   00:8267  (00:F023)           VARS:				#0
    7148   00:8267                      
    7149   00:8267  (00:F023)           ChanA:				#29			;CHNPRM_Size
    7150   00:8267  (00:F040)           ChanB:				#29			;CHNPRM_Size
    7151   00:8267  (00:F05D)           ChanC:				#29			;CHNPRM_Size
    7152   00:8267                      
    7153   00:8267                      ;GlobalVars
    7154   00:8267  (00:F07A)           DelyCnt:			#1
    7155   00:8267  (00:F07B)           CurESld:			#2
    7156   00:8267  (00:F07D)           CurEDel:			#1
    7157   00:8267  (00:F07E)           Ns_Base_AddToNs:	#0
    7158   00:8267  (00:F07E)           Ns_Base:			#1
    7159   00:8267  (00:F07F)           AddToNs:			#1
    7160   00:8267                      
    7161   00:8267  (00:F080)           NT_:				#192	; Puntero a/tabla de frecuencias
    7162   00:8267                      
    7163   00:8267  (00:F140)           AYREGS:				#0
    7164   00:8267  (00:F140)           VT_:				#14
    7165   00:8267  (00:F14E)           EnvBase:			#2
    7166   00:8267  (00:F150)           VAR0END:			#0
    7167   00:8267                      
    7168   00:8267  (00:F150)           T1_:				#0		
    7169   00:8267  (00:F150)           T_NEW_1:			#0
    7170   00:8267  (00:F150)           T_OLD_1:			#24
    7171   00:8267  (00:F168)           T_OLD_2:			#24
    7172   00:8267  (00:F180)           T_NEW_3:			#0
    7173   00:8267  (00:F180)           T_OLD_3:			#2
    7174   00:8267  (00:F182)           T_OLD_0:			#0
    7175   00:8267  (00:F182)           T_NEW_0:			#24
    7176   00:8267  (00:F19A)           T_NEW_2:			#166
    7177   00:8267                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;PT3 REPLAYER END
    7178   00:8267                      
    7179   00:8267                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ayFX REPLAYER 
    7180   00:8267  (00:F240)           ayFX_MODE:			#1			; ayFX mode
    7181   00:8267  (00:F241)           ayFX_BANK:			#2			; Current ayFX Bank
    7182   00:8267  (00:F243)           ayFX_PRIORITY:		#1			; Current ayFX stream priotity
    7183   00:8267  (00:F244)           ayFX_POINTER:		#2			; Pointer to the current ayFX stream
    7184   00:8267  (00:F246)           ayFX_TONE:			#2			; Current tone of the ayFX stream
    7185   00:8267  (00:F248)           ayFX_NOISE:			#1			; Current noise of the ayFX stream
    7186   00:8267  (00:F249)           ayFX_VOLUME:		#1			; Current volume of the ayFX stream
    7187   00:8267  (00:F24A)           ayFX_CHANNEL:		#1			; PSG channel to play the ayFX stream
    7188   00:8267                      
    7189   00:8267                      	;IF (AYFXRELATIVE == 1 ) 
    7190   00:8267                      ;ayFX_VT:	ds	2			; ayFX relative volume table pointer
    7191   00:8267                      	;ENDIF
    7192   00:8267                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ayFX REPLAYER END
    7193   00:8267                      																
    7194   00:8267                      ;CONSTANTES
    7195   00:8267                      
    7196   00:8267  (010F)              instru_caste:	incbin	"INSTRUCCIONES.DAT"
    7197   00:8376  (0113)              instru_ingle:	incbin	"INSTRUCTIONS.DAT"
    7198   00:8489  (0E2E)              pant_carga_til:	incbin	"PANTALLA_DE_CARGA_TILES.til"
    7199   00:92B7  (07DE)              pant_carga_col:	incbin	"PANTALLA_DE_CARGA_TILES.col"
    7200   00:9A95  (0128)              pant_carga:		incbin	"PANTALLA_DE_CARGA.DAT"		
    7201   00:9BBD  (043F)              tiles_1:		incbin	"TILESFpletter.til"
    7202   00:9FFC  (01EC)              colores_1:		incbin	"TILESFpletter.col"
    7203   00:A1E8  (00A4)              fase_1:			incbin	"FASE_1_pletter.dat"
    7204   00:A28C  (00FF)              fase_2:			incbin	"FASE_2_pletter.dat"
    7205   00:A38B  (014D)              fase_3:			incbin	"FASE_3_pletter.dat"
    7206   00:A4D8  (00E9)              fase_4:			incbin	"FASE_4_pletter.dat"
    7207   00:A5C1  (012F)              fase_5:			incbin	"FASE_5_pletter.dat"
    7208   00:A6F0  (013D)              fase_6:			incbin	"FASE_6_pletter.dat"
    7209   00:A82D  (00EC)              fase_7:			incbin	"FASE_7_pletter.dat"
    7210   00:A919  (0108)              fase_8:			incbin	"FASE_8_pletter.dat"
    7211   00:AA21  (011B)              fase_9:			incbin	"FASE_9_pletter.dat"
    7212   00:AB3C  (0115)              fase_10:		incbin	"FASE_10_pletter.dat"
    7213   00:AC51  (00D2)              FINAL:			incbin	"FINAL_TEMPLO.dat"
    7214   00:AD23                      
    7215   00:AD23                      sanctuary_1:	db	242,224,237,226,243,244,224,241,248,255,192,193
    7215   00:AD23  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C1 
    7216   00:AD2F                      sanctuary_2:	db	242,224,237,226,243,244,224,241,248,255,192,194
    7216   00:AD2F  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C2 
    7217   00:AD3B                      sanctuary_3:	db	242,224,237,226,243,244,224,241,248,255,192,195
    7217   00:AD3B  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C3 
    7218   00:AD47                      sanctuary_4:	db	242,224,237,226,243,244,224,241,248,255,192,196
    7218   00:AD47  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C4 
    7219   00:AD53                      sanctuary_5:	db	242,224,237,226,243,244,224,241,248,255,192,197
    7219   00:AD53  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C5 
    7220   00:AD5F                      sanctuary_6:	db	242,224,237,226,243,244,224,241,248,255,192,198
    7220   00:AD5F  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C6 
    7221   00:AD6B                      sanctuary_7:	db	242,224,237,226,243,244,224,241,248,255,192,199
    7221   00:AD6B  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C7 
    7222   00:AD77                      sanctuary_8:	db	242,224,237,226,243,244,224,241,248,255,192,200
    7222   00:AD77  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C8 
    7223   00:AD83                      sanctuary_9:	db	242,224,237,226,243,244,224,241,248,255,192,201
    7223   00:AD83  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C0 C9 
    7224   00:AD8F                      sanctuary_10:	db	242,224,237,226,243,244,224,241,248,255,193,192
    7224   00:AD8F  F2 E0 ED E2 F3 F4 E0 F1 F8 FF C1 C0 
    7225   00:AD9B                      
    7226   00:AD9B                      sanctuario_1:	db	242,224,237,243,244,224,241,232,238,255,192,193
    7226   00:AD9B  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C1 
    7227   00:ADA7                      sanctuario_2:	db	242,224,237,243,244,224,241,232,238,255,192,194
    7227   00:ADA7  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C2 
    7228   00:ADB3                      sanctuario_3:	db	242,224,237,243,244,224,241,232,238,255,192,195
    7228   00:ADB3  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C3 
    7229   00:ADBF                      sanctuario_4:	db	242,224,237,243,244,224,241,232,238,255,192,196
    7229   00:ADBF  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C4 
    7230   00:ADCB                      sanctuario_5:	db	242,224,237,243,244,224,241,232,238,255,192,197
    7230   00:ADCB  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C5 
    7231   00:ADD7                      sanctuario_6:	db	242,224,237,243,244,224,241,232,238,255,192,198
    7231   00:ADD7  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C6 
    7232   00:ADE3                      sanctuario_7:	db	242,224,237,243,244,224,241,232,238,255,192,199
    7232   00:ADE3  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C7 
    7233   00:ADEF                      sanctuario_8:	db	242,224,237,243,244,224,241,232,238,255,192,200
    7233   00:ADEF  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C8 
    7234   00:ADFB                      sanctuario_9:	db	242,224,237,243,244,224,241,232,238,255,192,201
    7234   00:ADFB  F2 E0 ED F3 F4 E0 F1 E8 EE FF C0 C9 
    7235   00:AE07                      sanctuario_10:	db	242,224,237,243,244,224,241,232,238,255,193,192
    7235   00:AE07  F2 E0 ED F3 F4 E0 F1 E8 EE FF C1 C0 
    7236   00:AE13                      
    7237   00:AE13                      consejo_2:		db	195,253,225,238,236,225,224,242,253,210,253,193,253,242,244,228,235,238
    7237   00:AE13  C3 FD E1 EE EC E1 E0 F2 FD D2 FD C1 FD F2 F4 E4 
    7237   00:AE23  EB EE 
    7238   00:AE25                      consejo_3:		db	226, 238, 237, 3, 228, 235, 253, 209, 253, 241, 228, 239, 224, 241, 224, 253, 235, 224, 253, 228, 242, 226, 224, 235, 228, 241, 224, 253, 41, 42, 3
    7238   00:AE25  E2 EE ED 03 E4 EB FD D1 FD F1 E4 EF E0 F1 E0 FD 
    7238   00:AE35  EB E0 FD E4 F2 E2 E0 EB E4 F1 E0 FD 29 2A 03 
    7239   00:AE44                      				db 	253, 253, 236, 238, 233, 224, 227, 238, 253, 237, 238, 253, 224, 241, 227, 228, 241, 224, 242, 251, 253, 253, 242, 228, 226, 224, 243, 228, 253, 213, 253, 253
    7239   00:AE44  FD FD EC EE E9 E0 E3 EE FD ED EE FD E0 F1 E3 E4 
    7239   00:AE54  F1 E0 F2 FB FD FD F2 E4 E2 E0 F3 E4 FD D5 FD FD 
    7240   00:AE64                      				db 	253, 237, 238, 253, 243, 238, 227, 238, 242, 253, 235, 238, 242, 253, 236, 244, 241, 238, 242, 253, 242, 238, 237, 253, 232, 230, 244, 224, 235, 228, 242, 253
    7240   00:AE64  FD ED EE FD F3 EE E3 EE F2 FD EB EE F2 FD EC F4 
    7240   00:AE74  F1 EE F2 FD F2 EE ED FD E8 E6 F4 E0 EB E4 F2 FD 
    7241   00:AE84                      consejo_5:		db	224, 226, 243, 232, 245, 224, 253, 235, 224, 242, 253, 228, 242, 226, 224, 235, 228, 241, 224, 242, 253, 253, 242, 228, 226, 241, 228, 243, 224, 242, 224, 227,238
    7241   00:AE84  E0 E2 F3 E8 F5 E0 FD EB E0 F2 FD E4 F2 E2 E0 EB 
    7241   00:AE94  E4 F1 E0 F2 FD FD F2 E4 E2 F1 E4 F3 E0 F2 E0 E3 
    7241   00:AEA4  EE 
    7242   00:AEA5                      consejo_7:		db	228, 235, 253, 225, 238, 236, 225, 228, 241, 238, 253, 243, 228, 253, 236, 238, 233, 224, 241, 224, 253, 227, 228, 236, 224, 242, 232, 224, 227, 238
    7242   00:AEA5  E4 EB FD E1 EE EC E1 E4 F1 EE FD F3 E4 FD EC EE 
    7242   00:AEB5  E9 E0 F1 E0 FD E3 E4 EC E0 F2 E8 E0 E3 EE 
    7243   00:AEC3                      consejo_10:		db	228, 237, 226, 232, 228, 237, 227, 228, 253, 235, 224, 253, 235, 244, 249, 253, 239, 224, 241, 224, 253, 239, 238, 227, 228, 241, 253, 245, 228, 241
    7243   00:AEC3  E4 ED E2 E8 E4 ED E3 E4 FD EB E0 FD EB F4 F9 FD 
    7243   00:AED3  EF E0 F1 E0 FD EF EE E3 E4 F1 FD F5 E4 F1 
    7244   00:AEE1                      advice_2:		db	195,253,225,238,236,225,242,253,253,210,253,193,253,229,235,238,238,241
    7244   00:AEE1  C3 FD E1 EE EC E1 F2 FD FD D2 FD C1 FD E5 EB EE 
    7244   00:AEF1  EE F1 
    7245   00:AEF3                      advice_3:		db	246, 232, 243, 231, 253, 209, 253, 253, 241, 228, 239, 224, 232, 241, 253, 253, 243, 231, 228, 253, 253, 235, 224, 227, 227, 228, 241, 253, 41, 42
    7245   00:AEF3  F6 E8 F3 E7 FD D1 FD FD F1 E4 EF E0 E8 F1 FD FD 
    7245   00:AF03  F3 E7 E4 FD FD EB E0 E3 E3 E4 F1 FD 29 2A 
    7246   00:AF11                      				db 	253, 253, 246, 228, 243, 253, 248, 238, 244, 253, 226, 224, 237, 214, 243, 253, 225, 244, 241, 237, 251, 253, 225, 228, 253, 227, 241, 248, 253, 213, 253, 253
    7246   00:AF11  FD FD F6 E4 F3 FD F8 EE F4 FD E2 E0 ED D6 F3 FD 
    7246   00:AF21  E1 F4 F1 ED FB FD E1 E4 FD E3 F1 F8 FD D5 FD FD 
    7247   00:AF31                      				db 	253, 237, 238, 243, 253, 224, 235, 235, 253, 253, 246, 224, 235, 235, 242, 253, 253, 224, 241, 228, 253, 253, 243, 231, 228, 253, 253, 242, 224, 236, 228, 253
    7247   00:AF31  FD ED EE F3 FD E0 EB EB FD FD F6 E0 EB EB F2 FD 
    7247   00:AF41  FD E0 F1 E4 FD FD F3 E7 E4 FD FD F2 E0 EC E4 FD 
    7248   00:AF51                      advice_5:		db	224, 226, 243, 232, 245, 224, 243, 228, 253, 253, 243, 231, 228, 253, 253, 242, 228, 226, 241, 228, 243, 253, 253, 235, 224, 227, 227, 228, 241, 242
    7248   00:AF51  E0 E2 F3 E8 F5 E0 F3 E4 FD FD F3 E7 E4 FD FD F2 
    7248   00:AF61  E4 E2 F1 E4 F3 FD FD EB E0 E3 E3 E4 F1 F2 
    7249   00:AF6F                      advice_7:		db	229, 232, 241, 228, 236, 224, 237, 253, 246, 232, 235, 235, 253, 246, 228, 243, 253, 248, 238, 244, 253, 243, 238, 238, 253, 253, 236, 244, 226, 231
    7249   00:AF6F  E5 E8 F1 E4 EC E0 ED FD F6 E8 EB EB FD F6 E4 F3 
    7249   00:AF7F  FD F8 EE F4 FD F3 EE EE FD FD EC F4 E2 E7 
    7250   00:AF8D                      advice_10:		db	243, 244, 241, 237, 253, 253, 238, 237, 253, 253, 243, 231, 228, 253, 253, 235, 232, 230, 231, 243, 253, 253, 243, 238, 253, 253, 253, 242, 228, 228
    7250   00:AF8D  F3 F4 F1 ED FD FD EE ED FD FD F3 E7 E4 FD FD EB 
    7250   00:AF9D  E8 E6 E7 F3 FD FD F3 EE FD FD FD F2 E4 E4 
    7251   00:AFAB                      
    7252   00:AFAB                      lo_has_logrado:	db	235,238,253,231,224,242,253,235,238,230,241,224,227,238,251,253,228,242,243,224,242,253,236,244,241,232,228,237,227,238,252
    7252   00:AFAB  EB EE FD E7 E0 F2 FD EB EE E6 F1 E0 E3 EE FB FD 
    7252   00:AFBB  E4 F2 F3 E0 F2 FD EC F4 F1 E8 E4 ED E3 EE FC 
    7253   00:AFCA                      felicidades:	db	212,253,212,253,229,253,228,253,235,253,232,253,226,253,232,253,227,253,224,253,227,253,228,253,242,253,252,253,252,253
    7253   00:AFCA  D4 FD D4 FD E5 FD E4 FD EB FD E8 FD E2 FD E8 FD 
    7253   00:AFDA  E3 FD E0 FD E3 FD E4 FD F2 FD FC FD FC FD 
    7254   00:AFE8                      camino_a:		db	226,224,236,232,237,238,253,224,253,244,237,253,237,244,228,245,238,253,253,242,224,237,243,244,224,241,232,238
    7254   00:AFE8  E2 E0 EC E8 ED EE FD E0 FD F4 ED FD ED F4 E4 F5 
    7254   00:AFF8  EE FD FD F2 E0 ED F3 F4 E0 F1 E8 EE 
    7255   00:B004  (0026)              blanco:			incbin	"BLANCO_pletter.DAT"
    7256   00:B02A  (0096)              entre_fases:	incbin	"ENTRESAN.DAT"
    7257   00:B0C0  (0024)              marcador:		incbin	"marcador_pletter.dat"
    7258   00:B0E4  (000D)              trofeos:		incbin	"trofeos_pletter.dat"
    7259   00:B0F1  (0398)              sprites:		incbin	"sprites_pletter.dat"
    7260   00:B489                      
    7261   00:B489                      sprites2:		; --- BOMBERO DERECHA QUIETO
    7262   00:B489                      				; color 1
    7263   00:B489                      				DB $00,$03,$07,$1F,$04,$05,$06,$0D
    7263   00:B489  00 03 07 1F 04 05 06 0D 
    7264   00:B491                      				DB $08,$18,$1B,$0C,$0F,$07,$06,$03
    7264   00:B491  08 18 1B 0C 0F 07 06 03 
    7265   00:B499                      				DB $00,$00,$90,$E0,$80,$00,$00,$00
    7265   00:B499  00 00 90 E0 80 00 00 00 
    7266   00:B4A1                      				DB $80,$F0,$C0,$80,$80,$00,$00,$00
    7266   00:B4A1  80 F0 C0 80 80 00 00 00 
    7267   00:B4A9                      				; color 9
    7268   00:B4A9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7268   00:B4A9  00 00 00 00 00 00 00 00 
    7269   00:B4B1                      				DB $00,$00,$00,$00,$00,$03,$02,$00
    7269   00:B4B1  00 00 00 00 00 03 02 00 
    7270   00:B4B9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7270   00:B4B9  00 00 00 00 00 00 00 00 
    7271   00:B4C1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7271   00:B4C1  00 00 00 00 00 00 00 00 
    7272   00:B4C9                      				; color 13
    7273   00:B4C9                      				DB $02,$07,$07,$04,$03,$00,$00,$00
    7273   00:B4C9  02 07 07 04 03 00 00 00 
    7274   00:B4D1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7274   00:B4D1  00 00 00 00 00 00 00 00 
    7275   00:B4D9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7275   00:B4D9  00 00 00 00 00 00 00 00 
    7276   00:B4E1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7276   00:B4E1  00 00 00 00 00 00 00 00 
    7277   00:B4E9                      				; 
    7278   00:B4E9                      				; --- BOMBERO DERECHA ANDANDO
    7279   00:B4E9                      				; color 1
    7280   00:B4E9                      				DB $00,$00,$03,$07,$1F,$04,$05,$06
    7280   00:B4E9  00 00 03 07 1F 04 05 06 
    7281   00:B4F1                      				DB $0D,$08,$18,$1B,$0C,$2F,$51,$00
    7281   00:B4F1  0D 08 18 1B 0C 2F 51 00 
    7282   00:B4F9                      				DB $00,$00,$00,$90,$E0,$80,$00,$00
    7282   00:B4F9  00 00 00 90 E0 80 00 00 
    7283   00:B501                      				DB $00,$80,$F0,$C0,$80,$80,$40,$80
    7283   00:B501  00 80 F0 C0 80 80 40 80 
    7284   00:B509                      				; color 9
    7285   00:B509                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7285   00:B509  00 00 00 00 00 00 00 00 
    7286   00:B511                      				DB $00,$00,$00,$00,$00,$00,$03,$02
    7286   00:B511  00 00 00 00 00 00 03 02 
    7287   00:B519                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7287   00:B519  00 00 00 00 00 00 00 00 
    7288   00:B521                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7288   00:B521  00 00 00 00 00 00 00 00 
    7289   00:B529                      				; color 13
    7290   00:B529                      				DB $00,$02,$07,$07,$04,$03,$00,$00
    7290   00:B529  00 02 07 07 04 03 00 00 
    7291   00:B531                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7291   00:B531  00 00 00 00 00 00 00 00 
    7292   00:B539                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7292   00:B539  00 00 00 00 00 00 00 00 
    7293   00:B541                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7293   00:B541  00 00 00 00 00 00 00 00 
    7294   00:B549                      				; 
    7295   00:B549                      				; --- BOMBERO IZQUIERDA QUIETO
    7296   00:B549                      				; color 1
    7297   00:B549                      				DB $00,$00,$09,$07,$01,$00,$00,$00
    7297   00:B549  00 00 09 07 01 00 00 00 
    7298   00:B551                      				DB $01,$0F,$03,$01,$01,$00,$00,$00
    7298   00:B551  01 0F 03 01 01 00 00 00 
    7299   00:B559                      				DB $00,$C0,$E0,$F8,$20,$A0,$60,$B0
    7299   00:B559  00 C0 E0 F8 20 A0 60 B0 
    7300   00:B561                      				DB $10,$18,$D8,$30,$F0,$E0,$60,$C0
    7300   00:B561  10 18 D8 30 F0 E0 60 C0 
    7301   00:B569                      				; color 9
    7302   00:B569                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7302   00:B569  00 00 00 00 00 00 00 00 
    7303   00:B571                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7303   00:B571  00 00 00 00 00 00 00 00 
    7304   00:B579                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7304   00:B579  00 00 00 00 00 00 00 00 
    7305   00:B581                      				DB $00,$00,$00,$00,$00,$c0,$40,$00
    7305   00:B581  00 00 00 00 00 C0 40 00 
    7306   00:B589                      				; color 13
    7307   00:B589                      sprites3:		DB $00,$00,$00,$00,$00,$00,$00,$00
    7307   00:B589  00 00 00 00 00 00 00 00 
    7308   00:B591                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7308   00:B591  00 00 00 00 00 00 00 00 
    7309   00:B599                      				DB $40,$e0,$e0,$20,$c0,$00,$00,$00
    7309   00:B599  40 E0 E0 20 C0 00 00 00 
    7310   00:B5A1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7310   00:B5A1  00 00 00 00 00 00 00 00 
    7311   00:B5A9                      				; 
    7312   00:B5A9                      				; --- BOMBERO IZQUIERDA ANDANDO
    7313   00:B5A9                      				; color 1
    7314   00:B5A9                      				DB $00,$00,$00,$09,$07,$01,$00,$00
    7314   00:B5A9  00 00 00 09 07 01 00 00 
    7315   00:B5B1                      				DB $00,$01,$0F,$03,$01,$01,$02,$01
    7315   00:B5B1  00 01 0F 03 01 01 02 01 
    7316   00:B5B9                      				DB $00,$00,$C0,$E0,$F8,$20,$A0,$60
    7316   00:B5B9  00 00 C0 E0 F8 20 A0 60 
    7317   00:B5C1                      				DB $B0,$10,$18,$D8,$30,$F4,$8A,$00
    7317   00:B5C1  B0 10 18 D8 30 F4 8A 00 
    7318   00:B5C9                      				; color 9
    7319   00:B5C9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7319   00:B5C9  00 00 00 00 00 00 00 00 
    7320   00:B5D1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7320   00:B5D1  00 00 00 00 00 00 00 00 
    7321   00:B5D9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7321   00:B5D9  00 00 00 00 00 00 00 00 
    7322   00:B5E1                      				DB $00,$00,$00,$00,$00,$00,$c0,$40
    7322   00:B5E1  00 00 00 00 00 00 C0 40 
    7323   00:B5E9                      				; color 13
    7324   00:B5E9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7324   00:B5E9  00 00 00 00 00 00 00 00 
    7325   00:B5F1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7325   00:B5F1  00 00 00 00 00 00 00 00 
    7326   00:B5F9                      				DB $00,$40,$e0,$e0,$20,$c0,$00,$00
    7326   00:B5F9  00 40 E0 E0 20 C0 00 00 
    7327   00:B601                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7327   00:B601  00 00 00 00 00 00 00 00 
    7328   00:B609                      				; 
    7329   00:B609                      				; --- BOMBERO SUBIENDO 1
    7330   00:B609                      				; color 1
    7331   00:B609                      				DB $00,$03,$0F,$03,$03,$31,$2A,$2C
    7331   00:B609  00 03 0F 03 03 31 2A 2C 
    7332   00:B611                      				DB $20,$38,$17,$A0,$7E,$21,$00,$00
    7332   00:B611  20 38 17 A0 7E 21 00 00 
    7333   00:B619                      				DB $00,$C0,$F0,$C0,$C3,$85,$5A,$34
    7333   00:B619  00 C0 F0 C0 C3 85 5A 34 
    7334   00:B621                      				DB $48,$90,$20,$10,$08,$E5,$16,$0C
    7334   00:B621  48 90 20 10 08 E5 16 0C 
    7335   00:B629                      				; color 9
    7336   00:B629                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7336   00:B629  00 00 00 00 00 00 00 00 
    7337   00:B631                      				DB $00,$00,$00,$00,$04,$30,$00,$00
    7337   00:B631  00 00 00 00 04 30 00 00 
    7338   00:B639                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7338   00:B639  00 00 00 00 00 00 00 00 
    7339   00:B641                      				DB $00,$00,$00,$00,$23,$00,$00,$00
    7339   00:B641  00 00 00 00 23 00 00 00 
    7340   00:B649                      				
    7341   00:B649                      				; color 13
    7342   00:B649                      sprites4:		DB $13,$1f,$07,$08,$1f,$01,$00,$00
    7342   00:B649  13 1F 07 08 1F 01 00 00 
    7343   00:B651                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7343   00:B651  00 00 00 00 00 00 00 00 
    7344   00:B659                      				DB $c8,$b0,$60,$e0,$e0,$f0,$18,$08
    7344   00:B659  C8 B0 60 E0 E0 F0 18 08 
    7345   00:B661                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7345   00:B661  00 00 00 00 00 00 00 00 
    7346   00:B669                      				; 
    7347   00:B669                      				; --- BOMBERO SUBIENDO 2
    7348   00:B669                      				; color 1
    7349   00:B669                      				DB $00,$03,$0F,$03,$C3,$A1,$5A,$2C
    7349   00:B669  00 03 0F 03 C3 A1 5A 2C 
    7350   00:B671                      				DB $12,$09,$04,$08,$10,$A7,$68,$30
    7350   00:B671  12 09 04 08 10 A7 68 30 
    7351   00:B679                      				DB $00,$C0,$F0,$C0,$C0,$8C,$54,$34
    7351   00:B679  00 C0 F0 C0 C0 8C 54 34 
    7352   00:B681                      				DB $04,$1C,$E8,$05,$7E,$84,$00,$00
    7352   00:B681  04 1C E8 05 7E 84 00 00 
    7353   00:B689                      				; color 9
    7354   00:B689                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7354   00:B689  00 00 00 00 00 00 00 00 
    7355   00:B691                      				DB $00,$00,$00,$00,$c4,$00,$00,$00
    7355   00:B691  00 00 00 00 C4 00 00 00 
    7356   00:B699                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7356   00:B699  00 00 00 00 00 00 00 00 
    7357   00:B6A1                      				DB $00,$00,$00,$00,$20,$0c,$00,$00
    7357   00:B6A1  00 00 00 00 20 0C 00 00 
    7358   00:B6A9                      				; color 13
    7359   00:B6A9                      				DB $13,$0d,$06,$03,$07,$0f,$18,$10
    7359   00:B6A9  13 0D 06 03 07 0F 18 10 
    7360   00:B6B1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7360   00:B6B1  00 00 00 00 00 00 00 00 
    7361   00:B6B9                      				DB $c8,$f8,$e0,$10,$f8,$80,$00,$00
    7361   00:B6B9  C8 F8 E0 10 F8 80 00 00 
    7362   00:B6C1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7362   00:B6C1  00 00 00 00 00 00 00 00 
    7363   00:B6C9                      				
    7364   00:B6C9                      				; --- CHORRO IZQUIERDA
    7365   00:B6C9                      				; color 9
    7366   00:B6C9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7366   00:B6C9  00 00 00 00 00 00 00 00 
    7367   00:B6D1                      				DB $00,$00,$10,$11,$02,$00,$00,$00
    7367   00:B6D1  00 00 10 11 02 00 00 00 
    7368   00:B6D9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7368   00:B6D9  00 00 00 00 00 00 00 00 
    7369   00:B6E1                      				DB $00,$00,$00,$40,$20,$00,$18,$00
    7369   00:B6E1  00 00 00 40 20 00 18 00 
    7370   00:B6E9                      				; color 15
    7371   00:B6E9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7371   00:B6E9  00 00 00 00 00 00 00 00 
    7372   00:B6F1                      				DB $00,$01,$07,$0E,$0C,$1F,$7F,$FF
    7372   00:B6F1  00 01 07 0E 0C 1F 7F FF 
    7373   00:B6F9                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7373   00:B6F9  00 00 00 00 00 00 00 00 
    7374   00:B701                      				DB $00,$FC,$FF,$BC,$90,$F0,$E0,$F8
    7374   00:B701  00 FC FF BC 90 F0 E0 F8 
    7375   00:B709                      				; 
    7376   00:B709                      				; --- CHORRO DERECHA
    7377   00:B709                      				; color 9
    7378   00:B709                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7378   00:B709  00 00 00 00 00 00 00 00 
    7379   00:B711                      				DB $00,$00,$00,$02,$04,$00,$18,$00
    7379   00:B711  00 00 00 02 04 00 18 00 
    7380   00:B719                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7380   00:B719  00 00 00 00 00 00 00 00 
    7381   00:B721                      				DB $00,$00,$08,$88,$40,$00,$00,$00
    7381   00:B721  00 00 08 88 40 00 00 00 
    7382   00:B729                      				; color 15
    7383   00:B729                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7383   00:B729  00 00 00 00 00 00 00 00 
    7384   00:B731                      				DB $00,$3F,$FF,$3D,$09,$0F,$07,$1F
    7384   00:B731  00 3F FF 3D 09 0F 07 1F 
    7385   00:B739                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7385   00:B739  00 00 00 00 00 00 00 00 
    7386   00:B741                      				DB $00,$80,$E0,$70,$30,$F8,$FE,$FF
    7386   00:B741  00 80 E0 70 30 F8 FE FF 
    7387   00:B749                      
    7388   00:B749                      				; --- prota quieto derecha bomba
    7389   00:B749                      				; color 1
    7390   00:B749                      sprites5:		DB $07,$0F,$0D,$0C,$04,$05,$06,$09
    7390   00:B749  07 0F 0D 0C 04 05 06 09 
    7391   00:B751                      				DB $08,$0C,$07,$09,$09,$05,$06,$03
    7391   00:B751  08 0C 07 09 09 05 06 03 
    7392   00:B759                      				DB $00,$80,$40,$80,$80,$00,$00,$40
    7392   00:B759  00 80 40 80 80 00 00 40 
    7393   00:B761                      				DB $E0,$E0,$C0,$00,$00,$00,$00,$00
    7393   00:B761  E0 E0 C0 00 00 00 00 00 
    7394   00:B769                      				; 
    7395   00:B769                      				; --- prota quieto derecha cuchillo
    7396   00:B769                      				; color 1
    7397   00:B769                      sprites9:		DB $07,$0F,$0D,$0C,$04,$05,$06,$09
    7397   00:B769  07 0F 0D 0C 04 05 06 09 
    7398   00:B771                      				DB $08,$0C,$07,$09,$09,$05,$06,$03
    7398   00:B771  08 0C 07 09 09 05 06 03 
    7399   00:B779                      				DB $00,$80,$40,$80,$80,$00,$00,$00
    7399   00:B779  00 80 40 80 80 00 00 00 
    7400   00:B781                      				DB $90,$A0,$C0,$00,$00,$00,$00,$00
    7400   00:B781  90 A0 C0 00 00 00 00 00 
    7401   00:B789                      				; 
    7402   00:B789                      				; --- prota andando derecha bomba
    7403   00:B789                      				; color 1
    7404   00:B789                      sprites6:		DB $00,$07,$0F,$0D,$0C,$04,$05,$06
    7404   00:B789  00 07 0F 0D 0C 04 05 06 
    7405   00:B791                      				DB $09,$08,$08,$0B,$09,$2F,$54,$08
    7405   00:B791  09 08 08 0B 09 2F 54 08 
    7406   00:B799                      				DB $00,$00,$80,$40,$80,$80,$00,$00
    7406   00:B799  00 00 80 40 80 80 00 00 
    7407   00:B7A1                      				DB $40,$E0,$E0,$C0,$40,$20,$E8,$10
    7407   00:B7A1  40 E0 E0 C0 40 20 E8 10 
    7408   00:B7A9                      				; 
    7409   00:B7A9                      				; --- prota andando derecha cuchillo
    7410   00:B7A9                      				; color 1
    7411   00:B7A9                      sprites10:		DB $00,$07,$0F,$0D,$0C,$04,$05,$06
    7411   00:B7A9  00 07 0F 0D 0C 04 05 06 
    7412   00:B7B1                      				DB $09,$08,$08,$0B,$09,$2F,$54,$08
    7412   00:B7B1  09 08 08 0B 09 2F 54 08 
    7413   00:B7B9                      				DB $00,$00,$80,$40,$80,$80,$00,$00
    7413   00:B7B9  00 00 80 40 80 80 00 00 
    7414   00:B7C1                      				DB $00,$90,$E0,$C0,$40,$20,$E8,$10
    7414   00:B7C1  00 90 E0 C0 40 20 E8 10 
    7415   00:B7C9                      				; 
    7416   00:B7C9                      				; --- prota quieto izquierda bomba
    7417   00:B7C9                      				; color 1
    7418   00:B7C9                      sprites7:		DB $00,$01,$02,$01,$01,$00,$00,$02
    7418   00:B7C9  00 01 02 01 01 00 00 02 
    7419   00:B7D1                      				DB $07,$07,$03,$00,$00,$00,$00,$00
    7419   00:B7D1  07 07 03 00 00 00 00 00 
    7420   00:B7D9                      				DB $E0,$F0,$B0,$30,$20,$A0,$60,$90
    7420   00:B7D9  E0 F0 B0 30 20 A0 60 90 
    7421   00:B7E1                      				DB $10,$30,$E0,$90,$90,$A0,$60,$C0
    7421   00:B7E1  10 30 E0 90 90 A0 60 C0 
    7422   00:B7E9                      				; 
    7423   00:B7E9                      				; --- prota quieto izquierda cuchillo
    7424   00:B7E9                      				; color 1
    7425   00:B7E9                      sprites11:		DB $00,$01,$02,$01,$01,$00,$00,$00
    7425   00:B7E9  00 01 02 01 01 00 00 00 
    7426   00:B7F1                      				DB $09,$05,$03,$00,$00,$00,$00,$00
    7426   00:B7F1  09 05 03 00 00 00 00 00 
    7427   00:B7F9                      				DB $E0,$F0,$B0,$30,$20,$A0,$60,$90
    7427   00:B7F9  E0 F0 B0 30 20 A0 60 90 
    7428   00:B801                      				DB $10,$30,$E0,$90,$90,$A0,$60,$C0
    7428   00:B801  10 30 E0 90 90 A0 60 C0 
    7429   00:B809                      				; 
    7430   00:B809                      				; --- prota andando izquierda bomba
    7431   00:B809                      				; color 1
    7432   00:B809                      sprites8:		DB $00,$00,$01,$02,$01,$01,$00,$00
    7432   00:B809  00 00 01 02 01 01 00 00 
    7433   00:B811                      				DB $02,$07,$07,$03,$02,$04,$17,$08
    7433   00:B811  02 07 07 03 02 04 17 08 
    7434   00:B819                      				DB $00,$E0,$F0,$B0,$30,$20,$A0,$60
    7434   00:B819  00 E0 F0 B0 30 20 A0 60 
    7435   00:B821                      				DB $90,$10,$10,$D0,$90,$F4,$2A,$10
    7435   00:B821  90 10 10 D0 90 F4 2A 10 
    7436   00:B829                      				; 
    7437   00:B829                      				; --- prota andando izquierda cuchillo
    7438   00:B829                      				; color 1
    7439   00:B829                      sprites12:		DB $00,$00,$01,$02,$01,$01,$00,$00
    7439   00:B829  00 00 01 02 01 01 00 00 
    7440   00:B831                      				DB $00,$09,$07,$03,$02,$04,$17,$08
    7440   00:B831  00 09 07 03 02 04 17 08 
    7441   00:B839                      				DB $00,$E0,$F0,$B0,$30,$20,$A0,$60
    7441   00:B839  00 E0 F0 B0 30 20 A0 60 
    7442   00:B841                      				DB $90,$10,$10,$D0,$90,$F4,$2A,$10
    7442   00:B841  90 10 10 D0 90 F4 2A 10 
    7443   00:B849                      
    7444   00:B849                      				; --- prota derecha quieto
    7445   00:B849                      				; color 1
    7446   00:B849                      sprites13:		DB $07,$0F,$0D,$0C,$04,$05,$06,$09
    7446   00:B849  07 0F 0D 0C 04 05 06 09 
    7447   00:B851                      				DB $08,$08,$05,$09,$09,$05,$06,$03
    7447   00:B851  08 08 05 09 09 05 06 03 
    7448   00:B859                      				DB $00,$80,$40,$80,$80,$00,$00,$00
    7448   00:B859  00 80 40 80 80 00 00 00 
    7449   00:B861                      				DB $80,$80,$00,$00,$00,$00,$00,$00
    7449   00:B861  80 80 00 00 00 00 00 00 
    7450   00:B869                      				; 
    7451   00:B869                      				; --- prota derecha andando
    7452   00:B869                      				; color 1
    7453   00:B869                      sprites14		DB $00,$07,$0F,$0D,$0C,$04,$05,$06
    7453   00:B869  00 07 0F 0D 0C 04 05 06 
    7454   00:B871                      				DB $09,$08,$08,$0A,$09,$2F,$54,$08
    7454   00:B871  09 08 08 0A 09 2F 54 08 
    7455   00:B879                      				DB $00,$00,$80,$40,$80,$80,$00,$00
    7455   00:B879  00 00 80 40 80 80 00 00 
    7456   00:B881                      				DB $00,$80,$80,$80,$40,$20,$E8,$10
    7456   00:B881  00 80 80 80 40 20 E8 10 
    7457   00:B889                      				; 
    7458   00:B889                      				; --- prota izquierda quieto
    7459   00:B889                      				; color 1
    7460   00:B889                      sprites15:		DB $00,$01,$02,$01,$01,$00,$00,$00
    7460   00:B889  00 01 02 01 01 00 00 00 
    7461   00:B891                      				DB $01,$01,$00,$00,$00,$00,$00,$00
    7461   00:B891  01 01 00 00 00 00 00 00 
    7462   00:B899                      				DB $E0,$F0,$B0,$30,$20,$A0,$60,$90
    7462   00:B899  E0 F0 B0 30 20 A0 60 90 
    7463   00:B8A1                      				DB $10,$10,$A0,$90,$90,$A0,$60,$C0
    7463   00:B8A1  10 10 A0 90 90 A0 60 C0 
    7464   00:B8A9                      				; 
    7465   00:B8A9                      				; --- prota izquierda andando
    7466   00:B8A9                      				; color 1
    7467   00:B8A9                      sprites16:		DB $00,$00,$01,$02,$01,$01,$00,$00
    7467   00:B8A9  00 00 01 02 01 01 00 00 
    7468   00:B8B1                      				DB $00,$01,$01,$01,$02,$04,$17,$08
    7468   00:B8B1  00 01 01 01 02 04 17 08 
    7469   00:B8B9                      				DB $00,$E0,$F0,$B0,$30,$20,$A0,$60
    7469   00:B8B9  00 E0 F0 B0 30 20 A0 60 
    7470   00:B8C1                      				DB $90,$10,$10,$50,$90,$F4,$2A,$10
    7470   00:B8C1  90 10 10 50 90 F4 2A 10 
    7471   00:B8C9                      				
    7472   00:B8C9                      				; --- petiso quieto
    7473   00:B8C9                      				; color 1
    7474   00:B8C9                      sprites_pet:	DB $01,$02,$04,$04,$0F,$10,$10,$0F
    7474   00:B8C9  01 02 04 04 0F 10 10 0F 
    7475   00:B8D1                      				DB $08,$10,$10,$10,$14,$0C,$13,$0C
    7475   00:B8D1  08 10 10 10 14 0C 13 0C 
    7476   00:B8D9                      				DB $C0,$30,$08,$08,$08,$90,$B0,$18
    7476   00:B8D9  C0 30 08 08 08 90 B0 18 
    7477   00:B8E1                      				DB $08,$44,$2C,$14,$04,$38,$E4,$38
    7477   00:B8E1  08 44 2C 14 04 38 E4 38 
    7478   00:B8E9                      				; color 4
    7479   00:B8E9                      				DB $00,$00,$00,$02,$00,$00,$00,$00
    7479   00:B8E9  00 00 00 02 00 00 00 00 
    7480   00:B8F1                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7480   00:B8F1  00 00 00 00 00 00 00 00 
    7481   00:B8F9                      				DB $00,$00,$00,$80,$00,$00,$00,$00
    7481   00:B8F9  00 00 00 80 00 00 00 00 
    7482   00:B901                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7482   00:B901  00 00 00 00 00 00 00 00 
    7483   00:B909                      				; color 10
    7484   00:B909                      				DB $00,$00,$03,$01,$00,$00,$0E,$00
    7484   00:B909  00 00 03 01 00 00 0E 00 
    7485   00:B911                      				DB $07,$0F,$0F,$0F,$0B,$03,$08,$00
    7485   00:B911  07 0F 0F 0F 0B 03 08 00 
    7486   00:B919                      				DB $00,$00,$C0,$60,$E0,$60,$40,$C0
    7486   00:B919  00 00 C0 60 E0 60 40 C0 
    7487   00:B921                      				DB $E0,$B0,$C0,$E0,$E0,$00,$10,$00
    7487   00:B921  E0 B0 C0 E0 E0 00 10 00 
    7488   00:B929                      				; color 11
    7489   00:B929                      				DB $00,$01,$00,$00,$00,$0F,$01,$00
    7489   00:B929  00 01 00 00 00 0F 01 00 
    7490   00:B931                      				DB $00,$00,$00,$00,$00,$00,$04,$00
    7490   00:B931  00 00 00 00 00 00 04 00 
    7491   00:B939                      				DB $00,$C0,$30,$10,$10,$00,$00,$20
    7491   00:B939  00 C0 30 10 10 00 00 20 
    7492   00:B941                      				DB $10,$08,$10,$08,$18,$C0,$08,$00
    7492   00:B941  10 08 10 08 18 C0 08 00 
    7493   00:B949                      				; 
    7494   00:B949                      				; --- petiso salto
    7495   00:B949                      				; color 1
    7496   00:B949                      				DB $01,$02,$04,$04,$0F,$10,$10,$0F
    7496   00:B949  01 02 04 04 0F 10 10 0F 
    7497   00:B951                      				DB $08,$10,$10,$30,$48,$3C,$07,$00
    7497   00:B951  08 10 10 30 48 3C 07 00 
    7498   00:B959                      				DB $C0,$30,$08,$08,$08,$96,$B9,$02
    7498   00:B959  C0 30 08 08 08 96 B9 02 
    7499   00:B961                      				DB $04,$1C,$04,$0C,$12,$3C,$C0,$00
    7499   00:B961  04 1C 04 0C 12 3C C0 00 
    7500   00:B969                      				; color 4
    7501   00:B969                      				DB $00,$00,$00,$02,$00,$00,$00,$00
    7501   00:B969  00 00 00 02 00 00 00 00 
    7502   00:B971                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7502   00:B971  00 00 00 00 00 00 00 00 
    7503   00:B979                      				DB $00,$00,$00,$80,$00,$00,$00,$00
    7503   00:B979  00 00 00 80 00 00 00 00 
    7504   00:B981                      				DB $00,$00,$00,$00,$00,$00,$00,$00
    7504   00:B981  00 00 00 00 00 00 00 00 
    7505   00:B989                      				; color 10
    7506   00:B989                      				DB $00,$00,$03,$01,$00,$08,$0E,$00
    7506   00:B989  00 00 03 01 00 08 0E 00 
    7507   00:B991                      				DB $07,$0F,$0F,$0F,$27,$03,$00,$00
    7507   00:B991  07 0F 0F 0F 27 03 00 00 
    7508   00:B999                      				DB $00,$00,$C0,$60,$E0,$60,$44,$F8
    7508   00:B999  00 00 C0 60 E0 60 44 F8 
    7509   00:B9A1                      				DB $F0,$E0,$F0,$E0,$C8,$00,$00,$00
    7509   00:B9A1  F0 E0 F0 E0 C8 00 00 00 
    7510   00:B9A9                      				; color 11
    7511   00:B9A9                      				DB $00,$01,$00,$00,$00,$07,$01,$00
    7511   00:B9A9  00 01 00 00 00 07 01 00 
    7512   00:B9B1                      				DB $00,$00,$00,$00,$10,$00,$00,$00
    7512   00:B9B1  00 00 00 00 10 00 00 00 
    7513   00:B9B9                      				DB $00,$C0,$30,$10,$10,$00,$02,$04
    7513   00:B9B9  00 C0 30 10 10 00 02 04 
    7514   00:B9C1                      				DB $08,$00,$08,$10,$24,$C0,$00,$00
    7514   00:B9C1  08 00 08 10 24 C0 00 00 
    7515   00:B9C9                      
    7516   00:B9C9                      game_over:		db	230,224,236,228,253,253,238,245,228,241
    7516   00:B9C9  E6 E0 EC E4 FD FD EE F5 E4 F1 
    7517   00:B9D3                      se__acabo:		db	242,228,253,253,253,224,226,224,225,238
    7517   00:B9D3  F2 E4 FD FD FD E0 E2 E0 E1 EE 
    7518   00:B9DD  EF E0 F4 F2 E4      pause:			db	239,224,244,242,228
    7519   00:B9E2  14 14 14 14 14      ladrillos:		db	20,20,20,20,20			;ladrillos en la zona donde se escribe el pause
    7520   00:B9E7                      
    7521   00:B9E7                      
    7522   00:B9E7                      										
    7523   00:B9E7                      empresa:		db	28,"CARAMBALAN STUDIOS  PRESENTS"			;PANTALLA DE MENU
    7523   00:B9E7  1C 43 41 52 41 4D 42 41 4C 41 4E 20 53 54 55 44 
    7523   00:B9F7  49 4F 53 20 20 50 52 45 53 45 4E 54 53 
    7524   00:BA04                      empresa_e:		db	28,"CARAMBALAN STUDIOS  PRESENTA"
    7524   00:BA04  1C 43 41 52 41 4D 42 41 4C 41 4E 20 53 54 55 44 
    7524   00:BA14  49 4F 53 20 20 50 52 45 53 45 4E 54 41 
    7525   00:BA21                      titulo_1:		db	224,"bkc  f  f bklc bc  f   f  f  baca a  l  a k  a kdc l   a  a be jkbe  a  k alme l k m   m  k dc  ldkc k  l lmkc m m a   l  a  dc m  l l  m m  a a dcm   k  l   dca  m dale g  g g  de   dale    alhme                           l"    
    7525   00:BA21  E0 62 6B 63 20 20 66 20 20 66 20 62 6B 6C 63 20 
    7525   00:BA31  62 63 20 20 66 20 20 20 66 20 20 66 20 20 62 61 
    7525   00:BA41  63 61 20 61 20 20 6C 20 20 61 20 6B 20 20 61 20 
    7525   00:BA51  6B 64 63 20 6C 20 20 20 61 20 20 61 20 62 65 20 
    7525   00:BA61  6A 6B 62 65 20 20 61 20 20 6B 20 61 6C 6D 65 20 
    7525   00:BA71  6C 20 6B 20 6D 20 20 20 6D 20 20 6B 20 64 63 20 
    7525   00:BA81  20 6C 64 6B 63 20 6B 20 20 6C 20 6C 6D 6B 63 20 
    7525   00:BA91  6D 20 6D 20 61 20 20 20 6C 20 20 61 20 20 64 63 
    7525   00:BAA1  20 6D 20 20 6C 20 6C 20 20 6D 20 6D 20 20 61 20 
    7525   00:BAB1  61 20 64 63 6D 20 20 20 6B 20 20 6C 20 20 20 64 
    7525   00:BAC1  63 61 20 20 6D 20 64 61 6C 65 20 67 20 20 67 20 
    7525   00:BAD1  67 20 20 64 65 20 20 20 64 61 6C 65 20 20 20 20 
    7525   00:BAE1  61 6C 68 6D 65 20 20 20 20 20 20 20 20 20 20 20 
    7525   00:BAF1  20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 
    7525   00:BB01  6C 
    7526   00:BB02                      titulo_8:		db	32,"daalmakaklkamakamkakakamlakaalae"
    7526   00:BB02  20 64 61 61 6C 6D 61 6B 61 6B 6C 6B 61 6D 61 6B 
    7526   00:BB12  61 6D 6B 61 6B 61 6B 61 6D 6C 61 6B 61 61 6C 61 
    7526   00:BB22  65 
    7527   00:BB23  04 4D 45 4E 55      mensaje:		db	4,"MENU"
    7528   00:BB28                      teclado:		db	10,"- KEYBOARD"
    7528   00:BB28  0A 2D 20 4B 45 59 42 4F 41 52 44 
    7529   00:BB33                      mando:			db	10,"- JOYSTICK"
    7529   00:BB33  0A 2D 20 4A 4F 59 53 54 49 43 4B 
    7530   00:BB3E                      instrucciones:	db	10,"- LANGUAGE"
    7530   00:BB3E  0A 2D 20 4C 41 4E 47 55 41 47 45 
    7531   00:BB49                      teclado_e:		db	9,"- TECLADO"
    7531   00:BB49  09 2D 20 54 45 43 4C 41 44 4F 
    7532   00:BB53                      mando_e:		db	7,"- MANDO"
    7532   00:BB53  07 2D 20 4D 41 4E 44 4F 
    7533   00:BB5B                      instruccion_e:	db	8,"- IDIOMA"
    7533   00:BB5B  08 2D 20 49 44 49 4F 4D 41 
    7534   00:BB64                      salir:			db	12,"- COVER PAGE"
    7534   00:BB64  0C 2D 20 43 4F 56 45 52 20 50 41 47 45 
    7535   00:BB71                      salir_e:		db	9,"- PORTADA"
    7535   00:BB71  09 2D 20 50 4F 52 54 41 44 41 
    7536   00:BB7B                      copyright:		db	27,"(C) CARAMBALAN STUDIOS 2018"
    7536   00:BB7B  1B 28 43 29 20 43 41 52 41 4D 42 41 4C 41 4E 20 
    7536   00:BB8B  53 54 55 44 49 4F 53 20 32 30 31 38 
    7537   00:BB97                      
    7538   00:BB97  01 6E               serp_1:			db	1,"n"
    7539   00:BB99  01 6F               serp_2:			db	1,"o"
    7540   00:BB9B  01 20               nada:			db	1," "
    7541   00:BB9D                      
    7542   00:BB9D                      programacion:	db	12,"PROGRAMMING:"
    7542   00:BB9D  0C 50 52 4F 47 52 41 4D 4D 49 4E 47 3A 
    7543   00:BBAA                      musica:			db	6,"SONGS:"
    7543   00:BBAA  06 53 4F 4E 47 53 3A 
    7544   00:BBB1                      agradec:		db	7,"THANKS:"
    7544   00:BBB1  07 54 48 41 4E 4B 53 3A 
    7545   00:BBB9                      programacion_e:	db	13,"PROGRAMACION"
    7545   00:BBB9  0D 50 52 4F 47 52 41 4D 41 43 49 4F 4E 
    7546   00:BBC6                      musica_e:		db	7,"MUSICA:"
    7546   00:BBC6  07 4D 55 53 49 43 41 3A 
    7547   00:BBCE                      agradec_e:		db	16,"AGRADECIMIENTOS:"
    7547   00:BBCE  10 41 47 52 41 44 45 43 49 4D 49 45 4E 54 4F 53 
    7547   00:BBDE  3A 
    7548   00:BBDF                      benja:			db	15,"BENJAMIN MIGUEL"
    7548   00:BBDF  0F 42 45 4E 4A 41 4D 49 4E 20 4D 49 47 55 45 4C 
    7549   00:BBEF                      manu:			db	14,"MANUEL BARROSO"
    7549   00:BBEF  0E 4D 41 4E 55 45 4C 20 42 41 52 52 4F 53 4F 
    7550   00:BBFE                      ramon:			db	32,"IMANOK            RAMON CASTILLO"
    7550   00:BBFE  20 49 4D 41 4E 4F 4B 20 20 20 20 20 20 20 20 20 
    7550   00:BC0E  20 20 20 52 41 4D 4F 4E 20 43 41 53 54 49 4C 4C 
    7550   00:BC1E  4F 
    7551   00:BC1F                      fernando1:		db	32,"JORGE ROMERO     FERNANDO GARCIA"
    7551   00:BC1F  20 4A 4F 52 47 45 20 52 4F 4D 45 52 4F 20 20 20 
    7551   00:BC2F  20 20 46 45 52 4E 41 4E 44 4F 20 47 41 52 43 49 
    7551   00:BC3F  41 
    7552   00:BC40                      fernando2:		db	32,"VICTOR MARTINEZ   FERNANDO LOPEZ"
    7552   00:BC40  20 56 49 43 54 4F 52 20 4D 41 52 54 49 4E 45 5A 
    7552   00:BC50  20 20 20 46 45 52 4E 41 4E 44 4F 20 4C 4F 50 45 
    7552   00:BC60  5A 
    7553   00:BC61                      felix:			db	32,"FELIX ESPINA          JORDI ORTE"
    7553   00:BC61  20 46 45 4C 49 58 20 45 53 50 49 4E 41 20 20 20 
    7553   00:BC71  20 20 20 20 20 20 20 4A 4F 52 44 49 20 4F 52 54 
    7553   00:BC81  45 
    7554   00:BC82                      tromax:			db	22,"DAVID F.GISBERT TROMAX"
    7554   00:BC82  16 44 41 56 49 44 20 46 2E 47 49 53 42 45 52 54 
    7554   00:BC92  20 54 52 4F 4D 41 58 
    7555   00:BC99  05 52 4F 59 41 4C   royal:			db	5,"ROYAL"
    7556   00:BC9F                      mano_derecha:	db	13,"MANO DERECHA:"
    7556   00:BC9F  0D 4D 41 4E 4F 20 44 45 52 45 43 48 41 3A 
    7557   00:BCAD                      mano_derecha_e:	db	11,"RIGHT HAND:"
    7557   00:BCAD  0B 52 49 47 48 54 20 48 41 4E 44 3A 
    7558   00:BCB9                      
    7559   00:BCB9                      letras_A:		db	#7C,#82,#82,#FE,#82,#82,#44,#00				;DEFINICION DE LETRAS
    7559   00:BCB9  7C 82 82 FE 82 82 44 00 
    7560   00:BCC1                      letras_B:		db	#78,#84,#84,#F8,#84,#82,#7C,#00
    7560   00:BCC1  78 84 84 F8 84 82 7C 00 
    7561   00:BCC9                      letras_C:		db	#7C,#82,#80,#80,#80,#82,#7C,#00
    7561   00:BCC9  7C 82 80 80 80 82 7C 00 
    7562   00:BCD1                      letras_D:		db	#78,#84,#82,#82,#82,#84,#78,#00
    7562   00:BCD1  78 84 82 82 82 84 78 00 
    7563   00:BCD9                      letras_E:		db	#7C,#82,#80,#FC,#80,#82,#7C,#00
    7563   00:BCD9  7C 82 80 FC 80 82 7C 00 
    7564   00:BCE1                      letras_F:		db	#7C,#82,#80,#FC,#80,#80,#40,#00
    7564   00:BCE1  7C 82 80 FC 80 80 40 00 
    7565   00:BCE9                      letras_G:		db	#7C,#82,#80,#80,#8C,#82,#7C,#00
    7565   00:BCE9  7C 82 80 80 8C 82 7C 00 
    7566   00:BCF1                      letras_H:		db	#44,#82,#82,#FE,#82,#82,#44,#00
    7566   00:BCF1  44 82 82 FE 82 82 44 00 
    7567   00:BCF9                      letras_I:		db	#7C,#92,#10,#10,#10,#92,#7C,#00
    7567   00:BCF9  7C 92 10 10 10 92 7C 00 
    7568   00:BD01                      letras_J:		db	#7C,#92,#10,#0C,#02,#82,#7C,#00
    7568   00:BD01  7C 92 10 0C 02 82 7C 00 
    7569   00:BD09                      letras_K:		db	#44,#82,#84,#F8,#84,#82,#44,#00
    7569   00:BD09  44 82 84 F8 84 82 44 00 
    7570   00:BD11                      letras_L:		db	#40,#80,#80,#80,#80,#82,#7C,#00
    7570   00:BD11  40 80 80 80 80 82 7C 00 
    7571   00:BD19                      letras_M:		db	#44,#BA,#92,#82,#82,#82,#44,#00
    7571   00:BD19  44 BA 92 82 82 82 44 00 
    7572   00:BD21                      letras_N:		db	#44,#A2,#A2,#92,#8A,#8A,#44,#00
    7572   00:BD21  44 A2 A2 92 8A 8A 44 00 
    7573   00:BD29                      letras_O:		db	#7C,#82,#82,#82,#82,#82,#7C,#00
    7573   00:BD29  7C 82 82 82 82 82 7C 00 
    7574   00:BD31                      letras_P:		db	#7C,#82,#82,#FC,#80,#80,#40,#00
    7574   00:BD31  7C 82 82 FC 80 80 40 00 
    7575   00:BD39                      letras_Q:		db	#7C,#82,#82,#82,#9A,#8C,#7C,#00
    7575   00:BD39  7C 82 82 82 9A 8C 7C 00 
    7576   00:BD41                      letras_R:		db	#7C,#82,#82,#FC,#82,#82,#44,#00
    7576   00:BD41  7C 82 82 FC 82 82 44 00 
    7577   00:BD49                      letras_S:		db	#7C,#82,#80,#7C,#02,#82,#7C,#00
    7577   00:BD49  7C 82 80 7C 02 82 7C 00 
    7578   00:BD51                      letras_T:		db	#7C,#92,#10,#10,#10,#10,#10,#00
    7578   00:BD51  7C 92 10 10 10 10 10 00 
    7579   00:BD59                      letras_U:		db	#44,#82,#82,#82,#82,#82,#7C,#00
    7579   00:BD59  44 82 82 82 82 82 7C 00 
    7580   00:BD61                      letras_V:		db	#44,#82,#82,#44,#44,#28,#10,#00
    7580   00:BD61  44 82 82 44 44 28 10 00 
    7581   00:BD69                      letras_W:		db	#44,#82,#82,#82,#92,#AA,#44,#00
    7581   00:BD69  44 82 82 82 92 AA 44 00 
    7582   00:BD71                      letras_X:		db	#44,#82,#6C,#10,#6C,#82,#44,#00
    7582   00:BD71  44 82 6C 10 6C 82 44 00 
    7583   00:BD79                      letras_Y:		db	#44,#82,#82,#7C,#10,#10,#10,#00
    7583   00:BD79  44 82 82 7C 10 10 10 00 
    7584   00:BD81                      letras_Z:		db	#7C,#82,#04,#38,#40,#82,#7C,#00
    7584   00:BD81  7C 82 04 38 40 82 7C 00 
    7585   00:BD89                      
    7586   00:BD89                      titulo_centro1:	db	#DF,#9A,#FF,#6D,#ED,#FF,#D9,#DF				;DEFINICION DE TITULO
    7586   00:BD89  DF 9A FF 6D ED FF D9 DF 
    7587   00:BD91                      titulo_no:		db	#07,#1A,#3F,#6D,#6D,#FF,#D9,#DF
    7587   00:BD91  07 1A 3F 6D 6D FF D9 DF 
    7588   00:BD99                      titulo_ne:		db	#E0,#98,#FE,#6C,#EC,#FF,#D9,#FF
    7588   00:BD99  E0 98 FE 6C EC FF D9 FF 
    7589   00:BDA1                      titulo_so:		db	#DF,#9A,#FF,#ED,#ED,#3F,#19,#07
    7589   00:BDA1  DF 9A FF ED ED 3F 19 07 
    7590   00:BDA9                      titulo_se:		db	#DF,#9A,#FF,#6E,#EC,#FC,#D8,#E0
    7590   00:BDA9  DF 9A FF 6E EC FC D8 E0 
    7591   00:BDB1                      titulo_ru:		db	#18,#1A,#7E,#6C,#6C,#FF,#D9,#DF
    7591   00:BDB1  18 1A 7E 6C 6C FF D9 DF 
    7592   00:BDB9                      titulo_rd:		db	#DF,#9A,#FF,#6C,#6C,#7E,#58,#18
    7592   00:BDB9  DF 9A FF 6C 6C 7E 58 18 
    7593   00:BDC1                      titulo_rr:		db	#07,#1A,#7F,#6D,#ED,#7F,#59,#07
    7593   00:BDC1  07 1A 7F 6D ED 7F 59 07 
    7594   00:BDC9                      titulo_el:		db	#E0,#98,#FE,#6D,#ED,#FE,#D8,#E0
    7594   00:BDC9  E0 98 FE 6D ED FE D8 E0 
    7595   00:BDD1                      cabeza_serp:	db	#FF,#BD,#DB,#7E,#7E,#5A,#24,#18
    7595   00:BDD1  FF BD DB 7E 7E 5A 24 18 
    7596   00:BDD9                      titulo_centro2:	db	#9A,#6D,#D9,#ED,#FF,#DF,#9A,#DF
    7596   00:BDD9  9A 6D D9 ED FF DF 9A DF 
    7597   00:BDE1                      titulo_centro3:	db	#DF,#D9,#9A,#ED,#DF,#FF,#6D,#D9
    7597   00:BDE1  DF D9 9A ED DF FF 6D D9 
    7598   00:BDE9                      titulo_centro4:	db	#ED,#FF,#6D,#9A,#6D,#FF,#D9,#DF
    7598   00:BDE9  ED FF 6D 9A 6D FF D9 DF 
    7599   00:BDF1                      serpiente_1:	db	#0C,#1E,#38,#64,#60,#3C,#1E,#01
    7599   00:BDF1  0C 1E 38 64 60 3C 1E 01 
    7600   00:BDF9                      serpiente_2:	db	#18,#3C,#70,#68,#60,#3C,#1E,#01
    7600   00:BDF9  18 3C 70 68 60 3C 1E 01 
    7601   00:BE01                      
    7602   00:BE01                      parentesis_a:	db	#02,#04,#04,#08,#04,#04,#02,#00				;DEFINICION DE PARENTESIS, GUION Y PUNTO
    7602   00:BE01  02 04 04 08 04 04 02 00 
    7603   00:BE09                      parentesis_c:	db	#80,#40,#40,#20,#40,#40,#80,#00
    7603   00:BE09  80 40 40 20 40 40 80 00 
    7604   00:BE11                      guion:			db	#00,#00,#00,#82,#7C,#00,#00,#00
    7604   00:BE11  00 00 00 82 7C 00 00 00 
    7605   00:BE19                      punto:			db	#00,#00,#00,#00,#00,#60,#60,#00
    7605   00:BE19  00 00 00 00 00 60 60 00 
    7606   00:BE21                      
    7607   00:BE21                      numero0:		db	#7C,#82,#A2,#92,#8A,#82,#7C,#00				;DEFINICION DE NÚMEROS Y DOS PUNTOS
    7607   00:BE21  7C 82 A2 92 8A 82 7C 00 
    7608   00:BE29                      numero1:		db	#00,#02,#02,#00,#02,#02,#00,#00
    7608   00:BE29  00 02 02 00 02 02 00 00 
    7609   00:BE31                      numero2:		db	#7C,#02,#02,#7C,#80,#80,#7C,#00
    7609   00:BE31  7C 02 02 7C 80 80 7C 00 
    7610   00:BE39                      numero3:		db	#7C,#02,#02,#7C,#02,#02,#7C,#00
    7610   00:BE39  7C 02 02 7C 02 02 7C 00 
    7611   00:BE41                      numero4:		db	#00,#82,#82,#7C,#02,#02,#00,#00
    7611   00:BE41  00 82 82 7C 02 02 00 00 
    7612   00:BE49                      numero5:		db	#7C,#80,#80,#7C,#02,#02,#7C,#00
    7612   00:BE49  7C 80 80 7C 02 02 7C 00 
    7613   00:BE51                      numero6:		db	#7C,#80,#80,#7C,#82,#82,#7C,#00
    7613   00:BE51  7C 80 80 7C 82 82 7C 00 
    7614   00:BE59                      numero7:		db	#7C,#02,#02,#00,#02,#02,#00,#00
    7614   00:BE59  7C 02 02 00 02 02 00 00 
    7615   00:BE61                      numero8:		db	#7C,#82,#82,#7C,#82,#82,#7C,#00
    7615   00:BE61  7C 82 82 7C 82 82 7C 00 
    7616   00:BE69                      numero9:		db	#7C,#82,#82,#7C,#02,#02,#7C,#00
    7616   00:BE69  7C 82 82 7C 02 02 7C 00 
    7617   00:BE71                      dospuntos:		db	#00,#00,#60,#60,#00,#60,#60,#00		
    7617   00:BE71  00 00 60 60 00 60 60 00 
    7618   00:BE79                      		
    7619   00:BE79  00 (391)            		ds		#C000-$								;FIN DE LA APLICACION
    7620   00:C000                      		
    7621   00:C000                      		
    7622   00:C000                      		;VARIABLES
    7623   00:C000  00                  idioma:							db	0							;0 ingles 1 castellano 2 catalán
    7624   00:C001                      
    7625   00:C001  00                  petiso_que_toca:				db	0							;0 quieto 1 saltando
    7626   00:C002  00                  petisox:						db	0
    7627   00:C003  00                  petisoy:						db	0
    7628   00:C004  00                  espera_petiso:					db	0
    7629   00:C005  00                  espera_petiso_resta:			db	0
    7630   00:C006  00                  espera_petiso_resta_2:			db	0
    7631   00:C007                      
    7632   00:C007  00 (5)              VIEJA_INTERR:					ds	5							;le damos 5 bytes
    7633   00:C00C                      
    7634   00:C00C  02                  estado_serp:					db	2							;ESTADO Y POSICION DE LA SERPIENTE DE SELECCION
    7635   00:C00D  10                  y_serp:							db	16
    7636   00:C00E                      
    7637   00:C00E  00                  stick_a_usar:					db	0							;valor de on stick y on strig para el juego
    7638   00:C00F                      
    7639   00:C00F  BB8 (2)             clock:							ds	2,3000						;variables de tiempo para intercalar menu y creditos
    7640   00:C011                      
    7641   00:C011  00                  px:								db	0							;x prota
    7642   00:C012  00                  py:								db	0							;y prota
    7643   00:C013  00                  puede_cambiar_de_direccion:		db	0							;0 - no 1 - si
    7644   00:C014  03                  vidas_prota:					db	3
    7645   00:C015  08                  color_prota:					db	8							;7 - mojado		8 - seco
    7646   00:C016  01                  color_lineas_prota:				db	1							;1 - seco		14 - moojado
    7647   00:C017  01                  muerto:							db	1							;0 muerto - 1 vivo
    7648   00:C018  00                  fase_en_la_que_esta:			db	0							;fase en la que jugamos
    7649   00:C019  00                  estado_prota:					db	0							;0=quieto 1=andando 2=saltando 3=cayendo 4=subiendo/bajando
    7650   00:C01A  00                  prev_dir_prota:					db	0							;hacia qué lado miraba antes el prota
    7651   00:C01B  00                  salto_pulsado:					db	0							;para que no se pueda saltar mientras se cae o ya se está saltando
    7652   00:C01C  00                  pasos_de_salto:					db	0							;si está saltando indica cuánto le queda para dejar de saltar
    7653   00:C01D  00                  dir_prota:						db	0							;0 derecha 1 izquierda
    7654   00:C01E  00                  paso:							db	0							;0 recto 1 andando 2 subiendo A 3 subiendo B
    7655   00:C01F  00                  retard_anim:					db	0							;entre 0 y 9
    7656   00:C020  00 (48)             atributos_sprite_general:		ds	48,0						;4 bytes y,x,patron,color PARA 4 SPRITES
    7657   00:C050  00                  tiene_objeto:					db	0							;0=no 1=bomba 2=cuchillo
    7658   00:C051  00                  px_salida:						db	0							;para recordar el punto de la puerta
    7659   00:C052  00                  py_salida:						db	0
    7660   00:C053                      
    7661   00:C053  00                  x_explosion:					db	0
    7662   00:C054  00                  y_explosion:					db	0
    7663   00:C055  00                  estado_de_explosion:			db	0							;0=no 1,2,3 sprites 22,23,24
    7664   00:C056  00                  contador_retardo_explosion:		db	0
    7665   00:C057                      
    7666   00:C057  00 (736)            buffer_colisiones:				ds	736							;para leer las colisiones en RAM ya que es mucho más ràpido
    7667   00:C337                      
    7668   00:C337  00                  estado_de_salto:				db	0							;1a8-9a20-21a28 salto derecha - 31a38-39a50-51a58 salto izquierda
    7669   00:C338  00                  mechero:						db	0							;0 no lo tienes 1 lo tienes
    7670   00:C339  00                  gasolina:						db	0							;0 no lo tienes 1 lo tienes
    7671   00:C33A  00 (2)              posicion_puerta:				ds	2							;posicion de la puerta
    7672   00:C33C  00                  ya_ha_cambiado_puerta:			db	0							;0 está cerrada 1 está abierta
    7673   00:C33D  00                  increm:							db	0							;para borrado concreto de vram
    7674   00:C33E                      
    7675   00:C33E  00 (2)              score:							ds	2							;puntos
    7676   00:C340  00 (2)              contador_para_puntuacion:		ds	2							;compara con score para controlar los tiles a pintar en puntuacion
    7677   00:C342  C0                  posicion_del_punto_unidades:	db	192							;control tile unidades
    7678   00:C343  C0                  posicion_del_punto_decenas:		db	192							;control tile decenas
    7679   00:C344  C0                  posicion_del_punto_centenas:	db	192							;control tile centenas
    7680   00:C345  C0                  posicion_del_punto_millares:	db	192							;control tile unidades de millar
    7681   00:C346  00                  cuenta_puntos_o_no:				db	0							;0 no cuenta 1 si cuenta
    7682   00:C347  00                  cuanto_sumamos_a_score:			db	0							;para el contador evolutivo
    7683   00:C348                      
    7684   00:C348  00 (9)              variables_serpiente_1:			ds	9							;	0	-	serp_x_1
    7685   00:C351                      																;	1	-	serp_y_1
    7686   00:C351                      																;	2	-	serp_direcion_1
    7687   00:C351                      																;	3	-	serp_paso_1
    7688   00:C351                      																;	4	-	color_serp_1
    7689   00:C351                      																;	5	-	cont_retardo_serp_1
    7690   00:C351                      																;	6	-	cont_retardo_serp_1_mobil
    7691   00:C351                      																;	7	-	retardo_veloc_serp_1
    7692   00:C351                      																;	8	-	retardo_veloc_serp_1_mobil
    7693   00:C351  00 (9)              variables_serpiente_2:			ds	9							;	0	-	serp_x_2
    7694   00:C35A                      																;	1	-	serp_y_2
    7695   00:C35A                      																;	2	-	serp_direcion_2
    7696   00:C35A                      																;	3	-	serp_paso_2
    7697   00:C35A                      																;	4	-	color_serp_2
    7698   00:C35A                      																;	5	-	cont_retardo_serp_2
    7699   00:C35A                      																;	6	-	cont_retardo_serp_2_mobil
    7700   00:C35A                      																;	7	-	retardo_veloc_serp_2
    7701   00:C35A                      																;	8	-	retardo_veloc_serp_2_mobil
    7702   00:C35A  00 (9)              variables_serpiente_3:			ds	9							;	0	-	serp_x_3
    7703   00:C363                      																;	1	-	serp_y_3
    7704   00:C363                      																;	2	-	serp_direcion_3
    7705   00:C363                      																;	3	-	serp_paso_3
    7706   00:C363                      																;	4	-	color_serp_3
    7707   00:C363                      																;	5	-	cont_retardo_serp_3
    7708   00:C363                      																;	6	-	cont_retardo_serp_3_mobil
    7709   00:C363                      																;	7	-	retardo_veloc_serp_3
    7710   00:C363                      																;	8	-	retardo_veloc_serp_3_mobil
    7711   00:C363  00 (9)              variables_serpiente_4:			ds	9							;	0	-	serp_x_4
    7712   00:C36C                      																;	1	-	serp_y_4
    7713   00:C36C                      																;	2	-	serp_direcion_4
    7714   00:C36C                      																;	3	-	serp_paso_4
    7715   00:C36C                      																;	4	-	color_serp_4
    7716   00:C36C                      																;	5	-	cont_retardo_serp_4
    7717   00:C36C                      																;	6	-	cont_retardo_serp_4_mobil
    7718   00:C36C                      																;	7	-	retardo_veloc_serp_4
    7719   00:C36C                      																;	8	-	retardo_veloc_serp_4_mobil
    7720   00:C36C  00                  colision_cuchillo_serp_real:	db	0							;	0	-	no hay colision, 1	-	si la hay															
    7721   00:C36D  00                  serp1:							db	0							;serpiente 1 1-presente 0-ausente
    7722   00:C36E  00                  serp2:							db	0							;serpiente 2 1-presente 0-ausente
    7723   00:C36F  00                  serp3:							db	0							;serpiente 3 1-presente 0-ausente
    7724   00:C370  00                  serp4:							db	0							;serpiente 4 1-presente 0-ausente
    7725   00:C371                      
    7726   00:C371  05                  cont_no_salta_dos_seguidas:		db	5							;para evitar el doble salto
    7727   00:C372                      
    7728   00:C372  00                  pasamos_la_fase:				db	0							;0 estamos jugando 1 pasamos la fase
    7729   00:C373                      
    7730   00:C373  00                  momento_lanzamiento:			db	0							;0 no lanza - 1 movm 1 - 2 mov 2 - 3 en órbita
    7731   00:C374  05                  contador_poses_lanzar:			db	5							;para retrasar las poses de lanzar
    7732   00:C375  00 (2)              recordar_lo_que_habia:			ds	2							;guarda el valor de lo que borra si hay que pintar circunstancialmente una cosa
    7733   00:C377  00                  dir_cuchillo:					db	0							;la dirección hacia la que ba el cuchillo
    7734   00:C378  00                  cx:								db	0							;x cuchillo
    7735   00:C379  00                  cy:								db	0							;y cuchillo
    7736   00:C37A                      
    7737   00:C37A  00                  escalera_activada:				db	0							;0 no - 1 si
    7738   00:C37B  00 (2)              posicion_escalera:				ds	2							;numero de tile que tiene que pintar de la escalera alternativa
    7739   00:C37D  32                  contador_escalera:				db	50							;retardo para la construccion de la escalaera
    7740   00:C37E  00 (2)              limite_escalera					ds	2							;numero de tile en el que tiene que parar de construir
    7741   00:C380                      
    7742   00:C380                      
    7743   00:C380  01                  grifo_estado:					db	1							;0 - cerrado	1 - abierto
    7744   00:C381                      
    7745   00:C381                      
    7746   00:C381  01                  ESTADO_MUSICA:					db	1							;0 - apagada y 1 - encendida
    7747   00:C382                      
    7748   00:C382  01                  vision_estado:					db	1							;0 - no ve nada y 1 - lo ve todo
    7749   00:C383                      
    7750   00:C383  00                  colision_bombero_prota_real:		db	0							;	0	-	no hay colision,	1	-	si la hay			
    7751   00:C384  01                  bombero_1:						db	1							;0 - existe		1 - no existe
    7752   00:C385  00 (12)             bombero_control:				ds	12							;	0	-	x					(0 - 255)
    7753   00:C391                      																;	1	-	y					(0 - 255)
    7754   00:C391                      																;	2	.	velocidad			(1 - 3)
    7755   00:C391                      																;	3	-	cada cuanto para	(0 - 255)
    7756   00:C391                      																;	4	-	tiempo que para		(0 - 255)
    7757   00:C391                      																;	5	-	paso				(0 - quieto	1 - andando)
    7758   00:C391                      																;	6	-	direccion			(0 - derecha)	1 - izquierda)
    7759   00:C391                      																;	7	-	en escalera			(0 - no	1 - si)
    7760   00:C391                      																;	8	-	tiempo para aparecer(0-255)
    7761   00:C391                      																;	9	-	retardo de velocidad(0-10)
    7762   00:C391                      																;	10	-	0 - decide subir 1 - decide bajar 2- decide no utilizar
    7763   00:C391                      																;	11	-	contador de reten para evitar que suba  y baje escaleras de forma seguida
    7764   00:C391                      																
    7765   00:C391  00 (1841)           SAXOLO:							ds	1841						;MUSICA INICIO
    7766   00:CAC2  00 (758)            GAME_OVER:						ds	758							;MUSICA FIN PARTIDA
    7767   00:CDB8                      ;FASES:							ds	2465						;MUSICA FASES
    7768   00:CDB8  00 (117)            MUTE:							ds	117							;silencio musical								
    7769   00:CE2D  00 (292)            MUERTO:							ds	292							;MUSICA MUERTO
    7770   00:CF51  00 (615)            ENTRE_FASES:					ds	615							;MUSICA ENTRE FASES

    LABELS
-------------------------------------------------
00:000000C3   CLS
00:0000006C X SCREEN0
00:0000006F   SCREEN1
00:000000D2 X MODOTEXTO
00:000000C6   LOCATE
00:000000A2   CHPUT
00:000000CC   KEYOFF
00:00000062   COLOR
00:0000F3E9   COLLETRA
00:0000F3EA   COLFONDO
00:0000F3EB   COLBORDE
00:0000009F X INPUT
00:0000F3AF X ANCHOSC0
00:0000F3AF   ANCHOSC1
00:0000F3DB   CLICKOFF
00:00000041   DISSCR
00:00000044   ENASCR
00:0000013E X RDVDP
00:00000047   WRTVDP
00:0000005C   GRABAVRAM
00:00000059 X GRABARAM
00:0000005F   SCREENX
00:000000D5   ONSTICK
00:000000D8   ONSTRIG
00:0000003B X RESET
00:0000FD9A X H.KEYI
00:0000FD9F   H.TIMI
00:00000141   SNSMAT
00:00000024   ENASLT
00:00000138   RSLREG
00:0000C000   SLOTVAR
00:0000F3DF X RG0SAV
00:0000F3E0   RG1SAV
00:0000F3E1 X RG2SAV
00:0000F3E2 X RG3SAV
00:0000F3E3 X RG4SAV
00:0000F3E4 X RG5SAV
00:0000F3E5 X RG6SAV
00:0000F3E6 X RG7SAV
00:0000F3E7 X STATFL
00:00004010   search_slotset
00:00004016   search_slot
00:00004037   START
00:00004091   PANTALLA_DE_CARGA
00:000040C8   INICIA_MUSICA
00:000040E0   petisos
00:000040F1   petiso_activity
00:0000412F   petiso_a_saltar
00:0000413E   registros_petiso
00:0000418D   MENU
00:000041AA X PREPARA_VARIABLES_SERPIENTE
00:000041D0 X RUTINA_DE_MENU
00:0000420C X PANTALLA_DE_SELECCION
00:0000424B X menu_ingles
00:0000428E   menu_castellano
00:000042CF   rutina_colores_inicio
00:000042D1   rutina_colores
00:000042EB X contro_serpiente_a_pintar
00:00004302   control_stick_menu
00:00004315   control_strig_menu
00:0000431E X controla_tiempo_para_cambio
00:00004335   termina_secuencia_color
00:00004339   CREDITOS
00:000043AF X creditos_ingles
00:000043E5   creditos_castellano
00:00004419   controla_tiempo_para_cambio_2
00:0000442F   prepara_contador_para_menu
00:00004439   que_ha_elegido
00:00004455   idioma_a_pintar
00:0000445C X castellano
00:00004464   ingles
00:0000446B   prepara_teclado
00:00004472   prepara_mando
00:0000447A   lee_pinta_una
00:0000447C   loop_lee_pinta_una
00:00004484   controla_serpiente
00:0000448F   pinta_serpiente_1
00:000044A9   pinta_serpiente_2
00:000044C3   sube_cursor
00:000044CE   lo_sube
00:000044F1   baja_cursor
00:000044FC   lo_baja
00:0000451F   limpia_sprites
00:0000454D   prepara_juego
00:00004578 X instrucciones_en_ingles
00:00004583   instrucciones_en_castellano
00:0000458C   esperando
00:000045CE   bloque_sanctuary_1
00:000045DD   bloque_sanctuary_1_esp
00:000045E0   bloque_sanctuary_1_cont
00:0000464F   bloque_sanctuary_2
00:0000465E   bloque_sanctuary_2_esp
00:00004661   bloque_sanctuary_2_cont
00:000046F8   bloque_sanctuary_3
00:00004707   bloque_sanctuary_3_esp
00:0000470A   bloque_sanctuary_3_cont
00:00004773   bloque_sanctuary_4
00:00004782   bloque_sanctuary_4_esp
00:00004785   bloque_sanctuary_4_cont
00:00004818   bloque_sanctuary_5
00:00004827   bloque_sanctuary_5_esp
00:0000482A   bloque_sanctuary_5_cont
00:000048A5   bloque_sanctuary_6
00:000048B4   bloque_sanctuary_6_esp
00:000048B7   bloque_sanctuary_6_cont
00:0000498E   bloque_sanctuary_7
00:0000499D   bloque_sanctuary_7_esp
00:000049A0   bloque_sanctuary_7_cont
00:00004A27   bloque_sanctuary_8
00:00004A36   bloque_sanctuary_8_esp
00:00004A39   bloque_sanctuary_8_cont
00:00004AC0   bloque_sanctuary_9
00:00004ACF   bloque_sanctuary_9_esp
00:00004AD2   bloque_sanctuary_9_cont
00:00004B4E   bloque_sanctuary_10
00:00004B5D   bloque_sanctuary_10_esp
00:00004B60   bloque_sanctuary_10_cont
00:00004BFC   FINAL_TEMPLO
00:00004C2A   FINAL_TEMPLO_CONTINUA
00:00004C64   animacion_final
00:00004CAB   pantalla_en_blanco
00:00004CC4   copiamos_en_pantalla_lo_de_memoria
00:00004CD0   anunciamos_el_santuario_correspondiente
00:00004CD9   variables_iguales
00:00004D3A   SPRITES_PETISOS
00:00004D47   SPRITES_UNO
00:00004D57   SPRITES_DOS
00:00004D7C   SPRITES_BOMBA
00:00004DAD   SPRITES_CUCHILLO
00:00004DDE   SPRITES_PROTA_NORMAL
00:00004E0F   string_de_espera
00:00004E1B   activa_mute
00:00004E26   activa_musica_fases
00:00004E3A   activa_musica_menu
00:00004E45   activa_musica_muerto
00:00004E50   activa_musica_entre_fases
00:00004E5B   rutina_de_esperar_un_rato
00:00004E6A   PREPARACION_SCREEN_2
00:00004E7D   gran_rutina
00:00004ED3   vigila_si_cierra_puertas
00:00004EF8   movimiento_forzado_en_puertas
00:00004F10   recoloca_puerta_amarilla_derecha
00:00004F44   recoloca_puerta_amarilla_izquierda
00:00004F78   recoloca_puerta_azul_derecha
00:00004FAC   recoloca_puerta_azul_izquierda
00:00004FE0   grifo_bombero
00:00005024   revisa_bombero
00:0000503A   se_activa_el_bombero
00:0000506E   resta_y_camina
00:00005075   revisa_subida_bombero
00:0000508A   continua_rvb
00:000050AC   revisa_bajada_bombero
00:000050C9   continua_rbb
00:000050EB   corrige_en_escalera_bombero
00:000050F4   sigue_andando
00:000050FF   decide_paso_en_escalera
00:0000510A   paso_uno_escaleras
00:00005117   paso_dos_escaleras
00:00005123   revisa_caida_bombero
00:00005172   define_direccion_bombero
00:0000517D X va_hacia_la_izquierda
00:000051AA X paso_movido_izquierda
00:000051B6   paso_quieto_izquierda
00:000051C3   va_hacia_la_derecha
00:000051F0 X paso_movido_derecha
00:000051FB   paso_quieto_derecha
00:00005207   cambia_la_direccion_bombero
00:0000520E X cambia_a_derecha
00:00005213   cambia_a_izquierda
00:00005219   hacia_donde_quiero_ir
00:00005236   damos_valor_bajada_bombero
00:0000523C   damos_valor_subida_bombero
00:00005242   estamos_en_escalera
00:00005249   ultimas_variables_bombero
00:00005284   revisa_escalera
00:000052FE   se_acabo_la_escalera
00:00005303   pulsa_una_tecla
00:0000531E   pasa_fase_con_trampa
00:00005327   una_vida_menos
00:00005339   musica_off_on
00:00005347   rutina_de_espera_tras_la_musica
00:0000534A   valor_anadido_2
00:0000534C   retardo_rutina_de_pausa_2
00:0000535A   reconectamos_musica
00:00005364   pausa_el_juego
00:0000537B   valor_anadido
00:0000537D   retardo_rutina_de_pausa
00:0000538A   rutina_de_pausa
00:00005395   reconectamos
00:000053A9   valor_anadido_1
00:000053AB   retardo_rutina_de_pausa_1
00:000053C2   repite_fase
00:00005416   termina_partida_mal
00:00005429 X termina_en_ingles
00:00005437   termina_en_castellano
00:00005443   termina_partida_mal_continua
00:00005455   string_para_reiniciar_programa
00:0000546D   inicio
00:00005473   musica_sin_bucle
00:0000547C   musica_con_bucle
00:00005485   colision_bombero_prota
00:00005506   colisiones_serpientes_prota_1
00:00005554   espera_por_muerte
00:00005563 X on_string_de_muerte
00:0000556D   colisiones_serpientes_prota_2
00:000055BD   colisiones_serpientes_prota_3
00:0000560E   colisiones_serpientes_prota_4
00:0000565D   coteja_colision_prota_serpiente
00:00005696   coteja_colision_prota_bombero
00:000056CF   colisiones_serpientes_cuchillos
00:000056DC X colision_cuchillo_serp_1
00:000056FF   colision_cuchillo_serp_2
00:00005729   colision_cuchillo_serp_3
00:00005753   colision_cuchillo_serp_4
00:0000577C   colision_cuchillo_serpiente
00:000057D4   atributos_sprites
00:000057E1   estado_en_que_se_encuentra
00:00005811   continua_estado
00:0000584C   cambio_estado_a_subiendo_para_la_caida
00:00005852   segunda_comprovacion_caida
00:00005865   final_rutina_sin_caida
00:0000586B   caigo
00:0000589D   rectifico_caida_a_izquierda
00:000058A5   rectifico_caida_a_derecha
00:000058AD   mueve_prota
00:000058E7   sube_escaleras
00:00005933   sube_escaleras_afirmativo
00:00005957   a_mover_a_la_izquierda
00:00005960   comprueba_derecha
00:0000598B   a_mover_a_la_derecha
00:00005992   a_subir
00:000059A1   baja_escaleras
00:000059EB   baja_escaleras_afirmativo
00:00005A0F   a_mover_a_la_izquierda_bajando
00:00005A18   comprueba_derecha_bajando
00:00005A40   a_mover_a_la_derecha_bajando
00:00005A47   a_bajar
00:00005A55   mueve_izquierda_prota
00:00005A97   actualiza_el_paso_subiendo
00:00005AA5   reset_retardo_y_cambia_paso_subiendo
00:00005AB5   gira_puerta_derecha_amarilla
00:00005AE3   gira_puerta_izquierda_amarilla
00:00005B11   gira_puerta_derecha_azul
00:00005B3F   gira_puerta_izquierda_azul
00:00005B6D   mueve_derecha_prota
00:00005BAD   actualiza_el_paso
00:00005BBB   reset_retardo_y_cambia_paso
00:00005BCB   actualiza_atributos_sprite
00:00005C18   lanza_derecha_1
00:00005C1C   lanza_derecha_2
00:00005C20   mirando_izquierda
00:00005C2F   lanza_izquierda_1
00:00005C33   lanza_izquierda_2
00:00005C37   mirar_paso
00:00005C47   todo_va_bien
00:00005C4F   ultimos_valores
00:00005C78   esta_cayendo_para_el_patron
00:00005C7D   esta_subiendo_o_bajando_para_el_patron
00:00005C81   end
00:00005C87   set_parado
00:00005C8D   get_bloque_en_X_Y
00:00005CB2   get_bloque_en_X_Y_paravram
00:00005CCD   pone_estado_prota_a_0
00:00005CD1   pose_si_esta_parado
00:00005CE6   esta_en_escalera
00:00005CEC   usa_objeto_o_salta
00:00005D3A   reduce_el_contador_de_salto
00:00005D3F   decide_si_usa_o_salta
00:00005D75   fase_superada
00:00005D8D   apaga_los_chorros
00:00005DC9   quita_a_tu_derecha
00:00005E06   quita_a_tu_izquierda
00:00005E43   quita_a_tu_derecha_2
00:00005E92   quita_a_tu_izquierda_2
00:00005ECF   coge_algun_objeto
00:00005F2D   activa_escalera_extra
00:00005F4C   activa_chorro_1
00:00005F95   activa_chorro_3
00:00005FDC   moja_prota
00:00005FE7   activa_chorro_2
00:0000602A   coge_toalla
00:0000605B   cierra_grifo
00:00006086   coge_mechero
00:000060C3   damos_la_luz
00:000060E7   coge_gasolina
00:00006124   coge_la_bomba
00:00006164   coge_cuchillo
00:000061A3   usa_bomba
00:000061BE   continuamos
00:0000620E   segunda_comprovacion_de_agujeros
00:0000622B   hace_agujero_1
00:0000624E   hace_agujero_1_2
00:00006263   hace_agujero_2
00:00006287   hace_agujero_2_2
00:0000629C   hace_agujero_3
00:000062CB   hace_agujero_3_2
00:000062E0   usa_cuchillo
00:00006304   rutina_cuchillo_volador
00:00006327   comprueba_lugar_cuchillo
00:00006333 X lanzamos_a_la_derecha
00:0000636E   lanzamos_a_la_izquierda
00:000063A7   intento_fallido
00:000063B1   avanza_cuchillo
00:000063B9 X avanza_hacia_la_derecha
00:00006419   clava_a_la_derecha
00:00006447   continua_clava_derecha_normal
00:0000646E   avanza_hacia_la_izquierda
00:000064CE   clava_a_la_izquierda
00:000064FC   continua_clava_izquierda_normal
00:00006523   actualiza_la_puerta
00:0000656F   alegria_de_color
00:000065AE   comprueba_estado_de_explosion
00:000065ED   finalizamos_la_explosion
00:00006604   puntuacion_vidas_fase
00:00006655   fase_superior_a_diez
00:0000666B   rutina_de_puntos
00:00006680   resetea_los_numeros
00:000066B3   termina_de_contar_puntuacion
00:000066FC   ha_saltado
00:00006707   salta_hacia_la_derecha
00:0000670D   salta_hacia_la_izquierda
00:00006713   salta_sube
00:0000672F   la_y_a_la_derecha
00:00006737   salta_resolucion
00:00006747   resetea_el_salto
00:00006751   salta_sube_izquierda
00:00006774   la_y_a_la_izquierda
00:0000677C   salta_sigue
00:00006790   salta_sigue_izquierda
00:000067A3   salta_baja
00:000067D3   salta_baja_izquierda
00:00006803   animacion_entre_fases
00:00006808   quemando_al_prota
00:00006825   rutina_espera_quemando_1
00:00006842   rutina_espera_quemando_2
00:00006883   rutina_pone_consejo
00:0000689E   consejos_fase_2
00:000068A5 X consejo_ing_fase_2
00:000068B4   consejo_esp_fase_2
00:000068C3   consejos_fase_3
00:000068CA X consejo_ing_fase_3
00:000068D8   consejo_esp_fase_3
00:000068E6   consejos_fase_5
00:000068ED X consejo_ing_fase_5
00:000068FB   consejo_esp_fase_5
00:00006909   consejos_fase_7
00:00006910 X consejo_ing_fase_7
00:0000691E   consejo_esp_fase_7
00:0000692C   consejos_fase_10
00:00006933 X consejo_ing_fase_10
00:00006941   consejo_esp_fase_10
00:0000694F   rutina_espera_quemando_2_cont
00:00006959   paseito_entre_fases
00:000069CC   movimiento_serpientes
00:000069D0 X analiza_serpiente_1
00:000069DE X detalla_atributos_serp_1
00:00006A05   analiza_serpiente_2
00:00006A13 X detalla_atributos_serp_2
00:00006A3A   analiza_serpiente_3
00:00006A48 X detalla_atributos_serp_3
00:00006A6F   analiza_serpiente_4
00:00006A7C X detalla_atributos_serp_4
00:00006AA4   rutina_de_movimiento_serpientes
00:00006AAB X resta_x_serpiente
00:00006AD7   suma_x_serpiente
00:00006B04   serp_cambia_paso_a_derecha
00:00006B0B   serp_cambia_paso_a_izquierda
00:00006B11   pose_serp
00:00006B29 X paso_1_serp
00:00006B30   paso_2_serp
00:00006B34   elegir_sprite_serp
00:00006B3B X suma_direccion_0_serp
00:00006B42 X suma_paso_00_serp
00:00006B47   suma_paso_01_serp
00:00006B4C   suma_direccion_1_serp
00:00006B53 X suma_paso_10_serp
00:00006B58   suma_paso_11_serp
00:00006B5D   seis_diez
00:00006B6A   dos_diez
00:00006B77   menos_dos_diez
00:00006B84   seis_dos
00:00006B91   cero_cero
00:00006B9A   siete_diecisiete
00:00006BA7   menos_uno_dieciseis
00:00006BB3   dieciseis_dieciseis
00:00006BC0   menos_dos_dieciocho
00:00006BCD   catorce_diez
00:00006BDA   catorce_dos
00:00006BE7   catorce_dieciocho
00:00006BF4 X veinte_diez
00:00006C01   veintidos_diez
00:00006C0E   menos_diez_diez
00:00006C1B   seis_dieciocho
00:00006C28   menos_diez_dieciocho
00:00006C35   tres_quince
00:00006C42   tres_dos
00:00006C4F   cero_dieciocho
00:00006C5A   ocho_dieciocho
00:00006C67   ocho_uno
00:00006C73   dieciseis_quince
00:00006C80   dieciseis_dos
00:00006C8D   uno_menos_cuatro
00:00006C99   menos_uno_quince
00:00006CA5   menos_uno_dos
00:00006CB1   pinta_en_pantalla
00:00006CC4   efecto_sonido
00:00006CC9   depack_VRAM
00:00006CF6   literal
00:00006CFB   loop
00:00006D04 X getlen
00:00006D0A   lus
00:00006D27   lenok
00:00006D34   mode7
00:00006D3A   mode6
00:00006D40   mode5
00:00006D46   mode4
00:00006D4C   mode3
00:00006D52   mode2
00:00006D62   offsok
00:00006D6D   offsok.loop
00:00006D8F   getbit
00:00006D93   getbitexx
00:00006D99   Depack_out
00:00006D9B   modes
00:00006DA9   depack
00:00006DA9 X unpack
00:00006DCD   pletter.literal
00:00006DCF   pletter.loop
00:00006DD8 X pletter.getlen
00:00006DDE   pletter.getlen.lus
00:00006DF9   pletter.getlen.lenok
00:00006E06   pletter.mode6
00:00006E0C   pletter.mode5
00:00006E12   pletter.mode4
00:00006E18   pletter.mode3
00:00006E1E   pletter.mode2
00:00006E2E   pletter.offsok
00:00006E3D   pletter.getbit
00:00006E41   pletter.getbitexx
00:00006E47   pletter.modes
00:00006E53   nuestra_isr
00:00000000   CHNPRM_PsInOr
00:00000001   CHNPRM_PsInSm
00:00000002   CHNPRM_CrAmSl
00:00000003   CHNPRM_CrNsSl
00:00000004   CHNPRM_CrEnSl
00:00000005   CHNPRM_TSlCnt
00:00000006   CHNPRM_CrTnSl
00:00000008   CHNPRM_TnAcc
00:0000000A   CHNPRM_COnOff
00:0000000B   CHNPRM_OnOffD
00:0000000C   CHNPRM_OffOnD
00:0000000D   CHNPRM_OrnPtr
00:0000000F   CHNPRM_SamPtr
00:00000011   CHNPRM_NNtSkp
00:00000012   CHNPRM_Note
00:00000013   CHNPRM_SlToNt
00:00000014   CHNPRM_Env_En
00:00000015   CHNPRM_Flags
00:00000016   CHNPRM_TnSlDl
00:00000017   CHNPRM_TSlStp
00:00000019   CHNPRM_TnDelt
00:0000001B   CHNPRM_NtSkCn
00:0000001C   CHNPRM_Volume
00:0000001D X CHNPRM_Size
00:00000000   AR_TonA
00:00000002   AR_TonB
00:00000004   AR_TonC
00:00000006   AR_Noise
00:00000007   AR_Mixer
00:00000008   AR_AmplA
00:00000009   AR_AmplB
00:0000000A   AR_AmplC
00:0000000B   AR_Env
00:0000000D   AR_EnvTp
00:00006E5F   CHECKLP
00:00006E70 X PT3_MUTE
00:00006E7C   PT3_INIT
00:00006EBB   PT3_INIT.TP_0
00:00006EC7   PT3_INIT.TP_1
00:00006ECE   PT3_INIT.TP_2
00:00006F3C   PT3_INIT.L1
00:00006F49   PT3_INIT.L2
00:00006F4D X PT3_INIT.L3
00:00006F74   PT3_INIT.CORR_1
00:00006F82   PT3_INIT.CORR_2
00:00006F89   PT3_INIT.TC_EXIT
00:00006F94   PT3_INIT.INITV1
00:00006F9C   PT3_INIT.INITV2
00:00006FB0   PT3_INIT.INITV3
00:00006FB4   PD_OrSm
00:00006FBE   PD_SAM
00:00006FBF   PD_SAM_
00:00006FD5   PD_VOL
00:00006FDE   PD_EOff
00:00006FE6   PD_SorE
00:00006FF0   PD_ENV
00:00006FF5   PD_ORN
00:00006FFA   PD_ESAM
00:00007007   PTDECOD
00:00007016   PD_LOOP
00:00007019   PD_LP2
00:00007046   PD_NOIS
00:0000704B   PD_REL
00:00007051   PD_NOTE
00:00007059   PD_RES
00:0000706B   PD_FIN
00:00007072   C_PORTM
00:000070BD   C_PORTM.NOSIG
00:000070C7   SET_STP
00:000070D3   C_GLISS
00:000070E6   C_SMPOS
00:000070EC   C_ORPOS
00:000070F2   C_VIBRT
00:0000710A   C_ENGLS
00:0000711C   C_DELAY
00:00007122   SETENV
00:0000713D   C_NOP
00:0000713E   SETORN
00:00007157   SPCCOMS
00:00007177   CHREGS
00:0000719A   CHREGS.CH_ORPS
00:000071A5   CHREGS.CH_NTP
00:000071AB   CHREGS.CH_NOK
00:000071C6   CHREGS.CH_SMPS
00:000071DC   CHREGS.CH_NOAC
00:00007223   CHREGS.CH_STPP
00:00007238   CHREGS.CH_AMP
00:0000724A   CHREGS.CH_AMIN
00:0000724F   CHREGS.CH_SVAM
00:00007252   CHREGS.CH_NOAM
00:0000725B   CHREGS.CH_APOS
00:00007261   CHREGS.CH_VOL
00:0000726C X CHREGS.CH_ENV
00:00007273   CHREGS.CH_NOEN
00:0000728D   CHREGS.NO_ENAC
00:00007294   CHREGS.NO_ENSL
00:000072A2   CHREGS.CH_MIX
00:000072A6   CHREGS.CH_EXIT
00:000072C5   CHREGS.CH_ONDL
00:000072C9   PT3_PLAY
00:000072FD   PT3_PLAY.PLNLP
00:00007324   PT3_PLAY.PL1A
00:0000732F   PT3_PLAY.PL1B
00:00007344   PT3_PLAY.PL1C
00:00007359   PT3_PLAY.PL1D
00:0000735F   PT3_PLAY.PL2
00:000073C1   PT3_ROUT
00:000073C2   ROUT_A0
00:000073CE   ROUT_A0.LOUT
00:000073E2   NT_DATA
00:000073F2   T_
00:000073F2   TCOLD_0
00:000073FE   TCNEW_1
00:000073FE   TCOLD_1
00:00007400   TCOLD_2
00:00007412   TCNEW_3
00:00007413   TCOLD_3
00:0000741C   TCNEW_0
00:00007427   TCNEW_2
00:00007432   EMPTYSAMORN
00:00007436   T_PACK
00:00000000 X AYFXRELATIVE
00:0000746B   ayFX_SETUP
00:00007477   ayFX_END
00:0000747D   ayFX_INIT
00:0000748E   ayFX_INIT.CHECK_PRI
00:000074AF   ayFX_INIT.INIT_END
00:000074B3   ayFX_PLAY
00:000074C7   ayFX_PLAY.TAKECB
00:000074D8   ayFX_PLAY.CHECK_NN
00:000074E5   ayFX_PLAY.SETPOINTER
00:000074F9   ayFX_PLAY.SETMASKS
00:00007507 X ayFX_PLAY.CHK1
00:00007509 X ayFX_PLAY.PLAY_C
00:00007516   ayFX_PLAY.CHK2
00:0000751B X ayFX_PLAY.PLAY_B
00:00007528   ayFX_PLAY.CHK3
00:0000752B X ayFX_PLAY.PLAY_A
00:00007538   ayFX_PLAY.SETMIXER
00:00007548   CANCION
00:00007829   SILENCIO
00:00007845   MUSICA_GAMEOVER
00:0000797F   EFECTOS_BANCO
00:000080B9   MUSICA_MUERTO
00:00008149   MUSICA_ENTRE_FASES
00:0000F000   PT3_SETUP
00:0000F001   PT3_MODADDR
00:0000F003   PT3_CrPsPtr
00:0000F005   PT3_SAMPTRS
00:0000F007   PT3_OrnPtrs
00:0000F009   PT3_PDSP
00:0000F00B   PT3_CSP
00:0000F00D   PT3_PSP
00:0000F00F   PT3_PrNote
00:0000F010   PT3_PrSlide
00:0000F012   PT3_AdInPtA
00:0000F014   PT3_AdInPtB
00:0000F016   PT3_AdInPtC
00:0000F018   PT3_LPosPtr
00:0000F01A   PT3_PatsPtr
00:0000F01C   PT3_Delay
00:0000F01D   PT3_AddToEn
00:0000F01E   PT3_Env_Del
00:0000F01F   PT3_ESldAdd
00:0000F021   PT3_NTL3
00:0000F023   VARS
00:0000F023   ChanA
00:0000F040   ChanB
00:0000F05D   ChanC
00:0000F07A   DelyCnt
00:0000F07B   CurESld
00:0000F07D   CurEDel
00:0000F07E   Ns_Base_AddToNs
00:0000F07E   Ns_Base
00:0000F07F   AddToNs
00:0000F080   NT_
00:0000F140   AYREGS
00:0000F140   VT_
00:0000F14E   EnvBase
00:0000F150   VAR0END
00:0000F150   T1_
00:0000F150   T_NEW_1
00:0000F150   T_OLD_1
00:0000F168   T_OLD_2
00:0000F180   T_NEW_3
00:0000F180   T_OLD_3
00:0000F182   T_OLD_0
00:0000F182   T_NEW_0
00:0000F19A   T_NEW_2
00:0000F240   ayFX_MODE
00:0000F241   ayFX_BANK
00:0000F243   ayFX_PRIORITY
00:0000F244   ayFX_POINTER
00:0000F246   ayFX_TONE
00:0000F248   ayFX_NOISE
00:0000F249   ayFX_VOLUME
00:0000F24A   ayFX_CHANNEL
00:00008267   instru_caste
00:00008376   instru_ingle
00:00008489   pant_carga_til
00:000092B7   pant_carga_col
00:00009A95   pant_carga
00:00009BBD   tiles_1
00:00009FFC   colores_1
00:0000A1E8   fase_1
00:0000A28C   fase_2
00:0000A38B   fase_3
00:0000A4D8   fase_4
00:0000A5C1   fase_5
00:0000A6F0   fase_6
00:0000A82D   fase_7
00:0000A919   fase_8
00:0000AA21   fase_9
00:0000AB3C   fase_10
00:0000AC51   FINAL
00:0000AD23   sanctuary_1
00:0000AD2F   sanctuary_2
00:0000AD3B   sanctuary_3
00:0000AD47   sanctuary_4
00:0000AD53   sanctuary_5
00:0000AD5F   sanctuary_6
00:0000AD6B   sanctuary_7
00:0000AD77   sanctuary_8
00:0000AD83   sanctuary_9
00:0000AD8F   sanctuary_10
00:0000AD9B   sanctuario_1
00:0000ADA7   sanctuario_2
00:0000ADB3   sanctuario_3
00:0000ADBF   sanctuario_4
00:0000ADCB   sanctuario_5
00:0000ADD7   sanctuario_6
00:0000ADE3   sanctuario_7
00:0000ADEF   sanctuario_8
00:0000ADFB   sanctuario_9
00:0000AE07   sanctuario_10
00:0000AE13   consejo_2
00:0000AE25   consejo_3
00:0000AE84   consejo_5
00:0000AEA5   consejo_7
00:0000AEC3   consejo_10
00:0000AEE1   advice_2
00:0000AEF3   advice_3
00:0000AF51   advice_5
00:0000AF6F   advice_7
00:0000AF8D   advice_10
00:0000AFAB   lo_has_logrado
00:0000AFCA   felicidades
00:0000AFE8   camino_a
00:0000B004   blanco
00:0000B02A   entre_fases
00:0000B0C0   marcador
00:0000B0E4   trofeos
00:0000B0F1   sprites
00:0000B489   sprites2
00:0000B589   sprites3
00:0000B649   sprites4
00:0000B749   sprites5
00:0000B769   sprites9
00:0000B789   sprites6
00:0000B7A9   sprites10
00:0000B7C9   sprites7
00:0000B7E9   sprites11
00:0000B809   sprites8
00:0000B829   sprites12
00:0000B849   sprites13
00:0000B869   sprites14
00:0000B889   sprites15
00:0000B8A9   sprites16
00:0000B8C9   sprites_pet
00:0000B9C9   game_over
00:0000B9D3   se__acabo
00:0000B9DD   pause
00:0000B9E2   ladrillos
00:0000B9E7   empresa
00:0000BA04   empresa_e
00:0000BA21   titulo_1
00:0000BB02   titulo_8
00:0000BB23   mensaje
00:0000BB28   teclado
00:0000BB33   mando
00:0000BB3E   instrucciones
00:0000BB49   teclado_e
00:0000BB53   mando_e
00:0000BB5B   instruccion_e
00:0000BB64   salir
00:0000BB71   salir_e
00:0000BB7B   copyright
00:0000BB97   serp_1
00:0000BB99   serp_2
00:0000BB9B   nada
00:0000BB9D   programacion
00:0000BBAA   musica
00:0000BBB1   agradec
00:0000BBB9   programacion_e
00:0000BBC6   musica_e
00:0000BBCE   agradec_e
00:0000BBDF   benja
00:0000BBEF   manu
00:0000BBFE   ramon
00:0000BC1F   fernando1
00:0000BC40   fernando2
00:0000BC61   felix
00:0000BC82   tromax
00:0000BC99   royal
00:0000BC9F   mano_derecha
00:0000BCAD   mano_derecha_e
00:0000BCB9   letras_A
00:0000BCC1 X letras_B
00:0000BCC9 X letras_C
00:0000BCD1 X letras_D
00:0000BCD9 X letras_E
00:0000BCE1 X letras_F
00:0000BCE9 X letras_G
00:0000BCF1 X letras_H
00:0000BCF9 X letras_I
00:0000BD01 X letras_J
00:0000BD09 X letras_K
00:0000BD11 X letras_L
00:0000BD19 X letras_M
00:0000BD21 X letras_N
00:0000BD29 X letras_O
00:0000BD31 X letras_P
00:0000BD39 X letras_Q
00:0000BD41 X letras_R
00:0000BD49 X letras_S
00:0000BD51 X letras_T
00:0000BD59 X letras_U
00:0000BD61 X letras_V
00:0000BD69 X letras_W
00:0000BD71 X letras_X
00:0000BD79 X letras_Y
00:0000BD81 X letras_Z
00:0000BD89   titulo_centro1
00:0000BD91 X titulo_no
00:0000BD99 X titulo_ne
00:0000BDA1 X titulo_so
00:0000BDA9 X titulo_se
00:0000BDB1 X titulo_ru
00:0000BDB9 X titulo_rd
00:0000BDC1 X titulo_rr
00:0000BDC9 X titulo_el
00:0000BDD1 X cabeza_serp
00:0000BDD9 X titulo_centro2
00:0000BDE1 X titulo_centro3
00:0000BDE9 X titulo_centro4
00:0000BDF1 X serpiente_1
00:0000BDF9 X serpiente_2
00:0000BE01   parentesis_a
00:0000BE09 X parentesis_c
00:0000BE11   guion
00:0000BE19 X punto
00:0000BE21   numero0
00:0000BE29 X numero1
00:0000BE31 X numero2
00:0000BE39 X numero3
00:0000BE41 X numero4
00:0000BE49 X numero5
00:0000BE51 X numero6
00:0000BE59 X numero7
00:0000BE61 X numero8
00:0000BE69 X numero9
00:0000BE71 X dospuntos
00:0000C000   idioma
00:0000C001   petiso_que_toca
00:0000C002   petisox
00:0000C003   petisoy
00:0000C004   espera_petiso
00:0000C005   espera_petiso_resta
00:0000C006   espera_petiso_resta_2
00:0000C007   VIEJA_INTERR
00:0000C00C   estado_serp
00:0000C00D   y_serp
00:0000C00E   stick_a_usar
00:0000C00F   clock
00:0000C011   px
00:0000C012   py
00:0000C013   puede_cambiar_de_direccion
00:0000C014   vidas_prota
00:0000C015   color_prota
00:0000C016   color_lineas_prota
00:0000C017   muerto
00:0000C018   fase_en_la_que_esta
00:0000C019   estado_prota
00:0000C01A   prev_dir_prota
00:0000C01B X salto_pulsado
00:0000C01C   pasos_de_salto
00:0000C01D   dir_prota
00:0000C01E   paso
00:0000C01F   retard_anim
00:0000C020   atributos_sprite_general
00:0000C050   tiene_objeto
00:0000C051   px_salida
00:0000C052   py_salida
00:0000C053   x_explosion
00:0000C054   y_explosion
00:0000C055   estado_de_explosion
00:0000C056   contador_retardo_explosion
00:0000C057   buffer_colisiones
00:0000C337   estado_de_salto
00:0000C338   mechero
00:0000C339   gasolina
00:0000C33A   posicion_puerta
00:0000C33C   ya_ha_cambiado_puerta
00:0000C33D X increm
00:0000C33E   score
00:0000C340   contador_para_puntuacion
00:0000C342   posicion_del_punto_unidades
00:0000C343   posicion_del_punto_decenas
00:0000C344   posicion_del_punto_centenas
00:0000C345   posicion_del_punto_millares
00:0000C346   cuenta_puntos_o_no
00:0000C347   cuanto_sumamos_a_score
00:0000C348   variables_serpiente_1
00:0000C351   variables_serpiente_2
00:0000C35A   variables_serpiente_3
00:0000C363   variables_serpiente_4
00:0000C36C   colision_cuchillo_serp_real
00:0000C36D   serp1
00:0000C36E   serp2
00:0000C36F   serp3
00:0000C370   serp4
00:0000C371   cont_no_salta_dos_seguidas
00:0000C372   pasamos_la_fase
00:0000C373   momento_lanzamiento
00:0000C374   contador_poses_lanzar
00:0000C375   recordar_lo_que_habia
00:0000C377   dir_cuchillo
00:0000C378   cx
00:0000C379   cy
00:0000C37A   escalera_activada
00:0000C37B   posicion_escalera
00:0000C37D   contador_escalera
00:0000C37E   limite_escalera
00:0000C380   grifo_estado
00:0000C381   ESTADO_MUSICA
00:0000C382   vision_estado
00:0000C383   colision_bombero_prota_real
00:0000C384   bombero_1
00:0000C385   bombero_control
00:0000C391   SAXOLO
00:0000CAC2   GAME_OVER
00:0000CDB8   MUTE
00:0000CE2D   MUERTO
00:0000CF51   ENTRE_FASES


 Output: BURNUSpruevas.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: BURNUS.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 000091B8

   Address   Length Align   Label
   00004000   37304         search_slotset
